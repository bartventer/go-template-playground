{"version":3,"file":"monaco-editor-esm-vs-base-browser-ui-vl4ek12j.js","sources":["../../../node_modules/monaco-editor/esm/vs/base/browser/ui/widget.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/scrollbarArrow.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/scrollbarVisibilityController.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/abstractScrollbar.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/scrollbarState.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/horizontalScrollbar.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/verticalScrollbar.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/scrollableElement.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/hover/hoverWidget.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/iconLabel/iconLabels.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/aria/aria.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/contextview/contextview.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/hover/hoverDelegateFactory.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/hover/hoverDelegate2.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/list/splice.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/list/list.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/list/rangeMap.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/list/rowCache.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/list/listView.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/list/listWidget.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/selectBox/selectBoxCustom.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/selectBox/selectBoxNative.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/selectBox/selectBox.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/actionbar/actionViewItems.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/dropdown/dropdown.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/dropdown/dropdownActionViewItem.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/actionbar/actionbar.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/menu/menu.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/toggle/toggle.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/button/button.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/countBadge/countBadge.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/progressbar/progressbar.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/findinput/findInputToggles.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/inputbox/inputBox.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/findinput/findInput.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/list/listPaging.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/sash/sash.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/splitview/splitview.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/table/tableWidget.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/tree/tree.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/tree/indexTreeModel.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/tree/abstractTree.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/tree/objectTreeModel.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/tree/compressedObjectTreeModel.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/tree/objectTree.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/tree/asyncDataTree.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/tree/dataTree.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/highlightedlabel/highlightedLabel.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/iconLabel/iconLabel.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/keybindingLabel/keybindingLabel.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/mouseCursor/mouseCursor.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/toolbar/toolbar.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/resizable/resizable.js","../../../node_modules/monaco-editor/esm/vs/base/browser/ui/findinput/replaceInput.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../dom.js';\nimport { StandardKeyboardEvent } from '../keyboardEvent.js';\nimport { StandardMouseEvent } from '../mouseEvent.js';\nimport { Gesture } from '../touch.js';\nimport { Disposable } from '../../common/lifecycle.js';\nexport class Widget extends Disposable {\n    onclick(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.CLICK, (e) => listener(new StandardMouseEvent(dom.getWindow(domNode), e))));\n    }\n    onmousedown(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.MOUSE_DOWN, (e) => listener(new StandardMouseEvent(dom.getWindow(domNode), e))));\n    }\n    onmouseover(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.MOUSE_OVER, (e) => listener(new StandardMouseEvent(dom.getWindow(domNode), e))));\n    }\n    onmouseleave(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.MOUSE_LEAVE, (e) => listener(new StandardMouseEvent(dom.getWindow(domNode), e))));\n    }\n    onkeydown(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.KEY_DOWN, (e) => listener(new StandardKeyboardEvent(e))));\n    }\n    onkeyup(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.KEY_UP, (e) => listener(new StandardKeyboardEvent(e))));\n    }\n    oninput(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.INPUT, listener));\n    }\n    onblur(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.BLUR, listener));\n    }\n    onfocus(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.FOCUS, listener));\n    }\n    ignoreGesture(domNode) {\n        return Gesture.ignoreTarget(domNode);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { GlobalPointerMoveMonitor } from '../../globalPointerMoveMonitor.js';\nimport { Widget } from '../widget.js';\nimport { TimeoutTimer } from '../../../common/async.js';\nimport { ThemeIcon } from '../../../common/themables.js';\nimport * as dom from '../../dom.js';\n/**\n * The arrow image size.\n */\nexport const ARROW_IMG_SIZE = 11;\nexport class ScrollbarArrow extends Widget {\n    constructor(opts) {\n        super();\n        this._onActivate = opts.onActivate;\n        this.bgDomNode = document.createElement('div');\n        this.bgDomNode.className = 'arrow-background';\n        this.bgDomNode.style.position = 'absolute';\n        this.bgDomNode.style.width = opts.bgWidth + 'px';\n        this.bgDomNode.style.height = opts.bgHeight + 'px';\n        if (typeof opts.top !== 'undefined') {\n            this.bgDomNode.style.top = '0px';\n        }\n        if (typeof opts.left !== 'undefined') {\n            this.bgDomNode.style.left = '0px';\n        }\n        if (typeof opts.bottom !== 'undefined') {\n            this.bgDomNode.style.bottom = '0px';\n        }\n        if (typeof opts.right !== 'undefined') {\n            this.bgDomNode.style.right = '0px';\n        }\n        this.domNode = document.createElement('div');\n        this.domNode.className = opts.className;\n        this.domNode.classList.add(...ThemeIcon.asClassNameArray(opts.icon));\n        this.domNode.style.position = 'absolute';\n        this.domNode.style.width = ARROW_IMG_SIZE + 'px';\n        this.domNode.style.height = ARROW_IMG_SIZE + 'px';\n        if (typeof opts.top !== 'undefined') {\n            this.domNode.style.top = opts.top + 'px';\n        }\n        if (typeof opts.left !== 'undefined') {\n            this.domNode.style.left = opts.left + 'px';\n        }\n        if (typeof opts.bottom !== 'undefined') {\n            this.domNode.style.bottom = opts.bottom + 'px';\n        }\n        if (typeof opts.right !== 'undefined') {\n            this.domNode.style.right = opts.right + 'px';\n        }\n        this._pointerMoveMonitor = this._register(new GlobalPointerMoveMonitor());\n        this._register(dom.addStandardDisposableListener(this.bgDomNode, dom.EventType.POINTER_DOWN, (e) => this._arrowPointerDown(e)));\n        this._register(dom.addStandardDisposableListener(this.domNode, dom.EventType.POINTER_DOWN, (e) => this._arrowPointerDown(e)));\n        this._pointerdownRepeatTimer = this._register(new dom.WindowIntervalTimer());\n        this._pointerdownScheduleRepeatTimer = this._register(new TimeoutTimer());\n    }\n    _arrowPointerDown(e) {\n        if (!e.target || !(e.target instanceof Element)) {\n            return;\n        }\n        const scheduleRepeater = () => {\n            this._pointerdownRepeatTimer.cancelAndSet(() => this._onActivate(), 1000 / 24, dom.getWindow(e));\n        };\n        this._onActivate();\n        this._pointerdownRepeatTimer.cancel();\n        this._pointerdownScheduleRepeatTimer.cancelAndSet(scheduleRepeater, 200);\n        this._pointerMoveMonitor.startMonitoring(e.target, e.pointerId, e.buttons, (pointerMoveData) => { }, () => {\n            this._pointerdownRepeatTimer.cancel();\n            this._pointerdownScheduleRepeatTimer.cancel();\n        });\n        e.preventDefault();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { TimeoutTimer } from '../../../common/async.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nexport class ScrollbarVisibilityController extends Disposable {\n    constructor(visibility, visibleClassName, invisibleClassName) {\n        super();\n        this._visibility = visibility;\n        this._visibleClassName = visibleClassName;\n        this._invisibleClassName = invisibleClassName;\n        this._domNode = null;\n        this._isVisible = false;\n        this._isNeeded = false;\n        this._rawShouldBeVisible = false;\n        this._shouldBeVisible = false;\n        this._revealTimer = this._register(new TimeoutTimer());\n    }\n    setVisibility(visibility) {\n        if (this._visibility !== visibility) {\n            this._visibility = visibility;\n            this._updateShouldBeVisible();\n        }\n    }\n    // ----------------- Hide / Reveal\n    setShouldBeVisible(rawShouldBeVisible) {\n        this._rawShouldBeVisible = rawShouldBeVisible;\n        this._updateShouldBeVisible();\n    }\n    _applyVisibilitySetting() {\n        if (this._visibility === 2 /* ScrollbarVisibility.Hidden */) {\n            return false;\n        }\n        if (this._visibility === 3 /* ScrollbarVisibility.Visible */) {\n            return true;\n        }\n        return this._rawShouldBeVisible;\n    }\n    _updateShouldBeVisible() {\n        const shouldBeVisible = this._applyVisibilitySetting();\n        if (this._shouldBeVisible !== shouldBeVisible) {\n            this._shouldBeVisible = shouldBeVisible;\n            this.ensureVisibility();\n        }\n    }\n    setIsNeeded(isNeeded) {\n        if (this._isNeeded !== isNeeded) {\n            this._isNeeded = isNeeded;\n            this.ensureVisibility();\n        }\n    }\n    setDomNode(domNode) {\n        this._domNode = domNode;\n        this._domNode.setClassName(this._invisibleClassName);\n        // Now that the flags & the dom node are in a consistent state, ensure the Hidden/Visible configuration\n        this.setShouldBeVisible(false);\n    }\n    ensureVisibility() {\n        if (!this._isNeeded) {\n            // Nothing to be rendered\n            this._hide(false);\n            return;\n        }\n        if (this._shouldBeVisible) {\n            this._reveal();\n        }\n        else {\n            this._hide(true);\n        }\n    }\n    _reveal() {\n        if (this._isVisible) {\n            return;\n        }\n        this._isVisible = true;\n        // The CSS animation doesn't play otherwise\n        this._revealTimer.setIfNotSet(() => {\n            this._domNode?.setClassName(this._visibleClassName);\n        }, 0);\n    }\n    _hide(withFadeAway) {\n        this._revealTimer.cancel();\n        if (!this._isVisible) {\n            return;\n        }\n        this._isVisible = false;\n        this._domNode?.setClassName(this._invisibleClassName + (withFadeAway ? ' fade' : ''));\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { createFastDomNode } from '../../fastDomNode.js';\nimport { GlobalPointerMoveMonitor } from '../../globalPointerMoveMonitor.js';\nimport { ScrollbarArrow } from './scrollbarArrow.js';\nimport { ScrollbarVisibilityController } from './scrollbarVisibilityController.js';\nimport { Widget } from '../widget.js';\nimport * as platform from '../../../common/platform.js';\n/**\n * The orthogonal distance to the slider at which dragging \"resets\". This implements \"snapping\"\n */\nconst POINTER_DRAG_RESET_DISTANCE = 140;\nexport class AbstractScrollbar extends Widget {\n    constructor(opts) {\n        super();\n        this._lazyRender = opts.lazyRender;\n        this._host = opts.host;\n        this._scrollable = opts.scrollable;\n        this._scrollByPage = opts.scrollByPage;\n        this._scrollbarState = opts.scrollbarState;\n        this._visibilityController = this._register(new ScrollbarVisibilityController(opts.visibility, 'visible scrollbar ' + opts.extraScrollbarClassName, 'invisible scrollbar ' + opts.extraScrollbarClassName));\n        this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded());\n        this._pointerMoveMonitor = this._register(new GlobalPointerMoveMonitor());\n        this._shouldRender = true;\n        this.domNode = createFastDomNode(document.createElement('div'));\n        this.domNode.setAttribute('role', 'presentation');\n        this.domNode.setAttribute('aria-hidden', 'true');\n        this._visibilityController.setDomNode(this.domNode);\n        this.domNode.setPosition('absolute');\n        this._register(dom.addDisposableListener(this.domNode.domNode, dom.EventType.POINTER_DOWN, (e) => this._domNodePointerDown(e)));\n    }\n    // ----------------- creation\n    /**\n     * Creates the dom node for an arrow & adds it to the container\n     */\n    _createArrow(opts) {\n        const arrow = this._register(new ScrollbarArrow(opts));\n        this.domNode.domNode.appendChild(arrow.bgDomNode);\n        this.domNode.domNode.appendChild(arrow.domNode);\n    }\n    /**\n     * Creates the slider dom node, adds it to the container & hooks up the events\n     */\n    _createSlider(top, left, width, height) {\n        this.slider = createFastDomNode(document.createElement('div'));\n        this.slider.setClassName('slider');\n        this.slider.setPosition('absolute');\n        this.slider.setTop(top);\n        this.slider.setLeft(left);\n        if (typeof width === 'number') {\n            this.slider.setWidth(width);\n        }\n        if (typeof height === 'number') {\n            this.slider.setHeight(height);\n        }\n        this.slider.setLayerHinting(true);\n        this.slider.setContain('strict');\n        this.domNode.domNode.appendChild(this.slider.domNode);\n        this._register(dom.addDisposableListener(this.slider.domNode, dom.EventType.POINTER_DOWN, (e) => {\n            if (e.button === 0) {\n                e.preventDefault();\n                this._sliderPointerDown(e);\n            }\n        }));\n        this.onclick(this.slider.domNode, e => {\n            if (e.leftButton) {\n                e.stopPropagation();\n            }\n        });\n    }\n    // ----------------- Update state\n    _onElementSize(visibleSize) {\n        if (this._scrollbarState.setVisibleSize(visibleSize)) {\n            this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded());\n            this._shouldRender = true;\n            if (!this._lazyRender) {\n                this.render();\n            }\n        }\n        return this._shouldRender;\n    }\n    _onElementScrollSize(elementScrollSize) {\n        if (this._scrollbarState.setScrollSize(elementScrollSize)) {\n            this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded());\n            this._shouldRender = true;\n            if (!this._lazyRender) {\n                this.render();\n            }\n        }\n        return this._shouldRender;\n    }\n    _onElementScrollPosition(elementScrollPosition) {\n        if (this._scrollbarState.setScrollPosition(elementScrollPosition)) {\n            this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded());\n            this._shouldRender = true;\n            if (!this._lazyRender) {\n                this.render();\n            }\n        }\n        return this._shouldRender;\n    }\n    // ----------------- rendering\n    beginReveal() {\n        this._visibilityController.setShouldBeVisible(true);\n    }\n    beginHide() {\n        this._visibilityController.setShouldBeVisible(false);\n    }\n    render() {\n        if (!this._shouldRender) {\n            return;\n        }\n        this._shouldRender = false;\n        this._renderDomNode(this._scrollbarState.getRectangleLargeSize(), this._scrollbarState.getRectangleSmallSize());\n        this._updateSlider(this._scrollbarState.getSliderSize(), this._scrollbarState.getArrowSize() + this._scrollbarState.getSliderPosition());\n    }\n    // ----------------- DOM events\n    _domNodePointerDown(e) {\n        if (e.target !== this.domNode.domNode) {\n            return;\n        }\n        this._onPointerDown(e);\n    }\n    delegatePointerDown(e) {\n        const domTop = this.domNode.domNode.getClientRects()[0].top;\n        const sliderStart = domTop + this._scrollbarState.getSliderPosition();\n        const sliderStop = domTop + this._scrollbarState.getSliderPosition() + this._scrollbarState.getSliderSize();\n        const pointerPos = this._sliderPointerPosition(e);\n        if (sliderStart <= pointerPos && pointerPos <= sliderStop) {\n            // Act as if it was a pointer down on the slider\n            if (e.button === 0) {\n                e.preventDefault();\n                this._sliderPointerDown(e);\n            }\n        }\n        else {\n            // Act as if it was a pointer down on the scrollbar\n            this._onPointerDown(e);\n        }\n    }\n    _onPointerDown(e) {\n        let offsetX;\n        let offsetY;\n        if (e.target === this.domNode.domNode && typeof e.offsetX === 'number' && typeof e.offsetY === 'number') {\n            offsetX = e.offsetX;\n            offsetY = e.offsetY;\n        }\n        else {\n            const domNodePosition = dom.getDomNodePagePosition(this.domNode.domNode);\n            offsetX = e.pageX - domNodePosition.left;\n            offsetY = e.pageY - domNodePosition.top;\n        }\n        const offset = this._pointerDownRelativePosition(offsetX, offsetY);\n        this._setDesiredScrollPositionNow(this._scrollByPage\n            ? this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(offset)\n            : this._scrollbarState.getDesiredScrollPositionFromOffset(offset));\n        if (e.button === 0) {\n            // left button\n            e.preventDefault();\n            this._sliderPointerDown(e);\n        }\n    }\n    _sliderPointerDown(e) {\n        if (!e.target || !(e.target instanceof Element)) {\n            return;\n        }\n        const initialPointerPosition = this._sliderPointerPosition(e);\n        const initialPointerOrthogonalPosition = this._sliderOrthogonalPointerPosition(e);\n        const initialScrollbarState = this._scrollbarState.clone();\n        this.slider.toggleClassName('active', true);\n        this._pointerMoveMonitor.startMonitoring(e.target, e.pointerId, e.buttons, (pointerMoveData) => {\n            const pointerOrthogonalPosition = this._sliderOrthogonalPointerPosition(pointerMoveData);\n            const pointerOrthogonalDelta = Math.abs(pointerOrthogonalPosition - initialPointerOrthogonalPosition);\n            if (platform.isWindows && pointerOrthogonalDelta > POINTER_DRAG_RESET_DISTANCE) {\n                // The pointer has wondered away from the scrollbar => reset dragging\n                this._setDesiredScrollPositionNow(initialScrollbarState.getScrollPosition());\n                return;\n            }\n            const pointerPosition = this._sliderPointerPosition(pointerMoveData);\n            const pointerDelta = pointerPosition - initialPointerPosition;\n            this._setDesiredScrollPositionNow(initialScrollbarState.getDesiredScrollPositionFromDelta(pointerDelta));\n        }, () => {\n            this.slider.toggleClassName('active', false);\n            this._host.onDragEnd();\n        });\n        this._host.onDragStart();\n    }\n    _setDesiredScrollPositionNow(_desiredScrollPosition) {\n        const desiredScrollPosition = {};\n        this.writeScrollPosition(desiredScrollPosition, _desiredScrollPosition);\n        this._scrollable.setScrollPositionNow(desiredScrollPosition);\n    }\n    updateScrollbarSize(scrollbarSize) {\n        this._updateScrollbarSize(scrollbarSize);\n        this._scrollbarState.setScrollbarSize(scrollbarSize);\n        this._shouldRender = true;\n        if (!this._lazyRender) {\n            this.render();\n        }\n    }\n    isNeeded() {\n        return this._scrollbarState.isNeeded();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n/**\n * The minimal size of the slider (such that it can still be clickable) -- it is artificially enlarged.\n */\nconst MINIMUM_SLIDER_SIZE = 20;\nexport class ScrollbarState {\n    constructor(arrowSize, scrollbarSize, oppositeScrollbarSize, visibleSize, scrollSize, scrollPosition) {\n        this._scrollbarSize = Math.round(scrollbarSize);\n        this._oppositeScrollbarSize = Math.round(oppositeScrollbarSize);\n        this._arrowSize = Math.round(arrowSize);\n        this._visibleSize = visibleSize;\n        this._scrollSize = scrollSize;\n        this._scrollPosition = scrollPosition;\n        this._computedAvailableSize = 0;\n        this._computedIsNeeded = false;\n        this._computedSliderSize = 0;\n        this._computedSliderRatio = 0;\n        this._computedSliderPosition = 0;\n        this._refreshComputedValues();\n    }\n    clone() {\n        return new ScrollbarState(this._arrowSize, this._scrollbarSize, this._oppositeScrollbarSize, this._visibleSize, this._scrollSize, this._scrollPosition);\n    }\n    setVisibleSize(visibleSize) {\n        const iVisibleSize = Math.round(visibleSize);\n        if (this._visibleSize !== iVisibleSize) {\n            this._visibleSize = iVisibleSize;\n            this._refreshComputedValues();\n            return true;\n        }\n        return false;\n    }\n    setScrollSize(scrollSize) {\n        const iScrollSize = Math.round(scrollSize);\n        if (this._scrollSize !== iScrollSize) {\n            this._scrollSize = iScrollSize;\n            this._refreshComputedValues();\n            return true;\n        }\n        return false;\n    }\n    setScrollPosition(scrollPosition) {\n        const iScrollPosition = Math.round(scrollPosition);\n        if (this._scrollPosition !== iScrollPosition) {\n            this._scrollPosition = iScrollPosition;\n            this._refreshComputedValues();\n            return true;\n        }\n        return false;\n    }\n    setScrollbarSize(scrollbarSize) {\n        this._scrollbarSize = Math.round(scrollbarSize);\n    }\n    setOppositeScrollbarSize(oppositeScrollbarSize) {\n        this._oppositeScrollbarSize = Math.round(oppositeScrollbarSize);\n    }\n    static _computeValues(oppositeScrollbarSize, arrowSize, visibleSize, scrollSize, scrollPosition) {\n        const computedAvailableSize = Math.max(0, visibleSize - oppositeScrollbarSize);\n        const computedRepresentableSize = Math.max(0, computedAvailableSize - 2 * arrowSize);\n        const computedIsNeeded = (scrollSize > 0 && scrollSize > visibleSize);\n        if (!computedIsNeeded) {\n            // There is no need for a slider\n            return {\n                computedAvailableSize: Math.round(computedAvailableSize),\n                computedIsNeeded: computedIsNeeded,\n                computedSliderSize: Math.round(computedRepresentableSize),\n                computedSliderRatio: 0,\n                computedSliderPosition: 0,\n            };\n        }\n        // We must artificially increase the size of the slider if needed, since the slider would be too small to grab with the mouse otherwise\n        const computedSliderSize = Math.round(Math.max(MINIMUM_SLIDER_SIZE, Math.floor(visibleSize * computedRepresentableSize / scrollSize)));\n        // The slider can move from 0 to `computedRepresentableSize` - `computedSliderSize`\n        // in the same way `scrollPosition` can move from 0 to `scrollSize` - `visibleSize`.\n        const computedSliderRatio = (computedRepresentableSize - computedSliderSize) / (scrollSize - visibleSize);\n        const computedSliderPosition = (scrollPosition * computedSliderRatio);\n        return {\n            computedAvailableSize: Math.round(computedAvailableSize),\n            computedIsNeeded: computedIsNeeded,\n            computedSliderSize: Math.round(computedSliderSize),\n            computedSliderRatio: computedSliderRatio,\n            computedSliderPosition: Math.round(computedSliderPosition),\n        };\n    }\n    _refreshComputedValues() {\n        const r = ScrollbarState._computeValues(this._oppositeScrollbarSize, this._arrowSize, this._visibleSize, this._scrollSize, this._scrollPosition);\n        this._computedAvailableSize = r.computedAvailableSize;\n        this._computedIsNeeded = r.computedIsNeeded;\n        this._computedSliderSize = r.computedSliderSize;\n        this._computedSliderRatio = r.computedSliderRatio;\n        this._computedSliderPosition = r.computedSliderPosition;\n    }\n    getArrowSize() {\n        return this._arrowSize;\n    }\n    getScrollPosition() {\n        return this._scrollPosition;\n    }\n    getRectangleLargeSize() {\n        return this._computedAvailableSize;\n    }\n    getRectangleSmallSize() {\n        return this._scrollbarSize;\n    }\n    isNeeded() {\n        return this._computedIsNeeded;\n    }\n    getSliderSize() {\n        return this._computedSliderSize;\n    }\n    getSliderPosition() {\n        return this._computedSliderPosition;\n    }\n    /**\n     * Compute a desired `scrollPosition` such that `offset` ends up in the center of the slider.\n     * `offset` is based on the same coordinate system as the `sliderPosition`.\n     */\n    getDesiredScrollPositionFromOffset(offset) {\n        if (!this._computedIsNeeded) {\n            // no need for a slider\n            return 0;\n        }\n        const desiredSliderPosition = offset - this._arrowSize - this._computedSliderSize / 2;\n        return Math.round(desiredSliderPosition / this._computedSliderRatio);\n    }\n    /**\n     * Compute a desired `scrollPosition` from if offset is before or after the slider position.\n     * If offset is before slider, treat as a page up (or left).  If after, page down (or right).\n     * `offset` and `_computedSliderPosition` are based on the same coordinate system.\n     * `_visibleSize` corresponds to a \"page\" of lines in the returned coordinate system.\n     */\n    getDesiredScrollPositionFromOffsetPaged(offset) {\n        if (!this._computedIsNeeded) {\n            // no need for a slider\n            return 0;\n        }\n        const correctedOffset = offset - this._arrowSize; // compensate if has arrows\n        let desiredScrollPosition = this._scrollPosition;\n        if (correctedOffset < this._computedSliderPosition) {\n            desiredScrollPosition -= this._visibleSize; // page up/left\n        }\n        else {\n            desiredScrollPosition += this._visibleSize; // page down/right\n        }\n        return desiredScrollPosition;\n    }\n    /**\n     * Compute a desired `scrollPosition` such that the slider moves by `delta`.\n     */\n    getDesiredScrollPositionFromDelta(delta) {\n        if (!this._computedIsNeeded) {\n            // no need for a slider\n            return 0;\n        }\n        const desiredSliderPosition = this._computedSliderPosition + delta;\n        return Math.round(desiredSliderPosition / this._computedSliderRatio);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { StandardWheelEvent } from '../../mouseEvent.js';\nimport { AbstractScrollbar } from './abstractScrollbar.js';\nimport { ARROW_IMG_SIZE } from './scrollbarArrow.js';\nimport { ScrollbarState } from './scrollbarState.js';\nimport { Codicon } from '../../../common/codicons.js';\nexport class HorizontalScrollbar extends AbstractScrollbar {\n    constructor(scrollable, options, host) {\n        const scrollDimensions = scrollable.getScrollDimensions();\n        const scrollPosition = scrollable.getCurrentScrollPosition();\n        super({\n            lazyRender: options.lazyRender,\n            host: host,\n            scrollbarState: new ScrollbarState((options.horizontalHasArrows ? options.arrowSize : 0), (options.horizontal === 2 /* ScrollbarVisibility.Hidden */ ? 0 : options.horizontalScrollbarSize), (options.vertical === 2 /* ScrollbarVisibility.Hidden */ ? 0 : options.verticalScrollbarSize), scrollDimensions.width, scrollDimensions.scrollWidth, scrollPosition.scrollLeft),\n            visibility: options.horizontal,\n            extraScrollbarClassName: 'horizontal',\n            scrollable: scrollable,\n            scrollByPage: options.scrollByPage\n        });\n        if (options.horizontalHasArrows) {\n            const arrowDelta = (options.arrowSize - ARROW_IMG_SIZE) / 2;\n            const scrollbarDelta = (options.horizontalScrollbarSize - ARROW_IMG_SIZE) / 2;\n            this._createArrow({\n                className: 'scra',\n                icon: Codicon.scrollbarButtonLeft,\n                top: scrollbarDelta,\n                left: arrowDelta,\n                bottom: undefined,\n                right: undefined,\n                bgWidth: options.arrowSize,\n                bgHeight: options.horizontalScrollbarSize,\n                onActivate: () => this._host.onMouseWheel(new StandardWheelEvent(null, 1, 0)),\n            });\n            this._createArrow({\n                className: 'scra',\n                icon: Codicon.scrollbarButtonRight,\n                top: scrollbarDelta,\n                left: undefined,\n                bottom: undefined,\n                right: arrowDelta,\n                bgWidth: options.arrowSize,\n                bgHeight: options.horizontalScrollbarSize,\n                onActivate: () => this._host.onMouseWheel(new StandardWheelEvent(null, -1, 0)),\n            });\n        }\n        this._createSlider(Math.floor((options.horizontalScrollbarSize - options.horizontalSliderSize) / 2), 0, undefined, options.horizontalSliderSize);\n    }\n    _updateSlider(sliderSize, sliderPosition) {\n        this.slider.setWidth(sliderSize);\n        this.slider.setLeft(sliderPosition);\n    }\n    _renderDomNode(largeSize, smallSize) {\n        this.domNode.setWidth(largeSize);\n        this.domNode.setHeight(smallSize);\n        this.domNode.setLeft(0);\n        this.domNode.setBottom(0);\n    }\n    onDidScroll(e) {\n        this._shouldRender = this._onElementScrollSize(e.scrollWidth) || this._shouldRender;\n        this._shouldRender = this._onElementScrollPosition(e.scrollLeft) || this._shouldRender;\n        this._shouldRender = this._onElementSize(e.width) || this._shouldRender;\n        return this._shouldRender;\n    }\n    _pointerDownRelativePosition(offsetX, offsetY) {\n        return offsetX;\n    }\n    _sliderPointerPosition(e) {\n        return e.pageX;\n    }\n    _sliderOrthogonalPointerPosition(e) {\n        return e.pageY;\n    }\n    _updateScrollbarSize(size) {\n        this.slider.setHeight(size);\n    }\n    writeScrollPosition(target, scrollPosition) {\n        target.scrollLeft = scrollPosition;\n    }\n    updateOptions(options) {\n        this.updateScrollbarSize(options.horizontal === 2 /* ScrollbarVisibility.Hidden */ ? 0 : options.horizontalScrollbarSize);\n        this._scrollbarState.setOppositeScrollbarSize(options.vertical === 2 /* ScrollbarVisibility.Hidden */ ? 0 : options.verticalScrollbarSize);\n        this._visibilityController.setVisibility(options.horizontal);\n        this._scrollByPage = options.scrollByPage;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { StandardWheelEvent } from '../../mouseEvent.js';\nimport { AbstractScrollbar } from './abstractScrollbar.js';\nimport { ARROW_IMG_SIZE } from './scrollbarArrow.js';\nimport { ScrollbarState } from './scrollbarState.js';\nimport { Codicon } from '../../../common/codicons.js';\nexport class VerticalScrollbar extends AbstractScrollbar {\n    constructor(scrollable, options, host) {\n        const scrollDimensions = scrollable.getScrollDimensions();\n        const scrollPosition = scrollable.getCurrentScrollPosition();\n        super({\n            lazyRender: options.lazyRender,\n            host: host,\n            scrollbarState: new ScrollbarState((options.verticalHasArrows ? options.arrowSize : 0), (options.vertical === 2 /* ScrollbarVisibility.Hidden */ ? 0 : options.verticalScrollbarSize), \n            // give priority to vertical scroll bar over horizontal and let it scroll all the way to the bottom\n            0, scrollDimensions.height, scrollDimensions.scrollHeight, scrollPosition.scrollTop),\n            visibility: options.vertical,\n            extraScrollbarClassName: 'vertical',\n            scrollable: scrollable,\n            scrollByPage: options.scrollByPage\n        });\n        if (options.verticalHasArrows) {\n            const arrowDelta = (options.arrowSize - ARROW_IMG_SIZE) / 2;\n            const scrollbarDelta = (options.verticalScrollbarSize - ARROW_IMG_SIZE) / 2;\n            this._createArrow({\n                className: 'scra',\n                icon: Codicon.scrollbarButtonUp,\n                top: arrowDelta,\n                left: scrollbarDelta,\n                bottom: undefined,\n                right: undefined,\n                bgWidth: options.verticalScrollbarSize,\n                bgHeight: options.arrowSize,\n                onActivate: () => this._host.onMouseWheel(new StandardWheelEvent(null, 0, 1)),\n            });\n            this._createArrow({\n                className: 'scra',\n                icon: Codicon.scrollbarButtonDown,\n                top: undefined,\n                left: scrollbarDelta,\n                bottom: arrowDelta,\n                right: undefined,\n                bgWidth: options.verticalScrollbarSize,\n                bgHeight: options.arrowSize,\n                onActivate: () => this._host.onMouseWheel(new StandardWheelEvent(null, 0, -1)),\n            });\n        }\n        this._createSlider(0, Math.floor((options.verticalScrollbarSize - options.verticalSliderSize) / 2), options.verticalSliderSize, undefined);\n    }\n    _updateSlider(sliderSize, sliderPosition) {\n        this.slider.setHeight(sliderSize);\n        this.slider.setTop(sliderPosition);\n    }\n    _renderDomNode(largeSize, smallSize) {\n        this.domNode.setWidth(smallSize);\n        this.domNode.setHeight(largeSize);\n        this.domNode.setRight(0);\n        this.domNode.setTop(0);\n    }\n    onDidScroll(e) {\n        this._shouldRender = this._onElementScrollSize(e.scrollHeight) || this._shouldRender;\n        this._shouldRender = this._onElementScrollPosition(e.scrollTop) || this._shouldRender;\n        this._shouldRender = this._onElementSize(e.height) || this._shouldRender;\n        return this._shouldRender;\n    }\n    _pointerDownRelativePosition(offsetX, offsetY) {\n        return offsetY;\n    }\n    _sliderPointerPosition(e) {\n        return e.pageY;\n    }\n    _sliderOrthogonalPointerPosition(e) {\n        return e.pageX;\n    }\n    _updateScrollbarSize(size) {\n        this.slider.setWidth(size);\n    }\n    writeScrollPosition(target, scrollPosition) {\n        target.scrollTop = scrollPosition;\n    }\n    updateOptions(options) {\n        this.updateScrollbarSize(options.vertical === 2 /* ScrollbarVisibility.Hidden */ ? 0 : options.verticalScrollbarSize);\n        // give priority to vertical scroll bar over horizontal and let it scroll all the way to the bottom\n        this._scrollbarState.setOppositeScrollbarSize(0);\n        this._visibilityController.setVisibility(options.vertical);\n        this._scrollByPage = options.scrollByPage;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { getZoomFactor, isChrome } from '../../browser.js';\nimport * as dom from '../../dom.js';\nimport { createFastDomNode } from '../../fastDomNode.js';\nimport { StandardWheelEvent } from '../../mouseEvent.js';\nimport { HorizontalScrollbar } from './horizontalScrollbar.js';\nimport { VerticalScrollbar } from './verticalScrollbar.js';\nimport { Widget } from '../widget.js';\nimport { TimeoutTimer } from '../../../common/async.js';\nimport { Emitter } from '../../../common/event.js';\nimport { dispose } from '../../../common/lifecycle.js';\nimport * as platform from '../../../common/platform.js';\nimport { Scrollable } from '../../../common/scrollable.js';\nimport './media/scrollbars.css';\nconst HIDE_TIMEOUT = 500;\nconst SCROLL_WHEEL_SENSITIVITY = 50;\nconst SCROLL_WHEEL_SMOOTH_SCROLL_ENABLED = true;\nclass MouseWheelClassifierItem {\n    constructor(timestamp, deltaX, deltaY) {\n        this.timestamp = timestamp;\n        this.deltaX = deltaX;\n        this.deltaY = deltaY;\n        this.score = 0;\n    }\n}\nexport class MouseWheelClassifier {\n    static { this.INSTANCE = new MouseWheelClassifier(); }\n    constructor() {\n        this._capacity = 5;\n        this._memory = [];\n        this._front = -1;\n        this._rear = -1;\n    }\n    isPhysicalMouseWheel() {\n        if (this._front === -1 && this._rear === -1) {\n            // no elements\n            return false;\n        }\n        // 0.5 * last + 0.25 * 2nd last + 0.125 * 3rd last + ...\n        let remainingInfluence = 1;\n        let score = 0;\n        let iteration = 1;\n        let index = this._rear;\n        do {\n            const influence = (index === this._front ? remainingInfluence : Math.pow(2, -iteration));\n            remainingInfluence -= influence;\n            score += this._memory[index].score * influence;\n            if (index === this._front) {\n                break;\n            }\n            index = (this._capacity + index - 1) % this._capacity;\n            iteration++;\n        } while (true);\n        return (score <= 0.5);\n    }\n    acceptStandardWheelEvent(e) {\n        if (isChrome) {\n            const targetWindow = dom.getWindow(e.browserEvent);\n            const pageZoomFactor = getZoomFactor(targetWindow);\n            // On Chrome, the incoming delta events are multiplied with the OS zoom factor.\n            // The OS zoom factor can be reverse engineered by using the device pixel ratio and the configured zoom factor into account.\n            this.accept(Date.now(), e.deltaX * pageZoomFactor, e.deltaY * pageZoomFactor);\n        }\n        else {\n            this.accept(Date.now(), e.deltaX, e.deltaY);\n        }\n    }\n    accept(timestamp, deltaX, deltaY) {\n        let previousItem = null;\n        const item = new MouseWheelClassifierItem(timestamp, deltaX, deltaY);\n        if (this._front === -1 && this._rear === -1) {\n            this._memory[0] = item;\n            this._front = 0;\n            this._rear = 0;\n        }\n        else {\n            previousItem = this._memory[this._rear];\n            this._rear = (this._rear + 1) % this._capacity;\n            if (this._rear === this._front) {\n                // Drop oldest\n                this._front = (this._front + 1) % this._capacity;\n            }\n            this._memory[this._rear] = item;\n        }\n        item.score = this._computeScore(item, previousItem);\n    }\n    /**\n     * A score between 0 and 1 for `item`.\n     *  - a score towards 0 indicates that the source appears to be a physical mouse wheel\n     *  - a score towards 1 indicates that the source appears to be a touchpad or magic mouse, etc.\n     */\n    _computeScore(item, previousItem) {\n        if (Math.abs(item.deltaX) > 0 && Math.abs(item.deltaY) > 0) {\n            // both axes exercised => definitely not a physical mouse wheel\n            return 1;\n        }\n        let score = 0.5;\n        if (!this._isAlmostInt(item.deltaX) || !this._isAlmostInt(item.deltaY)) {\n            // non-integer deltas => indicator that this is not a physical mouse wheel\n            score += 0.25;\n        }\n        // Non-accelerating scroll => indicator that this is a physical mouse wheel\n        // These can be identified by seeing whether they are the module of one another.\n        if (previousItem) {\n            const absDeltaX = Math.abs(item.deltaX);\n            const absDeltaY = Math.abs(item.deltaY);\n            const absPreviousDeltaX = Math.abs(previousItem.deltaX);\n            const absPreviousDeltaY = Math.abs(previousItem.deltaY);\n            // Min 1 to avoid division by zero, module 1 will still be 0.\n            const minDeltaX = Math.max(Math.min(absDeltaX, absPreviousDeltaX), 1);\n            const minDeltaY = Math.max(Math.min(absDeltaY, absPreviousDeltaY), 1);\n            const maxDeltaX = Math.max(absDeltaX, absPreviousDeltaX);\n            const maxDeltaY = Math.max(absDeltaY, absPreviousDeltaY);\n            const isSameModulo = (maxDeltaX % minDeltaX === 0 && maxDeltaY % minDeltaY === 0);\n            if (isSameModulo) {\n                score -= 0.5;\n            }\n        }\n        return Math.min(Math.max(score, 0), 1);\n    }\n    _isAlmostInt(value) {\n        const delta = Math.abs(Math.round(value) - value);\n        return (delta < 0.01);\n    }\n}\nexport class AbstractScrollableElement extends Widget {\n    get options() {\n        return this._options;\n    }\n    constructor(element, options, scrollable) {\n        super();\n        this._onScroll = this._register(new Emitter());\n        this.onScroll = this._onScroll.event;\n        this._onWillScroll = this._register(new Emitter());\n        element.style.overflow = 'hidden';\n        this._options = resolveOptions(options);\n        this._scrollable = scrollable;\n        this._register(this._scrollable.onScroll((e) => {\n            this._onWillScroll.fire(e);\n            this._onDidScroll(e);\n            this._onScroll.fire(e);\n        }));\n        const scrollbarHost = {\n            onMouseWheel: (mouseWheelEvent) => this._onMouseWheel(mouseWheelEvent),\n            onDragStart: () => this._onDragStart(),\n            onDragEnd: () => this._onDragEnd(),\n        };\n        this._verticalScrollbar = this._register(new VerticalScrollbar(this._scrollable, this._options, scrollbarHost));\n        this._horizontalScrollbar = this._register(new HorizontalScrollbar(this._scrollable, this._options, scrollbarHost));\n        this._domNode = document.createElement('div');\n        this._domNode.className = 'monaco-scrollable-element ' + this._options.className;\n        this._domNode.setAttribute('role', 'presentation');\n        this._domNode.style.position = 'relative';\n        this._domNode.style.overflow = 'hidden';\n        this._domNode.appendChild(element);\n        this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode);\n        this._domNode.appendChild(this._verticalScrollbar.domNode.domNode);\n        if (this._options.useShadows) {\n            this._leftShadowDomNode = createFastDomNode(document.createElement('div'));\n            this._leftShadowDomNode.setClassName('shadow');\n            this._domNode.appendChild(this._leftShadowDomNode.domNode);\n            this._topShadowDomNode = createFastDomNode(document.createElement('div'));\n            this._topShadowDomNode.setClassName('shadow');\n            this._domNode.appendChild(this._topShadowDomNode.domNode);\n            this._topLeftShadowDomNode = createFastDomNode(document.createElement('div'));\n            this._topLeftShadowDomNode.setClassName('shadow');\n            this._domNode.appendChild(this._topLeftShadowDomNode.domNode);\n        }\n        else {\n            this._leftShadowDomNode = null;\n            this._topShadowDomNode = null;\n            this._topLeftShadowDomNode = null;\n        }\n        this._listenOnDomNode = this._options.listenOnDomNode || this._domNode;\n        this._mouseWheelToDispose = [];\n        this._setListeningToMouseWheel(this._options.handleMouseWheel);\n        this.onmouseover(this._listenOnDomNode, (e) => this._onMouseOver(e));\n        this.onmouseleave(this._listenOnDomNode, (e) => this._onMouseLeave(e));\n        this._hideTimeout = this._register(new TimeoutTimer());\n        this._isDragging = false;\n        this._mouseIsOver = false;\n        this._shouldRender = true;\n        this._revealOnScroll = true;\n    }\n    dispose() {\n        this._mouseWheelToDispose = dispose(this._mouseWheelToDispose);\n        super.dispose();\n    }\n    /**\n     * Get the generated 'scrollable' dom node\n     */\n    getDomNode() {\n        return this._domNode;\n    }\n    getOverviewRulerLayoutInfo() {\n        return {\n            parent: this._domNode,\n            insertBefore: this._verticalScrollbar.domNode.domNode,\n        };\n    }\n    /**\n     * Delegate a pointer down event to the vertical scrollbar.\n     * This is to help with clicking somewhere else and having the scrollbar react.\n     */\n    delegateVerticalScrollbarPointerDown(browserEvent) {\n        this._verticalScrollbar.delegatePointerDown(browserEvent);\n    }\n    getScrollDimensions() {\n        return this._scrollable.getScrollDimensions();\n    }\n    setScrollDimensions(dimensions) {\n        this._scrollable.setScrollDimensions(dimensions, false);\n    }\n    /**\n     * Update the class name of the scrollable element.\n     */\n    updateClassName(newClassName) {\n        this._options.className = newClassName;\n        // Defaults are different on Macs\n        if (platform.isMacintosh) {\n            this._options.className += ' mac';\n        }\n        this._domNode.className = 'monaco-scrollable-element ' + this._options.className;\n    }\n    /**\n     * Update configuration options for the scrollbar.\n     */\n    updateOptions(newOptions) {\n        if (typeof newOptions.handleMouseWheel !== 'undefined') {\n            this._options.handleMouseWheel = newOptions.handleMouseWheel;\n            this._setListeningToMouseWheel(this._options.handleMouseWheel);\n        }\n        if (typeof newOptions.mouseWheelScrollSensitivity !== 'undefined') {\n            this._options.mouseWheelScrollSensitivity = newOptions.mouseWheelScrollSensitivity;\n        }\n        if (typeof newOptions.fastScrollSensitivity !== 'undefined') {\n            this._options.fastScrollSensitivity = newOptions.fastScrollSensitivity;\n        }\n        if (typeof newOptions.scrollPredominantAxis !== 'undefined') {\n            this._options.scrollPredominantAxis = newOptions.scrollPredominantAxis;\n        }\n        if (typeof newOptions.horizontal !== 'undefined') {\n            this._options.horizontal = newOptions.horizontal;\n        }\n        if (typeof newOptions.vertical !== 'undefined') {\n            this._options.vertical = newOptions.vertical;\n        }\n        if (typeof newOptions.horizontalScrollbarSize !== 'undefined') {\n            this._options.horizontalScrollbarSize = newOptions.horizontalScrollbarSize;\n        }\n        if (typeof newOptions.verticalScrollbarSize !== 'undefined') {\n            this._options.verticalScrollbarSize = newOptions.verticalScrollbarSize;\n        }\n        if (typeof newOptions.scrollByPage !== 'undefined') {\n            this._options.scrollByPage = newOptions.scrollByPage;\n        }\n        this._horizontalScrollbar.updateOptions(this._options);\n        this._verticalScrollbar.updateOptions(this._options);\n        if (!this._options.lazyRender) {\n            this._render();\n        }\n    }\n    delegateScrollFromMouseWheelEvent(browserEvent) {\n        this._onMouseWheel(new StandardWheelEvent(browserEvent));\n    }\n    // -------------------- mouse wheel scrolling --------------------\n    _setListeningToMouseWheel(shouldListen) {\n        const isListening = (this._mouseWheelToDispose.length > 0);\n        if (isListening === shouldListen) {\n            // No change\n            return;\n        }\n        // Stop listening (if necessary)\n        this._mouseWheelToDispose = dispose(this._mouseWheelToDispose);\n        // Start listening (if necessary)\n        if (shouldListen) {\n            const onMouseWheel = (browserEvent) => {\n                this._onMouseWheel(new StandardWheelEvent(browserEvent));\n            };\n            this._mouseWheelToDispose.push(dom.addDisposableListener(this._listenOnDomNode, dom.EventType.MOUSE_WHEEL, onMouseWheel, { passive: false }));\n        }\n    }\n    _onMouseWheel(e) {\n        if (e.browserEvent?.defaultPrevented) {\n            return;\n        }\n        const classifier = MouseWheelClassifier.INSTANCE;\n        if (SCROLL_WHEEL_SMOOTH_SCROLL_ENABLED) {\n            classifier.acceptStandardWheelEvent(e);\n        }\n        // useful for creating unit tests:\n        // console.log(`${Date.now()}, ${e.deltaY}, ${e.deltaX}`);\n        let didScroll = false;\n        if (e.deltaY || e.deltaX) {\n            let deltaY = e.deltaY * this._options.mouseWheelScrollSensitivity;\n            let deltaX = e.deltaX * this._options.mouseWheelScrollSensitivity;\n            if (this._options.scrollPredominantAxis) {\n                if (this._options.scrollYToX && deltaX + deltaY === 0) {\n                    // when configured to map Y to X and we both see\n                    // no dominant axis and X and Y are competing with\n                    // identical values into opposite directions, we\n                    // ignore the delta as we cannot make a decision then\n                    deltaX = deltaY = 0;\n                }\n                else if (Math.abs(deltaY) >= Math.abs(deltaX)) {\n                    deltaX = 0;\n                }\n                else {\n                    deltaY = 0;\n                }\n            }\n            if (this._options.flipAxes) {\n                [deltaY, deltaX] = [deltaX, deltaY];\n            }\n            // Convert vertical scrolling to horizontal if shift is held, this\n            // is handled at a higher level on Mac\n            const shiftConvert = !platform.isMacintosh && e.browserEvent && e.browserEvent.shiftKey;\n            if ((this._options.scrollYToX || shiftConvert) && !deltaX) {\n                deltaX = deltaY;\n                deltaY = 0;\n            }\n            if (e.browserEvent && e.browserEvent.altKey) {\n                // fastScrolling\n                deltaX = deltaX * this._options.fastScrollSensitivity;\n                deltaY = deltaY * this._options.fastScrollSensitivity;\n            }\n            const futureScrollPosition = this._scrollable.getFutureScrollPosition();\n            let desiredScrollPosition = {};\n            if (deltaY) {\n                const deltaScrollTop = SCROLL_WHEEL_SENSITIVITY * deltaY;\n                // Here we convert values such as -0.3 to -1 or 0.3 to 1, otherwise low speed scrolling will never scroll\n                const desiredScrollTop = futureScrollPosition.scrollTop - (deltaScrollTop < 0 ? Math.floor(deltaScrollTop) : Math.ceil(deltaScrollTop));\n                this._verticalScrollbar.writeScrollPosition(desiredScrollPosition, desiredScrollTop);\n            }\n            if (deltaX) {\n                const deltaScrollLeft = SCROLL_WHEEL_SENSITIVITY * deltaX;\n                // Here we convert values such as -0.3 to -1 or 0.3 to 1, otherwise low speed scrolling will never scroll\n                const desiredScrollLeft = futureScrollPosition.scrollLeft - (deltaScrollLeft < 0 ? Math.floor(deltaScrollLeft) : Math.ceil(deltaScrollLeft));\n                this._horizontalScrollbar.writeScrollPosition(desiredScrollPosition, desiredScrollLeft);\n            }\n            // Check that we are scrolling towards a location which is valid\n            desiredScrollPosition = this._scrollable.validateScrollPosition(desiredScrollPosition);\n            if (futureScrollPosition.scrollLeft !== desiredScrollPosition.scrollLeft || futureScrollPosition.scrollTop !== desiredScrollPosition.scrollTop) {\n                const canPerformSmoothScroll = (SCROLL_WHEEL_SMOOTH_SCROLL_ENABLED\n                    && this._options.mouseWheelSmoothScroll\n                    && classifier.isPhysicalMouseWheel());\n                if (canPerformSmoothScroll) {\n                    this._scrollable.setScrollPositionSmooth(desiredScrollPosition);\n                }\n                else {\n                    this._scrollable.setScrollPositionNow(desiredScrollPosition);\n                }\n                didScroll = true;\n            }\n        }\n        let consumeMouseWheel = didScroll;\n        if (!consumeMouseWheel && this._options.alwaysConsumeMouseWheel) {\n            consumeMouseWheel = true;\n        }\n        if (!consumeMouseWheel && this._options.consumeMouseWheelIfScrollbarIsNeeded && (this._verticalScrollbar.isNeeded() || this._horizontalScrollbar.isNeeded())) {\n            consumeMouseWheel = true;\n        }\n        if (consumeMouseWheel) {\n            e.preventDefault();\n            e.stopPropagation();\n        }\n    }\n    _onDidScroll(e) {\n        this._shouldRender = this._horizontalScrollbar.onDidScroll(e) || this._shouldRender;\n        this._shouldRender = this._verticalScrollbar.onDidScroll(e) || this._shouldRender;\n        if (this._options.useShadows) {\n            this._shouldRender = true;\n        }\n        if (this._revealOnScroll) {\n            this._reveal();\n        }\n        if (!this._options.lazyRender) {\n            this._render();\n        }\n    }\n    /**\n     * Render / mutate the DOM now.\n     * Should be used together with the ctor option `lazyRender`.\n     */\n    renderNow() {\n        if (!this._options.lazyRender) {\n            throw new Error('Please use `lazyRender` together with `renderNow`!');\n        }\n        this._render();\n    }\n    _render() {\n        if (!this._shouldRender) {\n            return;\n        }\n        this._shouldRender = false;\n        this._horizontalScrollbar.render();\n        this._verticalScrollbar.render();\n        if (this._options.useShadows) {\n            const scrollState = this._scrollable.getCurrentScrollPosition();\n            const enableTop = scrollState.scrollTop > 0;\n            const enableLeft = scrollState.scrollLeft > 0;\n            const leftClassName = (enableLeft ? ' left' : '');\n            const topClassName = (enableTop ? ' top' : '');\n            const topLeftClassName = (enableLeft || enableTop ? ' top-left-corner' : '');\n            this._leftShadowDomNode.setClassName(`shadow${leftClassName}`);\n            this._topShadowDomNode.setClassName(`shadow${topClassName}`);\n            this._topLeftShadowDomNode.setClassName(`shadow${topLeftClassName}${topClassName}${leftClassName}`);\n        }\n    }\n    // -------------------- fade in / fade out --------------------\n    _onDragStart() {\n        this._isDragging = true;\n        this._reveal();\n    }\n    _onDragEnd() {\n        this._isDragging = false;\n        this._hide();\n    }\n    _onMouseLeave(e) {\n        this._mouseIsOver = false;\n        this._hide();\n    }\n    _onMouseOver(e) {\n        this._mouseIsOver = true;\n        this._reveal();\n    }\n    _reveal() {\n        this._verticalScrollbar.beginReveal();\n        this._horizontalScrollbar.beginReveal();\n        this._scheduleHide();\n    }\n    _hide() {\n        if (!this._mouseIsOver && !this._isDragging) {\n            this._verticalScrollbar.beginHide();\n            this._horizontalScrollbar.beginHide();\n        }\n    }\n    _scheduleHide() {\n        if (!this._mouseIsOver && !this._isDragging) {\n            this._hideTimeout.cancelAndSet(() => this._hide(), HIDE_TIMEOUT);\n        }\n    }\n}\nexport class ScrollableElement extends AbstractScrollableElement {\n    constructor(element, options) {\n        options = options || {};\n        options.mouseWheelSmoothScroll = false;\n        const scrollable = new Scrollable({\n            forceIntegerValues: true,\n            smoothScrollDuration: 0,\n            scheduleAtNextAnimationFrame: (callback) => dom.scheduleAtNextAnimationFrame(dom.getWindow(element), callback)\n        });\n        super(element, options, scrollable);\n        this._register(scrollable);\n    }\n    setScrollPosition(update) {\n        this._scrollable.setScrollPositionNow(update);\n    }\n}\nexport class SmoothScrollableElement extends AbstractScrollableElement {\n    constructor(element, options, scrollable) {\n        super(element, options, scrollable);\n    }\n    setScrollPosition(update) {\n        if (update.reuseAnimation) {\n            this._scrollable.setScrollPositionSmooth(update, update.reuseAnimation);\n        }\n        else {\n            this._scrollable.setScrollPositionNow(update);\n        }\n    }\n    getScrollPosition() {\n        return this._scrollable.getCurrentScrollPosition();\n    }\n}\nexport class DomScrollableElement extends AbstractScrollableElement {\n    constructor(element, options) {\n        options = options || {};\n        options.mouseWheelSmoothScroll = false;\n        const scrollable = new Scrollable({\n            forceIntegerValues: false, // See https://github.com/microsoft/vscode/issues/139877\n            smoothScrollDuration: 0,\n            scheduleAtNextAnimationFrame: (callback) => dom.scheduleAtNextAnimationFrame(dom.getWindow(element), callback)\n        });\n        super(element, options, scrollable);\n        this._register(scrollable);\n        this._element = element;\n        this._register(this.onScroll((e) => {\n            if (e.scrollTopChanged) {\n                this._element.scrollTop = e.scrollTop;\n            }\n            if (e.scrollLeftChanged) {\n                this._element.scrollLeft = e.scrollLeft;\n            }\n        }));\n        this.scanDomNode();\n    }\n    setScrollPosition(update) {\n        this._scrollable.setScrollPositionNow(update);\n    }\n    getScrollPosition() {\n        return this._scrollable.getCurrentScrollPosition();\n    }\n    scanDomNode() {\n        // width, scrollLeft, scrollWidth, height, scrollTop, scrollHeight\n        this.setScrollDimensions({\n            width: this._element.clientWidth,\n            scrollWidth: this._element.scrollWidth,\n            height: this._element.clientHeight,\n            scrollHeight: this._element.scrollHeight\n        });\n        this.setScrollPosition({\n            scrollLeft: this._element.scrollLeft,\n            scrollTop: this._element.scrollTop,\n        });\n    }\n}\nfunction resolveOptions(opts) {\n    const result = {\n        lazyRender: (typeof opts.lazyRender !== 'undefined' ? opts.lazyRender : false),\n        className: (typeof opts.className !== 'undefined' ? opts.className : ''),\n        useShadows: (typeof opts.useShadows !== 'undefined' ? opts.useShadows : true),\n        handleMouseWheel: (typeof opts.handleMouseWheel !== 'undefined' ? opts.handleMouseWheel : true),\n        flipAxes: (typeof opts.flipAxes !== 'undefined' ? opts.flipAxes : false),\n        consumeMouseWheelIfScrollbarIsNeeded: (typeof opts.consumeMouseWheelIfScrollbarIsNeeded !== 'undefined' ? opts.consumeMouseWheelIfScrollbarIsNeeded : false),\n        alwaysConsumeMouseWheel: (typeof opts.alwaysConsumeMouseWheel !== 'undefined' ? opts.alwaysConsumeMouseWheel : false),\n        scrollYToX: (typeof opts.scrollYToX !== 'undefined' ? opts.scrollYToX : false),\n        mouseWheelScrollSensitivity: (typeof opts.mouseWheelScrollSensitivity !== 'undefined' ? opts.mouseWheelScrollSensitivity : 1),\n        fastScrollSensitivity: (typeof opts.fastScrollSensitivity !== 'undefined' ? opts.fastScrollSensitivity : 5),\n        scrollPredominantAxis: (typeof opts.scrollPredominantAxis !== 'undefined' ? opts.scrollPredominantAxis : true),\n        mouseWheelSmoothScroll: (typeof opts.mouseWheelSmoothScroll !== 'undefined' ? opts.mouseWheelSmoothScroll : true),\n        arrowSize: (typeof opts.arrowSize !== 'undefined' ? opts.arrowSize : 11),\n        listenOnDomNode: (typeof opts.listenOnDomNode !== 'undefined' ? opts.listenOnDomNode : null),\n        horizontal: (typeof opts.horizontal !== 'undefined' ? opts.horizontal : 1 /* ScrollbarVisibility.Auto */),\n        horizontalScrollbarSize: (typeof opts.horizontalScrollbarSize !== 'undefined' ? opts.horizontalScrollbarSize : 10),\n        horizontalSliderSize: (typeof opts.horizontalSliderSize !== 'undefined' ? opts.horizontalSliderSize : 0),\n        horizontalHasArrows: (typeof opts.horizontalHasArrows !== 'undefined' ? opts.horizontalHasArrows : false),\n        vertical: (typeof opts.vertical !== 'undefined' ? opts.vertical : 1 /* ScrollbarVisibility.Auto */),\n        verticalScrollbarSize: (typeof opts.verticalScrollbarSize !== 'undefined' ? opts.verticalScrollbarSize : 10),\n        verticalHasArrows: (typeof opts.verticalHasArrows !== 'undefined' ? opts.verticalHasArrows : false),\n        verticalSliderSize: (typeof opts.verticalSliderSize !== 'undefined' ? opts.verticalSliderSize : 0),\n        scrollByPage: (typeof opts.scrollByPage !== 'undefined' ? opts.scrollByPage : false)\n    };\n    result.horizontalSliderSize = (typeof opts.horizontalSliderSize !== 'undefined' ? opts.horizontalSliderSize : result.horizontalScrollbarSize);\n    result.verticalSliderSize = (typeof opts.verticalSliderSize !== 'undefined' ? opts.verticalSliderSize : result.verticalScrollbarSize);\n    // Defaults are different on Macs\n    if (platform.isMacintosh) {\n        result.className += ' mac';\n    }\n    return result;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { DomScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport './hoverWidget.css';\nimport { localize } from '../../../../nls.js';\nconst $ = dom.$;\nexport class HoverWidget extends Disposable {\n    constructor() {\n        super();\n        this.containerDomNode = document.createElement('div');\n        this.containerDomNode.className = 'monaco-hover';\n        this.containerDomNode.tabIndex = 0;\n        this.containerDomNode.setAttribute('role', 'tooltip');\n        this.contentsDomNode = document.createElement('div');\n        this.contentsDomNode.className = 'monaco-hover-content';\n        this.scrollbar = this._register(new DomScrollableElement(this.contentsDomNode, {\n            consumeMouseWheelIfScrollbarIsNeeded: true\n        }));\n        this.containerDomNode.appendChild(this.scrollbar.getDomNode());\n    }\n    onContentsChanged() {\n        this.scrollbar.scanDomNode();\n    }\n}\nexport class HoverAction extends Disposable {\n    static render(parent, actionOptions, keybindingLabel) {\n        return new HoverAction(parent, actionOptions, keybindingLabel);\n    }\n    constructor(parent, actionOptions, keybindingLabel) {\n        super();\n        this.actionLabel = actionOptions.label;\n        this.actionKeybindingLabel = keybindingLabel;\n        this.actionContainer = dom.append(parent, $('div.action-container'));\n        this.actionContainer.setAttribute('tabindex', '0');\n        this.action = dom.append(this.actionContainer, $('a.action'));\n        this.action.setAttribute('role', 'button');\n        if (actionOptions.iconClass) {\n            dom.append(this.action, $(`span.icon.${actionOptions.iconClass}`));\n        }\n        const label = dom.append(this.action, $('span'));\n        label.textContent = keybindingLabel ? `${actionOptions.label} (${keybindingLabel})` : actionOptions.label;\n        this._store.add(new ClickAction(this.actionContainer, actionOptions.run));\n        this._store.add(new KeyDownAction(this.actionContainer, actionOptions.run, [3 /* KeyCode.Enter */, 10 /* KeyCode.Space */]));\n        this.setEnabled(true);\n    }\n    setEnabled(enabled) {\n        if (enabled) {\n            this.actionContainer.classList.remove('disabled');\n            this.actionContainer.removeAttribute('aria-disabled');\n        }\n        else {\n            this.actionContainer.classList.add('disabled');\n            this.actionContainer.setAttribute('aria-disabled', 'true');\n        }\n    }\n}\nexport function getHoverAccessibleViewHint(shouldHaveHint, keybinding) {\n    return shouldHaveHint && keybinding ? localize('acessibleViewHint', \"Inspect this in the accessible view with {0}.\", keybinding) : shouldHaveHint ? localize('acessibleViewHintNoKbOpen', \"Inspect this in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding.\") : '';\n}\nexport class ClickAction extends Disposable {\n    constructor(container, run) {\n        super();\n        this._register(dom.addDisposableListener(container, dom.EventType.CLICK, e => {\n            e.stopPropagation();\n            e.preventDefault();\n            run(container);\n        }));\n    }\n}\nexport class KeyDownAction extends Disposable {\n    constructor(container, run, keyCodes) {\n        super();\n        this._register(dom.addDisposableListener(container, dom.EventType.KEY_DOWN, e => {\n            const event = new StandardKeyboardEvent(e);\n            if (keyCodes.some(keyCode => event.equals(keyCode))) {\n                e.stopPropagation();\n                e.preventDefault();\n                run(container);\n            }\n        }));\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { ThemeIcon } from '../../../common/themables.js';\nconst labelWithIconsRegex = new RegExp(`(\\\\\\\\)?\\\\$\\\\((${ThemeIcon.iconNameExpression}(?:${ThemeIcon.iconModifierExpression})?)\\\\)`, 'g');\nexport function renderLabelWithIcons(text) {\n    const elements = new Array();\n    let match;\n    let textStart = 0, textStop = 0;\n    while ((match = labelWithIconsRegex.exec(text)) !== null) {\n        textStop = match.index || 0;\n        if (textStart < textStop) {\n            elements.push(text.substring(textStart, textStop));\n        }\n        textStart = (match.index || 0) + match[0].length;\n        const [, escaped, codicon] = match;\n        elements.push(escaped ? `$(${codicon})` : renderIcon({ id: codicon }));\n    }\n    if (textStart < text.length) {\n        elements.push(text.substring(textStart));\n    }\n    return elements;\n}\nexport function renderIcon(icon) {\n    const node = dom.$(`span`);\n    node.classList.add(...ThemeIcon.asClassNameArray(icon));\n    return node;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport './aria.css';\n// Use a max length since we are inserting the whole msg in the DOM and that can cause browsers to freeze for long messages #94233\nconst MAX_MESSAGE_LENGTH = 20000;\nlet ariaContainer;\nlet alertContainer;\nlet alertContainer2;\nlet statusContainer;\nlet statusContainer2;\nexport function setARIAContainer(parent) {\n    ariaContainer = document.createElement('div');\n    ariaContainer.className = 'monaco-aria-container';\n    const createAlertContainer = () => {\n        const element = document.createElement('div');\n        element.className = 'monaco-alert';\n        element.setAttribute('role', 'alert');\n        element.setAttribute('aria-atomic', 'true');\n        ariaContainer.appendChild(element);\n        return element;\n    };\n    alertContainer = createAlertContainer();\n    alertContainer2 = createAlertContainer();\n    const createStatusContainer = () => {\n        const element = document.createElement('div');\n        element.className = 'monaco-status';\n        element.setAttribute('aria-live', 'polite');\n        element.setAttribute('aria-atomic', 'true');\n        ariaContainer.appendChild(element);\n        return element;\n    };\n    statusContainer = createStatusContainer();\n    statusContainer2 = createStatusContainer();\n    parent.appendChild(ariaContainer);\n}\n/**\n * Given the provided message, will make sure that it is read as alert to screen readers.\n */\nexport function alert(msg) {\n    if (!ariaContainer) {\n        return;\n    }\n    // Use alternate containers such that duplicated messages get read out by screen readers #99466\n    if (alertContainer.textContent !== msg) {\n        dom.clearNode(alertContainer2);\n        insertMessage(alertContainer, msg);\n    }\n    else {\n        dom.clearNode(alertContainer);\n        insertMessage(alertContainer2, msg);\n    }\n}\n/**\n * Given the provided message, will make sure that it is read as status to screen readers.\n */\nexport function status(msg) {\n    if (!ariaContainer) {\n        return;\n    }\n    if (statusContainer.textContent !== msg) {\n        dom.clearNode(statusContainer2);\n        insertMessage(statusContainer, msg);\n    }\n    else {\n        dom.clearNode(statusContainer);\n        insertMessage(statusContainer2, msg);\n    }\n}\nfunction insertMessage(target, msg) {\n    dom.clearNode(target);\n    if (msg.length > MAX_MESSAGE_LENGTH) {\n        msg = msg.substr(0, MAX_MESSAGE_LENGTH);\n    }\n    target.textContent = msg;\n    // See https://www.paciellogroup.com/blog/2012/06/html5-accessibility-chops-aria-rolealert-browser-support/\n    target.style.visibility = 'hidden';\n    target.style.visibility = 'visible';\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { BrowserFeatures } from '../../canIUse.js';\nimport * as DOM from '../../dom.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../common/lifecycle.js';\nimport * as platform from '../../../common/platform.js';\nimport { Range } from '../../../common/range.js';\nimport './contextview.css';\nexport function isAnchor(obj) {\n    const anchor = obj;\n    return !!anchor && typeof anchor.x === 'number' && typeof anchor.y === 'number';\n}\nexport var LayoutAnchorMode;\n(function (LayoutAnchorMode) {\n    LayoutAnchorMode[LayoutAnchorMode[\"AVOID\"] = 0] = \"AVOID\";\n    LayoutAnchorMode[LayoutAnchorMode[\"ALIGN\"] = 1] = \"ALIGN\";\n})(LayoutAnchorMode || (LayoutAnchorMode = {}));\n/**\n * Lays out a one dimensional view next to an anchor in a viewport.\n *\n * @returns The view offset within the viewport.\n */\nexport function layout(viewportSize, viewSize, anchor) {\n    const layoutAfterAnchorBoundary = anchor.mode === LayoutAnchorMode.ALIGN ? anchor.offset : anchor.offset + anchor.size;\n    const layoutBeforeAnchorBoundary = anchor.mode === LayoutAnchorMode.ALIGN ? anchor.offset + anchor.size : anchor.offset;\n    if (anchor.position === 0 /* LayoutAnchorPosition.Before */) {\n        if (viewSize <= viewportSize - layoutAfterAnchorBoundary) {\n            return layoutAfterAnchorBoundary; // happy case, lay it out after the anchor\n        }\n        if (viewSize <= layoutBeforeAnchorBoundary) {\n            return layoutBeforeAnchorBoundary - viewSize; // ok case, lay it out before the anchor\n        }\n        return Math.max(viewportSize - viewSize, 0); // sad case, lay it over the anchor\n    }\n    else {\n        if (viewSize <= layoutBeforeAnchorBoundary) {\n            return layoutBeforeAnchorBoundary - viewSize; // happy case, lay it out before the anchor\n        }\n        if (viewSize <= viewportSize - layoutAfterAnchorBoundary) {\n            return layoutAfterAnchorBoundary; // ok case, lay it out after the anchor\n        }\n        return 0; // sad case, lay it over the anchor\n    }\n}\nexport class ContextView extends Disposable {\n    static { this.BUBBLE_UP_EVENTS = ['click', 'keydown', 'focus', 'blur']; }\n    static { this.BUBBLE_DOWN_EVENTS = ['click']; }\n    constructor(container, domPosition) {\n        super();\n        this.container = null;\n        this.useFixedPosition = false;\n        this.useShadowDOM = false;\n        this.delegate = null;\n        this.toDisposeOnClean = Disposable.None;\n        this.toDisposeOnSetContainer = Disposable.None;\n        this.shadowRoot = null;\n        this.shadowRootHostElement = null;\n        this.view = DOM.$('.context-view');\n        DOM.hide(this.view);\n        this.setContainer(container, domPosition);\n        this._register(toDisposable(() => this.setContainer(null, 1 /* ContextViewDOMPosition.ABSOLUTE */)));\n    }\n    setContainer(container, domPosition) {\n        this.useFixedPosition = domPosition !== 1 /* ContextViewDOMPosition.ABSOLUTE */;\n        const usedShadowDOM = this.useShadowDOM;\n        this.useShadowDOM = domPosition === 3 /* ContextViewDOMPosition.FIXED_SHADOW */;\n        if (container === this.container && usedShadowDOM === this.useShadowDOM) {\n            return; // container is the same and no shadow DOM usage has changed\n        }\n        if (this.container) {\n            this.toDisposeOnSetContainer.dispose();\n            this.view.remove();\n            if (this.shadowRoot) {\n                this.shadowRoot = null;\n                this.shadowRootHostElement?.remove();\n                this.shadowRootHostElement = null;\n            }\n            this.container = null;\n        }\n        if (container) {\n            this.container = container;\n            if (this.useShadowDOM) {\n                this.shadowRootHostElement = DOM.$('.shadow-root-host');\n                this.container.appendChild(this.shadowRootHostElement);\n                this.shadowRoot = this.shadowRootHostElement.attachShadow({ mode: 'open' });\n                const style = document.createElement('style');\n                style.textContent = SHADOW_ROOT_CSS;\n                this.shadowRoot.appendChild(style);\n                this.shadowRoot.appendChild(this.view);\n                this.shadowRoot.appendChild(DOM.$('slot'));\n            }\n            else {\n                this.container.appendChild(this.view);\n            }\n            const toDisposeOnSetContainer = new DisposableStore();\n            ContextView.BUBBLE_UP_EVENTS.forEach(event => {\n                toDisposeOnSetContainer.add(DOM.addStandardDisposableListener(this.container, event, e => {\n                    this.onDOMEvent(e, false);\n                }));\n            });\n            ContextView.BUBBLE_DOWN_EVENTS.forEach(event => {\n                toDisposeOnSetContainer.add(DOM.addStandardDisposableListener(this.container, event, e => {\n                    this.onDOMEvent(e, true);\n                }, true));\n            });\n            this.toDisposeOnSetContainer = toDisposeOnSetContainer;\n        }\n    }\n    show(delegate) {\n        if (this.isVisible()) {\n            this.hide();\n        }\n        // Show static box\n        DOM.clearNode(this.view);\n        this.view.className = 'context-view monaco-component';\n        this.view.style.top = '0px';\n        this.view.style.left = '0px';\n        this.view.style.zIndex = `${2575 + (delegate.layer ?? 0)}`;\n        this.view.style.position = this.useFixedPosition ? 'fixed' : 'absolute';\n        DOM.show(this.view);\n        // Render content\n        this.toDisposeOnClean = delegate.render(this.view) || Disposable.None;\n        // Set active delegate\n        this.delegate = delegate;\n        // Layout\n        this.doLayout();\n        // Focus\n        this.delegate.focus?.();\n    }\n    getViewElement() {\n        return this.view;\n    }\n    layout() {\n        if (!this.isVisible()) {\n            return;\n        }\n        if (this.delegate.canRelayout === false && !(platform.isIOS && BrowserFeatures.pointerEvents)) {\n            this.hide();\n            return;\n        }\n        this.delegate?.layout?.();\n        this.doLayout();\n    }\n    doLayout() {\n        // Check that we still have a delegate - this.delegate.layout may have hidden\n        if (!this.isVisible()) {\n            return;\n        }\n        // Get anchor\n        const anchor = this.delegate.getAnchor();\n        // Compute around\n        let around;\n        // Get the element's position and size (to anchor the view)\n        if (DOM.isHTMLElement(anchor)) {\n            const elementPosition = DOM.getDomNodePagePosition(anchor);\n            // In areas where zoom is applied to the element or its ancestors, we need to adjust the size of the element\n            // e.g. The title bar has counter zoom behavior meaning it applies the inverse of zoom level.\n            // Window Zoom Level: 1.5, Title Bar Zoom: 1/1.5, Size Multiplier: 1.5\n            const zoom = DOM.getDomNodeZoomLevel(anchor);\n            around = {\n                top: elementPosition.top * zoom,\n                left: elementPosition.left * zoom,\n                width: elementPosition.width * zoom,\n                height: elementPosition.height * zoom\n            };\n        }\n        else if (isAnchor(anchor)) {\n            around = {\n                top: anchor.y,\n                left: anchor.x,\n                width: anchor.width || 1,\n                height: anchor.height || 2\n            };\n        }\n        else {\n            around = {\n                top: anchor.posy,\n                left: anchor.posx,\n                // We are about to position the context view where the mouse\n                // cursor is. To prevent the view being exactly under the mouse\n                // when showing and thus potentially triggering an action within,\n                // we treat the mouse location like a small sized block element.\n                width: 2,\n                height: 2\n            };\n        }\n        const viewSizeWidth = DOM.getTotalWidth(this.view);\n        const viewSizeHeight = DOM.getTotalHeight(this.view);\n        const anchorPosition = this.delegate.anchorPosition || 0 /* AnchorPosition.BELOW */;\n        const anchorAlignment = this.delegate.anchorAlignment || 0 /* AnchorAlignment.LEFT */;\n        const anchorAxisAlignment = this.delegate.anchorAxisAlignment || 0 /* AnchorAxisAlignment.VERTICAL */;\n        let top;\n        let left;\n        const activeWindow = DOM.getActiveWindow();\n        if (anchorAxisAlignment === 0 /* AnchorAxisAlignment.VERTICAL */) {\n            const verticalAnchor = { offset: around.top - activeWindow.pageYOffset, size: around.height, position: anchorPosition === 0 /* AnchorPosition.BELOW */ ? 0 /* LayoutAnchorPosition.Before */ : 1 /* LayoutAnchorPosition.After */ };\n            const horizontalAnchor = { offset: around.left, size: around.width, position: anchorAlignment === 0 /* AnchorAlignment.LEFT */ ? 0 /* LayoutAnchorPosition.Before */ : 1 /* LayoutAnchorPosition.After */, mode: LayoutAnchorMode.ALIGN };\n            top = layout(activeWindow.innerHeight, viewSizeHeight, verticalAnchor) + activeWindow.pageYOffset;\n            // if view intersects vertically with anchor,  we must avoid the anchor\n            if (Range.intersects({ start: top, end: top + viewSizeHeight }, { start: verticalAnchor.offset, end: verticalAnchor.offset + verticalAnchor.size })) {\n                horizontalAnchor.mode = LayoutAnchorMode.AVOID;\n            }\n            left = layout(activeWindow.innerWidth, viewSizeWidth, horizontalAnchor);\n        }\n        else {\n            const horizontalAnchor = { offset: around.left, size: around.width, position: anchorAlignment === 0 /* AnchorAlignment.LEFT */ ? 0 /* LayoutAnchorPosition.Before */ : 1 /* LayoutAnchorPosition.After */ };\n            const verticalAnchor = { offset: around.top, size: around.height, position: anchorPosition === 0 /* AnchorPosition.BELOW */ ? 0 /* LayoutAnchorPosition.Before */ : 1 /* LayoutAnchorPosition.After */, mode: LayoutAnchorMode.ALIGN };\n            left = layout(activeWindow.innerWidth, viewSizeWidth, horizontalAnchor);\n            // if view intersects horizontally with anchor, we must avoid the anchor\n            if (Range.intersects({ start: left, end: left + viewSizeWidth }, { start: horizontalAnchor.offset, end: horizontalAnchor.offset + horizontalAnchor.size })) {\n                verticalAnchor.mode = LayoutAnchorMode.AVOID;\n            }\n            top = layout(activeWindow.innerHeight, viewSizeHeight, verticalAnchor) + activeWindow.pageYOffset;\n        }\n        this.view.classList.remove('top', 'bottom', 'left', 'right');\n        this.view.classList.add(anchorPosition === 0 /* AnchorPosition.BELOW */ ? 'bottom' : 'top');\n        this.view.classList.add(anchorAlignment === 0 /* AnchorAlignment.LEFT */ ? 'left' : 'right');\n        this.view.classList.toggle('fixed', this.useFixedPosition);\n        const containerPosition = DOM.getDomNodePagePosition(this.container);\n        this.view.style.top = `${top - (this.useFixedPosition ? DOM.getDomNodePagePosition(this.view).top : containerPosition.top)}px`;\n        this.view.style.left = `${left - (this.useFixedPosition ? DOM.getDomNodePagePosition(this.view).left : containerPosition.left)}px`;\n        this.view.style.width = 'initial';\n    }\n    hide(data) {\n        const delegate = this.delegate;\n        this.delegate = null;\n        if (delegate?.onHide) {\n            delegate.onHide(data);\n        }\n        this.toDisposeOnClean.dispose();\n        DOM.hide(this.view);\n    }\n    isVisible() {\n        return !!this.delegate;\n    }\n    onDOMEvent(e, onCapture) {\n        if (this.delegate) {\n            if (this.delegate.onDOMEvent) {\n                this.delegate.onDOMEvent(e, DOM.getWindow(e).document.activeElement);\n            }\n            else if (onCapture && !DOM.isAncestor(e.target, this.container)) {\n                this.hide();\n            }\n        }\n    }\n    dispose() {\n        this.hide();\n        super.dispose();\n    }\n}\nconst SHADOW_ROOT_CSS = /* css */ `\n\t:host {\n\t\tall: initial; /* 1st rule so subsequent properties are reset. */\n\t}\n\n\t.codicon[class*='codicon-'] {\n\t\tfont: normal normal normal 16px/1 codicon;\n\t\tdisplay: inline-block;\n\t\ttext-decoration: none;\n\t\ttext-rendering: auto;\n\t\ttext-align: center;\n\t\t-webkit-font-smoothing: antialiased;\n\t\t-moz-osx-font-smoothing: grayscale;\n\t\tuser-select: none;\n\t\t-webkit-user-select: none;\n\t\t-ms-user-select: none;\n\t}\n\n\t:host {\n\t\tfont-family: -apple-system, BlinkMacSystemFont, \"Segoe WPC\", \"Segoe UI\", \"HelveticaNeue-Light\", system-ui, \"Ubuntu\", \"Droid Sans\", sans-serif;\n\t}\n\n\t:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }\n\t:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, \"PingFang SC\", \"Hiragino Sans GB\", sans-serif; }\n\t:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, \"PingFang TC\", sans-serif; }\n\t:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, \"Hiragino Kaku Gothic Pro\", sans-serif; }\n\t:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, \"Nanum Gothic\", \"Apple SD Gothic Neo\", \"AppleGothic\", sans-serif; }\n\n\t:host-context(.windows) { font-family: \"Segoe WPC\", \"Segoe UI\", sans-serif; }\n\t:host-context(.windows:lang(zh-Hans)) { font-family: \"Segoe WPC\", \"Segoe UI\", \"Microsoft YaHei\", sans-serif; }\n\t:host-context(.windows:lang(zh-Hant)) { font-family: \"Segoe WPC\", \"Segoe UI\", \"Microsoft Jhenghei\", sans-serif; }\n\t:host-context(.windows:lang(ja)) { font-family: \"Segoe WPC\", \"Segoe UI\", \"Yu Gothic UI\", \"Meiryo UI\", sans-serif; }\n\t:host-context(.windows:lang(ko)) { font-family: \"Segoe WPC\", \"Segoe UI\", \"Malgun Gothic\", \"Dotom\", sans-serif; }\n\n\t:host-context(.linux) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", sans-serif; }\n\t:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", \"Source Han Sans SC\", \"Source Han Sans CN\", \"Source Han Sans\", sans-serif; }\n\t:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", \"Source Han Sans TC\", \"Source Han Sans TW\", \"Source Han Sans\", sans-serif; }\n\t:host-context(.linux:lang(ja)) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", \"Source Han Sans J\", \"Source Han Sans JP\", \"Source Han Sans\", sans-serif; }\n\t:host-context(.linux:lang(ko)) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", \"Source Han Sans K\", \"Source Han Sans JR\", \"Source Han Sans\", \"UnDotum\", \"FBaekmuk Gulim\", sans-serif; }\n`;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Lazy } from '../../../common/lazy.js';\nconst nullHoverDelegateFactory = () => ({\n    get delay() { return -1; },\n    dispose: () => { },\n    showHover: () => { return undefined; },\n});\nlet hoverDelegateFactory = nullHoverDelegateFactory;\nconst defaultHoverDelegateMouse = new Lazy(() => hoverDelegateFactory('mouse', false));\nconst defaultHoverDelegateElement = new Lazy(() => hoverDelegateFactory('element', false));\n// TODO: Remove when getDefaultHoverDelegate is no longer used\nexport function setHoverDelegateFactory(hoverDelegateProvider) {\n    hoverDelegateFactory = hoverDelegateProvider;\n}\n// TODO: Refine type for use in new IHoverService interface\nexport function getDefaultHoverDelegate(placement) {\n    if (placement === 'element') {\n        return defaultHoverDelegateElement.value;\n    }\n    return defaultHoverDelegateMouse.value;\n}\n// TODO: Create equivalent in IHoverService\nexport function createInstantHoverDelegate() {\n    // Creates a hover delegate with instant hover enabled.\n    // This hover belongs to the consumer and requires the them to dispose it.\n    // Instant hover only makes sense for 'element' placement.\n    return hoverDelegateFactory('element', true);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nlet baseHoverDelegate = {\n    showHover: () => undefined,\n    hideHover: () => undefined,\n    showAndFocusLastHover: () => undefined,\n    setupManagedHover: () => null,\n    showManagedHover: () => undefined\n};\n/**\n * Sets the hover delegate for use **only in the `base/` layer**.\n */\nexport function setBaseLayerHoverDelegate(hoverDelegate) {\n    baseHoverDelegate = hoverDelegate;\n}\n/**\n * Gets the hover delegate for use **only in the `base/` layer**.\n *\n * Since the hover service depends on various platform services, this delegate essentially bypasses\n * the standard dependency injection mechanism by injecting a global hover service at start up. The\n * only reason this should be used is if `IHoverService` is not available.\n */\nexport function getBaseLayerHoverDelegate() {\n    return baseHoverDelegate;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class CombinedSpliceable {\n    constructor(spliceables) {\n        this.spliceables = spliceables;\n    }\n    splice(start, deleteCount, elements) {\n        this.spliceables.forEach(s => s.splice(start, deleteCount, elements));\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class ListError extends Error {\n    constructor(user, message) {\n        super(`ListError [${user}] ${message}`);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/range.js';\n/**\n * Returns the intersection between a ranged group and a range.\n * Returns `[]` if the intersection is empty.\n */\nexport function groupIntersect(range, groups) {\n    const result = [];\n    for (const r of groups) {\n        if (range.start >= r.range.end) {\n            continue;\n        }\n        if (range.end < r.range.start) {\n            break;\n        }\n        const intersection = Range.intersect(range, r.range);\n        if (Range.isEmpty(intersection)) {\n            continue;\n        }\n        result.push({\n            range: intersection,\n            size: r.size\n        });\n    }\n    return result;\n}\n/**\n * Shifts a range by that `much`.\n */\nexport function shift({ start, end }, much) {\n    return { start: start + much, end: end + much };\n}\n/**\n * Consolidates a collection of ranged groups.\n *\n * Consolidation is the process of merging consecutive ranged groups\n * that share the same `size`.\n */\nexport function consolidate(groups) {\n    const result = [];\n    let previousGroup = null;\n    for (const group of groups) {\n        const start = group.range.start;\n        const end = group.range.end;\n        const size = group.size;\n        if (previousGroup && size === previousGroup.size) {\n            previousGroup.range.end = end;\n            continue;\n        }\n        previousGroup = { range: { start, end }, size };\n        result.push(previousGroup);\n    }\n    return result;\n}\n/**\n * Concatenates several collections of ranged groups into a single\n * collection.\n */\nfunction concat(...groups) {\n    return consolidate(groups.reduce((r, g) => r.concat(g), []));\n}\nexport class RangeMap {\n    get paddingTop() {\n        return this._paddingTop;\n    }\n    set paddingTop(paddingTop) {\n        this._size = this._size + paddingTop - this._paddingTop;\n        this._paddingTop = paddingTop;\n    }\n    constructor(topPadding) {\n        this.groups = [];\n        this._size = 0;\n        this._paddingTop = 0;\n        this._paddingTop = topPadding ?? 0;\n        this._size = this._paddingTop;\n    }\n    splice(index, deleteCount, items = []) {\n        const diff = items.length - deleteCount;\n        const before = groupIntersect({ start: 0, end: index }, this.groups);\n        const after = groupIntersect({ start: index + deleteCount, end: Number.POSITIVE_INFINITY }, this.groups)\n            .map(g => ({ range: shift(g.range, diff), size: g.size }));\n        const middle = items.map((item, i) => ({\n            range: { start: index + i, end: index + i + 1 },\n            size: item.size\n        }));\n        this.groups = concat(before, middle, after);\n        this._size = this._paddingTop + this.groups.reduce((t, g) => t + (g.size * (g.range.end - g.range.start)), 0);\n    }\n    /**\n     * Returns the number of items in the range map.\n     */\n    get count() {\n        const len = this.groups.length;\n        if (!len) {\n            return 0;\n        }\n        return this.groups[len - 1].range.end;\n    }\n    /**\n     * Returns the sum of the sizes of all items in the range map.\n     */\n    get size() {\n        return this._size;\n    }\n    /**\n     * Returns the index of the item at the given position.\n     */\n    indexAt(position) {\n        if (position < 0) {\n            return -1;\n        }\n        if (position < this._paddingTop) {\n            return 0;\n        }\n        let index = 0;\n        let size = this._paddingTop;\n        for (const group of this.groups) {\n            const count = group.range.end - group.range.start;\n            const newSize = size + (count * group.size);\n            if (position < newSize) {\n                return index + Math.floor((position - size) / group.size);\n            }\n            index += count;\n            size = newSize;\n        }\n        return index;\n    }\n    /**\n     * Returns the index of the item right after the item at the\n     * index of the given position.\n     */\n    indexAfter(position) {\n        return Math.min(this.indexAt(position) + 1, this.count);\n    }\n    /**\n     * Returns the start position of the item at the given index.\n     */\n    positionAt(index) {\n        if (index < 0) {\n            return -1;\n        }\n        let position = 0;\n        let count = 0;\n        for (const group of this.groups) {\n            const groupCount = group.range.end - group.range.start;\n            const newCount = count + groupCount;\n            if (index < newCount) {\n                return this._paddingTop + position + ((index - count) * group.size);\n            }\n            position += groupCount * group.size;\n            count = newCount;\n        }\n        return -1;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $ } from '../../dom.js';\nexport class RowCache {\n    constructor(renderers) {\n        this.renderers = renderers;\n        this.cache = new Map();\n        this.transactionNodesPendingRemoval = new Set();\n        this.inTransaction = false;\n    }\n    /**\n     * Returns a row either by creating a new one or reusing\n     * a previously released row which shares the same templateId.\n     *\n     * @returns A row and `isReusingConnectedDomNode` if the row's node is already in the dom in a stale position.\n     */\n    alloc(templateId) {\n        let result = this.getTemplateCache(templateId).pop();\n        let isStale = false;\n        if (result) {\n            isStale = this.transactionNodesPendingRemoval.has(result.domNode);\n            if (isStale) {\n                this.transactionNodesPendingRemoval.delete(result.domNode);\n            }\n        }\n        else {\n            const domNode = $('.monaco-list-row');\n            const renderer = this.getRenderer(templateId);\n            const templateData = renderer.renderTemplate(domNode);\n            result = { domNode, templateId, templateData };\n        }\n        return { row: result, isReusingConnectedDomNode: isStale };\n    }\n    /**\n     * Releases the row for eventual reuse.\n     */\n    release(row) {\n        if (!row) {\n            return;\n        }\n        this.releaseRow(row);\n    }\n    /**\n     * Begin a set of changes that use the cache. This lets us skip work when a row is removed and then inserted again.\n     */\n    transact(makeChanges) {\n        if (this.inTransaction) {\n            throw new Error('Already in transaction');\n        }\n        this.inTransaction = true;\n        try {\n            makeChanges();\n        }\n        finally {\n            for (const domNode of this.transactionNodesPendingRemoval) {\n                this.doRemoveNode(domNode);\n            }\n            this.transactionNodesPendingRemoval.clear();\n            this.inTransaction = false;\n        }\n    }\n    releaseRow(row) {\n        const { domNode, templateId } = row;\n        if (domNode) {\n            if (this.inTransaction) {\n                this.transactionNodesPendingRemoval.add(domNode);\n            }\n            else {\n                this.doRemoveNode(domNode);\n            }\n        }\n        const cache = this.getTemplateCache(templateId);\n        cache.push(row);\n    }\n    doRemoveNode(domNode) {\n        domNode.classList.remove('scrolling');\n        domNode.remove();\n    }\n    getTemplateCache(templateId) {\n        let result = this.cache.get(templateId);\n        if (!result) {\n            result = [];\n            this.cache.set(templateId, result);\n        }\n        return result;\n    }\n    dispose() {\n        this.cache.forEach((cachedRows, templateId) => {\n            for (const cachedRow of cachedRows) {\n                const renderer = this.getRenderer(templateId);\n                renderer.disposeTemplate(cachedRow.templateData);\n                cachedRow.templateData = null;\n            }\n        });\n        this.cache.clear();\n        this.transactionNodesPendingRemoval.clear();\n    }\n    getRenderer(templateId) {\n        const renderer = this.renderers.get(templateId);\n        if (!renderer) {\n            throw new Error(`No renderer found for ${templateId}`);\n        }\n        return renderer;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { DataTransfers } from '../../dnd.js';\nimport { $, addDisposableListener, animate, getContentHeight, getContentWidth, getTopLeftOffset, getWindow, isAncestor, isHTMLElement, isSVGElement, scheduleAtNextAnimationFrame } from '../../dom.js';\nimport { DomEmitter } from '../../event.js';\nimport { EventType as TouchEventType, Gesture } from '../../touch.js';\nimport { SmoothScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { distinct, equals } from '../../../common/arrays.js';\nimport { Delayer, disposableTimeout } from '../../../common/async.js';\nimport { memoize } from '../../../common/decorators.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../common/lifecycle.js';\nimport { Range } from '../../../common/range.js';\nimport { Scrollable } from '../../../common/scrollable.js';\nimport { RangeMap, shift } from './rangeMap.js';\nimport { RowCache } from './rowCache.js';\nimport { BugIndicatingError } from '../../../common/errors.js';\nimport { clamp } from '../../../common/numbers.js';\nconst StaticDND = {\n    CurrentDragAndDropData: undefined\n};\nconst DefaultOptions = {\n    useShadows: true,\n    verticalScrollMode: 1 /* ScrollbarVisibility.Auto */,\n    setRowLineHeight: true,\n    setRowHeight: true,\n    supportDynamicHeights: false,\n    dnd: {\n        getDragElements(e) { return [e]; },\n        getDragURI() { return null; },\n        onDragStart() { },\n        onDragOver() { return false; },\n        drop() { },\n        dispose() { }\n    },\n    horizontalScrolling: false,\n    transformOptimization: true,\n    alwaysConsumeMouseWheel: true,\n};\nexport class ElementsDragAndDropData {\n    constructor(elements) {\n        this.elements = elements;\n    }\n    update() { }\n    getData() {\n        return this.elements;\n    }\n}\nexport class ExternalElementsDragAndDropData {\n    constructor(elements) {\n        this.elements = elements;\n    }\n    update() { }\n    getData() {\n        return this.elements;\n    }\n}\nexport class NativeDragAndDropData {\n    constructor() {\n        this.types = [];\n        this.files = [];\n    }\n    update(dataTransfer) {\n        if (dataTransfer.types) {\n            this.types.splice(0, this.types.length, ...dataTransfer.types);\n        }\n        if (dataTransfer.files) {\n            this.files.splice(0, this.files.length);\n            for (let i = 0; i < dataTransfer.files.length; i++) {\n                const file = dataTransfer.files.item(i);\n                if (file && (file.size || file.type)) {\n                    this.files.push(file);\n                }\n            }\n        }\n    }\n    getData() {\n        return {\n            types: this.types,\n            files: this.files\n        };\n    }\n}\nfunction equalsDragFeedback(f1, f2) {\n    if (Array.isArray(f1) && Array.isArray(f2)) {\n        return equals(f1, f2);\n    }\n    return f1 === f2;\n}\nclass ListViewAccessibilityProvider {\n    constructor(accessibilityProvider) {\n        if (accessibilityProvider?.getSetSize) {\n            this.getSetSize = accessibilityProvider.getSetSize.bind(accessibilityProvider);\n        }\n        else {\n            this.getSetSize = (e, i, l) => l;\n        }\n        if (accessibilityProvider?.getPosInSet) {\n            this.getPosInSet = accessibilityProvider.getPosInSet.bind(accessibilityProvider);\n        }\n        else {\n            this.getPosInSet = (e, i) => i + 1;\n        }\n        if (accessibilityProvider?.getRole) {\n            this.getRole = accessibilityProvider.getRole.bind(accessibilityProvider);\n        }\n        else {\n            this.getRole = _ => 'listitem';\n        }\n        if (accessibilityProvider?.isChecked) {\n            this.isChecked = accessibilityProvider.isChecked.bind(accessibilityProvider);\n        }\n        else {\n            this.isChecked = _ => undefined;\n        }\n    }\n}\n/**\n * The {@link ListView} is a virtual scrolling engine.\n *\n * Given that it only renders elements within its viewport, it can hold large\n * collections of elements and stay very performant. The performance bottleneck\n * usually lies within the user's rendering code for each element.\n *\n * @remarks It is a low-level widget, not meant to be used directly. Refer to the\n * List widget instead.\n */\nexport class ListView {\n    static { this.InstanceCount = 0; }\n    get contentHeight() { return this.rangeMap.size; }\n    get onDidScroll() { return this.scrollableElement.onScroll; }\n    get scrollableElementDomNode() { return this.scrollableElement.getDomNode(); }\n    get horizontalScrolling() { return this._horizontalScrolling; }\n    set horizontalScrolling(value) {\n        if (value === this._horizontalScrolling) {\n            return;\n        }\n        if (value && this.supportDynamicHeights) {\n            throw new Error('Horizontal scrolling and dynamic heights not supported simultaneously');\n        }\n        this._horizontalScrolling = value;\n        this.domNode.classList.toggle('horizontal-scrolling', this._horizontalScrolling);\n        if (this._horizontalScrolling) {\n            for (const item of this.items) {\n                this.measureItemWidth(item);\n            }\n            this.updateScrollWidth();\n            this.scrollableElement.setScrollDimensions({ width: getContentWidth(this.domNode) });\n            this.rowsContainer.style.width = `${Math.max(this.scrollWidth || 0, this.renderWidth)}px`;\n        }\n        else {\n            this.scrollableElementWidthDelayer.cancel();\n            this.scrollableElement.setScrollDimensions({ width: this.renderWidth, scrollWidth: this.renderWidth });\n            this.rowsContainer.style.width = '';\n        }\n    }\n    constructor(container, virtualDelegate, renderers, options = DefaultOptions) {\n        this.virtualDelegate = virtualDelegate;\n        this.domId = `list_id_${++ListView.InstanceCount}`;\n        this.renderers = new Map();\n        this.renderWidth = 0;\n        this._scrollHeight = 0;\n        this.scrollableElementUpdateDisposable = null;\n        this.scrollableElementWidthDelayer = new Delayer(50);\n        this.splicing = false;\n        this.dragOverAnimationStopDisposable = Disposable.None;\n        this.dragOverMouseY = 0;\n        this.canDrop = false;\n        this.currentDragFeedbackDisposable = Disposable.None;\n        this.onDragLeaveTimeout = Disposable.None;\n        this.disposables = new DisposableStore();\n        this._onDidChangeContentHeight = new Emitter();\n        this._onDidChangeContentWidth = new Emitter();\n        this.onDidChangeContentHeight = Event.latch(this._onDidChangeContentHeight.event, undefined, this.disposables);\n        this._horizontalScrolling = false;\n        if (options.horizontalScrolling && options.supportDynamicHeights) {\n            throw new Error('Horizontal scrolling and dynamic heights not supported simultaneously');\n        }\n        this.items = [];\n        this.itemId = 0;\n        this.rangeMap = this.createRangeMap(options.paddingTop ?? 0);\n        for (const renderer of renderers) {\n            this.renderers.set(renderer.templateId, renderer);\n        }\n        this.cache = this.disposables.add(new RowCache(this.renderers));\n        this.lastRenderTop = 0;\n        this.lastRenderHeight = 0;\n        this.domNode = document.createElement('div');\n        this.domNode.className = 'monaco-list';\n        this.domNode.classList.add(this.domId);\n        this.domNode.tabIndex = 0;\n        this.domNode.classList.toggle('mouse-support', typeof options.mouseSupport === 'boolean' ? options.mouseSupport : true);\n        this._horizontalScrolling = options.horizontalScrolling ?? DefaultOptions.horizontalScrolling;\n        this.domNode.classList.toggle('horizontal-scrolling', this._horizontalScrolling);\n        this.paddingBottom = typeof options.paddingBottom === 'undefined' ? 0 : options.paddingBottom;\n        this.accessibilityProvider = new ListViewAccessibilityProvider(options.accessibilityProvider);\n        this.rowsContainer = document.createElement('div');\n        this.rowsContainer.className = 'monaco-list-rows';\n        const transformOptimization = options.transformOptimization ?? DefaultOptions.transformOptimization;\n        if (transformOptimization) {\n            this.rowsContainer.style.transform = 'translate3d(0px, 0px, 0px)';\n            this.rowsContainer.style.overflow = 'hidden';\n            this.rowsContainer.style.contain = 'strict';\n        }\n        this.disposables.add(Gesture.addTarget(this.rowsContainer));\n        this.scrollable = this.disposables.add(new Scrollable({\n            forceIntegerValues: true,\n            smoothScrollDuration: (options.smoothScrolling ?? false) ? 125 : 0,\n            scheduleAtNextAnimationFrame: cb => scheduleAtNextAnimationFrame(getWindow(this.domNode), cb)\n        }));\n        this.scrollableElement = this.disposables.add(new SmoothScrollableElement(this.rowsContainer, {\n            alwaysConsumeMouseWheel: options.alwaysConsumeMouseWheel ?? DefaultOptions.alwaysConsumeMouseWheel,\n            horizontal: 1 /* ScrollbarVisibility.Auto */,\n            vertical: options.verticalScrollMode ?? DefaultOptions.verticalScrollMode,\n            useShadows: options.useShadows ?? DefaultOptions.useShadows,\n            mouseWheelScrollSensitivity: options.mouseWheelScrollSensitivity,\n            fastScrollSensitivity: options.fastScrollSensitivity,\n            scrollByPage: options.scrollByPage\n        }, this.scrollable));\n        this.domNode.appendChild(this.scrollableElement.getDomNode());\n        container.appendChild(this.domNode);\n        this.scrollableElement.onScroll(this.onScroll, this, this.disposables);\n        this.disposables.add(addDisposableListener(this.rowsContainer, TouchEventType.Change, e => this.onTouchChange(e)));\n        // Prevent the monaco-scrollable-element from scrolling\n        // https://github.com/microsoft/vscode/issues/44181\n        this.disposables.add(addDisposableListener(this.scrollableElement.getDomNode(), 'scroll', e => e.target.scrollTop = 0));\n        this.disposables.add(addDisposableListener(this.domNode, 'dragover', e => this.onDragOver(this.toDragEvent(e))));\n        this.disposables.add(addDisposableListener(this.domNode, 'drop', e => this.onDrop(this.toDragEvent(e))));\n        this.disposables.add(addDisposableListener(this.domNode, 'dragleave', e => this.onDragLeave(this.toDragEvent(e))));\n        this.disposables.add(addDisposableListener(this.domNode, 'dragend', e => this.onDragEnd(e)));\n        this.setRowLineHeight = options.setRowLineHeight ?? DefaultOptions.setRowLineHeight;\n        this.setRowHeight = options.setRowHeight ?? DefaultOptions.setRowHeight;\n        this.supportDynamicHeights = options.supportDynamicHeights ?? DefaultOptions.supportDynamicHeights;\n        this.dnd = options.dnd ?? this.disposables.add(DefaultOptions.dnd);\n        this.layout(options.initialSize?.height, options.initialSize?.width);\n    }\n    updateOptions(options) {\n        if (options.paddingBottom !== undefined) {\n            this.paddingBottom = options.paddingBottom;\n            this.scrollableElement.setScrollDimensions({ scrollHeight: this.scrollHeight });\n        }\n        if (options.smoothScrolling !== undefined) {\n            this.scrollable.setSmoothScrollDuration(options.smoothScrolling ? 125 : 0);\n        }\n        if (options.horizontalScrolling !== undefined) {\n            this.horizontalScrolling = options.horizontalScrolling;\n        }\n        let scrollableOptions;\n        if (options.scrollByPage !== undefined) {\n            scrollableOptions = { ...(scrollableOptions ?? {}), scrollByPage: options.scrollByPage };\n        }\n        if (options.mouseWheelScrollSensitivity !== undefined) {\n            scrollableOptions = { ...(scrollableOptions ?? {}), mouseWheelScrollSensitivity: options.mouseWheelScrollSensitivity };\n        }\n        if (options.fastScrollSensitivity !== undefined) {\n            scrollableOptions = { ...(scrollableOptions ?? {}), fastScrollSensitivity: options.fastScrollSensitivity };\n        }\n        if (scrollableOptions) {\n            this.scrollableElement.updateOptions(scrollableOptions);\n        }\n        if (options.paddingTop !== undefined && options.paddingTop !== this.rangeMap.paddingTop) {\n            // trigger a rerender\n            const lastRenderRange = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n            const offset = options.paddingTop - this.rangeMap.paddingTop;\n            this.rangeMap.paddingTop = options.paddingTop;\n            this.render(lastRenderRange, Math.max(0, this.lastRenderTop + offset), this.lastRenderHeight, undefined, undefined, true);\n            this.setScrollTop(this.lastRenderTop);\n            this.eventuallyUpdateScrollDimensions();\n            if (this.supportDynamicHeights) {\n                this._rerender(this.lastRenderTop, this.lastRenderHeight);\n            }\n        }\n    }\n    createRangeMap(paddingTop) {\n        return new RangeMap(paddingTop);\n    }\n    splice(start, deleteCount, elements = []) {\n        if (this.splicing) {\n            throw new Error('Can\\'t run recursive splices.');\n        }\n        this.splicing = true;\n        try {\n            return this._splice(start, deleteCount, elements);\n        }\n        finally {\n            this.splicing = false;\n            this._onDidChangeContentHeight.fire(this.contentHeight);\n        }\n    }\n    _splice(start, deleteCount, elements = []) {\n        const previousRenderRange = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n        const deleteRange = { start, end: start + deleteCount };\n        const removeRange = Range.intersect(previousRenderRange, deleteRange);\n        // try to reuse rows, avoid removing them from DOM\n        const rowsToDispose = new Map();\n        for (let i = removeRange.end - 1; i >= removeRange.start; i--) {\n            const item = this.items[i];\n            item.dragStartDisposable.dispose();\n            item.checkedDisposable.dispose();\n            if (item.row) {\n                let rows = rowsToDispose.get(item.templateId);\n                if (!rows) {\n                    rows = [];\n                    rowsToDispose.set(item.templateId, rows);\n                }\n                const renderer = this.renderers.get(item.templateId);\n                if (renderer && renderer.disposeElement) {\n                    renderer.disposeElement(item.element, i, item.row.templateData, item.size);\n                }\n                rows.unshift(item.row);\n            }\n            item.row = null;\n            item.stale = true;\n        }\n        const previousRestRange = { start: start + deleteCount, end: this.items.length };\n        const previousRenderedRestRange = Range.intersect(previousRestRange, previousRenderRange);\n        const previousUnrenderedRestRanges = Range.relativeComplement(previousRestRange, previousRenderRange);\n        const inserted = elements.map(element => ({\n            id: String(this.itemId++),\n            element,\n            templateId: this.virtualDelegate.getTemplateId(element),\n            size: this.virtualDelegate.getHeight(element),\n            width: undefined,\n            hasDynamicHeight: !!this.virtualDelegate.hasDynamicHeight && this.virtualDelegate.hasDynamicHeight(element),\n            lastDynamicHeightWidth: undefined,\n            row: null,\n            uri: undefined,\n            dropTarget: false,\n            dragStartDisposable: Disposable.None,\n            checkedDisposable: Disposable.None,\n            stale: false\n        }));\n        let deleted;\n        // TODO@joao: improve this optimization to catch even more cases\n        if (start === 0 && deleteCount >= this.items.length) {\n            this.rangeMap = this.createRangeMap(this.rangeMap.paddingTop);\n            this.rangeMap.splice(0, 0, inserted);\n            deleted = this.items;\n            this.items = inserted;\n        }\n        else {\n            this.rangeMap.splice(start, deleteCount, inserted);\n            deleted = this.items.splice(start, deleteCount, ...inserted);\n        }\n        const delta = elements.length - deleteCount;\n        const renderRange = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n        const renderedRestRange = shift(previousRenderedRestRange, delta);\n        const updateRange = Range.intersect(renderRange, renderedRestRange);\n        for (let i = updateRange.start; i < updateRange.end; i++) {\n            this.updateItemInDOM(this.items[i], i);\n        }\n        const removeRanges = Range.relativeComplement(renderedRestRange, renderRange);\n        for (const range of removeRanges) {\n            for (let i = range.start; i < range.end; i++) {\n                this.removeItemFromDOM(i);\n            }\n        }\n        const unrenderedRestRanges = previousUnrenderedRestRanges.map(r => shift(r, delta));\n        const elementsRange = { start, end: start + elements.length };\n        const insertRanges = [elementsRange, ...unrenderedRestRanges].map(r => Range.intersect(renderRange, r)).reverse();\n        for (const range of insertRanges) {\n            for (let i = range.end - 1; i >= range.start; i--) {\n                const item = this.items[i];\n                const rows = rowsToDispose.get(item.templateId);\n                const row = rows?.pop();\n                this.insertItemInDOM(i, row);\n            }\n        }\n        for (const rows of rowsToDispose.values()) {\n            for (const row of rows) {\n                this.cache.release(row);\n            }\n        }\n        this.eventuallyUpdateScrollDimensions();\n        if (this.supportDynamicHeights) {\n            this._rerender(this.scrollTop, this.renderHeight);\n        }\n        return deleted.map(i => i.element);\n    }\n    eventuallyUpdateScrollDimensions() {\n        this._scrollHeight = this.contentHeight;\n        this.rowsContainer.style.height = `${this._scrollHeight}px`;\n        if (!this.scrollableElementUpdateDisposable) {\n            this.scrollableElementUpdateDisposable = scheduleAtNextAnimationFrame(getWindow(this.domNode), () => {\n                this.scrollableElement.setScrollDimensions({ scrollHeight: this.scrollHeight });\n                this.updateScrollWidth();\n                this.scrollableElementUpdateDisposable = null;\n            });\n        }\n    }\n    eventuallyUpdateScrollWidth() {\n        if (!this.horizontalScrolling) {\n            this.scrollableElementWidthDelayer.cancel();\n            return;\n        }\n        this.scrollableElementWidthDelayer.trigger(() => this.updateScrollWidth());\n    }\n    updateScrollWidth() {\n        if (!this.horizontalScrolling) {\n            return;\n        }\n        let scrollWidth = 0;\n        for (const item of this.items) {\n            if (typeof item.width !== 'undefined') {\n                scrollWidth = Math.max(scrollWidth, item.width);\n            }\n        }\n        this.scrollWidth = scrollWidth;\n        this.scrollableElement.setScrollDimensions({ scrollWidth: scrollWidth === 0 ? 0 : (scrollWidth + 10) });\n        this._onDidChangeContentWidth.fire(this.scrollWidth);\n    }\n    rerender() {\n        if (!this.supportDynamicHeights) {\n            return;\n        }\n        for (const item of this.items) {\n            item.lastDynamicHeightWidth = undefined;\n        }\n        this._rerender(this.lastRenderTop, this.lastRenderHeight);\n    }\n    get length() {\n        return this.items.length;\n    }\n    get renderHeight() {\n        const scrollDimensions = this.scrollableElement.getScrollDimensions();\n        return scrollDimensions.height;\n    }\n    get firstVisibleIndex() {\n        const range = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n        return range.start;\n    }\n    element(index) {\n        return this.items[index].element;\n    }\n    indexOf(element) {\n        return this.items.findIndex(item => item.element === element);\n    }\n    domElement(index) {\n        const row = this.items[index].row;\n        return row && row.domNode;\n    }\n    elementHeight(index) {\n        return this.items[index].size;\n    }\n    elementTop(index) {\n        return this.rangeMap.positionAt(index);\n    }\n    indexAt(position) {\n        return this.rangeMap.indexAt(position);\n    }\n    indexAfter(position) {\n        return this.rangeMap.indexAfter(position);\n    }\n    layout(height, width) {\n        const scrollDimensions = {\n            height: typeof height === 'number' ? height : getContentHeight(this.domNode)\n        };\n        if (this.scrollableElementUpdateDisposable) {\n            this.scrollableElementUpdateDisposable.dispose();\n            this.scrollableElementUpdateDisposable = null;\n            scrollDimensions.scrollHeight = this.scrollHeight;\n        }\n        this.scrollableElement.setScrollDimensions(scrollDimensions);\n        if (typeof width !== 'undefined') {\n            this.renderWidth = width;\n            if (this.supportDynamicHeights) {\n                this._rerender(this.scrollTop, this.renderHeight);\n            }\n        }\n        if (this.horizontalScrolling) {\n            this.scrollableElement.setScrollDimensions({\n                width: typeof width === 'number' ? width : getContentWidth(this.domNode)\n            });\n        }\n    }\n    // Render\n    render(previousRenderRange, renderTop, renderHeight, renderLeft, scrollWidth, updateItemsInDOM = false) {\n        const renderRange = this.getRenderRange(renderTop, renderHeight);\n        const rangesToInsert = Range.relativeComplement(renderRange, previousRenderRange).reverse();\n        const rangesToRemove = Range.relativeComplement(previousRenderRange, renderRange);\n        if (updateItemsInDOM) {\n            const rangesToUpdate = Range.intersect(previousRenderRange, renderRange);\n            for (let i = rangesToUpdate.start; i < rangesToUpdate.end; i++) {\n                this.updateItemInDOM(this.items[i], i);\n            }\n        }\n        this.cache.transact(() => {\n            for (const range of rangesToRemove) {\n                for (let i = range.start; i < range.end; i++) {\n                    this.removeItemFromDOM(i);\n                }\n            }\n            for (const range of rangesToInsert) {\n                for (let i = range.end - 1; i >= range.start; i--) {\n                    this.insertItemInDOM(i);\n                }\n            }\n        });\n        if (renderLeft !== undefined) {\n            this.rowsContainer.style.left = `-${renderLeft}px`;\n        }\n        this.rowsContainer.style.top = `-${renderTop}px`;\n        if (this.horizontalScrolling && scrollWidth !== undefined) {\n            this.rowsContainer.style.width = `${Math.max(scrollWidth, this.renderWidth)}px`;\n        }\n        this.lastRenderTop = renderTop;\n        this.lastRenderHeight = renderHeight;\n    }\n    // DOM operations\n    insertItemInDOM(index, row) {\n        const item = this.items[index];\n        if (!item.row) {\n            if (row) {\n                item.row = row;\n                item.stale = true;\n            }\n            else {\n                const result = this.cache.alloc(item.templateId);\n                item.row = result.row;\n                item.stale ||= result.isReusingConnectedDomNode;\n            }\n        }\n        const role = this.accessibilityProvider.getRole(item.element) || 'listitem';\n        item.row.domNode.setAttribute('role', role);\n        const checked = this.accessibilityProvider.isChecked(item.element);\n        if (typeof checked === 'boolean') {\n            item.row.domNode.setAttribute('aria-checked', String(!!checked));\n        }\n        else if (checked) {\n            const update = (checked) => item.row.domNode.setAttribute('aria-checked', String(!!checked));\n            update(checked.value);\n            item.checkedDisposable = checked.onDidChange(() => update(checked.value));\n        }\n        if (item.stale || !item.row.domNode.parentElement) {\n            const referenceNode = this.items.at(index + 1)?.row?.domNode ?? null;\n            if (item.row.domNode.parentElement !== this.rowsContainer || item.row.domNode.nextElementSibling !== referenceNode) {\n                this.rowsContainer.insertBefore(item.row.domNode, referenceNode);\n            }\n            item.stale = false;\n        }\n        this.updateItemInDOM(item, index);\n        const renderer = this.renderers.get(item.templateId);\n        if (!renderer) {\n            throw new Error(`No renderer found for template id ${item.templateId}`);\n        }\n        renderer?.renderElement(item.element, index, item.row.templateData, item.size);\n        const uri = this.dnd.getDragURI(item.element);\n        item.dragStartDisposable.dispose();\n        item.row.domNode.draggable = !!uri;\n        if (uri) {\n            item.dragStartDisposable = addDisposableListener(item.row.domNode, 'dragstart', event => this.onDragStart(item.element, uri, event));\n        }\n        if (this.horizontalScrolling) {\n            this.measureItemWidth(item);\n            this.eventuallyUpdateScrollWidth();\n        }\n    }\n    measureItemWidth(item) {\n        if (!item.row || !item.row.domNode) {\n            return;\n        }\n        item.row.domNode.style.width = 'fit-content';\n        item.width = getContentWidth(item.row.domNode);\n        const style = getWindow(item.row.domNode).getComputedStyle(item.row.domNode);\n        if (style.paddingLeft) {\n            item.width += parseFloat(style.paddingLeft);\n        }\n        if (style.paddingRight) {\n            item.width += parseFloat(style.paddingRight);\n        }\n        item.row.domNode.style.width = '';\n    }\n    updateItemInDOM(item, index) {\n        item.row.domNode.style.top = `${this.elementTop(index)}px`;\n        if (this.setRowHeight) {\n            item.row.domNode.style.height = `${item.size}px`;\n        }\n        if (this.setRowLineHeight) {\n            item.row.domNode.style.lineHeight = `${item.size}px`;\n        }\n        item.row.domNode.setAttribute('data-index', `${index}`);\n        item.row.domNode.setAttribute('data-last-element', index === this.length - 1 ? 'true' : 'false');\n        item.row.domNode.setAttribute('data-parity', index % 2 === 0 ? 'even' : 'odd');\n        item.row.domNode.setAttribute('aria-setsize', String(this.accessibilityProvider.getSetSize(item.element, index, this.length)));\n        item.row.domNode.setAttribute('aria-posinset', String(this.accessibilityProvider.getPosInSet(item.element, index)));\n        item.row.domNode.setAttribute('id', this.getElementDomId(index));\n        item.row.domNode.classList.toggle('drop-target', item.dropTarget);\n    }\n    removeItemFromDOM(index) {\n        const item = this.items[index];\n        item.dragStartDisposable.dispose();\n        item.checkedDisposable.dispose();\n        if (item.row) {\n            const renderer = this.renderers.get(item.templateId);\n            if (renderer && renderer.disposeElement) {\n                renderer.disposeElement(item.element, index, item.row.templateData, item.size);\n            }\n            this.cache.release(item.row);\n            item.row = null;\n        }\n        if (this.horizontalScrolling) {\n            this.eventuallyUpdateScrollWidth();\n        }\n    }\n    getScrollTop() {\n        const scrollPosition = this.scrollableElement.getScrollPosition();\n        return scrollPosition.scrollTop;\n    }\n    setScrollTop(scrollTop, reuseAnimation) {\n        if (this.scrollableElementUpdateDisposable) {\n            this.scrollableElementUpdateDisposable.dispose();\n            this.scrollableElementUpdateDisposable = null;\n            this.scrollableElement.setScrollDimensions({ scrollHeight: this.scrollHeight });\n        }\n        this.scrollableElement.setScrollPosition({ scrollTop, reuseAnimation });\n    }\n    get scrollTop() {\n        return this.getScrollTop();\n    }\n    set scrollTop(scrollTop) {\n        this.setScrollTop(scrollTop);\n    }\n    get scrollHeight() {\n        return this._scrollHeight + (this.horizontalScrolling ? 10 : 0) + this.paddingBottom;\n    }\n    // Events\n    get onMouseClick() { return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'click')).event, e => this.toMouseEvent(e), this.disposables); }\n    get onMouseDblClick() { return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'dblclick')).event, e => this.toMouseEvent(e), this.disposables); }\n    get onMouseMiddleClick() { return Event.filter(Event.map(this.disposables.add(new DomEmitter(this.domNode, 'auxclick')).event, e => this.toMouseEvent(e), this.disposables), e => e.browserEvent.button === 1, this.disposables); }\n    get onMouseDown() { return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'mousedown')).event, e => this.toMouseEvent(e), this.disposables); }\n    get onMouseOver() { return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'mouseover')).event, e => this.toMouseEvent(e), this.disposables); }\n    get onMouseOut() { return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'mouseout')).event, e => this.toMouseEvent(e), this.disposables); }\n    get onContextMenu() { return Event.any(Event.map(this.disposables.add(new DomEmitter(this.domNode, 'contextmenu')).event, e => this.toMouseEvent(e), this.disposables), Event.map(this.disposables.add(new DomEmitter(this.domNode, TouchEventType.Contextmenu)).event, e => this.toGestureEvent(e), this.disposables)); }\n    get onTouchStart() { return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'touchstart')).event, e => this.toTouchEvent(e), this.disposables); }\n    get onTap() { return Event.map(this.disposables.add(new DomEmitter(this.rowsContainer, TouchEventType.Tap)).event, e => this.toGestureEvent(e), this.disposables); }\n    toMouseEvent(browserEvent) {\n        const index = this.getItemIndexFromEventTarget(browserEvent.target || null);\n        const item = typeof index === 'undefined' ? undefined : this.items[index];\n        const element = item && item.element;\n        return { browserEvent, index, element };\n    }\n    toTouchEvent(browserEvent) {\n        const index = this.getItemIndexFromEventTarget(browserEvent.target || null);\n        const item = typeof index === 'undefined' ? undefined : this.items[index];\n        const element = item && item.element;\n        return { browserEvent, index, element };\n    }\n    toGestureEvent(browserEvent) {\n        const index = this.getItemIndexFromEventTarget(browserEvent.initialTarget || null);\n        const item = typeof index === 'undefined' ? undefined : this.items[index];\n        const element = item && item.element;\n        return { browserEvent, index, element };\n    }\n    toDragEvent(browserEvent) {\n        const index = this.getItemIndexFromEventTarget(browserEvent.target || null);\n        const item = typeof index === 'undefined' ? undefined : this.items[index];\n        const element = item && item.element;\n        const sector = this.getTargetSector(browserEvent, index);\n        return { browserEvent, index, element, sector };\n    }\n    onScroll(e) {\n        try {\n            const previousRenderRange = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n            this.render(previousRenderRange, e.scrollTop, e.height, e.scrollLeft, e.scrollWidth);\n            if (this.supportDynamicHeights) {\n                this._rerender(e.scrollTop, e.height, e.inSmoothScrolling);\n            }\n        }\n        catch (err) {\n            console.error('Got bad scroll event:', e);\n            throw err;\n        }\n    }\n    onTouchChange(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        this.scrollTop -= event.translationY;\n    }\n    // DND\n    onDragStart(element, uri, event) {\n        if (!event.dataTransfer) {\n            return;\n        }\n        const elements = this.dnd.getDragElements(element);\n        event.dataTransfer.effectAllowed = 'copyMove';\n        event.dataTransfer.setData(DataTransfers.TEXT, uri);\n        if (event.dataTransfer.setDragImage) {\n            let label;\n            if (this.dnd.getDragLabel) {\n                label = this.dnd.getDragLabel(elements, event);\n            }\n            if (typeof label === 'undefined') {\n                label = String(elements.length);\n            }\n            const dragImage = $('.monaco-drag-image');\n            dragImage.textContent = label;\n            const getDragImageContainer = (e) => {\n                while (e && !e.classList.contains('monaco-workbench')) {\n                    e = e.parentElement;\n                }\n                return e || this.domNode.ownerDocument;\n            };\n            const container = getDragImageContainer(this.domNode);\n            container.appendChild(dragImage);\n            event.dataTransfer.setDragImage(dragImage, -10, -10);\n            setTimeout(() => dragImage.remove(), 0);\n        }\n        this.domNode.classList.add('dragging');\n        this.currentDragData = new ElementsDragAndDropData(elements);\n        StaticDND.CurrentDragAndDropData = new ExternalElementsDragAndDropData(elements);\n        this.dnd.onDragStart?.(this.currentDragData, event);\n    }\n    onDragOver(event) {\n        event.browserEvent.preventDefault(); // needed so that the drop event fires (https://stackoverflow.com/questions/21339924/drop-event-not-firing-in-chrome)\n        this.onDragLeaveTimeout.dispose();\n        if (StaticDND.CurrentDragAndDropData && StaticDND.CurrentDragAndDropData.getData() === 'vscode-ui') {\n            return false;\n        }\n        this.setupDragAndDropScrollTopAnimation(event.browserEvent);\n        if (!event.browserEvent.dataTransfer) {\n            return false;\n        }\n        // Drag over from outside\n        if (!this.currentDragData) {\n            if (StaticDND.CurrentDragAndDropData) {\n                // Drag over from another list\n                this.currentDragData = StaticDND.CurrentDragAndDropData;\n            }\n            else {\n                // Drag over from the desktop\n                if (!event.browserEvent.dataTransfer.types) {\n                    return false;\n                }\n                this.currentDragData = new NativeDragAndDropData();\n            }\n        }\n        const result = this.dnd.onDragOver(this.currentDragData, event.element, event.index, event.sector, event.browserEvent);\n        this.canDrop = typeof result === 'boolean' ? result : result.accept;\n        if (!this.canDrop) {\n            this.currentDragFeedback = undefined;\n            this.currentDragFeedbackDisposable.dispose();\n            return false;\n        }\n        event.browserEvent.dataTransfer.dropEffect = (typeof result !== 'boolean' && result.effect?.type === 0 /* ListDragOverEffectType.Copy */) ? 'copy' : 'move';\n        let feedback;\n        if (typeof result !== 'boolean' && result.feedback) {\n            feedback = result.feedback;\n        }\n        else {\n            if (typeof event.index === 'undefined') {\n                feedback = [-1];\n            }\n            else {\n                feedback = [event.index];\n            }\n        }\n        // sanitize feedback list\n        feedback = distinct(feedback).filter(i => i >= -1 && i < this.length).sort((a, b) => a - b);\n        feedback = feedback[0] === -1 ? [-1] : feedback;\n        let dragOverEffectPosition = typeof result !== 'boolean' && result.effect && result.effect.position ? result.effect.position : \"drop-target\" /* ListDragOverEffectPosition.Over */;\n        if (equalsDragFeedback(this.currentDragFeedback, feedback) && this.currentDragFeedbackPosition === dragOverEffectPosition) {\n            return true;\n        }\n        this.currentDragFeedback = feedback;\n        this.currentDragFeedbackPosition = dragOverEffectPosition;\n        this.currentDragFeedbackDisposable.dispose();\n        if (feedback[0] === -1) { // entire list feedback\n            this.domNode.classList.add(dragOverEffectPosition);\n            this.rowsContainer.classList.add(dragOverEffectPosition);\n            this.currentDragFeedbackDisposable = toDisposable(() => {\n                this.domNode.classList.remove(dragOverEffectPosition);\n                this.rowsContainer.classList.remove(dragOverEffectPosition);\n            });\n        }\n        else {\n            if (feedback.length > 1 && dragOverEffectPosition !== \"drop-target\" /* ListDragOverEffectPosition.Over */) {\n                throw new Error('Can\\'t use multiple feedbacks with position different than \\'over\\'');\n            }\n            // Make sure there is no flicker when moving between two items\n            // Always use the before feedback if possible\n            if (dragOverEffectPosition === \"drop-target-after\" /* ListDragOverEffectPosition.After */) {\n                if (feedback[0] < this.length - 1) {\n                    feedback[0] += 1;\n                    dragOverEffectPosition = \"drop-target-before\" /* ListDragOverEffectPosition.Before */;\n                }\n            }\n            for (const index of feedback) {\n                const item = this.items[index];\n                item.dropTarget = true;\n                item.row?.domNode.classList.add(dragOverEffectPosition);\n            }\n            this.currentDragFeedbackDisposable = toDisposable(() => {\n                for (const index of feedback) {\n                    const item = this.items[index];\n                    item.dropTarget = false;\n                    item.row?.domNode.classList.remove(dragOverEffectPosition);\n                }\n            });\n        }\n        return true;\n    }\n    onDragLeave(event) {\n        this.onDragLeaveTimeout.dispose();\n        this.onDragLeaveTimeout = disposableTimeout(() => this.clearDragOverFeedback(), 100, this.disposables);\n        if (this.currentDragData) {\n            this.dnd.onDragLeave?.(this.currentDragData, event.element, event.index, event.browserEvent);\n        }\n    }\n    onDrop(event) {\n        if (!this.canDrop) {\n            return;\n        }\n        const dragData = this.currentDragData;\n        this.teardownDragAndDropScrollTopAnimation();\n        this.clearDragOverFeedback();\n        this.domNode.classList.remove('dragging');\n        this.currentDragData = undefined;\n        StaticDND.CurrentDragAndDropData = undefined;\n        if (!dragData || !event.browserEvent.dataTransfer) {\n            return;\n        }\n        event.browserEvent.preventDefault();\n        dragData.update(event.browserEvent.dataTransfer);\n        this.dnd.drop(dragData, event.element, event.index, event.sector, event.browserEvent);\n    }\n    onDragEnd(event) {\n        this.canDrop = false;\n        this.teardownDragAndDropScrollTopAnimation();\n        this.clearDragOverFeedback();\n        this.domNode.classList.remove('dragging');\n        this.currentDragData = undefined;\n        StaticDND.CurrentDragAndDropData = undefined;\n        this.dnd.onDragEnd?.(event);\n    }\n    clearDragOverFeedback() {\n        this.currentDragFeedback = undefined;\n        this.currentDragFeedbackPosition = undefined;\n        this.currentDragFeedbackDisposable.dispose();\n        this.currentDragFeedbackDisposable = Disposable.None;\n    }\n    // DND scroll top animation\n    setupDragAndDropScrollTopAnimation(event) {\n        if (!this.dragOverAnimationDisposable) {\n            const viewTop = getTopLeftOffset(this.domNode).top;\n            this.dragOverAnimationDisposable = animate(getWindow(this.domNode), this.animateDragAndDropScrollTop.bind(this, viewTop));\n        }\n        this.dragOverAnimationStopDisposable.dispose();\n        this.dragOverAnimationStopDisposable = disposableTimeout(() => {\n            if (this.dragOverAnimationDisposable) {\n                this.dragOverAnimationDisposable.dispose();\n                this.dragOverAnimationDisposable = undefined;\n            }\n        }, 1000, this.disposables);\n        this.dragOverMouseY = event.pageY;\n    }\n    animateDragAndDropScrollTop(viewTop) {\n        if (this.dragOverMouseY === undefined) {\n            return;\n        }\n        const diff = this.dragOverMouseY - viewTop;\n        const upperLimit = this.renderHeight - 35;\n        if (diff < 35) {\n            this.scrollTop += Math.max(-14, Math.floor(0.3 * (diff - 35)));\n        }\n        else if (diff > upperLimit) {\n            this.scrollTop += Math.min(14, Math.floor(0.3 * (diff - upperLimit)));\n        }\n    }\n    teardownDragAndDropScrollTopAnimation() {\n        this.dragOverAnimationStopDisposable.dispose();\n        if (this.dragOverAnimationDisposable) {\n            this.dragOverAnimationDisposable.dispose();\n            this.dragOverAnimationDisposable = undefined;\n        }\n    }\n    // Util\n    getTargetSector(browserEvent, targetIndex) {\n        if (targetIndex === undefined) {\n            return undefined;\n        }\n        const relativePosition = browserEvent.offsetY / this.items[targetIndex].size;\n        const sector = Math.floor(relativePosition / 0.25);\n        return clamp(sector, 0, 3);\n    }\n    getItemIndexFromEventTarget(target) {\n        const scrollableElement = this.scrollableElement.getDomNode();\n        let element = target;\n        while ((isHTMLElement(element) || isSVGElement(element)) && element !== this.rowsContainer && scrollableElement.contains(element)) {\n            const rawIndex = element.getAttribute('data-index');\n            if (rawIndex) {\n                const index = Number(rawIndex);\n                if (!isNaN(index)) {\n                    return index;\n                }\n            }\n            element = element.parentElement;\n        }\n        return undefined;\n    }\n    getRenderRange(renderTop, renderHeight) {\n        return {\n            start: this.rangeMap.indexAt(renderTop),\n            end: this.rangeMap.indexAfter(renderTop + renderHeight - 1)\n        };\n    }\n    /**\n     * Given a stable rendered state, checks every rendered element whether it needs\n     * to be probed for dynamic height. Adjusts scroll height and top if necessary.\n     */\n    _rerender(renderTop, renderHeight, inSmoothScrolling) {\n        const previousRenderRange = this.getRenderRange(renderTop, renderHeight);\n        // Let's remember the second element's position, this helps in scrolling up\n        // and preserving a linear upwards scroll movement\n        let anchorElementIndex;\n        let anchorElementTopDelta;\n        if (renderTop === this.elementTop(previousRenderRange.start)) {\n            anchorElementIndex = previousRenderRange.start;\n            anchorElementTopDelta = 0;\n        }\n        else if (previousRenderRange.end - previousRenderRange.start > 1) {\n            anchorElementIndex = previousRenderRange.start + 1;\n            anchorElementTopDelta = this.elementTop(anchorElementIndex) - renderTop;\n        }\n        let heightDiff = 0;\n        while (true) {\n            const renderRange = this.getRenderRange(renderTop, renderHeight);\n            let didChange = false;\n            for (let i = renderRange.start; i < renderRange.end; i++) {\n                const diff = this.probeDynamicHeight(i);\n                if (diff !== 0) {\n                    this.rangeMap.splice(i, 1, [this.items[i]]);\n                }\n                heightDiff += diff;\n                didChange = didChange || diff !== 0;\n            }\n            if (!didChange) {\n                if (heightDiff !== 0) {\n                    this.eventuallyUpdateScrollDimensions();\n                }\n                const unrenderRanges = Range.relativeComplement(previousRenderRange, renderRange);\n                for (const range of unrenderRanges) {\n                    for (let i = range.start; i < range.end; i++) {\n                        if (this.items[i].row) {\n                            this.removeItemFromDOM(i);\n                        }\n                    }\n                }\n                const renderRanges = Range.relativeComplement(renderRange, previousRenderRange).reverse();\n                for (const range of renderRanges) {\n                    for (let i = range.end - 1; i >= range.start; i--) {\n                        this.insertItemInDOM(i);\n                    }\n                }\n                for (let i = renderRange.start; i < renderRange.end; i++) {\n                    if (this.items[i].row) {\n                        this.updateItemInDOM(this.items[i], i);\n                    }\n                }\n                if (typeof anchorElementIndex === 'number') {\n                    // To compute a destination scroll top, we need to take into account the current smooth scrolling\n                    // animation, and then reuse it with a new target (to avoid prolonging the scroll)\n                    // See https://github.com/microsoft/vscode/issues/104144\n                    // See https://github.com/microsoft/vscode/pull/104284\n                    // See https://github.com/microsoft/vscode/issues/107704\n                    const deltaScrollTop = this.scrollable.getFutureScrollPosition().scrollTop - renderTop;\n                    const newScrollTop = this.elementTop(anchorElementIndex) - anchorElementTopDelta + deltaScrollTop;\n                    this.setScrollTop(newScrollTop, inSmoothScrolling);\n                }\n                this._onDidChangeContentHeight.fire(this.contentHeight);\n                return;\n            }\n        }\n    }\n    probeDynamicHeight(index) {\n        const item = this.items[index];\n        if (!!this.virtualDelegate.getDynamicHeight) {\n            const newSize = this.virtualDelegate.getDynamicHeight(item.element);\n            if (newSize !== null) {\n                const size = item.size;\n                item.size = newSize;\n                item.lastDynamicHeightWidth = this.renderWidth;\n                return newSize - size;\n            }\n        }\n        if (!item.hasDynamicHeight || item.lastDynamicHeightWidth === this.renderWidth) {\n            return 0;\n        }\n        if (!!this.virtualDelegate.hasDynamicHeight && !this.virtualDelegate.hasDynamicHeight(item.element)) {\n            return 0;\n        }\n        const size = item.size;\n        if (item.row) {\n            item.row.domNode.style.height = '';\n            item.size = item.row.domNode.offsetHeight;\n            if (item.size === 0 && !isAncestor(item.row.domNode, getWindow(item.row.domNode).document.body)) {\n                console.warn('Measuring item node that is not in DOM! Add ListView to the DOM before measuring row height!', new Error().stack);\n            }\n            item.lastDynamicHeightWidth = this.renderWidth;\n            return item.size - size;\n        }\n        const { row } = this.cache.alloc(item.templateId);\n        row.domNode.style.height = '';\n        this.rowsContainer.appendChild(row.domNode);\n        const renderer = this.renderers.get(item.templateId);\n        if (!renderer) {\n            throw new BugIndicatingError('Missing renderer for templateId: ' + item.templateId);\n        }\n        renderer.renderElement(item.element, index, row.templateData, undefined);\n        item.size = row.domNode.offsetHeight;\n        renderer.disposeElement?.(item.element, index, row.templateData, undefined);\n        this.virtualDelegate.setDynamicHeight?.(item.element, item.size);\n        item.lastDynamicHeightWidth = this.renderWidth;\n        row.domNode.remove();\n        this.cache.release(row);\n        return item.size - size;\n    }\n    getElementDomId(index) {\n        return `${this.domId}_${index}`;\n    }\n    // Dispose\n    dispose() {\n        for (const item of this.items) {\n            item.dragStartDisposable.dispose();\n            item.checkedDisposable.dispose();\n            if (item.row) {\n                const renderer = this.renderers.get(item.row.templateId);\n                if (renderer) {\n                    renderer.disposeElement?.(item.element, -1, item.row.templateData, undefined);\n                    renderer.disposeTemplate(item.row.templateData);\n                }\n            }\n        }\n        this.items = [];\n        this.domNode?.remove();\n        this.dragOverAnimationDisposable?.dispose();\n        this.disposables.dispose();\n    }\n}\n__decorate([\n    memoize\n], ListView.prototype, \"onMouseClick\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onMouseDblClick\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onMouseMiddleClick\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onMouseDown\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onMouseOver\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onMouseOut\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onContextMenu\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onTouchStart\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onTap\", null);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { asCssValueWithDefault, createStyleSheet, EventHelper, getActiveElement, getWindow, isHTMLElement, isMouseEvent } from '../../dom.js';\nimport { DomEmitter } from '../../event.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { Gesture } from '../../touch.js';\nimport { alert } from '../aria/aria.js';\nimport { CombinedSpliceable } from './splice.js';\nimport { binarySearch, firstOrDefault, range } from '../../../common/arrays.js';\nimport { timeout } from '../../../common/async.js';\nimport { Color } from '../../../common/color.js';\nimport { memoize } from '../../../common/decorators.js';\nimport { Emitter, Event, EventBufferer } from '../../../common/event.js';\nimport { matchesFuzzy2, matchesPrefix } from '../../../common/filters.js';\nimport { DisposableStore, dispose } from '../../../common/lifecycle.js';\nimport { clamp } from '../../../common/numbers.js';\nimport * as platform from '../../../common/platform.js';\nimport { isNumber } from '../../../common/types.js';\nimport './list.css';\nimport { ListError } from './list.js';\nimport { ListView } from './listView.js';\nimport { StandardMouseEvent } from '../../mouseEvent.js';\nimport { autorun, constObservable } from '../../../common/observable.js';\nclass TraitRenderer {\n    constructor(trait) {\n        this.trait = trait;\n        this.renderedElements = [];\n    }\n    get templateId() {\n        return `template:${this.trait.name}`;\n    }\n    renderTemplate(container) {\n        return container;\n    }\n    renderElement(element, index, templateData) {\n        const renderedElementIndex = this.renderedElements.findIndex(el => el.templateData === templateData);\n        if (renderedElementIndex >= 0) {\n            const rendered = this.renderedElements[renderedElementIndex];\n            this.trait.unrender(templateData);\n            rendered.index = index;\n        }\n        else {\n            const rendered = { index, templateData };\n            this.renderedElements.push(rendered);\n        }\n        this.trait.renderIndex(index, templateData);\n    }\n    splice(start, deleteCount, insertCount) {\n        const rendered = [];\n        for (const renderedElement of this.renderedElements) {\n            if (renderedElement.index < start) {\n                rendered.push(renderedElement);\n            }\n            else if (renderedElement.index >= start + deleteCount) {\n                rendered.push({\n                    index: renderedElement.index + insertCount - deleteCount,\n                    templateData: renderedElement.templateData\n                });\n            }\n        }\n        this.renderedElements = rendered;\n    }\n    renderIndexes(indexes) {\n        for (const { index, templateData } of this.renderedElements) {\n            if (indexes.indexOf(index) > -1) {\n                this.trait.renderIndex(index, templateData);\n            }\n        }\n    }\n    disposeTemplate(templateData) {\n        const index = this.renderedElements.findIndex(el => el.templateData === templateData);\n        if (index < 0) {\n            return;\n        }\n        this.renderedElements.splice(index, 1);\n    }\n}\nclass Trait {\n    get name() { return this._trait; }\n    get renderer() {\n        return new TraitRenderer(this);\n    }\n    constructor(_trait) {\n        this._trait = _trait;\n        this.indexes = [];\n        this.sortedIndexes = [];\n        this._onChange = new Emitter();\n        this.onChange = this._onChange.event;\n    }\n    splice(start, deleteCount, elements) {\n        const diff = elements.length - deleteCount;\n        const end = start + deleteCount;\n        const sortedIndexes = [];\n        let i = 0;\n        while (i < this.sortedIndexes.length && this.sortedIndexes[i] < start) {\n            sortedIndexes.push(this.sortedIndexes[i++]);\n        }\n        for (let j = 0; j < elements.length; j++) {\n            if (elements[j]) {\n                sortedIndexes.push(j + start);\n            }\n        }\n        while (i < this.sortedIndexes.length && this.sortedIndexes[i] >= end) {\n            sortedIndexes.push(this.sortedIndexes[i++] + diff);\n        }\n        this.renderer.splice(start, deleteCount, elements.length);\n        this._set(sortedIndexes, sortedIndexes);\n    }\n    renderIndex(index, container) {\n        container.classList.toggle(this._trait, this.contains(index));\n    }\n    unrender(container) {\n        container.classList.remove(this._trait);\n    }\n    /**\n     * Sets the indexes which should have this trait.\n     *\n     * @param indexes Indexes which should have this trait.\n     * @return The old indexes which had this trait.\n     */\n    set(indexes, browserEvent) {\n        return this._set(indexes, [...indexes].sort(numericSort), browserEvent);\n    }\n    _set(indexes, sortedIndexes, browserEvent) {\n        const result = this.indexes;\n        const sortedResult = this.sortedIndexes;\n        this.indexes = indexes;\n        this.sortedIndexes = sortedIndexes;\n        const toRender = disjunction(sortedResult, indexes);\n        this.renderer.renderIndexes(toRender);\n        this._onChange.fire({ indexes, browserEvent });\n        return result;\n    }\n    get() {\n        return this.indexes;\n    }\n    contains(index) {\n        return binarySearch(this.sortedIndexes, index, numericSort) >= 0;\n    }\n    dispose() {\n        dispose(this._onChange);\n    }\n}\n__decorate([\n    memoize\n], Trait.prototype, \"renderer\", null);\nclass SelectionTrait extends Trait {\n    constructor(setAriaSelected) {\n        super('selected');\n        this.setAriaSelected = setAriaSelected;\n    }\n    renderIndex(index, container) {\n        super.renderIndex(index, container);\n        if (this.setAriaSelected) {\n            if (this.contains(index)) {\n                container.setAttribute('aria-selected', 'true');\n            }\n            else {\n                container.setAttribute('aria-selected', 'false');\n            }\n        }\n    }\n}\n/**\n * The TraitSpliceable is used as a util class to be able\n * to preserve traits across splice calls, given an identity\n * provider.\n */\nclass TraitSpliceable {\n    constructor(trait, view, identityProvider) {\n        this.trait = trait;\n        this.view = view;\n        this.identityProvider = identityProvider;\n    }\n    splice(start, deleteCount, elements) {\n        if (!this.identityProvider) {\n            return this.trait.splice(start, deleteCount, new Array(elements.length).fill(false));\n        }\n        const pastElementsWithTrait = this.trait.get().map(i => this.identityProvider.getId(this.view.element(i)).toString());\n        if (pastElementsWithTrait.length === 0) {\n            return this.trait.splice(start, deleteCount, new Array(elements.length).fill(false));\n        }\n        const pastElementsWithTraitSet = new Set(pastElementsWithTrait);\n        const elementsWithTrait = elements.map(e => pastElementsWithTraitSet.has(this.identityProvider.getId(e).toString()));\n        this.trait.splice(start, deleteCount, elementsWithTrait);\n    }\n}\nexport function isInputElement(e) {\n    return e.tagName === 'INPUT' || e.tagName === 'TEXTAREA';\n}\nfunction isListElementDescendantOfClass(e, className) {\n    if (e.classList.contains(className)) {\n        return true;\n    }\n    if (e.classList.contains('monaco-list')) {\n        return false;\n    }\n    if (!e.parentElement) {\n        return false;\n    }\n    return isListElementDescendantOfClass(e.parentElement, className);\n}\nexport function isMonacoEditor(e) {\n    return isListElementDescendantOfClass(e, 'monaco-editor');\n}\nexport function isMonacoCustomToggle(e) {\n    return isListElementDescendantOfClass(e, 'monaco-custom-toggle');\n}\nexport function isActionItem(e) {\n    return isListElementDescendantOfClass(e, 'action-item');\n}\nexport function isStickyScrollElement(e) {\n    return isListElementDescendantOfClass(e, 'monaco-tree-sticky-row');\n}\nexport function isStickyScrollContainer(e) {\n    return e.classList.contains('monaco-tree-sticky-container');\n}\nexport function isButton(e) {\n    if ((e.tagName === 'A' && e.classList.contains('monaco-button')) ||\n        (e.tagName === 'DIV' && e.classList.contains('monaco-button-dropdown'))) {\n        return true;\n    }\n    if (e.classList.contains('monaco-list')) {\n        return false;\n    }\n    if (!e.parentElement) {\n        return false;\n    }\n    return isButton(e.parentElement);\n}\nclass KeyboardController {\n    get onKeyDown() {\n        return Event.chain(this.disposables.add(new DomEmitter(this.view.domNode, 'keydown')).event, $ => $.filter(e => !isInputElement(e.target))\n            .map(e => new StandardKeyboardEvent(e)));\n    }\n    constructor(list, view, options) {\n        this.list = list;\n        this.view = view;\n        this.disposables = new DisposableStore();\n        this.multipleSelectionDisposables = new DisposableStore();\n        this.multipleSelectionSupport = options.multipleSelectionSupport;\n        this.disposables.add(this.onKeyDown(e => {\n            switch (e.keyCode) {\n                case 3 /* KeyCode.Enter */:\n                    return this.onEnter(e);\n                case 16 /* KeyCode.UpArrow */:\n                    return this.onUpArrow(e);\n                case 18 /* KeyCode.DownArrow */:\n                    return this.onDownArrow(e);\n                case 11 /* KeyCode.PageUp */:\n                    return this.onPageUpArrow(e);\n                case 12 /* KeyCode.PageDown */:\n                    return this.onPageDownArrow(e);\n                case 9 /* KeyCode.Escape */:\n                    return this.onEscape(e);\n                case 31 /* KeyCode.KeyA */:\n                    if (this.multipleSelectionSupport && (platform.isMacintosh ? e.metaKey : e.ctrlKey)) {\n                        this.onCtrlA(e);\n                    }\n            }\n        }));\n    }\n    updateOptions(optionsUpdate) {\n        if (optionsUpdate.multipleSelectionSupport !== undefined) {\n            this.multipleSelectionSupport = optionsUpdate.multipleSelectionSupport;\n        }\n    }\n    onEnter(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.list.setSelection(this.list.getFocus(), e.browserEvent);\n    }\n    onUpArrow(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.list.focusPrevious(1, false, e.browserEvent);\n        const el = this.list.getFocus()[0];\n        this.list.setAnchor(el);\n        this.list.reveal(el);\n        this.view.domNode.focus();\n    }\n    onDownArrow(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.list.focusNext(1, false, e.browserEvent);\n        const el = this.list.getFocus()[0];\n        this.list.setAnchor(el);\n        this.list.reveal(el);\n        this.view.domNode.focus();\n    }\n    onPageUpArrow(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.list.focusPreviousPage(e.browserEvent);\n        const el = this.list.getFocus()[0];\n        this.list.setAnchor(el);\n        this.list.reveal(el);\n        this.view.domNode.focus();\n    }\n    onPageDownArrow(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.list.focusNextPage(e.browserEvent);\n        const el = this.list.getFocus()[0];\n        this.list.setAnchor(el);\n        this.list.reveal(el);\n        this.view.domNode.focus();\n    }\n    onCtrlA(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.list.setSelection(range(this.list.length), e.browserEvent);\n        this.list.setAnchor(undefined);\n        this.view.domNode.focus();\n    }\n    onEscape(e) {\n        if (this.list.getSelection().length) {\n            e.preventDefault();\n            e.stopPropagation();\n            this.list.setSelection([], e.browserEvent);\n            this.list.setAnchor(undefined);\n            this.view.domNode.focus();\n        }\n    }\n    dispose() {\n        this.disposables.dispose();\n        this.multipleSelectionDisposables.dispose();\n    }\n}\n__decorate([\n    memoize\n], KeyboardController.prototype, \"onKeyDown\", null);\nexport var TypeNavigationMode;\n(function (TypeNavigationMode) {\n    TypeNavigationMode[TypeNavigationMode[\"Automatic\"] = 0] = \"Automatic\";\n    TypeNavigationMode[TypeNavigationMode[\"Trigger\"] = 1] = \"Trigger\";\n})(TypeNavigationMode || (TypeNavigationMode = {}));\nvar TypeNavigationControllerState;\n(function (TypeNavigationControllerState) {\n    TypeNavigationControllerState[TypeNavigationControllerState[\"Idle\"] = 0] = \"Idle\";\n    TypeNavigationControllerState[TypeNavigationControllerState[\"Typing\"] = 1] = \"Typing\";\n})(TypeNavigationControllerState || (TypeNavigationControllerState = {}));\nexport const DefaultKeyboardNavigationDelegate = new class {\n    mightProducePrintableCharacter(event) {\n        if (event.ctrlKey || event.metaKey || event.altKey) {\n            return false;\n        }\n        return (event.keyCode >= 31 /* KeyCode.KeyA */ && event.keyCode <= 56 /* KeyCode.KeyZ */)\n            || (event.keyCode >= 21 /* KeyCode.Digit0 */ && event.keyCode <= 30 /* KeyCode.Digit9 */)\n            || (event.keyCode >= 98 /* KeyCode.Numpad0 */ && event.keyCode <= 107 /* KeyCode.Numpad9 */)\n            || (event.keyCode >= 85 /* KeyCode.Semicolon */ && event.keyCode <= 95 /* KeyCode.Quote */);\n    }\n};\nclass TypeNavigationController {\n    constructor(list, view, keyboardNavigationLabelProvider, keyboardNavigationEventFilter, delegate) {\n        this.list = list;\n        this.view = view;\n        this.keyboardNavigationLabelProvider = keyboardNavigationLabelProvider;\n        this.keyboardNavigationEventFilter = keyboardNavigationEventFilter;\n        this.delegate = delegate;\n        this.enabled = false;\n        this.state = TypeNavigationControllerState.Idle;\n        this.mode = TypeNavigationMode.Automatic;\n        this.triggered = false;\n        this.previouslyFocused = -1;\n        this.enabledDisposables = new DisposableStore();\n        this.disposables = new DisposableStore();\n        this.updateOptions(list.options);\n    }\n    updateOptions(options) {\n        if (options.typeNavigationEnabled ?? true) {\n            this.enable();\n        }\n        else {\n            this.disable();\n        }\n        this.mode = options.typeNavigationMode ?? TypeNavigationMode.Automatic;\n    }\n    enable() {\n        if (this.enabled) {\n            return;\n        }\n        let typing = false;\n        const onChar = Event.chain(this.enabledDisposables.add(new DomEmitter(this.view.domNode, 'keydown')).event, $ => $.filter(e => !isInputElement(e.target))\n            .filter(() => this.mode === TypeNavigationMode.Automatic || this.triggered)\n            .map(event => new StandardKeyboardEvent(event))\n            .filter(e => typing || this.keyboardNavigationEventFilter(e))\n            .filter(e => this.delegate.mightProducePrintableCharacter(e))\n            .forEach(e => EventHelper.stop(e, true))\n            .map(event => event.browserEvent.key));\n        const onClear = Event.debounce(onChar, () => null, 800, undefined, undefined, undefined, this.enabledDisposables);\n        const onInput = Event.reduce(Event.any(onChar, onClear), (r, i) => i === null ? null : ((r || '') + i), undefined, this.enabledDisposables);\n        onInput(this.onInput, this, this.enabledDisposables);\n        onClear(this.onClear, this, this.enabledDisposables);\n        onChar(() => typing = true, undefined, this.enabledDisposables);\n        onClear(() => typing = false, undefined, this.enabledDisposables);\n        this.enabled = true;\n        this.triggered = false;\n    }\n    disable() {\n        if (!this.enabled) {\n            return;\n        }\n        this.enabledDisposables.clear();\n        this.enabled = false;\n        this.triggered = false;\n    }\n    onClear() {\n        const focus = this.list.getFocus();\n        if (focus.length > 0 && focus[0] === this.previouslyFocused) {\n            // List: re-announce element on typing end since typed keys will interrupt aria label of focused element\n            // Do not announce if there was a focus change at the end to prevent duplication https://github.com/microsoft/vscode/issues/95961\n            const ariaLabel = this.list.options.accessibilityProvider?.getAriaLabel(this.list.element(focus[0]));\n            if (typeof ariaLabel === 'string') {\n                alert(ariaLabel);\n            }\n            else if (ariaLabel) {\n                alert(ariaLabel.get());\n            }\n        }\n        this.previouslyFocused = -1;\n    }\n    onInput(word) {\n        if (!word) {\n            this.state = TypeNavigationControllerState.Idle;\n            this.triggered = false;\n            return;\n        }\n        const focus = this.list.getFocus();\n        const start = focus.length > 0 ? focus[0] : 0;\n        const delta = this.state === TypeNavigationControllerState.Idle ? 1 : 0;\n        this.state = TypeNavigationControllerState.Typing;\n        for (let i = 0; i < this.list.length; i++) {\n            const index = (start + i + delta) % this.list.length;\n            const label = this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(index));\n            const labelStr = label && label.toString();\n            if (this.list.options.typeNavigationEnabled) {\n                if (typeof labelStr !== 'undefined') {\n                    // If prefix is found, focus and return early\n                    if (matchesPrefix(word, labelStr)) {\n                        this.previouslyFocused = start;\n                        this.list.setFocus([index]);\n                        this.list.reveal(index);\n                        return;\n                    }\n                    const fuzzy = matchesFuzzy2(word, labelStr);\n                    if (fuzzy) {\n                        const fuzzyScore = fuzzy[0].end - fuzzy[0].start;\n                        // ensures that when fuzzy matching, doesn't clash with prefix matching (1 input vs 1+ should be prefix and fuzzy respecitvely). Also makes sure that exact matches are prioritized.\n                        if (fuzzyScore > 1 && fuzzy.length === 1) {\n                            this.previouslyFocused = start;\n                            this.list.setFocus([index]);\n                            this.list.reveal(index);\n                            return;\n                        }\n                    }\n                }\n            }\n            else if (typeof labelStr === 'undefined' || matchesPrefix(word, labelStr)) {\n                this.previouslyFocused = start;\n                this.list.setFocus([index]);\n                this.list.reveal(index);\n                return;\n            }\n        }\n    }\n    dispose() {\n        this.disable();\n        this.enabledDisposables.dispose();\n        this.disposables.dispose();\n    }\n}\nclass DOMFocusController {\n    constructor(list, view) {\n        this.list = list;\n        this.view = view;\n        this.disposables = new DisposableStore();\n        const onKeyDown = Event.chain(this.disposables.add(new DomEmitter(view.domNode, 'keydown')).event, $ => $\n            .filter(e => !isInputElement(e.target))\n            .map(e => new StandardKeyboardEvent(e)));\n        const onTab = Event.chain(onKeyDown, $ => $.filter(e => e.keyCode === 2 /* KeyCode.Tab */ && !e.ctrlKey && !e.metaKey && !e.shiftKey && !e.altKey));\n        onTab(this.onTab, this, this.disposables);\n    }\n    onTab(e) {\n        if (e.target !== this.view.domNode) {\n            return;\n        }\n        const focus = this.list.getFocus();\n        if (focus.length === 0) {\n            return;\n        }\n        const focusedDomElement = this.view.domElement(focus[0]);\n        if (!focusedDomElement) {\n            return;\n        }\n        const tabIndexElement = focusedDomElement.querySelector('[tabIndex]');\n        if (!tabIndexElement || !(isHTMLElement(tabIndexElement)) || tabIndexElement.tabIndex === -1) {\n            return;\n        }\n        const style = getWindow(tabIndexElement).getComputedStyle(tabIndexElement);\n        if (style.visibility === 'hidden' || style.display === 'none') {\n            return;\n        }\n        e.preventDefault();\n        e.stopPropagation();\n        tabIndexElement.focus();\n    }\n    dispose() {\n        this.disposables.dispose();\n    }\n}\nexport function isSelectionSingleChangeEvent(event) {\n    return platform.isMacintosh ? event.browserEvent.metaKey : event.browserEvent.ctrlKey;\n}\nexport function isSelectionRangeChangeEvent(event) {\n    return event.browserEvent.shiftKey;\n}\nfunction isMouseRightClick(event) {\n    return isMouseEvent(event) && event.button === 2;\n}\nconst DefaultMultipleSelectionController = {\n    isSelectionSingleChangeEvent,\n    isSelectionRangeChangeEvent\n};\nexport class MouseController {\n    constructor(list) {\n        this.list = list;\n        this.disposables = new DisposableStore();\n        this._onPointer = new Emitter();\n        this.onPointer = this._onPointer.event;\n        if (list.options.multipleSelectionSupport !== false) {\n            this.multipleSelectionController = this.list.options.multipleSelectionController || DefaultMultipleSelectionController;\n        }\n        this.mouseSupport = typeof list.options.mouseSupport === 'undefined' || !!list.options.mouseSupport;\n        if (this.mouseSupport) {\n            list.onMouseDown(this.onMouseDown, this, this.disposables);\n            list.onContextMenu(this.onContextMenu, this, this.disposables);\n            list.onMouseDblClick(this.onDoubleClick, this, this.disposables);\n            list.onTouchStart(this.onMouseDown, this, this.disposables);\n            this.disposables.add(Gesture.addTarget(list.getHTMLElement()));\n        }\n        Event.any(list.onMouseClick, list.onMouseMiddleClick, list.onTap)(this.onViewPointer, this, this.disposables);\n    }\n    updateOptions(optionsUpdate) {\n        if (optionsUpdate.multipleSelectionSupport !== undefined) {\n            this.multipleSelectionController = undefined;\n            if (optionsUpdate.multipleSelectionSupport) {\n                this.multipleSelectionController = this.list.options.multipleSelectionController || DefaultMultipleSelectionController;\n            }\n        }\n    }\n    isSelectionSingleChangeEvent(event) {\n        if (!this.multipleSelectionController) {\n            return false;\n        }\n        return this.multipleSelectionController.isSelectionSingleChangeEvent(event);\n    }\n    isSelectionRangeChangeEvent(event) {\n        if (!this.multipleSelectionController) {\n            return false;\n        }\n        return this.multipleSelectionController.isSelectionRangeChangeEvent(event);\n    }\n    isSelectionChangeEvent(event) {\n        return this.isSelectionSingleChangeEvent(event) || this.isSelectionRangeChangeEvent(event);\n    }\n    onMouseDown(e) {\n        if (isMonacoEditor(e.browserEvent.target)) {\n            return;\n        }\n        if (getActiveElement() !== e.browserEvent.target) {\n            this.list.domFocus();\n        }\n    }\n    onContextMenu(e) {\n        if (isInputElement(e.browserEvent.target) || isMonacoEditor(e.browserEvent.target)) {\n            return;\n        }\n        const focus = typeof e.index === 'undefined' ? [] : [e.index];\n        this.list.setFocus(focus, e.browserEvent);\n    }\n    onViewPointer(e) {\n        if (!this.mouseSupport) {\n            return;\n        }\n        if (isInputElement(e.browserEvent.target) || isMonacoEditor(e.browserEvent.target)) {\n            return;\n        }\n        if (e.browserEvent.isHandledByList) {\n            return;\n        }\n        e.browserEvent.isHandledByList = true;\n        const focus = e.index;\n        if (typeof focus === 'undefined') {\n            this.list.setFocus([], e.browserEvent);\n            this.list.setSelection([], e.browserEvent);\n            this.list.setAnchor(undefined);\n            return;\n        }\n        if (this.isSelectionChangeEvent(e)) {\n            return this.changeSelection(e);\n        }\n        this.list.setFocus([focus], e.browserEvent);\n        this.list.setAnchor(focus);\n        if (!isMouseRightClick(e.browserEvent)) {\n            this.list.setSelection([focus], e.browserEvent);\n        }\n        this._onPointer.fire(e);\n    }\n    onDoubleClick(e) {\n        if (isInputElement(e.browserEvent.target) || isMonacoEditor(e.browserEvent.target)) {\n            return;\n        }\n        if (this.isSelectionChangeEvent(e)) {\n            return;\n        }\n        if (e.browserEvent.isHandledByList) {\n            return;\n        }\n        e.browserEvent.isHandledByList = true;\n        const focus = this.list.getFocus();\n        this.list.setSelection(focus, e.browserEvent);\n    }\n    changeSelection(e) {\n        const focus = e.index;\n        let anchor = this.list.getAnchor();\n        if (this.isSelectionRangeChangeEvent(e)) {\n            if (typeof anchor === 'undefined') {\n                const currentFocus = this.list.getFocus()[0];\n                anchor = currentFocus ?? focus;\n                this.list.setAnchor(anchor);\n            }\n            const min = Math.min(anchor, focus);\n            const max = Math.max(anchor, focus);\n            const rangeSelection = range(min, max + 1);\n            const selection = this.list.getSelection();\n            const contiguousRange = getContiguousRangeContaining(disjunction(selection, [anchor]), anchor);\n            if (contiguousRange.length === 0) {\n                return;\n            }\n            const newSelection = disjunction(rangeSelection, relativeComplement(selection, contiguousRange));\n            this.list.setSelection(newSelection, e.browserEvent);\n            this.list.setFocus([focus], e.browserEvent);\n        }\n        else if (this.isSelectionSingleChangeEvent(e)) {\n            const selection = this.list.getSelection();\n            const newSelection = selection.filter(i => i !== focus);\n            this.list.setFocus([focus]);\n            this.list.setAnchor(focus);\n            if (selection.length === newSelection.length) {\n                this.list.setSelection([...newSelection, focus], e.browserEvent);\n            }\n            else {\n                this.list.setSelection(newSelection, e.browserEvent);\n            }\n        }\n    }\n    dispose() {\n        this.disposables.dispose();\n    }\n}\nexport class DefaultStyleController {\n    constructor(styleElement, selectorSuffix) {\n        this.styleElement = styleElement;\n        this.selectorSuffix = selectorSuffix;\n    }\n    style(styles) {\n        const suffix = this.selectorSuffix && `.${this.selectorSuffix}`;\n        const content = [];\n        if (styles.listBackground) {\n            content.push(`.monaco-list${suffix} .monaco-list-rows { background: ${styles.listBackground}; }`);\n        }\n        if (styles.listFocusBackground) {\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.focused { background-color: ${styles.listFocusBackground}; }`);\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.focused:hover { background-color: ${styles.listFocusBackground}; }`); // overwrite :hover style in this case!\n        }\n        if (styles.listFocusForeground) {\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.focused { color: ${styles.listFocusForeground}; }`);\n        }\n        if (styles.listActiveSelectionBackground) {\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.selected { background-color: ${styles.listActiveSelectionBackground}; }`);\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.selected:hover { background-color: ${styles.listActiveSelectionBackground}; }`); // overwrite :hover style in this case!\n        }\n        if (styles.listActiveSelectionForeground) {\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.selected { color: ${styles.listActiveSelectionForeground}; }`);\n        }\n        if (styles.listActiveSelectionIconForeground) {\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.selected .codicon { color: ${styles.listActiveSelectionIconForeground}; }`);\n        }\n        if (styles.listFocusAndSelectionBackground) {\n            content.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${suffix}:focus .monaco-list-row.selected.focused { background-color: ${styles.listFocusAndSelectionBackground}; }\n\t\t\t`);\n        }\n        if (styles.listFocusAndSelectionForeground) {\n            content.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${suffix}:focus .monaco-list-row.selected.focused { color: ${styles.listFocusAndSelectionForeground}; }\n\t\t\t`);\n        }\n        if (styles.listInactiveFocusForeground) {\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused { color:  ${styles.listInactiveFocusForeground}; }`);\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused:hover { color:  ${styles.listInactiveFocusForeground}; }`); // overwrite :hover style in this case!\n        }\n        if (styles.listInactiveSelectionIconForeground) {\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused .codicon { color:  ${styles.listInactiveSelectionIconForeground}; }`);\n        }\n        if (styles.listInactiveFocusBackground) {\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused { background-color:  ${styles.listInactiveFocusBackground}; }`);\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused:hover { background-color:  ${styles.listInactiveFocusBackground}; }`); // overwrite :hover style in this case!\n        }\n        if (styles.listInactiveSelectionBackground) {\n            content.push(`.monaco-list${suffix} .monaco-list-row.selected { background-color:  ${styles.listInactiveSelectionBackground}; }`);\n            content.push(`.monaco-list${suffix} .monaco-list-row.selected:hover { background-color:  ${styles.listInactiveSelectionBackground}; }`); // overwrite :hover style in this case!\n        }\n        if (styles.listInactiveSelectionForeground) {\n            content.push(`.monaco-list${suffix} .monaco-list-row.selected { color: ${styles.listInactiveSelectionForeground}; }`);\n        }\n        if (styles.listHoverBackground) {\n            content.push(`.monaco-list${suffix}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${styles.listHoverBackground}; }`);\n        }\n        if (styles.listHoverForeground) {\n            content.push(`.monaco-list${suffix}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${styles.listHoverForeground}; }`);\n        }\n        /**\n         * Outlines\n         */\n        const focusAndSelectionOutline = asCssValueWithDefault(styles.listFocusAndSelectionOutline, asCssValueWithDefault(styles.listSelectionOutline, styles.listFocusOutline ?? ''));\n        if (focusAndSelectionOutline) { // default: listFocusOutline\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.focused.selected { outline: 1px solid ${focusAndSelectionOutline}; outline-offset: -1px;}`);\n        }\n        if (styles.listFocusOutline) { // default: set\n            content.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${suffix}:focus .monaco-list-row.focused { outline: 1px solid ${styles.listFocusOutline}; outline-offset: -1px; }\n\t\t\t\t.monaco-workbench.context-menu-visible .monaco-list${suffix}.last-focused .monaco-list-row.focused { outline: 1px solid ${styles.listFocusOutline}; outline-offset: -1px; }\n\t\t\t`);\n        }\n        const inactiveFocusAndSelectionOutline = asCssValueWithDefault(styles.listSelectionOutline, styles.listInactiveFocusOutline ?? '');\n        if (inactiveFocusAndSelectionOutline) {\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused.selected { outline: 1px dotted ${inactiveFocusAndSelectionOutline}; outline-offset: -1px; }`);\n        }\n        if (styles.listSelectionOutline) { // default: activeContrastBorder\n            content.push(`.monaco-list${suffix} .monaco-list-row.selected { outline: 1px dotted ${styles.listSelectionOutline}; outline-offset: -1px; }`);\n        }\n        if (styles.listInactiveFocusOutline) { // default: null\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused { outline: 1px dotted ${styles.listInactiveFocusOutline}; outline-offset: -1px; }`);\n        }\n        if (styles.listHoverOutline) { // default: activeContrastBorder\n            content.push(`.monaco-list${suffix} .monaco-list-row:hover { outline: 1px dashed ${styles.listHoverOutline}; outline-offset: -1px; }`);\n        }\n        if (styles.listDropOverBackground) {\n            content.push(`\n\t\t\t\t.monaco-list${suffix}.drop-target,\n\t\t\t\t.monaco-list${suffix} .monaco-list-rows.drop-target,\n\t\t\t\t.monaco-list${suffix} .monaco-list-row.drop-target { background-color: ${styles.listDropOverBackground} !important; color: inherit !important; }\n\t\t\t`);\n        }\n        if (styles.listDropBetweenBackground) {\n            content.push(`\n\t\t\t.monaco-list${suffix} .monaco-list-rows.drop-target-before .monaco-list-row:first-child::before,\n\t\t\t.monaco-list${suffix} .monaco-list-row.drop-target-before::before {\n\t\t\t\tcontent: \"\"; position: absolute; top: 0px; left: 0px; width: 100%; height: 1px;\n\t\t\t\tbackground-color: ${styles.listDropBetweenBackground};\n\t\t\t}`);\n            content.push(`\n\t\t\t.monaco-list${suffix} .monaco-list-rows.drop-target-after .monaco-list-row:last-child::after,\n\t\t\t.monaco-list${suffix} .monaco-list-row.drop-target-after::after {\n\t\t\t\tcontent: \"\"; position: absolute; bottom: 0px; left: 0px; width: 100%; height: 1px;\n\t\t\t\tbackground-color: ${styles.listDropBetweenBackground};\n\t\t\t}`);\n        }\n        if (styles.tableColumnsBorder) {\n            content.push(`\n\t\t\t\t.monaco-table > .monaco-split-view2,\n\t\t\t\t.monaco-table > .monaco-split-view2 .monaco-sash.vertical::before,\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2,\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\t\t\tborder-color: ${styles.tableColumnsBorder};\n\t\t\t\t}\n\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2,\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\t\t\tborder-color: transparent;\n\t\t\t\t}\n\t\t\t`);\n        }\n        if (styles.tableOddRowsBackgroundColor) {\n            content.push(`\n\t\t\t\t.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,\n\t\t\t\t.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,\n\t\t\t\t.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {\n\t\t\t\t\tbackground-color: ${styles.tableOddRowsBackgroundColor};\n\t\t\t\t}\n\t\t\t`);\n        }\n        this.styleElement.textContent = content.join('\\n');\n    }\n}\nexport const unthemedListStyles = {\n    listFocusBackground: '#7FB0D0',\n    listActiveSelectionBackground: '#0E639C',\n    listActiveSelectionForeground: '#FFFFFF',\n    listActiveSelectionIconForeground: '#FFFFFF',\n    listFocusAndSelectionOutline: '#90C2F9',\n    listFocusAndSelectionBackground: '#094771',\n    listFocusAndSelectionForeground: '#FFFFFF',\n    listInactiveSelectionBackground: '#3F3F46',\n    listInactiveSelectionIconForeground: '#FFFFFF',\n    listHoverBackground: '#2A2D2E',\n    listDropOverBackground: '#383B3D',\n    listDropBetweenBackground: '#EEEEEE',\n    treeIndentGuidesStroke: '#a9a9a9',\n    treeInactiveIndentGuidesStroke: Color.fromHex('#a9a9a9').transparent(0.4).toString(),\n    tableColumnsBorder: Color.fromHex('#cccccc').transparent(0.2).toString(),\n    tableOddRowsBackgroundColor: Color.fromHex('#cccccc').transparent(0.04).toString(),\n    listBackground: undefined,\n    listFocusForeground: undefined,\n    listInactiveSelectionForeground: undefined,\n    listInactiveFocusForeground: undefined,\n    listInactiveFocusBackground: undefined,\n    listHoverForeground: undefined,\n    listFocusOutline: undefined,\n    listInactiveFocusOutline: undefined,\n    listSelectionOutline: undefined,\n    listHoverOutline: undefined,\n    treeStickyScrollBackground: undefined,\n    treeStickyScrollBorder: undefined,\n    treeStickyScrollShadow: undefined\n};\nconst DefaultOptions = {\n    keyboardSupport: true,\n    mouseSupport: true,\n    multipleSelectionSupport: true,\n    dnd: {\n        getDragURI() { return null; },\n        onDragStart() { },\n        onDragOver() { return false; },\n        drop() { },\n        dispose() { }\n    }\n};\n// TODO@Joao: move these utils into a SortedArray class\nfunction getContiguousRangeContaining(range, value) {\n    const index = range.indexOf(value);\n    if (index === -1) {\n        return [];\n    }\n    const result = [];\n    let i = index - 1;\n    while (i >= 0 && range[i] === value - (index - i)) {\n        result.push(range[i--]);\n    }\n    result.reverse();\n    i = index;\n    while (i < range.length && range[i] === value + (i - index)) {\n        result.push(range[i++]);\n    }\n    return result;\n}\n/**\n * Given two sorted collections of numbers, returns the intersection\n * between them (OR).\n */\nfunction disjunction(one, other) {\n    const result = [];\n    let i = 0, j = 0;\n    while (i < one.length || j < other.length) {\n        if (i >= one.length) {\n            result.push(other[j++]);\n        }\n        else if (j >= other.length) {\n            result.push(one[i++]);\n        }\n        else if (one[i] === other[j]) {\n            result.push(one[i]);\n            i++;\n            j++;\n            continue;\n        }\n        else if (one[i] < other[j]) {\n            result.push(one[i++]);\n        }\n        else {\n            result.push(other[j++]);\n        }\n    }\n    return result;\n}\n/**\n * Given two sorted collections of numbers, returns the relative\n * complement between them (XOR).\n */\nfunction relativeComplement(one, other) {\n    const result = [];\n    let i = 0, j = 0;\n    while (i < one.length || j < other.length) {\n        if (i >= one.length) {\n            result.push(other[j++]);\n        }\n        else if (j >= other.length) {\n            result.push(one[i++]);\n        }\n        else if (one[i] === other[j]) {\n            i++;\n            j++;\n            continue;\n        }\n        else if (one[i] < other[j]) {\n            result.push(one[i++]);\n        }\n        else {\n            j++;\n        }\n    }\n    return result;\n}\nconst numericSort = (a, b) => a - b;\nclass PipelineRenderer {\n    constructor(_templateId, renderers) {\n        this._templateId = _templateId;\n        this.renderers = renderers;\n    }\n    get templateId() {\n        return this._templateId;\n    }\n    renderTemplate(container) {\n        return this.renderers.map(r => r.renderTemplate(container));\n    }\n    renderElement(element, index, templateData, height) {\n        let i = 0;\n        for (const renderer of this.renderers) {\n            renderer.renderElement(element, index, templateData[i++], height);\n        }\n    }\n    disposeElement(element, index, templateData, height) {\n        let i = 0;\n        for (const renderer of this.renderers) {\n            renderer.disposeElement?.(element, index, templateData[i], height);\n            i += 1;\n        }\n    }\n    disposeTemplate(templateData) {\n        let i = 0;\n        for (const renderer of this.renderers) {\n            renderer.disposeTemplate(templateData[i++]);\n        }\n    }\n}\nclass AccessibiltyRenderer {\n    constructor(accessibilityProvider) {\n        this.accessibilityProvider = accessibilityProvider;\n        this.templateId = 'a18n';\n    }\n    renderTemplate(container) {\n        return { container, disposables: new DisposableStore() };\n    }\n    renderElement(element, index, data) {\n        const ariaLabel = this.accessibilityProvider.getAriaLabel(element);\n        const observable = (ariaLabel && typeof ariaLabel !== 'string') ? ariaLabel : constObservable(ariaLabel);\n        data.disposables.add(autorun(reader => {\n            this.setAriaLabel(reader.readObservable(observable), data.container);\n        }));\n        const ariaLevel = this.accessibilityProvider.getAriaLevel && this.accessibilityProvider.getAriaLevel(element);\n        if (typeof ariaLevel === 'number') {\n            data.container.setAttribute('aria-level', `${ariaLevel}`);\n        }\n        else {\n            data.container.removeAttribute('aria-level');\n        }\n    }\n    setAriaLabel(ariaLabel, element) {\n        if (ariaLabel) {\n            element.setAttribute('aria-label', ariaLabel);\n        }\n        else {\n            element.removeAttribute('aria-label');\n        }\n    }\n    disposeElement(element, index, templateData, height) {\n        templateData.disposables.clear();\n    }\n    disposeTemplate(templateData) {\n        templateData.disposables.dispose();\n    }\n}\nclass ListViewDragAndDrop {\n    constructor(list, dnd) {\n        this.list = list;\n        this.dnd = dnd;\n    }\n    getDragElements(element) {\n        const selection = this.list.getSelectedElements();\n        const elements = selection.indexOf(element) > -1 ? selection : [element];\n        return elements;\n    }\n    getDragURI(element) {\n        return this.dnd.getDragURI(element);\n    }\n    getDragLabel(elements, originalEvent) {\n        if (this.dnd.getDragLabel) {\n            return this.dnd.getDragLabel(elements, originalEvent);\n        }\n        return undefined;\n    }\n    onDragStart(data, originalEvent) {\n        this.dnd.onDragStart?.(data, originalEvent);\n    }\n    onDragOver(data, targetElement, targetIndex, targetSector, originalEvent) {\n        return this.dnd.onDragOver(data, targetElement, targetIndex, targetSector, originalEvent);\n    }\n    onDragLeave(data, targetElement, targetIndex, originalEvent) {\n        this.dnd.onDragLeave?.(data, targetElement, targetIndex, originalEvent);\n    }\n    onDragEnd(originalEvent) {\n        this.dnd.onDragEnd?.(originalEvent);\n    }\n    drop(data, targetElement, targetIndex, targetSector, originalEvent) {\n        this.dnd.drop(data, targetElement, targetIndex, targetSector, originalEvent);\n    }\n    dispose() {\n        this.dnd.dispose();\n    }\n}\n/**\n * The {@link List} is a virtual scrolling widget, built on top of the {@link ListView}\n * widget.\n *\n * Features:\n * - Customizable keyboard and mouse support\n * - Element traits: focus, selection, achor\n * - Accessibility support\n * - Touch support\n * - Performant template-based rendering\n * - Horizontal scrolling\n * - Variable element height support\n * - Dynamic element height support\n * - Drag-and-drop support\n */\nexport class List {\n    get onDidChangeFocus() {\n        return Event.map(this.eventBufferer.wrapEvent(this.focus.onChange), e => this.toListEvent(e), this.disposables);\n    }\n    get onDidChangeSelection() {\n        return Event.map(this.eventBufferer.wrapEvent(this.selection.onChange), e => this.toListEvent(e), this.disposables);\n    }\n    get domId() { return this.view.domId; }\n    get onDidScroll() { return this.view.onDidScroll; }\n    get onMouseClick() { return this.view.onMouseClick; }\n    get onMouseDblClick() { return this.view.onMouseDblClick; }\n    get onMouseMiddleClick() { return this.view.onMouseMiddleClick; }\n    get onPointer() { return this.mouseController.onPointer; }\n    get onMouseDown() { return this.view.onMouseDown; }\n    get onMouseOver() { return this.view.onMouseOver; }\n    get onMouseOut() { return this.view.onMouseOut; }\n    get onTouchStart() { return this.view.onTouchStart; }\n    get onTap() { return this.view.onTap; }\n    /**\n     * Possible context menu trigger events:\n     * - ContextMenu key\n     * - Shift F10\n     * - Ctrl Option Shift M (macOS with VoiceOver)\n     * - Mouse right click\n     */\n    get onContextMenu() {\n        let didJustPressContextMenuKey = false;\n        const fromKeyDown = Event.chain(this.disposables.add(new DomEmitter(this.view.domNode, 'keydown')).event, $ => $.map(e => new StandardKeyboardEvent(e))\n            .filter(e => didJustPressContextMenuKey = e.keyCode === 58 /* KeyCode.ContextMenu */ || (e.shiftKey && e.keyCode === 68 /* KeyCode.F10 */))\n            .map(e => EventHelper.stop(e, true))\n            .filter(() => false));\n        const fromKeyUp = Event.chain(this.disposables.add(new DomEmitter(this.view.domNode, 'keyup')).event, $ => $.forEach(() => didJustPressContextMenuKey = false)\n            .map(e => new StandardKeyboardEvent(e))\n            .filter(e => e.keyCode === 58 /* KeyCode.ContextMenu */ || (e.shiftKey && e.keyCode === 68 /* KeyCode.F10 */))\n            .map(e => EventHelper.stop(e, true))\n            .map(({ browserEvent }) => {\n            const focus = this.getFocus();\n            const index = focus.length ? focus[0] : undefined;\n            const element = typeof index !== 'undefined' ? this.view.element(index) : undefined;\n            const anchor = typeof index !== 'undefined' ? this.view.domElement(index) : this.view.domNode;\n            return { index, element, anchor, browserEvent };\n        }));\n        const fromMouse = Event.chain(this.view.onContextMenu, $ => $.filter(_ => !didJustPressContextMenuKey)\n            .map(({ element, index, browserEvent }) => ({ element, index, anchor: new StandardMouseEvent(getWindow(this.view.domNode), browserEvent), browserEvent })));\n        return Event.any(fromKeyDown, fromKeyUp, fromMouse);\n    }\n    get onKeyDown() { return this.disposables.add(new DomEmitter(this.view.domNode, 'keydown')).event; }\n    get onDidFocus() { return Event.signal(this.disposables.add(new DomEmitter(this.view.domNode, 'focus', true)).event); }\n    get onDidBlur() { return Event.signal(this.disposables.add(new DomEmitter(this.view.domNode, 'blur', true)).event); }\n    constructor(user, container, virtualDelegate, renderers, _options = DefaultOptions) {\n        this.user = user;\n        this._options = _options;\n        this.focus = new Trait('focused');\n        this.anchor = new Trait('anchor');\n        this.eventBufferer = new EventBufferer();\n        this._ariaLabel = '';\n        this.disposables = new DisposableStore();\n        this._onDidDispose = new Emitter();\n        this.onDidDispose = this._onDidDispose.event;\n        const role = this._options.accessibilityProvider && this._options.accessibilityProvider.getWidgetRole ? this._options.accessibilityProvider?.getWidgetRole() : 'list';\n        this.selection = new SelectionTrait(role !== 'listbox');\n        const baseRenderers = [this.focus.renderer, this.selection.renderer];\n        this.accessibilityProvider = _options.accessibilityProvider;\n        if (this.accessibilityProvider) {\n            baseRenderers.push(new AccessibiltyRenderer(this.accessibilityProvider));\n            this.accessibilityProvider.onDidChangeActiveDescendant?.(this.onDidChangeActiveDescendant, this, this.disposables);\n        }\n        renderers = renderers.map(r => new PipelineRenderer(r.templateId, [...baseRenderers, r]));\n        const viewOptions = {\n            ..._options,\n            dnd: _options.dnd && new ListViewDragAndDrop(this, _options.dnd)\n        };\n        this.view = this.createListView(container, virtualDelegate, renderers, viewOptions);\n        this.view.domNode.setAttribute('role', role);\n        if (_options.styleController) {\n            this.styleController = _options.styleController(this.view.domId);\n        }\n        else {\n            const styleElement = createStyleSheet(this.view.domNode);\n            this.styleController = new DefaultStyleController(styleElement, this.view.domId);\n        }\n        this.spliceable = new CombinedSpliceable([\n            new TraitSpliceable(this.focus, this.view, _options.identityProvider),\n            new TraitSpliceable(this.selection, this.view, _options.identityProvider),\n            new TraitSpliceable(this.anchor, this.view, _options.identityProvider),\n            this.view\n        ]);\n        this.disposables.add(this.focus);\n        this.disposables.add(this.selection);\n        this.disposables.add(this.anchor);\n        this.disposables.add(this.view);\n        this.disposables.add(this._onDidDispose);\n        this.disposables.add(new DOMFocusController(this, this.view));\n        if (typeof _options.keyboardSupport !== 'boolean' || _options.keyboardSupport) {\n            this.keyboardController = new KeyboardController(this, this.view, _options);\n            this.disposables.add(this.keyboardController);\n        }\n        if (_options.keyboardNavigationLabelProvider) {\n            const delegate = _options.keyboardNavigationDelegate || DefaultKeyboardNavigationDelegate;\n            this.typeNavigationController = new TypeNavigationController(this, this.view, _options.keyboardNavigationLabelProvider, _options.keyboardNavigationEventFilter ?? (() => true), delegate);\n            this.disposables.add(this.typeNavigationController);\n        }\n        this.mouseController = this.createMouseController(_options);\n        this.disposables.add(this.mouseController);\n        this.onDidChangeFocus(this._onFocusChange, this, this.disposables);\n        this.onDidChangeSelection(this._onSelectionChange, this, this.disposables);\n        if (this.accessibilityProvider) {\n            this.ariaLabel = this.accessibilityProvider.getWidgetAriaLabel();\n        }\n        if (this._options.multipleSelectionSupport !== false) {\n            this.view.domNode.setAttribute('aria-multiselectable', 'true');\n        }\n    }\n    createListView(container, virtualDelegate, renderers, viewOptions) {\n        return new ListView(container, virtualDelegate, renderers, viewOptions);\n    }\n    createMouseController(options) {\n        return new MouseController(this);\n    }\n    updateOptions(optionsUpdate = {}) {\n        this._options = { ...this._options, ...optionsUpdate };\n        this.typeNavigationController?.updateOptions(this._options);\n        if (this._options.multipleSelectionController !== undefined) {\n            if (this._options.multipleSelectionSupport) {\n                this.view.domNode.setAttribute('aria-multiselectable', 'true');\n            }\n            else {\n                this.view.domNode.removeAttribute('aria-multiselectable');\n            }\n        }\n        this.mouseController.updateOptions(optionsUpdate);\n        this.keyboardController?.updateOptions(optionsUpdate);\n        this.view.updateOptions(optionsUpdate);\n    }\n    get options() {\n        return this._options;\n    }\n    splice(start, deleteCount, elements = []) {\n        if (start < 0 || start > this.view.length) {\n            throw new ListError(this.user, `Invalid start index: ${start}`);\n        }\n        if (deleteCount < 0) {\n            throw new ListError(this.user, `Invalid delete count: ${deleteCount}`);\n        }\n        if (deleteCount === 0 && elements.length === 0) {\n            return;\n        }\n        this.eventBufferer.bufferEvents(() => this.spliceable.splice(start, deleteCount, elements));\n    }\n    rerender() {\n        this.view.rerender();\n    }\n    element(index) {\n        return this.view.element(index);\n    }\n    indexOf(element) {\n        return this.view.indexOf(element);\n    }\n    indexAt(position) {\n        return this.view.indexAt(position);\n    }\n    get length() {\n        return this.view.length;\n    }\n    get contentHeight() {\n        return this.view.contentHeight;\n    }\n    get onDidChangeContentHeight() {\n        return this.view.onDidChangeContentHeight;\n    }\n    get scrollTop() {\n        return this.view.getScrollTop();\n    }\n    set scrollTop(scrollTop) {\n        this.view.setScrollTop(scrollTop);\n    }\n    get scrollHeight() {\n        return this.view.scrollHeight;\n    }\n    get renderHeight() {\n        return this.view.renderHeight;\n    }\n    get firstVisibleIndex() {\n        return this.view.firstVisibleIndex;\n    }\n    get ariaLabel() {\n        return this._ariaLabel;\n    }\n    set ariaLabel(value) {\n        this._ariaLabel = value;\n        this.view.domNode.setAttribute('aria-label', value);\n    }\n    domFocus() {\n        this.view.domNode.focus({ preventScroll: true });\n    }\n    layout(height, width) {\n        this.view.layout(height, width);\n    }\n    setSelection(indexes, browserEvent) {\n        for (const index of indexes) {\n            if (index < 0 || index >= this.length) {\n                throw new ListError(this.user, `Invalid index ${index}`);\n            }\n        }\n        this.selection.set(indexes, browserEvent);\n    }\n    getSelection() {\n        return this.selection.get();\n    }\n    getSelectedElements() {\n        return this.getSelection().map(i => this.view.element(i));\n    }\n    setAnchor(index) {\n        if (typeof index === 'undefined') {\n            this.anchor.set([]);\n            return;\n        }\n        if (index < 0 || index >= this.length) {\n            throw new ListError(this.user, `Invalid index ${index}`);\n        }\n        this.anchor.set([index]);\n    }\n    getAnchor() {\n        return firstOrDefault(this.anchor.get(), undefined);\n    }\n    getAnchorElement() {\n        const anchor = this.getAnchor();\n        return typeof anchor === 'undefined' ? undefined : this.element(anchor);\n    }\n    setFocus(indexes, browserEvent) {\n        for (const index of indexes) {\n            if (index < 0 || index >= this.length) {\n                throw new ListError(this.user, `Invalid index ${index}`);\n            }\n        }\n        this.focus.set(indexes, browserEvent);\n    }\n    focusNext(n = 1, loop = false, browserEvent, filter) {\n        if (this.length === 0) {\n            return;\n        }\n        const focus = this.focus.get();\n        const index = this.findNextIndex(focus.length > 0 ? focus[0] + n : 0, loop, filter);\n        if (index > -1) {\n            this.setFocus([index], browserEvent);\n        }\n    }\n    focusPrevious(n = 1, loop = false, browserEvent, filter) {\n        if (this.length === 0) {\n            return;\n        }\n        const focus = this.focus.get();\n        const index = this.findPreviousIndex(focus.length > 0 ? focus[0] - n : 0, loop, filter);\n        if (index > -1) {\n            this.setFocus([index], browserEvent);\n        }\n    }\n    async focusNextPage(browserEvent, filter) {\n        let lastPageIndex = this.view.indexAt(this.view.getScrollTop() + this.view.renderHeight);\n        lastPageIndex = lastPageIndex === 0 ? 0 : lastPageIndex - 1;\n        const currentlyFocusedElementIndex = this.getFocus()[0];\n        if (currentlyFocusedElementIndex !== lastPageIndex && (currentlyFocusedElementIndex === undefined || lastPageIndex > currentlyFocusedElementIndex)) {\n            const lastGoodPageIndex = this.findPreviousIndex(lastPageIndex, false, filter);\n            if (lastGoodPageIndex > -1 && currentlyFocusedElementIndex !== lastGoodPageIndex) {\n                this.setFocus([lastGoodPageIndex], browserEvent);\n            }\n            else {\n                this.setFocus([lastPageIndex], browserEvent);\n            }\n        }\n        else {\n            const previousScrollTop = this.view.getScrollTop();\n            let nextpageScrollTop = previousScrollTop + this.view.renderHeight;\n            if (lastPageIndex > currentlyFocusedElementIndex) {\n                // scroll last page element to the top only if the last page element is below the focused element\n                nextpageScrollTop -= this.view.elementHeight(lastPageIndex);\n            }\n            this.view.setScrollTop(nextpageScrollTop);\n            if (this.view.getScrollTop() !== previousScrollTop) {\n                this.setFocus([]);\n                // Let the scroll event listener run\n                await timeout(0);\n                await this.focusNextPage(browserEvent, filter);\n            }\n        }\n    }\n    async focusPreviousPage(browserEvent, filter, getPaddingTop = () => 0) {\n        let firstPageIndex;\n        const paddingTop = getPaddingTop();\n        const scrollTop = this.view.getScrollTop() + paddingTop;\n        if (scrollTop === 0) {\n            firstPageIndex = this.view.indexAt(scrollTop);\n        }\n        else {\n            firstPageIndex = this.view.indexAfter(scrollTop - 1);\n        }\n        const currentlyFocusedElementIndex = this.getFocus()[0];\n        if (currentlyFocusedElementIndex !== firstPageIndex && (currentlyFocusedElementIndex === undefined || currentlyFocusedElementIndex >= firstPageIndex)) {\n            const firstGoodPageIndex = this.findNextIndex(firstPageIndex, false, filter);\n            if (firstGoodPageIndex > -1 && currentlyFocusedElementIndex !== firstGoodPageIndex) {\n                this.setFocus([firstGoodPageIndex], browserEvent);\n            }\n            else {\n                this.setFocus([firstPageIndex], browserEvent);\n            }\n        }\n        else {\n            const previousScrollTop = scrollTop;\n            this.view.setScrollTop(scrollTop - this.view.renderHeight - paddingTop);\n            if (this.view.getScrollTop() + getPaddingTop() !== previousScrollTop) {\n                this.setFocus([]);\n                // Let the scroll event listener run\n                await timeout(0);\n                await this.focusPreviousPage(browserEvent, filter, getPaddingTop);\n            }\n        }\n    }\n    focusLast(browserEvent, filter) {\n        if (this.length === 0) {\n            return;\n        }\n        const index = this.findPreviousIndex(this.length - 1, false, filter);\n        if (index > -1) {\n            this.setFocus([index], browserEvent);\n        }\n    }\n    focusFirst(browserEvent, filter) {\n        this.focusNth(0, browserEvent, filter);\n    }\n    focusNth(n, browserEvent, filter) {\n        if (this.length === 0) {\n            return;\n        }\n        const index = this.findNextIndex(n, false, filter);\n        if (index > -1) {\n            this.setFocus([index], browserEvent);\n        }\n    }\n    findNextIndex(index, loop = false, filter) {\n        for (let i = 0; i < this.length; i++) {\n            if (index >= this.length && !loop) {\n                return -1;\n            }\n            index = index % this.length;\n            if (!filter || filter(this.element(index))) {\n                return index;\n            }\n            index++;\n        }\n        return -1;\n    }\n    findPreviousIndex(index, loop = false, filter) {\n        for (let i = 0; i < this.length; i++) {\n            if (index < 0 && !loop) {\n                return -1;\n            }\n            index = (this.length + (index % this.length)) % this.length;\n            if (!filter || filter(this.element(index))) {\n                return index;\n            }\n            index--;\n        }\n        return -1;\n    }\n    getFocus() {\n        return this.focus.get();\n    }\n    getFocusedElements() {\n        return this.getFocus().map(i => this.view.element(i));\n    }\n    reveal(index, relativeTop, paddingTop = 0) {\n        if (index < 0 || index >= this.length) {\n            throw new ListError(this.user, `Invalid index ${index}`);\n        }\n        const scrollTop = this.view.getScrollTop();\n        const elementTop = this.view.elementTop(index);\n        const elementHeight = this.view.elementHeight(index);\n        if (isNumber(relativeTop)) {\n            // y = mx + b\n            const m = elementHeight - this.view.renderHeight + paddingTop;\n            this.view.setScrollTop(m * clamp(relativeTop, 0, 1) + elementTop - paddingTop);\n        }\n        else {\n            const viewItemBottom = elementTop + elementHeight;\n            const scrollBottom = scrollTop + this.view.renderHeight;\n            if (elementTop < scrollTop + paddingTop && viewItemBottom >= scrollBottom) {\n                // The element is already overflowing the viewport, no-op\n            }\n            else if (elementTop < scrollTop + paddingTop || (viewItemBottom >= scrollBottom && elementHeight >= this.view.renderHeight)) {\n                this.view.setScrollTop(elementTop - paddingTop);\n            }\n            else if (viewItemBottom >= scrollBottom) {\n                this.view.setScrollTop(viewItemBottom - this.view.renderHeight);\n            }\n        }\n    }\n    /**\n     * Returns the relative position of an element rendered in the list.\n     * Returns `null` if the element isn't *entirely* in the visible viewport.\n     */\n    getRelativeTop(index, paddingTop = 0) {\n        if (index < 0 || index >= this.length) {\n            throw new ListError(this.user, `Invalid index ${index}`);\n        }\n        const scrollTop = this.view.getScrollTop();\n        const elementTop = this.view.elementTop(index);\n        const elementHeight = this.view.elementHeight(index);\n        if (elementTop < scrollTop + paddingTop || elementTop + elementHeight > scrollTop + this.view.renderHeight) {\n            return null;\n        }\n        // y = mx + b\n        const m = elementHeight - this.view.renderHeight + paddingTop;\n        return Math.abs((scrollTop + paddingTop - elementTop) / m);\n    }\n    getHTMLElement() {\n        return this.view.domNode;\n    }\n    getScrollableElement() {\n        return this.view.scrollableElementDomNode;\n    }\n    getElementID(index) {\n        return this.view.getElementDomId(index);\n    }\n    getElementTop(index) {\n        return this.view.elementTop(index);\n    }\n    style(styles) {\n        this.styleController.style(styles);\n    }\n    toListEvent({ indexes, browserEvent }) {\n        return { indexes, elements: indexes.map(i => this.view.element(i)), browserEvent };\n    }\n    _onFocusChange() {\n        const focus = this.focus.get();\n        this.view.domNode.classList.toggle('element-focused', focus.length > 0);\n        this.onDidChangeActiveDescendant();\n    }\n    onDidChangeActiveDescendant() {\n        const focus = this.focus.get();\n        if (focus.length > 0) {\n            let id;\n            if (this.accessibilityProvider?.getActiveDescendantId) {\n                id = this.accessibilityProvider.getActiveDescendantId(this.view.element(focus[0]));\n            }\n            this.view.domNode.setAttribute('aria-activedescendant', id || this.view.getElementDomId(focus[0]));\n        }\n        else {\n            this.view.domNode.removeAttribute('aria-activedescendant');\n        }\n    }\n    _onSelectionChange() {\n        const selection = this.selection.get();\n        this.view.domNode.classList.toggle('selection-none', selection.length === 0);\n        this.view.domNode.classList.toggle('selection-single', selection.length === 1);\n        this.view.domNode.classList.toggle('selection-multiple', selection.length > 1);\n    }\n    dispose() {\n        this._onDidDispose.fire();\n        this.disposables.dispose();\n        this._onDidDispose.dispose();\n    }\n}\n__decorate([\n    memoize\n], List.prototype, \"onDidChangeFocus\", null);\n__decorate([\n    memoize\n], List.prototype, \"onDidChangeSelection\", null);\n__decorate([\n    memoize\n], List.prototype, \"onContextMenu\", null);\n__decorate([\n    memoize\n], List.prototype, \"onKeyDown\", null);\n__decorate([\n    memoize\n], List.prototype, \"onDidFocus\", null);\n__decorate([\n    memoize\n], List.prototype, \"onDidBlur\", null);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { DomEmitter } from '../../event.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { renderMarkdown } from '../../markdownRenderer.js';\nimport { getBaseLayerHoverDelegate } from '../hover/hoverDelegate2.js';\nimport { getDefaultHoverDelegate } from '../hover/hoverDelegateFactory.js';\nimport { List } from '../list/listWidget.js';\nimport * as arrays from '../../../common/arrays.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { KeyCodeUtils } from '../../../common/keyCodes.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport { isMacintosh } from '../../../common/platform.js';\nimport './selectBoxCustom.css';\nimport { localize } from '../../../../nls.js';\nconst $ = dom.$;\nconst SELECT_OPTION_ENTRY_TEMPLATE_ID = 'selectOption.entry.template';\nclass SelectListRenderer {\n    get templateId() { return SELECT_OPTION_ENTRY_TEMPLATE_ID; }\n    renderTemplate(container) {\n        const data = Object.create(null);\n        data.root = container;\n        data.text = dom.append(container, $('.option-text'));\n        data.detail = dom.append(container, $('.option-detail'));\n        data.decoratorRight = dom.append(container, $('.option-decorator-right'));\n        return data;\n    }\n    renderElement(element, index, templateData) {\n        const data = templateData;\n        const text = element.text;\n        const detail = element.detail;\n        const decoratorRight = element.decoratorRight;\n        const isDisabled = element.isDisabled;\n        data.text.textContent = text;\n        data.detail.textContent = !!detail ? detail : '';\n        data.decoratorRight.innerText = !!decoratorRight ? decoratorRight : '';\n        // pseudo-select disabled option\n        if (isDisabled) {\n            data.root.classList.add('option-disabled');\n        }\n        else {\n            // Make sure we do class removal from prior template rendering\n            data.root.classList.remove('option-disabled');\n        }\n    }\n    disposeTemplate(_templateData) {\n        // noop\n    }\n}\nexport class SelectBoxList extends Disposable {\n    static { this.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN = 32; }\n    static { this.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN = 2; }\n    static { this.DEFAULT_MINIMUM_VISIBLE_OPTIONS = 3; }\n    constructor(options, selected, contextViewProvider, styles, selectBoxOptions) {\n        super();\n        this.options = [];\n        this._currentSelection = 0;\n        this._hasDetails = false;\n        this._skipLayout = false;\n        this._sticky = false; // for dev purposes only\n        this._isVisible = false;\n        this.styles = styles;\n        this.selectBoxOptions = selectBoxOptions || Object.create(null);\n        if (typeof this.selectBoxOptions.minBottomMargin !== 'number') {\n            this.selectBoxOptions.minBottomMargin = SelectBoxList.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN;\n        }\n        else if (this.selectBoxOptions.minBottomMargin < 0) {\n            this.selectBoxOptions.minBottomMargin = 0;\n        }\n        this.selectElement = document.createElement('select');\n        // Use custom CSS vars for padding calculation\n        this.selectElement.className = 'monaco-select-box monaco-select-box-dropdown-padding';\n        if (typeof this.selectBoxOptions.ariaLabel === 'string') {\n            this.selectElement.setAttribute('aria-label', this.selectBoxOptions.ariaLabel);\n        }\n        if (typeof this.selectBoxOptions.ariaDescription === 'string') {\n            this.selectElement.setAttribute('aria-description', this.selectBoxOptions.ariaDescription);\n        }\n        this._onDidSelect = new Emitter();\n        this._register(this._onDidSelect);\n        this.registerListeners();\n        this.constructSelectDropDown(contextViewProvider);\n        this.selected = selected || 0;\n        if (options) {\n            this.setOptions(options, selected);\n        }\n        this.initStyleSheet();\n    }\n    setTitle(title) {\n        if (!this._hover && title) {\n            this._hover = this._register(getBaseLayerHoverDelegate().setupManagedHover(getDefaultHoverDelegate('mouse'), this.selectElement, title));\n        }\n        else if (this._hover) {\n            this._hover.update(title);\n        }\n    }\n    // IDelegate - List renderer\n    getHeight() {\n        return 22;\n    }\n    getTemplateId() {\n        return SELECT_OPTION_ENTRY_TEMPLATE_ID;\n    }\n    constructSelectDropDown(contextViewProvider) {\n        // SetUp ContextView container to hold select Dropdown\n        this.contextViewProvider = contextViewProvider;\n        this.selectDropDownContainer = dom.$('.monaco-select-box-dropdown-container');\n        // Use custom CSS vars for padding calculation (shared with parent select)\n        this.selectDropDownContainer.classList.add('monaco-select-box-dropdown-padding');\n        // Setup container for select option details\n        this.selectionDetailsPane = dom.append(this.selectDropDownContainer, $('.select-box-details-pane'));\n        // Create span flex box item/div we can measure and control\n        const widthControlOuterDiv = dom.append(this.selectDropDownContainer, $('.select-box-dropdown-container-width-control'));\n        const widthControlInnerDiv = dom.append(widthControlOuterDiv, $('.width-control-div'));\n        this.widthControlElement = document.createElement('span');\n        this.widthControlElement.className = 'option-text-width-control';\n        dom.append(widthControlInnerDiv, this.widthControlElement);\n        // Always default to below position\n        this._dropDownPosition = 0 /* AnchorPosition.BELOW */;\n        // Inline stylesheet for themes\n        this.styleElement = dom.createStyleSheet(this.selectDropDownContainer);\n        // Prevent dragging of dropdown #114329\n        this.selectDropDownContainer.setAttribute('draggable', 'true');\n        this._register(dom.addDisposableListener(this.selectDropDownContainer, dom.EventType.DRAG_START, (e) => {\n            dom.EventHelper.stop(e, true);\n        }));\n    }\n    registerListeners() {\n        // Parent native select keyboard listeners\n        this._register(dom.addStandardDisposableListener(this.selectElement, 'change', (e) => {\n            this.selected = e.target.selectedIndex;\n            this._onDidSelect.fire({\n                index: e.target.selectedIndex,\n                selected: e.target.value\n            });\n            if (!!this.options[this.selected] && !!this.options[this.selected].text) {\n                this.setTitle(this.options[this.selected].text);\n            }\n        }));\n        // Have to implement both keyboard and mouse controllers to handle disabled options\n        // Intercept mouse events to override normal select actions on parents\n        this._register(dom.addDisposableListener(this.selectElement, dom.EventType.CLICK, (e) => {\n            dom.EventHelper.stop(e);\n            if (this._isVisible) {\n                this.hideSelectDropDown(true);\n            }\n            else {\n                this.showSelectDropDown();\n            }\n        }));\n        this._register(dom.addDisposableListener(this.selectElement, dom.EventType.MOUSE_DOWN, (e) => {\n            dom.EventHelper.stop(e);\n        }));\n        // Intercept touch events\n        // The following implementation is slightly different from the mouse event handlers above.\n        // Use the following helper variable, otherwise the list flickers.\n        let listIsVisibleOnTouchStart;\n        this._register(dom.addDisposableListener(this.selectElement, 'touchstart', (e) => {\n            listIsVisibleOnTouchStart = this._isVisible;\n        }));\n        this._register(dom.addDisposableListener(this.selectElement, 'touchend', (e) => {\n            dom.EventHelper.stop(e);\n            if (listIsVisibleOnTouchStart) {\n                this.hideSelectDropDown(true);\n            }\n            else {\n                this.showSelectDropDown();\n            }\n        }));\n        // Intercept keyboard handling\n        this._register(dom.addDisposableListener(this.selectElement, dom.EventType.KEY_DOWN, (e) => {\n            const event = new StandardKeyboardEvent(e);\n            let showDropDown = false;\n            // Create and drop down select list on keyboard select\n            if (isMacintosh) {\n                if (event.keyCode === 18 /* KeyCode.DownArrow */ || event.keyCode === 16 /* KeyCode.UpArrow */ || event.keyCode === 10 /* KeyCode.Space */ || event.keyCode === 3 /* KeyCode.Enter */) {\n                    showDropDown = true;\n                }\n            }\n            else {\n                if (event.keyCode === 18 /* KeyCode.DownArrow */ && event.altKey || event.keyCode === 16 /* KeyCode.UpArrow */ && event.altKey || event.keyCode === 10 /* KeyCode.Space */ || event.keyCode === 3 /* KeyCode.Enter */) {\n                    showDropDown = true;\n                }\n            }\n            if (showDropDown) {\n                this.showSelectDropDown();\n                dom.EventHelper.stop(e, true);\n            }\n        }));\n    }\n    get onDidSelect() {\n        return this._onDidSelect.event;\n    }\n    setOptions(options, selected) {\n        if (!arrays.equals(this.options, options)) {\n            this.options = options;\n            this.selectElement.options.length = 0;\n            this._hasDetails = false;\n            this._cachedMaxDetailsHeight = undefined;\n            this.options.forEach((option, index) => {\n                this.selectElement.add(this.createOption(option.text, index, option.isDisabled));\n                if (typeof option.description === 'string') {\n                    this._hasDetails = true;\n                }\n            });\n        }\n        if (selected !== undefined) {\n            this.select(selected);\n            // Set current = selected since this is not necessarily a user exit\n            this._currentSelection = this.selected;\n        }\n    }\n    setOptionsList() {\n        // Mirror options in drop-down\n        // Populate select list for non-native select mode\n        this.selectList?.splice(0, this.selectList.length, this.options);\n    }\n    select(index) {\n        if (index >= 0 && index < this.options.length) {\n            this.selected = index;\n        }\n        else if (index > this.options.length - 1) {\n            // Adjust index to end of list\n            // This could make client out of sync with the select\n            this.select(this.options.length - 1);\n        }\n        else if (this.selected < 0) {\n            this.selected = 0;\n        }\n        this.selectElement.selectedIndex = this.selected;\n        if (!!this.options[this.selected] && !!this.options[this.selected].text) {\n            this.setTitle(this.options[this.selected].text);\n        }\n    }\n    focus() {\n        if (this.selectElement) {\n            this.selectElement.tabIndex = 0;\n            this.selectElement.focus();\n        }\n    }\n    blur() {\n        if (this.selectElement) {\n            this.selectElement.tabIndex = -1;\n            this.selectElement.blur();\n        }\n    }\n    setFocusable(focusable) {\n        this.selectElement.tabIndex = focusable ? 0 : -1;\n    }\n    render(container) {\n        this.container = container;\n        container.classList.add('select-container');\n        container.appendChild(this.selectElement);\n        this.styleSelectElement();\n    }\n    initStyleSheet() {\n        const content = [];\n        // Style non-native select mode\n        if (this.styles.listFocusBackground) {\n            content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { background-color: ${this.styles.listFocusBackground} !important; }`);\n        }\n        if (this.styles.listFocusForeground) {\n            content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { color: ${this.styles.listFocusForeground} !important; }`);\n        }\n        if (this.styles.decoratorRightForeground) {\n            content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.focused) .option-decorator-right { color: ${this.styles.decoratorRightForeground}; }`);\n        }\n        if (this.styles.selectBackground && this.styles.selectBorder && this.styles.selectBorder !== this.styles.selectBackground) {\n            content.push(`.monaco-select-box-dropdown-container { border: 1px solid ${this.styles.selectBorder} } `);\n            content.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectBorder} } `);\n            content.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectBorder} } `);\n        }\n        else if (this.styles.selectListBorder) {\n            content.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectListBorder} } `);\n            content.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectListBorder} } `);\n        }\n        // Hover foreground - ignore for disabled options\n        if (this.styles.listHoverForeground) {\n            content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { color: ${this.styles.listHoverForeground} !important; }`);\n        }\n        // Hover background - ignore for disabled options\n        if (this.styles.listHoverBackground) {\n            content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { background-color: ${this.styles.listHoverBackground} !important; }`);\n        }\n        // Match quick input outline styles - ignore for disabled options\n        if (this.styles.listFocusOutline) {\n            content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { outline: 1.6px dotted ${this.styles.listFocusOutline} !important; outline-offset: -1.6px !important; }`);\n        }\n        if (this.styles.listHoverOutline) {\n            content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { outline: 1.6px dashed ${this.styles.listHoverOutline} !important; outline-offset: -1.6px !important; }`);\n        }\n        // Clear list styles on focus and on hover for disabled options\n        content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled.focused { background-color: transparent !important; color: inherit !important; outline: none !important; }`);\n        content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled:hover { background-color: transparent !important; color: inherit !important; outline: none !important; }`);\n        this.styleElement.textContent = content.join('\\n');\n    }\n    styleSelectElement() {\n        const background = this.styles.selectBackground ?? '';\n        const foreground = this.styles.selectForeground ?? '';\n        const border = this.styles.selectBorder ?? '';\n        this.selectElement.style.backgroundColor = background;\n        this.selectElement.style.color = foreground;\n        this.selectElement.style.borderColor = border;\n    }\n    styleList() {\n        const background = this.styles.selectBackground ?? '';\n        const listBackground = dom.asCssValueWithDefault(this.styles.selectListBackground, background);\n        this.selectDropDownListContainer.style.backgroundColor = listBackground;\n        this.selectionDetailsPane.style.backgroundColor = listBackground;\n        const optionsBorder = this.styles.focusBorder ?? '';\n        this.selectDropDownContainer.style.outlineColor = optionsBorder;\n        this.selectDropDownContainer.style.outlineOffset = '-1px';\n        this.selectList.style(this.styles);\n    }\n    createOption(value, index, disabled) {\n        const option = document.createElement('option');\n        option.value = value;\n        option.text = value;\n        option.disabled = !!disabled;\n        return option;\n    }\n    // ContextView dropdown methods\n    showSelectDropDown() {\n        this.selectionDetailsPane.innerText = '';\n        if (!this.contextViewProvider || this._isVisible) {\n            return;\n        }\n        // Lazily create and populate list only at open, moved from constructor\n        this.createSelectList(this.selectDropDownContainer);\n        this.setOptionsList();\n        // This allows us to flip the position based on measurement\n        // Set drop-down position above/below from required height and margins\n        // If pre-layout cannot fit at least one option do not show drop-down\n        this.contextViewProvider.showContextView({\n            getAnchor: () => this.selectElement,\n            render: (container) => this.renderSelectDropDown(container, true),\n            layout: () => {\n                this.layoutSelectDropDown();\n            },\n            onHide: () => {\n                this.selectDropDownContainer.classList.remove('visible');\n                this.selectElement.classList.remove('synthetic-focus');\n            },\n            anchorPosition: this._dropDownPosition\n        }, this.selectBoxOptions.optionsAsChildren ? this.container : undefined);\n        // Hide so we can relay out\n        this._isVisible = true;\n        this.hideSelectDropDown(false);\n        this.contextViewProvider.showContextView({\n            getAnchor: () => this.selectElement,\n            render: (container) => this.renderSelectDropDown(container),\n            layout: () => this.layoutSelectDropDown(),\n            onHide: () => {\n                this.selectDropDownContainer.classList.remove('visible');\n                this.selectElement.classList.remove('synthetic-focus');\n            },\n            anchorPosition: this._dropDownPosition\n        }, this.selectBoxOptions.optionsAsChildren ? this.container : undefined);\n        // Track initial selection the case user escape, blur\n        this._currentSelection = this.selected;\n        this._isVisible = true;\n        this.selectElement.setAttribute('aria-expanded', 'true');\n    }\n    hideSelectDropDown(focusSelect) {\n        if (!this.contextViewProvider || !this._isVisible) {\n            return;\n        }\n        this._isVisible = false;\n        this.selectElement.setAttribute('aria-expanded', 'false');\n        if (focusSelect) {\n            this.selectElement.focus();\n        }\n        this.contextViewProvider.hideContextView();\n    }\n    renderSelectDropDown(container, preLayoutPosition) {\n        container.appendChild(this.selectDropDownContainer);\n        // Pre-Layout allows us to change position\n        this.layoutSelectDropDown(preLayoutPosition);\n        return {\n            dispose: () => {\n                // contextView will dispose itself if moving from one View to another\n                this.selectDropDownContainer.remove(); // remove to take out the CSS rules we add\n            }\n        };\n    }\n    // Iterate over detailed descriptions, find max height\n    measureMaxDetailsHeight() {\n        let maxDetailsPaneHeight = 0;\n        this.options.forEach((_option, index) => {\n            this.updateDetail(index);\n            if (this.selectionDetailsPane.offsetHeight > maxDetailsPaneHeight) {\n                maxDetailsPaneHeight = this.selectionDetailsPane.offsetHeight;\n            }\n        });\n        return maxDetailsPaneHeight;\n    }\n    layoutSelectDropDown(preLayoutPosition) {\n        // Avoid recursion from layout called in onListFocus\n        if (this._skipLayout) {\n            return false;\n        }\n        // Layout ContextView drop down select list and container\n        // Have to manage our vertical overflow, sizing, position below or above\n        // Position has to be determined and set prior to contextView instantiation\n        if (this.selectList) {\n            // Make visible to enable measurements\n            this.selectDropDownContainer.classList.add('visible');\n            const window = dom.getWindow(this.selectElement);\n            const selectPosition = dom.getDomNodePagePosition(this.selectElement);\n            const styles = dom.getWindow(this.selectElement).getComputedStyle(this.selectElement);\n            const verticalPadding = parseFloat(styles.getPropertyValue('--dropdown-padding-top')) + parseFloat(styles.getPropertyValue('--dropdown-padding-bottom'));\n            const maxSelectDropDownHeightBelow = (window.innerHeight - selectPosition.top - selectPosition.height - (this.selectBoxOptions.minBottomMargin || 0));\n            const maxSelectDropDownHeightAbove = (selectPosition.top - SelectBoxList.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN);\n            // Determine optimal width - min(longest option), opt(parent select, excluding margins), max(ContextView controlled)\n            const selectWidth = this.selectElement.offsetWidth;\n            const selectMinWidth = this.setWidthControlElement(this.widthControlElement);\n            const selectOptimalWidth = Math.max(selectMinWidth, Math.round(selectWidth)).toString() + 'px';\n            this.selectDropDownContainer.style.width = selectOptimalWidth;\n            // Get initial list height and determine space above and below\n            this.selectList.getHTMLElement().style.height = '';\n            this.selectList.layout();\n            let listHeight = this.selectList.contentHeight;\n            if (this._hasDetails && this._cachedMaxDetailsHeight === undefined) {\n                this._cachedMaxDetailsHeight = this.measureMaxDetailsHeight();\n            }\n            const maxDetailsPaneHeight = this._hasDetails ? this._cachedMaxDetailsHeight : 0;\n            const minRequiredDropDownHeight = listHeight + verticalPadding + maxDetailsPaneHeight;\n            const maxVisibleOptionsBelow = ((Math.floor((maxSelectDropDownHeightBelow - verticalPadding - maxDetailsPaneHeight) / this.getHeight())));\n            const maxVisibleOptionsAbove = ((Math.floor((maxSelectDropDownHeightAbove - verticalPadding - maxDetailsPaneHeight) / this.getHeight())));\n            // If we are only doing pre-layout check/adjust position only\n            // Calculate vertical space available, flip up if insufficient\n            // Use reflected padding on parent select, ContextView style\n            // properties not available before DOM attachment\n            if (preLayoutPosition) {\n                // Check if select moved out of viewport , do not open\n                // If at least one option cannot be shown, don't open the drop-down or hide/remove if open\n                if ((selectPosition.top + selectPosition.height) > (window.innerHeight - 22)\n                    || selectPosition.top < SelectBoxList.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN\n                    || ((maxVisibleOptionsBelow < 1) && (maxVisibleOptionsAbove < 1))) {\n                    // Indicate we cannot open\n                    return false;\n                }\n                // Determine if we have to flip up\n                // Always show complete list items - never more than Max available vertical height\n                if (maxVisibleOptionsBelow < SelectBoxList.DEFAULT_MINIMUM_VISIBLE_OPTIONS\n                    && maxVisibleOptionsAbove > maxVisibleOptionsBelow\n                    && this.options.length > maxVisibleOptionsBelow) {\n                    this._dropDownPosition = 1 /* AnchorPosition.ABOVE */;\n                    this.selectDropDownListContainer.remove();\n                    this.selectionDetailsPane.remove();\n                    this.selectDropDownContainer.appendChild(this.selectionDetailsPane);\n                    this.selectDropDownContainer.appendChild(this.selectDropDownListContainer);\n                    this.selectionDetailsPane.classList.remove('border-top');\n                    this.selectionDetailsPane.classList.add('border-bottom');\n                }\n                else {\n                    this._dropDownPosition = 0 /* AnchorPosition.BELOW */;\n                    this.selectDropDownListContainer.remove();\n                    this.selectionDetailsPane.remove();\n                    this.selectDropDownContainer.appendChild(this.selectDropDownListContainer);\n                    this.selectDropDownContainer.appendChild(this.selectionDetailsPane);\n                    this.selectionDetailsPane.classList.remove('border-bottom');\n                    this.selectionDetailsPane.classList.add('border-top');\n                }\n                // Do full layout on showSelectDropDown only\n                return true;\n            }\n            // Check if select out of viewport or cutting into status bar\n            if ((selectPosition.top + selectPosition.height) > (window.innerHeight - 22)\n                || selectPosition.top < SelectBoxList.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN\n                || (this._dropDownPosition === 0 /* AnchorPosition.BELOW */ && maxVisibleOptionsBelow < 1)\n                || (this._dropDownPosition === 1 /* AnchorPosition.ABOVE */ && maxVisibleOptionsAbove < 1)) {\n                // Cannot properly layout, close and hide\n                this.hideSelectDropDown(true);\n                return false;\n            }\n            // SetUp list dimensions and layout - account for container padding\n            // Use position to check above or below available space\n            if (this._dropDownPosition === 0 /* AnchorPosition.BELOW */) {\n                if (this._isVisible && maxVisibleOptionsBelow + maxVisibleOptionsAbove < 1) {\n                    // If drop-down is visible, must be doing a DOM re-layout, hide since we don't fit\n                    // Hide drop-down, hide contextview, focus on parent select\n                    this.hideSelectDropDown(true);\n                    return false;\n                }\n                // Adjust list height to max from select bottom to margin (default/minBottomMargin)\n                if (minRequiredDropDownHeight > maxSelectDropDownHeightBelow) {\n                    listHeight = (maxVisibleOptionsBelow * this.getHeight());\n                }\n            }\n            else {\n                if (minRequiredDropDownHeight > maxSelectDropDownHeightAbove) {\n                    listHeight = (maxVisibleOptionsAbove * this.getHeight());\n                }\n            }\n            // Set adjusted list height and relayout\n            this.selectList.layout(listHeight);\n            this.selectList.domFocus();\n            // Finally set focus on selected item\n            if (this.selectList.length > 0) {\n                this.selectList.setFocus([this.selected || 0]);\n                this.selectList.reveal(this.selectList.getFocus()[0] || 0);\n            }\n            if (this._hasDetails) {\n                // Leave the selectDropDownContainer to size itself according to children (list + details) - #57447\n                this.selectList.getHTMLElement().style.height = (listHeight + verticalPadding) + 'px';\n                this.selectDropDownContainer.style.height = '';\n            }\n            else {\n                this.selectDropDownContainer.style.height = (listHeight + verticalPadding) + 'px';\n            }\n            this.updateDetail(this.selected);\n            this.selectDropDownContainer.style.width = selectOptimalWidth;\n            // Maintain focus outline on parent select as well as list container - tabindex for focus\n            this.selectDropDownListContainer.setAttribute('tabindex', '0');\n            this.selectElement.classList.add('synthetic-focus');\n            this.selectDropDownContainer.classList.add('synthetic-focus');\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    setWidthControlElement(container) {\n        let elementWidth = 0;\n        if (container) {\n            let longest = 0;\n            let longestLength = 0;\n            this.options.forEach((option, index) => {\n                const detailLength = !!option.detail ? option.detail.length : 0;\n                const rightDecoratorLength = !!option.decoratorRight ? option.decoratorRight.length : 0;\n                const len = option.text.length + detailLength + rightDecoratorLength;\n                if (len > longestLength) {\n                    longest = index;\n                    longestLength = len;\n                }\n            });\n            container.textContent = this.options[longest].text + (!!this.options[longest].decoratorRight ? (this.options[longest].decoratorRight + ' ') : '');\n            elementWidth = dom.getTotalWidth(container);\n        }\n        return elementWidth;\n    }\n    createSelectList(parent) {\n        // If we have already constructive list on open, skip\n        if (this.selectList) {\n            return;\n        }\n        // SetUp container for list\n        this.selectDropDownListContainer = dom.append(parent, $('.select-box-dropdown-list-container'));\n        this.listRenderer = new SelectListRenderer();\n        this.selectList = this._register(new List('SelectBoxCustom', this.selectDropDownListContainer, this, [this.listRenderer], {\n            useShadows: false,\n            verticalScrollMode: 3 /* ScrollbarVisibility.Visible */,\n            keyboardSupport: false,\n            mouseSupport: false,\n            accessibilityProvider: {\n                getAriaLabel: element => {\n                    let label = element.text;\n                    if (element.detail) {\n                        label += `. ${element.detail}`;\n                    }\n                    if (element.decoratorRight) {\n                        label += `. ${element.decoratorRight}`;\n                    }\n                    if (element.description) {\n                        label += `. ${element.description}`;\n                    }\n                    return label;\n                },\n                getWidgetAriaLabel: () => localize({ key: 'selectBox', comment: ['Behave like native select dropdown element.'] }, \"Select Box\"),\n                getRole: () => isMacintosh ? '' : 'option',\n                getWidgetRole: () => 'listbox'\n            }\n        }));\n        if (this.selectBoxOptions.ariaLabel) {\n            this.selectList.ariaLabel = this.selectBoxOptions.ariaLabel;\n        }\n        // SetUp list keyboard controller - control navigation, disabled items, focus\n        const onKeyDown = this._register(new DomEmitter(this.selectDropDownListContainer, 'keydown'));\n        const onSelectDropDownKeyDown = Event.chain(onKeyDown.event, $ => $.filter(() => this.selectList.length > 0)\n            .map(e => new StandardKeyboardEvent(e)));\n        this._register(Event.chain(onSelectDropDownKeyDown, $ => $.filter(e => e.keyCode === 3 /* KeyCode.Enter */))(this.onEnter, this));\n        this._register(Event.chain(onSelectDropDownKeyDown, $ => $.filter(e => e.keyCode === 2 /* KeyCode.Tab */))(this.onEnter, this)); // Tab should behave the same as enter, #79339\n        this._register(Event.chain(onSelectDropDownKeyDown, $ => $.filter(e => e.keyCode === 9 /* KeyCode.Escape */))(this.onEscape, this));\n        this._register(Event.chain(onSelectDropDownKeyDown, $ => $.filter(e => e.keyCode === 16 /* KeyCode.UpArrow */))(this.onUpArrow, this));\n        this._register(Event.chain(onSelectDropDownKeyDown, $ => $.filter(e => e.keyCode === 18 /* KeyCode.DownArrow */))(this.onDownArrow, this));\n        this._register(Event.chain(onSelectDropDownKeyDown, $ => $.filter(e => e.keyCode === 12 /* KeyCode.PageDown */))(this.onPageDown, this));\n        this._register(Event.chain(onSelectDropDownKeyDown, $ => $.filter(e => e.keyCode === 11 /* KeyCode.PageUp */))(this.onPageUp, this));\n        this._register(Event.chain(onSelectDropDownKeyDown, $ => $.filter(e => e.keyCode === 14 /* KeyCode.Home */))(this.onHome, this));\n        this._register(Event.chain(onSelectDropDownKeyDown, $ => $.filter(e => e.keyCode === 13 /* KeyCode.End */))(this.onEnd, this));\n        this._register(Event.chain(onSelectDropDownKeyDown, $ => $.filter(e => (e.keyCode >= 21 /* KeyCode.Digit0 */ && e.keyCode <= 56 /* KeyCode.KeyZ */) || (e.keyCode >= 85 /* KeyCode.Semicolon */ && e.keyCode <= 113 /* KeyCode.NumpadDivide */)))(this.onCharacter, this));\n        // SetUp list mouse controller - control navigation, disabled items, focus\n        this._register(dom.addDisposableListener(this.selectList.getHTMLElement(), dom.EventType.POINTER_UP, e => this.onPointerUp(e)));\n        this._register(this.selectList.onMouseOver(e => typeof e.index !== 'undefined' && this.selectList.setFocus([e.index])));\n        this._register(this.selectList.onDidChangeFocus(e => this.onListFocus(e)));\n        this._register(dom.addDisposableListener(this.selectDropDownContainer, dom.EventType.FOCUS_OUT, e => {\n            if (!this._isVisible || dom.isAncestor(e.relatedTarget, this.selectDropDownContainer)) {\n                return;\n            }\n            this.onListBlur();\n        }));\n        this.selectList.getHTMLElement().setAttribute('aria-label', this.selectBoxOptions.ariaLabel || '');\n        this.selectList.getHTMLElement().setAttribute('aria-expanded', 'true');\n        this.styleList();\n    }\n    // List methods\n    // List mouse controller - active exit, select option, fire onDidSelect if change, return focus to parent select\n    // Also takes in touchend events\n    onPointerUp(e) {\n        if (!this.selectList.length) {\n            return;\n        }\n        dom.EventHelper.stop(e);\n        const target = e.target;\n        if (!target) {\n            return;\n        }\n        // Check our mouse event is on an option (not scrollbar)\n        if (target.classList.contains('slider')) {\n            return;\n        }\n        const listRowElement = target.closest('.monaco-list-row');\n        if (!listRowElement) {\n            return;\n        }\n        const index = Number(listRowElement.getAttribute('data-index'));\n        const disabled = listRowElement.classList.contains('option-disabled');\n        // Ignore mouse selection of disabled options\n        if (index >= 0 && index < this.options.length && !disabled) {\n            this.selected = index;\n            this.select(this.selected);\n            this.selectList.setFocus([this.selected]);\n            this.selectList.reveal(this.selectList.getFocus()[0]);\n            // Only fire if selection change\n            if (this.selected !== this._currentSelection) {\n                // Set current = selected\n                this._currentSelection = this.selected;\n                this._onDidSelect.fire({\n                    index: this.selectElement.selectedIndex,\n                    selected: this.options[this.selected].text\n                });\n                if (!!this.options[this.selected] && !!this.options[this.selected].text) {\n                    this.setTitle(this.options[this.selected].text);\n                }\n            }\n            this.hideSelectDropDown(true);\n        }\n    }\n    // List Exit - passive - implicit no selection change, hide drop-down\n    onListBlur() {\n        if (this._sticky) {\n            return;\n        }\n        if (this.selected !== this._currentSelection) {\n            // Reset selected to current if no change\n            this.select(this._currentSelection);\n        }\n        this.hideSelectDropDown(false);\n    }\n    renderDescriptionMarkdown(text, actionHandler) {\n        const cleanRenderedMarkdown = (element) => {\n            for (let i = 0; i < element.childNodes.length; i++) {\n                const child = element.childNodes.item(i);\n                const tagName = child.tagName && child.tagName.toLowerCase();\n                if (tagName === 'img') {\n                    child.remove();\n                }\n                else {\n                    cleanRenderedMarkdown(child);\n                }\n            }\n        };\n        const rendered = renderMarkdown({ value: text, supportThemeIcons: true }, { actionHandler });\n        rendered.element.classList.add('select-box-description-markdown');\n        cleanRenderedMarkdown(rendered.element);\n        return rendered.element;\n    }\n    // List Focus Change - passive - update details pane with newly focused element's data\n    onListFocus(e) {\n        // Skip during initial layout\n        if (!this._isVisible || !this._hasDetails) {\n            return;\n        }\n        this.updateDetail(e.indexes[0]);\n    }\n    updateDetail(selectedIndex) {\n        this.selectionDetailsPane.innerText = '';\n        const option = this.options[selectedIndex];\n        const description = option?.description ?? '';\n        const descriptionIsMarkdown = option?.descriptionIsMarkdown ?? false;\n        if (description) {\n            if (descriptionIsMarkdown) {\n                const actionHandler = option.descriptionMarkdownActionHandler;\n                this.selectionDetailsPane.appendChild(this.renderDescriptionMarkdown(description, actionHandler));\n            }\n            else {\n                this.selectionDetailsPane.innerText = description;\n            }\n            this.selectionDetailsPane.style.display = 'block';\n        }\n        else {\n            this.selectionDetailsPane.style.display = 'none';\n        }\n        // Avoid recursion\n        this._skipLayout = true;\n        this.contextViewProvider.layout();\n        this._skipLayout = false;\n    }\n    // List keyboard controller\n    // List exit - active - hide ContextView dropdown, reset selection, return focus to parent select\n    onEscape(e) {\n        dom.EventHelper.stop(e);\n        // Reset selection to value when opened\n        this.select(this._currentSelection);\n        this.hideSelectDropDown(true);\n    }\n    // List exit - active - hide ContextView dropdown, return focus to parent select, fire onDidSelect if change\n    onEnter(e) {\n        dom.EventHelper.stop(e);\n        // Only fire if selection change\n        if (this.selected !== this._currentSelection) {\n            this._currentSelection = this.selected;\n            this._onDidSelect.fire({\n                index: this.selectElement.selectedIndex,\n                selected: this.options[this.selected].text\n            });\n            if (!!this.options[this.selected] && !!this.options[this.selected].text) {\n                this.setTitle(this.options[this.selected].text);\n            }\n        }\n        this.hideSelectDropDown(true);\n    }\n    // List navigation - have to handle a disabled option (jump over)\n    onDownArrow(e) {\n        if (this.selected < this.options.length - 1) {\n            dom.EventHelper.stop(e, true);\n            // Skip disabled options\n            const nextOptionDisabled = this.options[this.selected + 1].isDisabled;\n            if (nextOptionDisabled && this.options.length > this.selected + 2) {\n                this.selected += 2;\n            }\n            else if (nextOptionDisabled) {\n                return;\n            }\n            else {\n                this.selected++;\n            }\n            // Set focus/selection - only fire event when closing drop-down or on blur\n            this.select(this.selected);\n            this.selectList.setFocus([this.selected]);\n            this.selectList.reveal(this.selectList.getFocus()[0]);\n        }\n    }\n    onUpArrow(e) {\n        if (this.selected > 0) {\n            dom.EventHelper.stop(e, true);\n            // Skip disabled options\n            const previousOptionDisabled = this.options[this.selected - 1].isDisabled;\n            if (previousOptionDisabled && this.selected > 1) {\n                this.selected -= 2;\n            }\n            else {\n                this.selected--;\n            }\n            // Set focus/selection - only fire event when closing drop-down or on blur\n            this.select(this.selected);\n            this.selectList.setFocus([this.selected]);\n            this.selectList.reveal(this.selectList.getFocus()[0]);\n        }\n    }\n    onPageUp(e) {\n        dom.EventHelper.stop(e);\n        this.selectList.focusPreviousPage();\n        // Allow scrolling to settle\n        setTimeout(() => {\n            this.selected = this.selectList.getFocus()[0];\n            // Shift selection down if we land on a disabled option\n            if (this.options[this.selected].isDisabled && this.selected < this.options.length - 1) {\n                this.selected++;\n                this.selectList.setFocus([this.selected]);\n            }\n            this.selectList.reveal(this.selected);\n            this.select(this.selected);\n        }, 1);\n    }\n    onPageDown(e) {\n        dom.EventHelper.stop(e);\n        this.selectList.focusNextPage();\n        // Allow scrolling to settle\n        setTimeout(() => {\n            this.selected = this.selectList.getFocus()[0];\n            // Shift selection up if we land on a disabled option\n            if (this.options[this.selected].isDisabled && this.selected > 0) {\n                this.selected--;\n                this.selectList.setFocus([this.selected]);\n            }\n            this.selectList.reveal(this.selected);\n            this.select(this.selected);\n        }, 1);\n    }\n    onHome(e) {\n        dom.EventHelper.stop(e);\n        if (this.options.length < 2) {\n            return;\n        }\n        this.selected = 0;\n        if (this.options[this.selected].isDisabled && this.selected > 1) {\n            this.selected++;\n        }\n        this.selectList.setFocus([this.selected]);\n        this.selectList.reveal(this.selected);\n        this.select(this.selected);\n    }\n    onEnd(e) {\n        dom.EventHelper.stop(e);\n        if (this.options.length < 2) {\n            return;\n        }\n        this.selected = this.options.length - 1;\n        if (this.options[this.selected].isDisabled && this.selected > 1) {\n            this.selected--;\n        }\n        this.selectList.setFocus([this.selected]);\n        this.selectList.reveal(this.selected);\n        this.select(this.selected);\n    }\n    // Mimic option first character navigation of native select\n    onCharacter(e) {\n        const ch = KeyCodeUtils.toString(e.keyCode);\n        let optionIndex = -1;\n        for (let i = 0; i < this.options.length - 1; i++) {\n            optionIndex = (i + this.selected + 1) % this.options.length;\n            if (this.options[optionIndex].text.charAt(0).toUpperCase() === ch && !this.options[optionIndex].isDisabled) {\n                this.select(optionIndex);\n                this.selectList.setFocus([optionIndex]);\n                this.selectList.reveal(this.selectList.getFocus()[0]);\n                dom.EventHelper.stop(e);\n                break;\n            }\n        }\n    }\n    dispose() {\n        this.hideSelectDropDown(false);\n        super.dispose();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { EventType, Gesture } from '../../touch.js';\nimport * as arrays from '../../../common/arrays.js';\nimport { Emitter } from '../../../common/event.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport { isMacintosh } from '../../../common/platform.js';\nexport class SelectBoxNative extends Disposable {\n    constructor(options, selected, styles, selectBoxOptions) {\n        super();\n        this.selected = 0;\n        this.selectBoxOptions = selectBoxOptions || Object.create(null);\n        this.options = [];\n        this.selectElement = document.createElement('select');\n        this.selectElement.className = 'monaco-select-box';\n        if (typeof this.selectBoxOptions.ariaLabel === 'string') {\n            this.selectElement.setAttribute('aria-label', this.selectBoxOptions.ariaLabel);\n        }\n        if (typeof this.selectBoxOptions.ariaDescription === 'string') {\n            this.selectElement.setAttribute('aria-description', this.selectBoxOptions.ariaDescription);\n        }\n        this._onDidSelect = this._register(new Emitter());\n        this.styles = styles;\n        this.registerListeners();\n        this.setOptions(options, selected);\n    }\n    registerListeners() {\n        this._register(Gesture.addTarget(this.selectElement));\n        [EventType.Tap].forEach(eventType => {\n            this._register(dom.addDisposableListener(this.selectElement, eventType, (e) => {\n                this.selectElement.focus();\n            }));\n        });\n        this._register(dom.addStandardDisposableListener(this.selectElement, 'click', (e) => {\n            dom.EventHelper.stop(e, true);\n        }));\n        this._register(dom.addStandardDisposableListener(this.selectElement, 'change', (e) => {\n            this.selectElement.title = e.target.value;\n            this._onDidSelect.fire({\n                index: e.target.selectedIndex,\n                selected: e.target.value\n            });\n        }));\n        this._register(dom.addStandardDisposableListener(this.selectElement, 'keydown', (e) => {\n            let showSelect = false;\n            if (isMacintosh) {\n                if (e.keyCode === 18 /* KeyCode.DownArrow */ || e.keyCode === 16 /* KeyCode.UpArrow */ || e.keyCode === 10 /* KeyCode.Space */) {\n                    showSelect = true;\n                }\n            }\n            else {\n                if (e.keyCode === 18 /* KeyCode.DownArrow */ && e.altKey || e.keyCode === 10 /* KeyCode.Space */ || e.keyCode === 3 /* KeyCode.Enter */) {\n                    showSelect = true;\n                }\n            }\n            if (showSelect) {\n                // Space, Enter, is used to expand select box, do not propagate it (prevent action bar action run)\n                e.stopPropagation();\n            }\n        }));\n    }\n    get onDidSelect() {\n        return this._onDidSelect.event;\n    }\n    setOptions(options, selected) {\n        if (!this.options || !arrays.equals(this.options, options)) {\n            this.options = options;\n            this.selectElement.options.length = 0;\n            this.options.forEach((option, index) => {\n                this.selectElement.add(this.createOption(option.text, index, option.isDisabled));\n            });\n        }\n        if (selected !== undefined) {\n            this.select(selected);\n        }\n    }\n    select(index) {\n        if (this.options.length === 0) {\n            this.selected = 0;\n        }\n        else if (index >= 0 && index < this.options.length) {\n            this.selected = index;\n        }\n        else if (index > this.options.length - 1) {\n            // Adjust index to end of list\n            // This could make client out of sync with the select\n            this.select(this.options.length - 1);\n        }\n        else if (this.selected < 0) {\n            this.selected = 0;\n        }\n        this.selectElement.selectedIndex = this.selected;\n        if ((this.selected < this.options.length) && typeof this.options[this.selected].text === 'string') {\n            this.selectElement.title = this.options[this.selected].text;\n        }\n        else {\n            this.selectElement.title = '';\n        }\n    }\n    focus() {\n        if (this.selectElement) {\n            this.selectElement.tabIndex = 0;\n            this.selectElement.focus();\n        }\n    }\n    blur() {\n        if (this.selectElement) {\n            this.selectElement.tabIndex = -1;\n            this.selectElement.blur();\n        }\n    }\n    setFocusable(focusable) {\n        this.selectElement.tabIndex = focusable ? 0 : -1;\n    }\n    render(container) {\n        container.classList.add('select-container');\n        container.appendChild(this.selectElement);\n        this.setOptions(this.options, this.selected);\n        this.applyStyles();\n    }\n    applyStyles() {\n        // Style native select\n        if (this.selectElement) {\n            this.selectElement.style.backgroundColor = this.styles.selectBackground ?? '';\n            this.selectElement.style.color = this.styles.selectForeground ?? '';\n            this.selectElement.style.borderColor = this.styles.selectBorder ?? '';\n        }\n    }\n    createOption(value, index, disabled) {\n        const option = document.createElement('option');\n        option.value = value;\n        option.text = value;\n        option.disabled = !!disabled;\n        return option;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { SelectBoxList } from './selectBoxCustom.js';\nimport { SelectBoxNative } from './selectBoxNative.js';\nimport { Widget } from '../widget.js';\nimport { isMacintosh } from '../../../common/platform.js';\nimport './selectBox.css';\nexport class SelectBox extends Widget {\n    constructor(options, selected, contextViewProvider, styles, selectBoxOptions) {\n        super();\n        // Default to native SelectBox for OSX unless overridden\n        if (isMacintosh && !selectBoxOptions?.useCustomDrawn) {\n            this.selectBoxDelegate = new SelectBoxNative(options, selected, styles, selectBoxOptions);\n        }\n        else {\n            this.selectBoxDelegate = new SelectBoxList(options, selected, contextViewProvider, styles, selectBoxOptions);\n        }\n        this._register(this.selectBoxDelegate);\n    }\n    // Public SelectBox Methods - routed through delegate interface\n    get onDidSelect() {\n        return this.selectBoxDelegate.onDidSelect;\n    }\n    setOptions(options, selected) {\n        this.selectBoxDelegate.setOptions(options, selected);\n    }\n    select(index) {\n        this.selectBoxDelegate.select(index);\n    }\n    focus() {\n        this.selectBoxDelegate.focus();\n    }\n    blur() {\n        this.selectBoxDelegate.blur();\n    }\n    setFocusable(focusable) {\n        this.selectBoxDelegate.setFocusable(focusable);\n    }\n    render(container) {\n        this.selectBoxDelegate.render(container);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { isFirefox } from '../../browser.js';\nimport { DataTransfers } from '../../dnd.js';\nimport { addDisposableListener, EventHelper, EventType } from '../../dom.js';\nimport { EventType as TouchEventType, Gesture } from '../../touch.js';\nimport { getDefaultHoverDelegate } from '../hover/hoverDelegateFactory.js';\nimport { SelectBox } from '../selectBox/selectBox.js';\nimport { Action, ActionRunner, Separator } from '../../../common/actions.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport * as platform from '../../../common/platform.js';\nimport * as types from '../../../common/types.js';\nimport './actionbar.css';\nimport * as nls from '../../../../nls.js';\nimport { getBaseLayerHoverDelegate } from '../hover/hoverDelegate2.js';\nexport class BaseActionViewItem extends Disposable {\n    get action() {\n        return this._action;\n    }\n    constructor(context, action, options = {}) {\n        super();\n        this.options = options;\n        this._context = context || this;\n        this._action = action;\n        if (action instanceof Action) {\n            this._register(action.onDidChange(event => {\n                if (!this.element) {\n                    // we have not been rendered yet, so there\n                    // is no point in updating the UI\n                    return;\n                }\n                this.handleActionChangeEvent(event);\n            }));\n        }\n    }\n    handleActionChangeEvent(event) {\n        if (event.enabled !== undefined) {\n            this.updateEnabled();\n        }\n        if (event.checked !== undefined) {\n            this.updateChecked();\n        }\n        if (event.class !== undefined) {\n            this.updateClass();\n        }\n        if (event.label !== undefined) {\n            this.updateLabel();\n            this.updateTooltip();\n        }\n        if (event.tooltip !== undefined) {\n            this.updateTooltip();\n        }\n    }\n    get actionRunner() {\n        if (!this._actionRunner) {\n            this._actionRunner = this._register(new ActionRunner());\n        }\n        return this._actionRunner;\n    }\n    set actionRunner(actionRunner) {\n        this._actionRunner = actionRunner;\n    }\n    isEnabled() {\n        return this._action.enabled;\n    }\n    setActionContext(newContext) {\n        this._context = newContext;\n    }\n    render(container) {\n        const element = this.element = container;\n        this._register(Gesture.addTarget(container));\n        const enableDragging = this.options && this.options.draggable;\n        if (enableDragging) {\n            container.draggable = true;\n            if (isFirefox) {\n                // Firefox: requires to set a text data transfer to get going\n                this._register(addDisposableListener(container, EventType.DRAG_START, e => e.dataTransfer?.setData(DataTransfers.TEXT, this._action.label)));\n            }\n        }\n        this._register(addDisposableListener(element, TouchEventType.Tap, e => this.onClick(e, true))); // Preserve focus on tap #125470\n        this._register(addDisposableListener(element, EventType.MOUSE_DOWN, e => {\n            if (!enableDragging) {\n                EventHelper.stop(e, true); // do not run when dragging is on because that would disable it\n            }\n            if (this._action.enabled && e.button === 0) {\n                element.classList.add('active');\n            }\n        }));\n        if (platform.isMacintosh) {\n            // macOS: allow to trigger the button when holding Ctrl+key and pressing the\n            // main mouse button. This is for scenarios where e.g. some interaction forces\n            // the Ctrl+key to be pressed and hold but the user still wants to interact\n            // with the actions (for example quick access in quick navigation mode).\n            this._register(addDisposableListener(element, EventType.CONTEXT_MENU, e => {\n                if (e.button === 0 && e.ctrlKey === true) {\n                    this.onClick(e);\n                }\n            }));\n        }\n        this._register(addDisposableListener(element, EventType.CLICK, e => {\n            EventHelper.stop(e, true);\n            // menus do not use the click event\n            if (!(this.options && this.options.isMenu)) {\n                this.onClick(e);\n            }\n        }));\n        this._register(addDisposableListener(element, EventType.DBLCLICK, e => {\n            EventHelper.stop(e, true);\n        }));\n        [EventType.MOUSE_UP, EventType.MOUSE_OUT].forEach(event => {\n            this._register(addDisposableListener(element, event, e => {\n                EventHelper.stop(e);\n                element.classList.remove('active');\n            }));\n        });\n    }\n    onClick(event, preserveFocus = false) {\n        EventHelper.stop(event, true);\n        const context = types.isUndefinedOrNull(this._context) ? this.options?.useEventAsContext ? event : { preserveFocus } : this._context;\n        this.actionRunner.run(this._action, context);\n    }\n    // Only set the tabIndex on the element once it is about to get focused\n    // That way this element wont be a tab stop when it is not needed #106441\n    focus() {\n        if (this.element) {\n            this.element.tabIndex = 0;\n            this.element.focus();\n            this.element.classList.add('focused');\n        }\n    }\n    blur() {\n        if (this.element) {\n            this.element.blur();\n            this.element.tabIndex = -1;\n            this.element.classList.remove('focused');\n        }\n    }\n    setFocusable(focusable) {\n        if (this.element) {\n            this.element.tabIndex = focusable ? 0 : -1;\n        }\n    }\n    get trapsArrowNavigation() {\n        return false;\n    }\n    updateEnabled() {\n        // implement in subclass\n    }\n    updateLabel() {\n        // implement in subclass\n    }\n    getClass() {\n        return this.action.class;\n    }\n    getTooltip() {\n        return this.action.tooltip;\n    }\n    updateTooltip() {\n        if (!this.element) {\n            return;\n        }\n        const title = this.getTooltip() ?? '';\n        this.updateAriaLabel();\n        if (this.options.hoverDelegate?.showNativeHover) {\n            /* While custom hover is not inside custom hover */\n            this.element.title = title;\n        }\n        else {\n            if (!this.customHover && title !== '') {\n                const hoverDelegate = this.options.hoverDelegate ?? getDefaultHoverDelegate('element');\n                this.customHover = this._store.add(getBaseLayerHoverDelegate().setupManagedHover(hoverDelegate, this.element, title));\n            }\n            else if (this.customHover) {\n                this.customHover.update(title);\n            }\n        }\n    }\n    updateAriaLabel() {\n        if (this.element) {\n            const title = this.getTooltip() ?? '';\n            this.element.setAttribute('aria-label', title);\n        }\n    }\n    updateClass() {\n        // implement in subclass\n    }\n    updateChecked() {\n        // implement in subclass\n    }\n    dispose() {\n        if (this.element) {\n            this.element.remove();\n            this.element = undefined;\n        }\n        this._context = undefined;\n        super.dispose();\n    }\n}\nexport class ActionViewItem extends BaseActionViewItem {\n    constructor(context, action, options) {\n        super(context, action, options);\n        this.options = options;\n        this.options.icon = options.icon !== undefined ? options.icon : false;\n        this.options.label = options.label !== undefined ? options.label : true;\n        this.cssClass = '';\n    }\n    render(container) {\n        super.render(container);\n        types.assertType(this.element);\n        const label = document.createElement('a');\n        label.classList.add('action-label');\n        label.setAttribute('role', this.getDefaultAriaRole());\n        this.label = label;\n        this.element.appendChild(label);\n        if (this.options.label && this.options.keybinding) {\n            const kbLabel = document.createElement('span');\n            kbLabel.classList.add('keybinding');\n            kbLabel.textContent = this.options.keybinding;\n            this.element.appendChild(kbLabel);\n        }\n        this.updateClass();\n        this.updateLabel();\n        this.updateTooltip();\n        this.updateEnabled();\n        this.updateChecked();\n    }\n    getDefaultAriaRole() {\n        if (this._action.id === Separator.ID) {\n            return 'presentation'; // A separator is a presentation item\n        }\n        else {\n            if (this.options.isMenu) {\n                return 'menuitem';\n            }\n            else if (this.options.isTabList) {\n                return 'tab';\n            }\n            else {\n                return 'button';\n            }\n        }\n    }\n    // Only set the tabIndex on the element once it is about to get focused\n    // That way this element wont be a tab stop when it is not needed #106441\n    focus() {\n        if (this.label) {\n            this.label.tabIndex = 0;\n            this.label.focus();\n        }\n    }\n    blur() {\n        if (this.label) {\n            this.label.tabIndex = -1;\n        }\n    }\n    setFocusable(focusable) {\n        if (this.label) {\n            this.label.tabIndex = focusable ? 0 : -1;\n        }\n    }\n    updateLabel() {\n        if (this.options.label && this.label) {\n            this.label.textContent = this.action.label;\n        }\n    }\n    getTooltip() {\n        let title = null;\n        if (this.action.tooltip) {\n            title = this.action.tooltip;\n        }\n        else if (!this.options.label && this.action.label && this.options.icon) {\n            title = this.action.label;\n            if (this.options.keybinding) {\n                title = nls.localize({ key: 'titleLabel', comment: ['action title', 'action keybinding'] }, \"{0} ({1})\", title, this.options.keybinding);\n            }\n        }\n        return title ?? undefined;\n    }\n    updateClass() {\n        if (this.cssClass && this.label) {\n            this.label.classList.remove(...this.cssClass.split(' '));\n        }\n        if (this.options.icon) {\n            this.cssClass = this.getClass();\n            if (this.label) {\n                this.label.classList.add('codicon');\n                if (this.cssClass) {\n                    this.label.classList.add(...this.cssClass.split(' '));\n                }\n            }\n            this.updateEnabled();\n        }\n        else {\n            this.label?.classList.remove('codicon');\n        }\n    }\n    updateEnabled() {\n        if (this.action.enabled) {\n            if (this.label) {\n                this.label.removeAttribute('aria-disabled');\n                this.label.classList.remove('disabled');\n            }\n            this.element?.classList.remove('disabled');\n        }\n        else {\n            if (this.label) {\n                this.label.setAttribute('aria-disabled', 'true');\n                this.label.classList.add('disabled');\n            }\n            this.element?.classList.add('disabled');\n        }\n    }\n    updateAriaLabel() {\n        if (this.label) {\n            const title = this.getTooltip() ?? '';\n            this.label.setAttribute('aria-label', title);\n        }\n    }\n    updateChecked() {\n        if (this.label) {\n            if (this.action.checked !== undefined) {\n                this.label.classList.toggle('checked', this.action.checked);\n                if (this.options.isTabList) {\n                    this.label.setAttribute('aria-selected', this.action.checked ? 'true' : 'false');\n                }\n                else {\n                    this.label.setAttribute('aria-checked', this.action.checked ? 'true' : 'false');\n                    this.label.setAttribute('role', 'checkbox');\n                }\n            }\n            else {\n                this.label.classList.remove('checked');\n                this.label.removeAttribute(this.options.isTabList ? 'aria-selected' : 'aria-checked');\n                this.label.setAttribute('role', this.getDefaultAriaRole());\n            }\n        }\n    }\n}\nexport class SelectActionViewItem extends BaseActionViewItem {\n    constructor(ctx, action, options, selected, contextViewProvider, styles, selectBoxOptions) {\n        super(ctx, action);\n        this.selectBox = new SelectBox(options, selected, contextViewProvider, styles, selectBoxOptions);\n        this.selectBox.setFocusable(false);\n        this._register(this.selectBox);\n        this.registerListeners();\n    }\n    select(index) {\n        this.selectBox.select(index);\n    }\n    registerListeners() {\n        this._register(this.selectBox.onDidSelect(e => this.runAction(e.selected, e.index)));\n    }\n    runAction(option, index) {\n        this.actionRunner.run(this._action, this.getActionContext(option, index));\n    }\n    getActionContext(option, index) {\n        return option;\n    }\n    setFocusable(focusable) {\n        this.selectBox.setFocusable(focusable);\n    }\n    focus() {\n        this.selectBox?.focus();\n    }\n    blur() {\n        this.selectBox?.blur();\n    }\n    render(container) {\n        this.selectBox.render(container);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, addDisposableListener, append, EventHelper, EventType, isMouseEvent } from '../../dom.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { EventType as GestureEventType, Gesture } from '../../touch.js';\nimport { ActionRunner } from '../../../common/actions.js';\nimport { Emitter } from '../../../common/event.js';\nimport './dropdown.css';\nclass BaseDropdown extends ActionRunner {\n    constructor(container, options) {\n        super();\n        this._onDidChangeVisibility = this._register(new Emitter());\n        this.onDidChangeVisibility = this._onDidChangeVisibility.event;\n        this._element = append(container, $('.monaco-dropdown'));\n        this._label = append(this._element, $('.dropdown-label'));\n        let labelRenderer = options.labelRenderer;\n        if (!labelRenderer) {\n            labelRenderer = (container) => {\n                container.textContent = options.label || '';\n                return null;\n            };\n        }\n        for (const event of [EventType.CLICK, EventType.MOUSE_DOWN, GestureEventType.Tap]) {\n            this._register(addDisposableListener(this.element, event, e => EventHelper.stop(e, true))); // prevent default click behaviour to trigger\n        }\n        for (const event of [EventType.MOUSE_DOWN, GestureEventType.Tap]) {\n            this._register(addDisposableListener(this._label, event, e => {\n                if (isMouseEvent(e) && (e.detail > 1 || e.button !== 0)) {\n                    // prevent right click trigger to allow separate context menu (https://github.com/microsoft/vscode/issues/151064)\n                    // prevent multiple clicks to open multiple context menus (https://github.com/microsoft/vscode/issues/41363)\n                    return;\n                }\n                if (this.visible) {\n                    this.hide();\n                }\n                else {\n                    this.show();\n                }\n            }));\n        }\n        this._register(addDisposableListener(this._label, EventType.KEY_UP, e => {\n            const event = new StandardKeyboardEvent(e);\n            if (event.equals(3 /* KeyCode.Enter */) || event.equals(10 /* KeyCode.Space */)) {\n                EventHelper.stop(e, true); // https://github.com/microsoft/vscode/issues/57997\n                if (this.visible) {\n                    this.hide();\n                }\n                else {\n                    this.show();\n                }\n            }\n        }));\n        const cleanupFn = labelRenderer(this._label);\n        if (cleanupFn) {\n            this._register(cleanupFn);\n        }\n        this._register(Gesture.addTarget(this._label));\n    }\n    get element() {\n        return this._element;\n    }\n    show() {\n        if (!this.visible) {\n            this.visible = true;\n            this._onDidChangeVisibility.fire(true);\n        }\n    }\n    hide() {\n        if (this.visible) {\n            this.visible = false;\n            this._onDidChangeVisibility.fire(false);\n        }\n    }\n    dispose() {\n        super.dispose();\n        this.hide();\n        if (this.boxContainer) {\n            this.boxContainer.remove();\n            this.boxContainer = undefined;\n        }\n        if (this.contents) {\n            this.contents.remove();\n            this.contents = undefined;\n        }\n        if (this._label) {\n            this._label.remove();\n            this._label = undefined;\n        }\n    }\n}\nexport class DropdownMenu extends BaseDropdown {\n    constructor(container, _options) {\n        super(container, _options);\n        this._options = _options;\n        this._actions = [];\n        this.actions = _options.actions || [];\n    }\n    set menuOptions(options) {\n        this._menuOptions = options;\n    }\n    get menuOptions() {\n        return this._menuOptions;\n    }\n    get actions() {\n        if (this._options.actionProvider) {\n            return this._options.actionProvider.getActions();\n        }\n        return this._actions;\n    }\n    set actions(actions) {\n        this._actions = actions;\n    }\n    show() {\n        super.show();\n        this.element.classList.add('active');\n        this._options.contextMenuProvider.showContextMenu({\n            getAnchor: () => this.element,\n            getActions: () => this.actions,\n            getActionsContext: () => this.menuOptions ? this.menuOptions.context : null,\n            getActionViewItem: (action, options) => this.menuOptions && this.menuOptions.actionViewItemProvider ? this.menuOptions.actionViewItemProvider(action, options) : undefined,\n            getKeyBinding: action => this.menuOptions && this.menuOptions.getKeyBinding ? this.menuOptions.getKeyBinding(action) : undefined,\n            getMenuClassName: () => this._options.menuClassName || '',\n            onHide: () => this.onHide(),\n            actionRunner: this.menuOptions ? this.menuOptions.actionRunner : undefined,\n            anchorAlignment: this.menuOptions ? this.menuOptions.anchorAlignment : 0 /* AnchorAlignment.LEFT */,\n            domForShadowRoot: this._options.menuAsChild ? this.element : undefined,\n            skipTelemetry: this._options.skipTelemetry\n        });\n    }\n    hide() {\n        super.hide();\n    }\n    onHide() {\n        this.hide();\n        this.element.classList.remove('active');\n    }\n}\n","import { $, append } from '../../dom.js';\nimport { BaseActionViewItem } from '../actionbar/actionViewItems.js';\nimport { DropdownMenu } from './dropdown.js';\nimport { Emitter } from '../../../common/event.js';\nimport './dropdown.css';\nimport { getDefaultHoverDelegate } from '../hover/hoverDelegateFactory.js';\nimport { getBaseLayerHoverDelegate } from '../hover/hoverDelegate2.js';\nexport class DropdownMenuActionViewItem extends BaseActionViewItem {\n    constructor(action, menuActionsOrProvider, contextMenuProvider, options = Object.create(null)) {\n        super(null, action, options);\n        this.actionItem = null;\n        this._onDidChangeVisibility = this._register(new Emitter());\n        this.onDidChangeVisibility = this._onDidChangeVisibility.event;\n        this.menuActionsOrProvider = menuActionsOrProvider;\n        this.contextMenuProvider = contextMenuProvider;\n        this.options = options;\n        if (this.options.actionRunner) {\n            this.actionRunner = this.options.actionRunner;\n        }\n    }\n    render(container) {\n        this.actionItem = container;\n        const labelRenderer = (el) => {\n            this.element = append(el, $('a.action-label'));\n            let classNames = [];\n            if (typeof this.options.classNames === 'string') {\n                classNames = this.options.classNames.split(/\\s+/g).filter(s => !!s);\n            }\n            else if (this.options.classNames) {\n                classNames = this.options.classNames;\n            }\n            // todo@aeschli: remove codicon, should come through `this.options.classNames`\n            if (!classNames.find(c => c === 'icon')) {\n                classNames.push('codicon');\n            }\n            this.element.classList.add(...classNames);\n            this.element.setAttribute('role', 'button');\n            this.element.setAttribute('aria-haspopup', 'true');\n            this.element.setAttribute('aria-expanded', 'false');\n            if (this._action.label) {\n                this._register(getBaseLayerHoverDelegate().setupManagedHover(this.options.hoverDelegate ?? getDefaultHoverDelegate('mouse'), this.element, this._action.label));\n            }\n            this.element.ariaLabel = this._action.label || '';\n            return null;\n        };\n        const isActionsArray = Array.isArray(this.menuActionsOrProvider);\n        const options = {\n            contextMenuProvider: this.contextMenuProvider,\n            labelRenderer: labelRenderer,\n            menuAsChild: this.options.menuAsChild,\n            actions: isActionsArray ? this.menuActionsOrProvider : undefined,\n            actionProvider: isActionsArray ? undefined : this.menuActionsOrProvider,\n            skipTelemetry: this.options.skipTelemetry\n        };\n        this.dropdownMenu = this._register(new DropdownMenu(container, options));\n        this._register(this.dropdownMenu.onDidChangeVisibility(visible => {\n            this.element?.setAttribute('aria-expanded', `${visible}`);\n            this._onDidChangeVisibility.fire(visible);\n        }));\n        this.dropdownMenu.menuOptions = {\n            actionViewItemProvider: this.options.actionViewItemProvider,\n            actionRunner: this.actionRunner,\n            getKeyBinding: this.options.keybindingProvider,\n            context: this._context\n        };\n        if (this.options.anchorAlignmentProvider) {\n            const that = this;\n            this.dropdownMenu.menuOptions = {\n                ...this.dropdownMenu.menuOptions,\n                get anchorAlignment() {\n                    return that.options.anchorAlignmentProvider();\n                }\n            };\n        }\n        this.updateTooltip();\n        this.updateEnabled();\n    }\n    getTooltip() {\n        let title = null;\n        if (this.action.tooltip) {\n            title = this.action.tooltip;\n        }\n        else if (this.action.label) {\n            title = this.action.label;\n        }\n        return title ?? undefined;\n    }\n    setActionContext(newContext) {\n        super.setActionContext(newContext);\n        if (this.dropdownMenu) {\n            if (this.dropdownMenu.menuOptions) {\n                this.dropdownMenu.menuOptions.context = newContext;\n            }\n            else {\n                this.dropdownMenu.menuOptions = { context: newContext };\n            }\n        }\n    }\n    show() {\n        this.dropdownMenu?.show();\n    }\n    updateEnabled() {\n        const disabled = !this.action.enabled;\n        this.actionItem?.classList.toggle('disabled', disabled);\n        this.element?.classList.toggle('disabled', disabled);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as DOM from '../../dom.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { ActionViewItem, BaseActionViewItem } from './actionViewItems.js';\nimport { createInstantHoverDelegate } from '../hover/hoverDelegateFactory.js';\nimport { ActionRunner, Separator } from '../../../common/actions.js';\nimport { Emitter } from '../../../common/event.js';\nimport { Disposable, DisposableMap, DisposableStore, dispose } from '../../../common/lifecycle.js';\nimport * as types from '../../../common/types.js';\nimport './actionbar.css';\nexport class ActionBar extends Disposable {\n    constructor(container, options = {}) {\n        super();\n        this._actionRunnerDisposables = this._register(new DisposableStore());\n        this.viewItemDisposables = this._register(new DisposableMap());\n        // Trigger Key Tracking\n        this.triggerKeyDown = false;\n        this.focusable = true;\n        this._onDidBlur = this._register(new Emitter());\n        this.onDidBlur = this._onDidBlur.event;\n        this._onDidCancel = this._register(new Emitter({ onWillAddFirstListener: () => this.cancelHasListener = true }));\n        this.onDidCancel = this._onDidCancel.event;\n        this.cancelHasListener = false;\n        this._onDidRun = this._register(new Emitter());\n        this.onDidRun = this._onDidRun.event;\n        this._onWillRun = this._register(new Emitter());\n        this.onWillRun = this._onWillRun.event;\n        this.options = options;\n        this._context = options.context ?? null;\n        this._orientation = this.options.orientation ?? 0 /* ActionsOrientation.HORIZONTAL */;\n        this._triggerKeys = {\n            keyDown: this.options.triggerKeys?.keyDown ?? false,\n            keys: this.options.triggerKeys?.keys ?? [3 /* KeyCode.Enter */, 10 /* KeyCode.Space */]\n        };\n        this._hoverDelegate = options.hoverDelegate ?? this._register(createInstantHoverDelegate());\n        if (this.options.actionRunner) {\n            this._actionRunner = this.options.actionRunner;\n        }\n        else {\n            this._actionRunner = new ActionRunner();\n            this._actionRunnerDisposables.add(this._actionRunner);\n        }\n        this._actionRunnerDisposables.add(this._actionRunner.onDidRun(e => this._onDidRun.fire(e)));\n        this._actionRunnerDisposables.add(this._actionRunner.onWillRun(e => this._onWillRun.fire(e)));\n        this.viewItems = [];\n        this.focusedItem = undefined;\n        this.domNode = document.createElement('div');\n        this.domNode.className = 'monaco-action-bar';\n        let previousKeys;\n        let nextKeys;\n        switch (this._orientation) {\n            case 0 /* ActionsOrientation.HORIZONTAL */:\n                previousKeys = [15 /* KeyCode.LeftArrow */];\n                nextKeys = [17 /* KeyCode.RightArrow */];\n                break;\n            case 1 /* ActionsOrientation.VERTICAL */:\n                previousKeys = [16 /* KeyCode.UpArrow */];\n                nextKeys = [18 /* KeyCode.DownArrow */];\n                this.domNode.className += ' vertical';\n                break;\n        }\n        this._register(DOM.addDisposableListener(this.domNode, DOM.EventType.KEY_DOWN, e => {\n            const event = new StandardKeyboardEvent(e);\n            let eventHandled = true;\n            const focusedItem = typeof this.focusedItem === 'number' ? this.viewItems[this.focusedItem] : undefined;\n            if (previousKeys && (event.equals(previousKeys[0]) || event.equals(previousKeys[1]))) {\n                eventHandled = this.focusPrevious();\n            }\n            else if (nextKeys && (event.equals(nextKeys[0]) || event.equals(nextKeys[1]))) {\n                eventHandled = this.focusNext();\n            }\n            else if (event.equals(9 /* KeyCode.Escape */) && this.cancelHasListener) {\n                this._onDidCancel.fire();\n            }\n            else if (event.equals(14 /* KeyCode.Home */)) {\n                eventHandled = this.focusFirst();\n            }\n            else if (event.equals(13 /* KeyCode.End */)) {\n                eventHandled = this.focusLast();\n            }\n            else if (event.equals(2 /* KeyCode.Tab */) && focusedItem instanceof BaseActionViewItem && focusedItem.trapsArrowNavigation) {\n                // Tab, so forcibly focus next #219199\n                eventHandled = this.focusNext(undefined, true);\n            }\n            else if (this.isTriggerKeyEvent(event)) {\n                // Staying out of the else branch even if not triggered\n                if (this._triggerKeys.keyDown) {\n                    this.doTrigger(event);\n                }\n                else {\n                    this.triggerKeyDown = true;\n                }\n            }\n            else {\n                eventHandled = false;\n            }\n            if (eventHandled) {\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        }));\n        this._register(DOM.addDisposableListener(this.domNode, DOM.EventType.KEY_UP, e => {\n            const event = new StandardKeyboardEvent(e);\n            // Run action on Enter/Space\n            if (this.isTriggerKeyEvent(event)) {\n                if (!this._triggerKeys.keyDown && this.triggerKeyDown) {\n                    this.triggerKeyDown = false;\n                    this.doTrigger(event);\n                }\n                event.preventDefault();\n                event.stopPropagation();\n            }\n            // Recompute focused item\n            else if (event.equals(2 /* KeyCode.Tab */) || event.equals(1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */) || event.equals(16 /* KeyCode.UpArrow */) || event.equals(18 /* KeyCode.DownArrow */) || event.equals(15 /* KeyCode.LeftArrow */) || event.equals(17 /* KeyCode.RightArrow */)) {\n                this.updateFocusedItem();\n            }\n        }));\n        this.focusTracker = this._register(DOM.trackFocus(this.domNode));\n        this._register(this.focusTracker.onDidBlur(() => {\n            if (DOM.getActiveElement() === this.domNode || !DOM.isAncestor(DOM.getActiveElement(), this.domNode)) {\n                this._onDidBlur.fire();\n                this.previouslyFocusedItem = this.focusedItem;\n                this.focusedItem = undefined;\n                this.triggerKeyDown = false;\n            }\n        }));\n        this._register(this.focusTracker.onDidFocus(() => this.updateFocusedItem()));\n        this.actionsList = document.createElement('ul');\n        this.actionsList.className = 'actions-container';\n        if (this.options.highlightToggledItems) {\n            this.actionsList.classList.add('highlight-toggled');\n        }\n        this.actionsList.setAttribute('role', this.options.ariaRole || 'toolbar');\n        if (this.options.ariaLabel) {\n            this.actionsList.setAttribute('aria-label', this.options.ariaLabel);\n        }\n        this.domNode.appendChild(this.actionsList);\n        container.appendChild(this.domNode);\n    }\n    refreshRole() {\n        if (this.length() >= 1) {\n            this.actionsList.setAttribute('role', this.options.ariaRole || 'toolbar');\n        }\n        else {\n            this.actionsList.setAttribute('role', 'presentation');\n        }\n    }\n    // Some action bars should not be focusable at times\n    // When an action bar is not focusable make sure to make all the elements inside it not focusable\n    // When an action bar is focusable again, make sure the first item can be focused\n    setFocusable(focusable) {\n        this.focusable = focusable;\n        if (this.focusable) {\n            const firstEnabled = this.viewItems.find(vi => vi instanceof BaseActionViewItem && vi.isEnabled());\n            if (firstEnabled instanceof BaseActionViewItem) {\n                firstEnabled.setFocusable(true);\n            }\n        }\n        else {\n            this.viewItems.forEach(vi => {\n                if (vi instanceof BaseActionViewItem) {\n                    vi.setFocusable(false);\n                }\n            });\n        }\n    }\n    isTriggerKeyEvent(event) {\n        let ret = false;\n        this._triggerKeys.keys.forEach(keyCode => {\n            ret = ret || event.equals(keyCode);\n        });\n        return ret;\n    }\n    updateFocusedItem() {\n        for (let i = 0; i < this.actionsList.children.length; i++) {\n            const elem = this.actionsList.children[i];\n            if (DOM.isAncestor(DOM.getActiveElement(), elem)) {\n                this.focusedItem = i;\n                this.viewItems[this.focusedItem]?.showHover?.();\n                break;\n            }\n        }\n    }\n    get context() {\n        return this._context;\n    }\n    set context(context) {\n        this._context = context;\n        this.viewItems.forEach(i => i.setActionContext(context));\n    }\n    get actionRunner() {\n        return this._actionRunner;\n    }\n    set actionRunner(actionRunner) {\n        this._actionRunner = actionRunner;\n        // when setting a new `IActionRunner` make sure to dispose old listeners and\n        // start to forward events from the new listener\n        this._actionRunnerDisposables.clear();\n        this._actionRunnerDisposables.add(this._actionRunner.onDidRun(e => this._onDidRun.fire(e)));\n        this._actionRunnerDisposables.add(this._actionRunner.onWillRun(e => this._onWillRun.fire(e)));\n        this.viewItems.forEach(item => item.actionRunner = actionRunner);\n    }\n    getContainer() {\n        return this.domNode;\n    }\n    getAction(indexOrElement) {\n        // by index\n        if (typeof indexOrElement === 'number') {\n            return this.viewItems[indexOrElement]?.action;\n        }\n        // by element\n        if (DOM.isHTMLElement(indexOrElement)) {\n            while (indexOrElement.parentElement !== this.actionsList) {\n                if (!indexOrElement.parentElement) {\n                    return undefined;\n                }\n                indexOrElement = indexOrElement.parentElement;\n            }\n            for (let i = 0; i < this.actionsList.childNodes.length; i++) {\n                if (this.actionsList.childNodes[i] === indexOrElement) {\n                    return this.viewItems[i].action;\n                }\n            }\n        }\n        return undefined;\n    }\n    push(arg, options = {}) {\n        const actions = Array.isArray(arg) ? arg : [arg];\n        let index = types.isNumber(options.index) ? options.index : null;\n        actions.forEach((action) => {\n            const actionViewItemElement = document.createElement('li');\n            actionViewItemElement.className = 'action-item';\n            actionViewItemElement.setAttribute('role', 'presentation');\n            let item;\n            const viewItemOptions = { hoverDelegate: this._hoverDelegate, ...options, isTabList: this.options.ariaRole === 'tablist' };\n            if (this.options.actionViewItemProvider) {\n                item = this.options.actionViewItemProvider(action, viewItemOptions);\n            }\n            if (!item) {\n                item = new ActionViewItem(this.context, action, viewItemOptions);\n            }\n            // Prevent native context menu on actions\n            if (!this.options.allowContextMenu) {\n                this.viewItemDisposables.set(item, DOM.addDisposableListener(actionViewItemElement, DOM.EventType.CONTEXT_MENU, (e) => {\n                    DOM.EventHelper.stop(e, true);\n                }));\n            }\n            item.actionRunner = this._actionRunner;\n            item.setActionContext(this.context);\n            item.render(actionViewItemElement);\n            if (this.focusable && item instanceof BaseActionViewItem && this.viewItems.length === 0) {\n                // We need to allow for the first enabled item to be focused on using tab navigation #106441\n                item.setFocusable(true);\n            }\n            if (index === null || index < 0 || index >= this.actionsList.children.length) {\n                this.actionsList.appendChild(actionViewItemElement);\n                this.viewItems.push(item);\n            }\n            else {\n                this.actionsList.insertBefore(actionViewItemElement, this.actionsList.children[index]);\n                this.viewItems.splice(index, 0, item);\n                index++;\n            }\n        });\n        if (typeof this.focusedItem === 'number') {\n            // After a clear actions might be re-added to simply toggle some actions. We should preserve focus #97128\n            this.focus(this.focusedItem);\n        }\n        this.refreshRole();\n    }\n    clear() {\n        if (this.isEmpty()) {\n            return;\n        }\n        this.viewItems = dispose(this.viewItems);\n        this.viewItemDisposables.clearAndDisposeAll();\n        DOM.clearNode(this.actionsList);\n        this.refreshRole();\n    }\n    length() {\n        return this.viewItems.length;\n    }\n    isEmpty() {\n        return this.viewItems.length === 0;\n    }\n    focus(arg) {\n        let selectFirst = false;\n        let index = undefined;\n        if (arg === undefined) {\n            selectFirst = true;\n        }\n        else if (typeof arg === 'number') {\n            index = arg;\n        }\n        else if (typeof arg === 'boolean') {\n            selectFirst = arg;\n        }\n        if (selectFirst && typeof this.focusedItem === 'undefined') {\n            const firstEnabled = this.viewItems.findIndex(item => item.isEnabled());\n            // Focus the first enabled item\n            this.focusedItem = firstEnabled === -1 ? undefined : firstEnabled;\n            this.updateFocus(undefined, undefined, true);\n        }\n        else {\n            if (index !== undefined) {\n                this.focusedItem = index;\n            }\n            this.updateFocus(undefined, undefined, true);\n        }\n    }\n    focusFirst() {\n        this.focusedItem = this.length() - 1;\n        return this.focusNext(true);\n    }\n    focusLast() {\n        this.focusedItem = 0;\n        return this.focusPrevious(true);\n    }\n    focusNext(forceLoop, forceFocus) {\n        if (typeof this.focusedItem === 'undefined') {\n            this.focusedItem = this.viewItems.length - 1;\n        }\n        else if (this.viewItems.length <= 1) {\n            return false;\n        }\n        const startIndex = this.focusedItem;\n        let item;\n        do {\n            if (!forceLoop && this.options.preventLoopNavigation && this.focusedItem + 1 >= this.viewItems.length) {\n                this.focusedItem = startIndex;\n                return false;\n            }\n            this.focusedItem = (this.focusedItem + 1) % this.viewItems.length;\n            item = this.viewItems[this.focusedItem];\n        } while (this.focusedItem !== startIndex && ((this.options.focusOnlyEnabledItems && !item.isEnabled()) || item.action.id === Separator.ID));\n        this.updateFocus(undefined, undefined, forceFocus);\n        return true;\n    }\n    focusPrevious(forceLoop) {\n        if (typeof this.focusedItem === 'undefined') {\n            this.focusedItem = 0;\n        }\n        else if (this.viewItems.length <= 1) {\n            return false;\n        }\n        const startIndex = this.focusedItem;\n        let item;\n        do {\n            this.focusedItem = this.focusedItem - 1;\n            if (this.focusedItem < 0) {\n                if (!forceLoop && this.options.preventLoopNavigation) {\n                    this.focusedItem = startIndex;\n                    return false;\n                }\n                this.focusedItem = this.viewItems.length - 1;\n            }\n            item = this.viewItems[this.focusedItem];\n        } while (this.focusedItem !== startIndex && ((this.options.focusOnlyEnabledItems && !item.isEnabled()) || item.action.id === Separator.ID));\n        this.updateFocus(true);\n        return true;\n    }\n    updateFocus(fromRight, preventScroll, forceFocus = false) {\n        if (typeof this.focusedItem === 'undefined') {\n            this.actionsList.focus({ preventScroll });\n        }\n        if (this.previouslyFocusedItem !== undefined && this.previouslyFocusedItem !== this.focusedItem) {\n            this.viewItems[this.previouslyFocusedItem]?.blur();\n        }\n        const actionViewItem = this.focusedItem !== undefined ? this.viewItems[this.focusedItem] : undefined;\n        if (actionViewItem) {\n            let focusItem = true;\n            if (!types.isFunction(actionViewItem.focus)) {\n                focusItem = false;\n            }\n            if (this.options.focusOnlyEnabledItems && types.isFunction(actionViewItem.isEnabled) && !actionViewItem.isEnabled()) {\n                focusItem = false;\n            }\n            if (actionViewItem.action.id === Separator.ID) {\n                focusItem = false;\n            }\n            if (!focusItem) {\n                this.actionsList.focus({ preventScroll });\n                this.previouslyFocusedItem = undefined;\n            }\n            else if (forceFocus || this.previouslyFocusedItem !== this.focusedItem) {\n                actionViewItem.focus(fromRight);\n                this.previouslyFocusedItem = this.focusedItem;\n            }\n            if (focusItem) {\n                actionViewItem.showHover?.();\n            }\n        }\n    }\n    doTrigger(event) {\n        if (typeof this.focusedItem === 'undefined') {\n            return; //nothing to focus\n        }\n        // trigger action\n        const actionViewItem = this.viewItems[this.focusedItem];\n        if (actionViewItem instanceof BaseActionViewItem) {\n            const context = (actionViewItem._context === null || actionViewItem._context === undefined) ? event : actionViewItem._context;\n            this.run(actionViewItem._action, context);\n        }\n    }\n    async run(action, context) {\n        await this._actionRunner.run(action, context);\n    }\n    dispose() {\n        this._context = undefined;\n        this.viewItems = dispose(this.viewItems);\n        this.getContainer().remove();\n        super.dispose();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { isFirefox } from '../../browser.js';\nimport { EventType as TouchEventType, Gesture } from '../../touch.js';\nimport { $, addDisposableListener, append, clearNode, createStyleSheet, Dimension, EventHelper, EventType, getActiveElement, getWindow, isAncestor, isInShadowDOM } from '../../dom.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { StandardMouseEvent } from '../../mouseEvent.js';\nimport { ActionBar } from '../actionbar/actionbar.js';\nimport { ActionViewItem, BaseActionViewItem } from '../actionbar/actionViewItems.js';\nimport { layout } from '../contextview/contextview.js';\nimport { DomScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { EmptySubmenuAction, Separator, SubmenuAction } from '../../../common/actions.js';\nimport { RunOnceScheduler } from '../../../common/async.js';\nimport { Codicon } from '../../../common/codicons.js';\nimport { getCodiconFontCharacters } from '../../../common/codiconsUtil.js';\nimport { ThemeIcon } from '../../../common/themables.js';\nimport { stripIcons } from '../../../common/iconLabels.js';\nimport { DisposableStore } from '../../../common/lifecycle.js';\nimport { isLinux, isMacintosh } from '../../../common/platform.js';\nimport * as strings from '../../../common/strings.js';\nexport const MENU_MNEMONIC_REGEX = /\\(&([^\\s&])\\)|(^|[^&])&([^\\s&])/;\nexport const MENU_ESCAPED_MNEMONIC_REGEX = /(&amp;)?(&amp;)([^\\s&])/g;\nexport var HorizontalDirection;\n(function (HorizontalDirection) {\n    HorizontalDirection[HorizontalDirection[\"Right\"] = 0] = \"Right\";\n    HorizontalDirection[HorizontalDirection[\"Left\"] = 1] = \"Left\";\n})(HorizontalDirection || (HorizontalDirection = {}));\nexport var VerticalDirection;\n(function (VerticalDirection) {\n    VerticalDirection[VerticalDirection[\"Above\"] = 0] = \"Above\";\n    VerticalDirection[VerticalDirection[\"Below\"] = 1] = \"Below\";\n})(VerticalDirection || (VerticalDirection = {}));\nexport class Menu extends ActionBar {\n    constructor(container, actions, options, menuStyles) {\n        container.classList.add('monaco-menu-container');\n        container.setAttribute('role', 'presentation');\n        const menuElement = document.createElement('div');\n        menuElement.classList.add('monaco-menu');\n        menuElement.setAttribute('role', 'presentation');\n        super(menuElement, {\n            orientation: 1 /* ActionsOrientation.VERTICAL */,\n            actionViewItemProvider: action => this.doGetActionViewItem(action, options, parentData),\n            context: options.context,\n            actionRunner: options.actionRunner,\n            ariaLabel: options.ariaLabel,\n            ariaRole: 'menu',\n            focusOnlyEnabledItems: true,\n            triggerKeys: { keys: [3 /* KeyCode.Enter */, ...(isMacintosh || isLinux ? [10 /* KeyCode.Space */] : [])], keyDown: true }\n        });\n        this.menuStyles = menuStyles;\n        this.menuElement = menuElement;\n        this.actionsList.tabIndex = 0;\n        this.initializeOrUpdateStyleSheet(container, menuStyles);\n        this._register(Gesture.addTarget(menuElement));\n        this._register(addDisposableListener(menuElement, EventType.KEY_DOWN, (e) => {\n            const event = new StandardKeyboardEvent(e);\n            // Stop tab navigation of menus\n            if (event.equals(2 /* KeyCode.Tab */)) {\n                e.preventDefault();\n            }\n        }));\n        if (options.enableMnemonics) {\n            this._register(addDisposableListener(menuElement, EventType.KEY_DOWN, (e) => {\n                const key = e.key.toLocaleLowerCase();\n                if (this.mnemonics.has(key)) {\n                    EventHelper.stop(e, true);\n                    const actions = this.mnemonics.get(key);\n                    if (actions.length === 1) {\n                        if (actions[0] instanceof SubmenuMenuActionViewItem && actions[0].container) {\n                            this.focusItemByElement(actions[0].container);\n                        }\n                        actions[0].onClick(e);\n                    }\n                    if (actions.length > 1) {\n                        const action = actions.shift();\n                        if (action && action.container) {\n                            this.focusItemByElement(action.container);\n                            actions.push(action);\n                        }\n                        this.mnemonics.set(key, actions);\n                    }\n                }\n            }));\n        }\n        if (isLinux) {\n            this._register(addDisposableListener(menuElement, EventType.KEY_DOWN, e => {\n                const event = new StandardKeyboardEvent(e);\n                if (event.equals(14 /* KeyCode.Home */) || event.equals(11 /* KeyCode.PageUp */)) {\n                    this.focusedItem = this.viewItems.length - 1;\n                    this.focusNext();\n                    EventHelper.stop(e, true);\n                }\n                else if (event.equals(13 /* KeyCode.End */) || event.equals(12 /* KeyCode.PageDown */)) {\n                    this.focusedItem = 0;\n                    this.focusPrevious();\n                    EventHelper.stop(e, true);\n                }\n            }));\n        }\n        this._register(addDisposableListener(this.domNode, EventType.MOUSE_OUT, e => {\n            const relatedTarget = e.relatedTarget;\n            if (!isAncestor(relatedTarget, this.domNode)) {\n                this.focusedItem = undefined;\n                this.updateFocus();\n                e.stopPropagation();\n            }\n        }));\n        this._register(addDisposableListener(this.actionsList, EventType.MOUSE_OVER, e => {\n            let target = e.target;\n            if (!target || !isAncestor(target, this.actionsList) || target === this.actionsList) {\n                return;\n            }\n            while (target.parentElement !== this.actionsList && target.parentElement !== null) {\n                target = target.parentElement;\n            }\n            if (target.classList.contains('action-item')) {\n                const lastFocusedItem = this.focusedItem;\n                this.setFocusedItem(target);\n                if (lastFocusedItem !== this.focusedItem) {\n                    this.updateFocus();\n                }\n            }\n        }));\n        // Support touch on actions list to focus items (needed for submenus)\n        this._register(Gesture.addTarget(this.actionsList));\n        this._register(addDisposableListener(this.actionsList, TouchEventType.Tap, e => {\n            let target = e.initialTarget;\n            if (!target || !isAncestor(target, this.actionsList) || target === this.actionsList) {\n                return;\n            }\n            while (target.parentElement !== this.actionsList && target.parentElement !== null) {\n                target = target.parentElement;\n            }\n            if (target.classList.contains('action-item')) {\n                const lastFocusedItem = this.focusedItem;\n                this.setFocusedItem(target);\n                if (lastFocusedItem !== this.focusedItem) {\n                    this.updateFocus();\n                }\n            }\n        }));\n        const parentData = {\n            parent: this\n        };\n        this.mnemonics = new Map();\n        // Scroll Logic\n        this.scrollableElement = this._register(new DomScrollableElement(menuElement, {\n            alwaysConsumeMouseWheel: true,\n            horizontal: 2 /* ScrollbarVisibility.Hidden */,\n            vertical: 3 /* ScrollbarVisibility.Visible */,\n            verticalScrollbarSize: 7,\n            handleMouseWheel: true,\n            useShadows: true\n        }));\n        const scrollElement = this.scrollableElement.getDomNode();\n        scrollElement.style.position = '';\n        this.styleScrollElement(scrollElement, menuStyles);\n        // Support scroll on menu drag\n        this._register(addDisposableListener(menuElement, TouchEventType.Change, e => {\n            EventHelper.stop(e, true);\n            const scrollTop = this.scrollableElement.getScrollPosition().scrollTop;\n            this.scrollableElement.setScrollPosition({ scrollTop: scrollTop - e.translationY });\n        }));\n        this._register(addDisposableListener(scrollElement, EventType.MOUSE_UP, e => {\n            // Absorb clicks in menu dead space https://github.com/microsoft/vscode/issues/63575\n            // We do this on the scroll element so the scroll bar doesn't dismiss the menu either\n            e.preventDefault();\n        }));\n        const window = getWindow(container);\n        menuElement.style.maxHeight = `${Math.max(10, window.innerHeight - container.getBoundingClientRect().top - 35)}px`;\n        actions = actions.filter((a, idx) => {\n            if (options.submenuIds?.has(a.id)) {\n                console.warn(`Found submenu cycle: ${a.id}`);\n                return false;\n            }\n            // Filter out consecutive or useless separators\n            if (a instanceof Separator) {\n                if (idx === actions.length - 1 || idx === 0) {\n                    return false;\n                }\n                const prevAction = actions[idx - 1];\n                if (prevAction instanceof Separator) {\n                    return false;\n                }\n            }\n            return true;\n        });\n        this.push(actions, { icon: true, label: true, isMenu: true });\n        container.appendChild(this.scrollableElement.getDomNode());\n        this.scrollableElement.scanDomNode();\n        this.viewItems.filter(item => !(item instanceof MenuSeparatorActionViewItem)).forEach((item, index, array) => {\n            item.updatePositionInSet(index + 1, array.length);\n        });\n    }\n    initializeOrUpdateStyleSheet(container, style) {\n        if (!this.styleSheet) {\n            if (isInShadowDOM(container)) {\n                this.styleSheet = createStyleSheet(container);\n            }\n            else {\n                if (!Menu.globalStyleSheet) {\n                    Menu.globalStyleSheet = createStyleSheet();\n                }\n                this.styleSheet = Menu.globalStyleSheet;\n            }\n        }\n        this.styleSheet.textContent = getMenuWidgetCSS(style, isInShadowDOM(container));\n    }\n    styleScrollElement(scrollElement, style) {\n        const fgColor = style.foregroundColor ?? '';\n        const bgColor = style.backgroundColor ?? '';\n        const border = style.borderColor ? `1px solid ${style.borderColor}` : '';\n        const borderRadius = '5px';\n        const shadow = style.shadowColor ? `0 2px 8px ${style.shadowColor}` : '';\n        scrollElement.style.outline = border;\n        scrollElement.style.borderRadius = borderRadius;\n        scrollElement.style.color = fgColor;\n        scrollElement.style.backgroundColor = bgColor;\n        scrollElement.style.boxShadow = shadow;\n    }\n    getContainer() {\n        return this.scrollableElement.getDomNode();\n    }\n    get onScroll() {\n        return this.scrollableElement.onScroll;\n    }\n    focusItemByElement(element) {\n        const lastFocusedItem = this.focusedItem;\n        this.setFocusedItem(element);\n        if (lastFocusedItem !== this.focusedItem) {\n            this.updateFocus();\n        }\n    }\n    setFocusedItem(element) {\n        for (let i = 0; i < this.actionsList.children.length; i++) {\n            const elem = this.actionsList.children[i];\n            if (element === elem) {\n                this.focusedItem = i;\n                break;\n            }\n        }\n    }\n    updateFocus(fromRight) {\n        super.updateFocus(fromRight, true, true);\n        if (typeof this.focusedItem !== 'undefined') {\n            // Workaround for #80047 caused by an issue in chromium\n            // https://bugs.chromium.org/p/chromium/issues/detail?id=414283\n            // When that's fixed, just call this.scrollableElement.scanDomNode()\n            this.scrollableElement.setScrollPosition({\n                scrollTop: Math.round(this.menuElement.scrollTop)\n            });\n        }\n    }\n    doGetActionViewItem(action, options, parentData) {\n        if (action instanceof Separator) {\n            return new MenuSeparatorActionViewItem(options.context, action, { icon: true }, this.menuStyles);\n        }\n        else if (action instanceof SubmenuAction) {\n            const menuActionViewItem = new SubmenuMenuActionViewItem(action, action.actions, parentData, { ...options, submenuIds: new Set([...(options.submenuIds || []), action.id]) }, this.menuStyles);\n            if (options.enableMnemonics) {\n                const mnemonic = menuActionViewItem.getMnemonic();\n                if (mnemonic && menuActionViewItem.isEnabled()) {\n                    let actionViewItems = [];\n                    if (this.mnemonics.has(mnemonic)) {\n                        actionViewItems = this.mnemonics.get(mnemonic);\n                    }\n                    actionViewItems.push(menuActionViewItem);\n                    this.mnemonics.set(mnemonic, actionViewItems);\n                }\n            }\n            return menuActionViewItem;\n        }\n        else {\n            const menuItemOptions = { enableMnemonics: options.enableMnemonics, useEventAsContext: options.useEventAsContext };\n            if (options.getKeyBinding) {\n                const keybinding = options.getKeyBinding(action);\n                if (keybinding) {\n                    const keybindingLabel = keybinding.getLabel();\n                    if (keybindingLabel) {\n                        menuItemOptions.keybinding = keybindingLabel;\n                    }\n                }\n            }\n            const menuActionViewItem = new BaseMenuActionViewItem(options.context, action, menuItemOptions, this.menuStyles);\n            if (options.enableMnemonics) {\n                const mnemonic = menuActionViewItem.getMnemonic();\n                if (mnemonic && menuActionViewItem.isEnabled()) {\n                    let actionViewItems = [];\n                    if (this.mnemonics.has(mnemonic)) {\n                        actionViewItems = this.mnemonics.get(mnemonic);\n                    }\n                    actionViewItems.push(menuActionViewItem);\n                    this.mnemonics.set(mnemonic, actionViewItems);\n                }\n            }\n            return menuActionViewItem;\n        }\n    }\n}\nclass BaseMenuActionViewItem extends BaseActionViewItem {\n    constructor(ctx, action, options, menuStyle) {\n        options.isMenu = true;\n        super(action, action, options);\n        this.menuStyle = menuStyle;\n        this.options = options;\n        this.options.icon = options.icon !== undefined ? options.icon : false;\n        this.options.label = options.label !== undefined ? options.label : true;\n        this.cssClass = '';\n        // Set mnemonic\n        if (this.options.label && options.enableMnemonics) {\n            const label = this.action.label;\n            if (label) {\n                const matches = MENU_MNEMONIC_REGEX.exec(label);\n                if (matches) {\n                    this.mnemonic = (!!matches[1] ? matches[1] : matches[3]).toLocaleLowerCase();\n                }\n            }\n        }\n        // Add mouse up listener later to avoid accidental clicks\n        this.runOnceToEnableMouseUp = new RunOnceScheduler(() => {\n            if (!this.element) {\n                return;\n            }\n            this._register(addDisposableListener(this.element, EventType.MOUSE_UP, e => {\n                // removed default prevention as it conflicts\n                // with BaseActionViewItem #101537\n                // add back if issues arise and link new issue\n                EventHelper.stop(e, true);\n                // See https://developer.mozilla.org/en-US/Add-ons/WebExtensions/Interact_with_the_clipboard\n                // > Writing to the clipboard\n                // > You can use the \"cut\" and \"copy\" commands without any special\n                // permission if you are using them in a short-lived event handler\n                // for a user action (for example, a click handler).\n                // => to get the Copy and Paste context menu actions working on Firefox,\n                // there should be no timeout here\n                if (isFirefox) {\n                    const mouseEvent = new StandardMouseEvent(getWindow(this.element), e);\n                    // Allowing right click to trigger the event causes the issue described below,\n                    // but since the solution below does not work in FF, we must disable right click\n                    if (mouseEvent.rightButton) {\n                        return;\n                    }\n                    this.onClick(e);\n                }\n                // In all other cases, set timeout to allow context menu cancellation to trigger\n                // otherwise the action will destroy the menu and a second context menu\n                // will still trigger for right click.\n                else {\n                    setTimeout(() => {\n                        this.onClick(e);\n                    }, 0);\n                }\n            }));\n            this._register(addDisposableListener(this.element, EventType.CONTEXT_MENU, e => {\n                EventHelper.stop(e, true);\n            }));\n        }, 100);\n        this._register(this.runOnceToEnableMouseUp);\n    }\n    render(container) {\n        super.render(container);\n        if (!this.element) {\n            return;\n        }\n        this.container = container;\n        this.item = append(this.element, $('a.action-menu-item'));\n        if (this._action.id === Separator.ID) {\n            // A separator is a presentation item\n            this.item.setAttribute('role', 'presentation');\n        }\n        else {\n            this.item.setAttribute('role', 'menuitem');\n            if (this.mnemonic) {\n                this.item.setAttribute('aria-keyshortcuts', `${this.mnemonic}`);\n            }\n        }\n        this.check = append(this.item, $('span.menu-item-check' + ThemeIcon.asCSSSelector(Codicon.menuSelection)));\n        this.check.setAttribute('role', 'none');\n        this.label = append(this.item, $('span.action-label'));\n        if (this.options.label && this.options.keybinding) {\n            append(this.item, $('span.keybinding')).textContent = this.options.keybinding;\n        }\n        // Adds mouse up listener to actually run the action\n        this.runOnceToEnableMouseUp.schedule();\n        this.updateClass();\n        this.updateLabel();\n        this.updateTooltip();\n        this.updateEnabled();\n        this.updateChecked();\n        this.applyStyle();\n    }\n    blur() {\n        super.blur();\n        this.applyStyle();\n    }\n    focus() {\n        super.focus();\n        this.item?.focus();\n        this.applyStyle();\n    }\n    updatePositionInSet(pos, setSize) {\n        if (this.item) {\n            this.item.setAttribute('aria-posinset', `${pos}`);\n            this.item.setAttribute('aria-setsize', `${setSize}`);\n        }\n    }\n    updateLabel() {\n        if (!this.label) {\n            return;\n        }\n        if (this.options.label) {\n            clearNode(this.label);\n            let label = stripIcons(this.action.label);\n            if (label) {\n                const cleanLabel = cleanMnemonic(label);\n                if (!this.options.enableMnemonics) {\n                    label = cleanLabel;\n                }\n                this.label.setAttribute('aria-label', cleanLabel.replace(/&&/g, '&'));\n                const matches = MENU_MNEMONIC_REGEX.exec(label);\n                if (matches) {\n                    label = strings.escape(label);\n                    // This is global, reset it\n                    MENU_ESCAPED_MNEMONIC_REGEX.lastIndex = 0;\n                    let escMatch = MENU_ESCAPED_MNEMONIC_REGEX.exec(label);\n                    // We can't use negative lookbehind so if we match our negative and skip\n                    while (escMatch && escMatch[1]) {\n                        escMatch = MENU_ESCAPED_MNEMONIC_REGEX.exec(label);\n                    }\n                    const replaceDoubleEscapes = (str) => str.replace(/&amp;&amp;/g, '&amp;');\n                    if (escMatch) {\n                        this.label.append(strings.ltrim(replaceDoubleEscapes(label.substr(0, escMatch.index)), ' '), $('u', { 'aria-hidden': 'true' }, escMatch[3]), strings.rtrim(replaceDoubleEscapes(label.substr(escMatch.index + escMatch[0].length)), ' '));\n                    }\n                    else {\n                        this.label.innerText = replaceDoubleEscapes(label).trim();\n                    }\n                    this.item?.setAttribute('aria-keyshortcuts', (!!matches[1] ? matches[1] : matches[3]).toLocaleLowerCase());\n                }\n                else {\n                    this.label.innerText = label.replace(/&&/g, '&').trim();\n                }\n            }\n        }\n    }\n    updateTooltip() {\n        // menus should function like native menus and they do not have tooltips\n    }\n    updateClass() {\n        if (this.cssClass && this.item) {\n            this.item.classList.remove(...this.cssClass.split(' '));\n        }\n        if (this.options.icon && this.label) {\n            this.cssClass = this.action.class || '';\n            this.label.classList.add('icon');\n            if (this.cssClass) {\n                this.label.classList.add(...this.cssClass.split(' '));\n            }\n            this.updateEnabled();\n        }\n        else if (this.label) {\n            this.label.classList.remove('icon');\n        }\n    }\n    updateEnabled() {\n        if (this.action.enabled) {\n            if (this.element) {\n                this.element.classList.remove('disabled');\n                this.element.removeAttribute('aria-disabled');\n            }\n            if (this.item) {\n                this.item.classList.remove('disabled');\n                this.item.removeAttribute('aria-disabled');\n                this.item.tabIndex = 0;\n            }\n        }\n        else {\n            if (this.element) {\n                this.element.classList.add('disabled');\n                this.element.setAttribute('aria-disabled', 'true');\n            }\n            if (this.item) {\n                this.item.classList.add('disabled');\n                this.item.setAttribute('aria-disabled', 'true');\n            }\n        }\n    }\n    updateChecked() {\n        if (!this.item) {\n            return;\n        }\n        const checked = this.action.checked;\n        this.item.classList.toggle('checked', !!checked);\n        if (checked !== undefined) {\n            this.item.setAttribute('role', 'menuitemcheckbox');\n            this.item.setAttribute('aria-checked', checked ? 'true' : 'false');\n        }\n        else {\n            this.item.setAttribute('role', 'menuitem');\n            this.item.setAttribute('aria-checked', '');\n        }\n    }\n    getMnemonic() {\n        return this.mnemonic;\n    }\n    applyStyle() {\n        const isSelected = this.element && this.element.classList.contains('focused');\n        const fgColor = isSelected && this.menuStyle.selectionForegroundColor ? this.menuStyle.selectionForegroundColor : this.menuStyle.foregroundColor;\n        const bgColor = isSelected && this.menuStyle.selectionBackgroundColor ? this.menuStyle.selectionBackgroundColor : undefined;\n        const outline = isSelected && this.menuStyle.selectionBorderColor ? `1px solid ${this.menuStyle.selectionBorderColor}` : '';\n        const outlineOffset = isSelected && this.menuStyle.selectionBorderColor ? `-1px` : '';\n        if (this.item) {\n            this.item.style.color = fgColor ?? '';\n            this.item.style.backgroundColor = bgColor ?? '';\n            this.item.style.outline = outline;\n            this.item.style.outlineOffset = outlineOffset;\n        }\n        if (this.check) {\n            this.check.style.color = fgColor ?? '';\n        }\n    }\n}\nclass SubmenuMenuActionViewItem extends BaseMenuActionViewItem {\n    constructor(action, submenuActions, parentData, submenuOptions, menuStyles) {\n        super(action, action, submenuOptions, menuStyles);\n        this.submenuActions = submenuActions;\n        this.parentData = parentData;\n        this.submenuOptions = submenuOptions;\n        this.mysubmenu = null;\n        this.submenuDisposables = this._register(new DisposableStore());\n        this.mouseOver = false;\n        this.expandDirection = submenuOptions && submenuOptions.expandDirection !== undefined ? submenuOptions.expandDirection : { horizontal: HorizontalDirection.Right, vertical: VerticalDirection.Below };\n        this.showScheduler = new RunOnceScheduler(() => {\n            if (this.mouseOver) {\n                this.cleanupExistingSubmenu(false);\n                this.createSubmenu(false);\n            }\n        }, 250);\n        this.hideScheduler = new RunOnceScheduler(() => {\n            if (this.element && (!isAncestor(getActiveElement(), this.element) && this.parentData.submenu === this.mysubmenu)) {\n                this.parentData.parent.focus(false);\n                this.cleanupExistingSubmenu(true);\n            }\n        }, 750);\n    }\n    render(container) {\n        super.render(container);\n        if (!this.element) {\n            return;\n        }\n        if (this.item) {\n            this.item.classList.add('monaco-submenu-item');\n            this.item.tabIndex = 0;\n            this.item.setAttribute('aria-haspopup', 'true');\n            this.updateAriaExpanded('false');\n            this.submenuIndicator = append(this.item, $('span.submenu-indicator' + ThemeIcon.asCSSSelector(Codicon.menuSubmenu)));\n            this.submenuIndicator.setAttribute('aria-hidden', 'true');\n        }\n        this._register(addDisposableListener(this.element, EventType.KEY_UP, e => {\n            const event = new StandardKeyboardEvent(e);\n            if (event.equals(17 /* KeyCode.RightArrow */) || event.equals(3 /* KeyCode.Enter */)) {\n                EventHelper.stop(e, true);\n                this.createSubmenu(true);\n            }\n        }));\n        this._register(addDisposableListener(this.element, EventType.KEY_DOWN, e => {\n            const event = new StandardKeyboardEvent(e);\n            if (getActiveElement() === this.item) {\n                if (event.equals(17 /* KeyCode.RightArrow */) || event.equals(3 /* KeyCode.Enter */)) {\n                    EventHelper.stop(e, true);\n                }\n            }\n        }));\n        this._register(addDisposableListener(this.element, EventType.MOUSE_OVER, e => {\n            if (!this.mouseOver) {\n                this.mouseOver = true;\n                this.showScheduler.schedule();\n            }\n        }));\n        this._register(addDisposableListener(this.element, EventType.MOUSE_LEAVE, e => {\n            this.mouseOver = false;\n        }));\n        this._register(addDisposableListener(this.element, EventType.FOCUS_OUT, e => {\n            if (this.element && !isAncestor(getActiveElement(), this.element)) {\n                this.hideScheduler.schedule();\n            }\n        }));\n        this._register(this.parentData.parent.onScroll(() => {\n            if (this.parentData.submenu === this.mysubmenu) {\n                this.parentData.parent.focus(false);\n                this.cleanupExistingSubmenu(true);\n            }\n        }));\n    }\n    updateEnabled() {\n        // override on submenu entry\n        // native menus do not observe enablement on sumbenus\n        // we mimic that behavior\n    }\n    onClick(e) {\n        // stop clicking from trying to run an action\n        EventHelper.stop(e, true);\n        this.cleanupExistingSubmenu(false);\n        this.createSubmenu(true);\n    }\n    cleanupExistingSubmenu(force) {\n        if (this.parentData.submenu && (force || (this.parentData.submenu !== this.mysubmenu))) {\n            // disposal may throw if the submenu has already been removed\n            try {\n                this.parentData.submenu.dispose();\n            }\n            catch { }\n            this.parentData.submenu = undefined;\n            this.updateAriaExpanded('false');\n            if (this.submenuContainer) {\n                this.submenuDisposables.clear();\n                this.submenuContainer = undefined;\n            }\n        }\n    }\n    calculateSubmenuMenuLayout(windowDimensions, submenu, entry, expandDirection) {\n        const ret = { top: 0, left: 0 };\n        // Start with horizontal\n        ret.left = layout(windowDimensions.width, submenu.width, { position: expandDirection.horizontal === HorizontalDirection.Right ? 0 /* LayoutAnchorPosition.Before */ : 1 /* LayoutAnchorPosition.After */, offset: entry.left, size: entry.width });\n        // We don't have enough room to layout the menu fully, so we are overlapping the menu\n        if (ret.left >= entry.left && ret.left < entry.left + entry.width) {\n            if (entry.left + 10 + submenu.width <= windowDimensions.width) {\n                ret.left = entry.left + 10;\n            }\n            entry.top += 10;\n            entry.height = 0;\n        }\n        // Now that we have a horizontal position, try layout vertically\n        ret.top = layout(windowDimensions.height, submenu.height, { position: 0 /* LayoutAnchorPosition.Before */, offset: entry.top, size: 0 });\n        // We didn't have enough room below, but we did above, so we shift down to align the menu\n        if (ret.top + submenu.height === entry.top && ret.top + entry.height + submenu.height <= windowDimensions.height) {\n            ret.top += entry.height;\n        }\n        return ret;\n    }\n    createSubmenu(selectFirstItem = true) {\n        if (!this.element) {\n            return;\n        }\n        if (!this.parentData.submenu) {\n            this.updateAriaExpanded('true');\n            this.submenuContainer = append(this.element, $('div.monaco-submenu'));\n            this.submenuContainer.classList.add('menubar-menu-items-holder', 'context-view');\n            // Set the top value of the menu container before construction\n            // This allows the menu constructor to calculate the proper max height\n            const computedStyles = getWindow(this.parentData.parent.domNode).getComputedStyle(this.parentData.parent.domNode);\n            const paddingTop = parseFloat(computedStyles.paddingTop || '0') || 0;\n            // this.submenuContainer.style.top = `${this.element.offsetTop - this.parentData.parent.scrollOffset - paddingTop}px`;\n            this.submenuContainer.style.zIndex = '1';\n            this.submenuContainer.style.position = 'fixed';\n            this.submenuContainer.style.top = '0';\n            this.submenuContainer.style.left = '0';\n            this.parentData.submenu = new Menu(this.submenuContainer, this.submenuActions.length ? this.submenuActions : [new EmptySubmenuAction()], this.submenuOptions, this.menuStyle);\n            // layout submenu\n            const entryBox = this.element.getBoundingClientRect();\n            const entryBoxUpdated = {\n                top: entryBox.top - paddingTop,\n                left: entryBox.left,\n                height: entryBox.height + 2 * paddingTop,\n                width: entryBox.width\n            };\n            const viewBox = this.submenuContainer.getBoundingClientRect();\n            const window = getWindow(this.element);\n            const { top, left } = this.calculateSubmenuMenuLayout(new Dimension(window.innerWidth, window.innerHeight), Dimension.lift(viewBox), entryBoxUpdated, this.expandDirection);\n            // subtract offsets caused by transform parent\n            this.submenuContainer.style.left = `${left - viewBox.left}px`;\n            this.submenuContainer.style.top = `${top - viewBox.top}px`;\n            this.submenuDisposables.add(addDisposableListener(this.submenuContainer, EventType.KEY_UP, e => {\n                const event = new StandardKeyboardEvent(e);\n                if (event.equals(15 /* KeyCode.LeftArrow */)) {\n                    EventHelper.stop(e, true);\n                    this.parentData.parent.focus();\n                    this.cleanupExistingSubmenu(true);\n                }\n            }));\n            this.submenuDisposables.add(addDisposableListener(this.submenuContainer, EventType.KEY_DOWN, e => {\n                const event = new StandardKeyboardEvent(e);\n                if (event.equals(15 /* KeyCode.LeftArrow */)) {\n                    EventHelper.stop(e, true);\n                }\n            }));\n            this.submenuDisposables.add(this.parentData.submenu.onDidCancel(() => {\n                this.parentData.parent.focus();\n                this.cleanupExistingSubmenu(true);\n            }));\n            this.parentData.submenu.focus(selectFirstItem);\n            this.mysubmenu = this.parentData.submenu;\n        }\n        else {\n            this.parentData.submenu.focus(false);\n        }\n    }\n    updateAriaExpanded(value) {\n        if (this.item) {\n            this.item?.setAttribute('aria-expanded', value);\n        }\n    }\n    applyStyle() {\n        super.applyStyle();\n        const isSelected = this.element && this.element.classList.contains('focused');\n        const fgColor = isSelected && this.menuStyle.selectionForegroundColor ? this.menuStyle.selectionForegroundColor : this.menuStyle.foregroundColor;\n        if (this.submenuIndicator) {\n            this.submenuIndicator.style.color = fgColor ?? '';\n        }\n    }\n    dispose() {\n        super.dispose();\n        this.hideScheduler.dispose();\n        if (this.mysubmenu) {\n            this.mysubmenu.dispose();\n            this.mysubmenu = null;\n        }\n        if (this.submenuContainer) {\n            this.submenuContainer = undefined;\n        }\n    }\n}\nclass MenuSeparatorActionViewItem extends ActionViewItem {\n    constructor(context, action, options, menuStyles) {\n        super(context, action, options);\n        this.menuStyles = menuStyles;\n    }\n    render(container) {\n        super.render(container);\n        if (this.label) {\n            this.label.style.borderBottomColor = this.menuStyles.separatorColor ? `${this.menuStyles.separatorColor}` : '';\n        }\n    }\n}\nexport function cleanMnemonic(label) {\n    const regex = MENU_MNEMONIC_REGEX;\n    const matches = regex.exec(label);\n    if (!matches) {\n        return label;\n    }\n    const mnemonicInText = !matches[1];\n    return label.replace(regex, mnemonicInText ? '$2$3' : '').trim();\n}\nexport function formatRule(c) {\n    const fontCharacter = getCodiconFontCharacters()[c.id];\n    return `.codicon-${c.id}:before { content: '\\\\${fontCharacter.toString(16)}'; }`;\n}\nfunction getMenuWidgetCSS(style, isForShadowDom) {\n    let result = /* css */ `\n.monaco-menu {\n\tfont-size: 13px;\n\tborder-radius: 5px;\n\tmin-width: 160px;\n}\n\n${formatRule(Codicon.menuSelection)}\n${formatRule(Codicon.menuSubmenu)}\n\n.monaco-menu .monaco-action-bar {\n\ttext-align: right;\n\toverflow: hidden;\n\twhite-space: nowrap;\n}\n\n.monaco-menu .monaco-action-bar .actions-container {\n\tdisplay: flex;\n\tmargin: 0 auto;\n\tpadding: 0;\n\twidth: 100%;\n\tjustify-content: flex-end;\n}\n\n.monaco-menu .monaco-action-bar.vertical .actions-container {\n\tdisplay: inline-block;\n}\n\n.monaco-menu .monaco-action-bar.reverse .actions-container {\n\tflex-direction: row-reverse;\n}\n\n.monaco-menu .monaco-action-bar .action-item {\n\tcursor: pointer;\n\tdisplay: inline-block;\n\ttransition: transform 50ms ease;\n\tposition: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */\n}\n\n.monaco-menu .monaco-action-bar .action-item.disabled {\n\tcursor: default;\n}\n\n.monaco-menu .monaco-action-bar .action-item .icon,\n.monaco-menu .monaco-action-bar .action-item .codicon {\n\tdisplay: inline-block;\n}\n\n.monaco-menu .monaco-action-bar .action-item .codicon {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.monaco-menu .monaco-action-bar .action-label {\n\tfont-size: 11px;\n\tmargin-right: 4px;\n}\n\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label,\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {\n\tcolor: var(--vscode-disabledForeground);\n}\n\n/* Vertical actions */\n\n.monaco-menu .monaco-action-bar.vertical {\n\ttext-align: left;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tdisplay: block;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tdisplay: block;\n\tborder-bottom: 1px solid var(--vscode-menu-separatorBackground);\n\tpadding-top: 1px;\n\tpadding: 30px;\n}\n\n.monaco-menu .secondary-actions .monaco-action-bar .action-label {\n\tmargin-left: 6px;\n}\n\n/* Action Items */\n.monaco-menu .monaco-action-bar .action-item.select-container {\n\toverflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */\n\tflex: 1;\n\tmax-width: 170px;\n\tmin-width: 60px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tmargin-right: 10px;\n}\n\n.monaco-menu .monaco-action-bar.vertical {\n\tmargin-left: 0;\n\toverflow: visible;\n}\n\n.monaco-menu .monaco-action-bar.vertical .actions-container {\n\tdisplay: block;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tpadding: 0;\n\ttransform: none;\n\tdisplay: flex;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item.active {\n\ttransform: none;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\n\tflex: 1 1 auto;\n\tdisplay: flex;\n\theight: 2em;\n\talign-items: center;\n\tposition: relative;\n\tmargin: 0 4px;\n\tborder-radius: 4px;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,\n.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {\n\topacity: unset;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label {\n\tflex: 1 1 auto;\n\ttext-decoration: none;\n\tpadding: 0 1em;\n\tbackground: none;\n\tfont-size: 12px;\n\tline-height: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .keybinding,\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\tdisplay: inline-block;\n\tflex: 2 1 auto;\n\tpadding: 0 1em;\n\ttext-align: right;\n\tfont-size: 12px;\n\tline-height: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\theight: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {\n\tfont-size: 16px !important;\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {\n\tmargin-left: auto;\n\tmargin-right: -20px;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {\n\topacity: 0.4;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {\n\tdisplay: inline-block;\n\tbox-sizing: border-box;\n\tmargin: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tposition: static;\n\toverflow: visible;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {\n\tposition: absolute;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\twidth: 100%;\n\theight: 0px !important;\n\topacity: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {\n\tpadding: 0.7em 1em 0.1em 1em;\n\tfont-weight: bold;\n\topacity: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:hover {\n\tcolor: inherit;\n}\n\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\n\tposition: absolute;\n\tvisibility: hidden;\n\twidth: 1em;\n\theight: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {\n\tvisibility: visible;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n/* Context Menu */\n\n.context-view.monaco-menu-container {\n\toutline: 0;\n\tborder: none;\n\tanimation: fadeIn 0.083s linear;\n\t-webkit-app-region: no-drag;\n}\n\n.context-view.monaco-menu-container :focus,\n.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,\n.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {\n\toutline: 0;\n}\n\n.hc-black .context-view.monaco-menu-container,\n.hc-light .context-view.monaco-menu-container,\n:host-context(.hc-black) .context-view.monaco-menu-container,\n:host-context(.hc-light) .context-view.monaco-menu-container {\n\tbox-shadow: none;\n}\n\n.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {\n\tbackground: none;\n}\n\n/* Vertical Action Bar Styles */\n\n.monaco-menu .monaco-action-bar.vertical {\n\tpadding: 4px 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\n\theight: 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),\n.monaco-menu .monaco-action-bar.vertical .keybinding {\n\tfont-size: inherit;\n\tpadding: 0 2em;\n\tmax-height: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\n\tfont-size: inherit;\n\twidth: 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tfont-size: inherit;\n\tmargin: 5px 0 !important;\n\tpadding: 0;\n\tborder-radius: 0;\n}\n\n.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tmargin-left: 0;\n\tmargin-right: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\tfont-size: 60%;\n\tpadding: 0 1.8em;\n}\n\n.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator,\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\theight: 100%;\n\tmask-size: 10px 10px;\n\t-webkit-mask-size: 10px 10px;\n}\n\n.monaco-menu .action-item {\n\tcursor: default;\n}`;\n    if (isForShadowDom) {\n        // Only define scrollbar styles when used inside shadow dom,\n        // otherwise leave their styling to the global workbench styling.\n        result += `\n\t\t\t/* Arrows */\n\t\t\t.monaco-scrollable-element > .scrollbar > .scra {\n\t\t\t\tcursor: pointer;\n\t\t\t\tfont-size: 11px !important;\n\t\t\t}\n\n\t\t\t.monaco-scrollable-element > .visible {\n\t\t\t\topacity: 1;\n\n\t\t\t\t/* Background rule added for IE9 - to allow clicks on dom node */\n\t\t\t\tbackground:rgba(0,0,0,0);\n\n\t\t\t\ttransition: opacity 100ms linear;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .invisible {\n\t\t\t\topacity: 0;\n\t\t\t\tpointer-events: none;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .invisible.fade {\n\t\t\t\ttransition: opacity 800ms linear;\n\t\t\t}\n\n\t\t\t/* Scrollable Content Inset Shadow */\n\t\t\t.monaco-scrollable-element > .shadow {\n\t\t\t\tposition: absolute;\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.top {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 3px;\n\t\t\t\theight: 3px;\n\t\t\t\twidth: 100%;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.left {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 3px;\n\t\t\t\tleft: 0;\n\t\t\t\theight: 100%;\n\t\t\t\twidth: 3px;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.top-left-corner {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 0;\n\t\t\t\theight: 3px;\n\t\t\t\twidth: 3px;\n\t\t\t}\n\t\t`;\n        // Scrollbars\n        const scrollbarShadowColor = style.scrollbarShadow;\n        if (scrollbarShadowColor) {\n            result += `\n\t\t\t\t.monaco-scrollable-element > .shadow.top {\n\t\t\t\t\tbox-shadow: ${scrollbarShadowColor} 0 6px 6px -6px inset;\n\t\t\t\t}\n\n\t\t\t\t.monaco-scrollable-element > .shadow.left {\n\t\t\t\t\tbox-shadow: ${scrollbarShadowColor} 6px 0 6px -6px inset;\n\t\t\t\t}\n\n\t\t\t\t.monaco-scrollable-element > .shadow.top.left {\n\t\t\t\t\tbox-shadow: ${scrollbarShadowColor} 6px 6px 6px -6px inset;\n\t\t\t\t}\n\t\t\t`;\n        }\n        const scrollbarSliderBackgroundColor = style.scrollbarSliderBackground;\n        if (scrollbarSliderBackgroundColor) {\n            result += `\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider {\n\t\t\t\t\tbackground: ${scrollbarSliderBackgroundColor};\n\t\t\t\t}\n\t\t\t`;\n        }\n        const scrollbarSliderHoverBackgroundColor = style.scrollbarSliderHoverBackground;\n        if (scrollbarSliderHoverBackgroundColor) {\n            result += `\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider:hover {\n\t\t\t\t\tbackground: ${scrollbarSliderHoverBackgroundColor};\n\t\t\t\t}\n\t\t\t`;\n        }\n        const scrollbarSliderActiveBackgroundColor = style.scrollbarSliderActiveBackground;\n        if (scrollbarSliderActiveBackgroundColor) {\n            result += `\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider.active {\n\t\t\t\t\tbackground: ${scrollbarSliderActiveBackgroundColor};\n\t\t\t\t}\n\t\t\t`;\n        }\n    }\n    return result;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Widget } from '../widget.js';\nimport { ThemeIcon } from '../../../common/themables.js';\nimport { Emitter } from '../../../common/event.js';\nimport './toggle.css';\nimport { getDefaultHoverDelegate } from '../hover/hoverDelegateFactory.js';\nimport { getBaseLayerHoverDelegate } from '../hover/hoverDelegate2.js';\nexport const unthemedToggleStyles = {\n    inputActiveOptionBorder: '#007ACC00',\n    inputActiveOptionForeground: '#FFFFFF',\n    inputActiveOptionBackground: '#0E639C50'\n};\nexport class Toggle extends Widget {\n    constructor(opts) {\n        super();\n        this._onChange = this._register(new Emitter());\n        this.onChange = this._onChange.event;\n        this._onKeyDown = this._register(new Emitter());\n        this.onKeyDown = this._onKeyDown.event;\n        this._opts = opts;\n        this._checked = this._opts.isChecked;\n        const classes = ['monaco-custom-toggle'];\n        if (this._opts.icon) {\n            this._icon = this._opts.icon;\n            classes.push(...ThemeIcon.asClassNameArray(this._icon));\n        }\n        if (this._opts.actionClassName) {\n            classes.push(...this._opts.actionClassName.split(' '));\n        }\n        if (this._checked) {\n            classes.push('checked');\n        }\n        this.domNode = document.createElement('div');\n        this._hover = this._register(getBaseLayerHoverDelegate().setupManagedHover(opts.hoverDelegate ?? getDefaultHoverDelegate('mouse'), this.domNode, this._opts.title));\n        this.domNode.classList.add(...classes);\n        if (!this._opts.notFocusable) {\n            this.domNode.tabIndex = 0;\n        }\n        this.domNode.setAttribute('role', 'checkbox');\n        this.domNode.setAttribute('aria-checked', String(this._checked));\n        this.domNode.setAttribute('aria-label', this._opts.title);\n        this.applyStyles();\n        this.onclick(this.domNode, (ev) => {\n            if (this.enabled) {\n                this.checked = !this._checked;\n                this._onChange.fire(false);\n                ev.preventDefault();\n            }\n        });\n        this._register(this.ignoreGesture(this.domNode));\n        this.onkeydown(this.domNode, (keyboardEvent) => {\n            if (keyboardEvent.keyCode === 10 /* KeyCode.Space */ || keyboardEvent.keyCode === 3 /* KeyCode.Enter */) {\n                this.checked = !this._checked;\n                this._onChange.fire(true);\n                keyboardEvent.preventDefault();\n                keyboardEvent.stopPropagation();\n                return;\n            }\n            this._onKeyDown.fire(keyboardEvent);\n        });\n    }\n    get enabled() {\n        return this.domNode.getAttribute('aria-disabled') !== 'true';\n    }\n    focus() {\n        this.domNode.focus();\n    }\n    get checked() {\n        return this._checked;\n    }\n    set checked(newIsChecked) {\n        this._checked = newIsChecked;\n        this.domNode.setAttribute('aria-checked', String(this._checked));\n        this.domNode.classList.toggle('checked', this._checked);\n        this.applyStyles();\n    }\n    width() {\n        return 2 /*margin left*/ + 2 /*border*/ + 2 /*padding*/ + 16 /* icon width */;\n    }\n    applyStyles() {\n        if (this.domNode) {\n            this.domNode.style.borderColor = (this._checked && this._opts.inputActiveOptionBorder) || '';\n            this.domNode.style.color = (this._checked && this._opts.inputActiveOptionForeground) || 'inherit';\n            this.domNode.style.backgroundColor = (this._checked && this._opts.inputActiveOptionBackground) || '';\n        }\n    }\n    enable() {\n        this.domNode.setAttribute('aria-disabled', String(false));\n    }\n    disable() {\n        this.domNode.setAttribute('aria-disabled', String(true));\n    }\n}\n","import { addDisposableListener, EventHelper, EventType, reset, trackFocus } from '../../dom.js';\nimport { sanitize } from '../../dompurify/dompurify.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { renderMarkdown, renderStringAsPlaintext } from '../../markdownRenderer.js';\nimport { Gesture, EventType as TouchEventType } from '../../touch.js';\nimport { getDefaultHoverDelegate } from '../hover/hoverDelegateFactory.js';\nimport { renderLabelWithIcons } from '../iconLabel/iconLabels.js';\nimport { Color } from '../../../common/color.js';\nimport { Emitter } from '../../../common/event.js';\nimport { isMarkdownString, markdownStringEqual } from '../../../common/htmlContent.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport { ThemeIcon } from '../../../common/themables.js';\nimport './button.css';\nimport { getBaseLayerHoverDelegate } from '../hover/hoverDelegate2.js';\nexport const unthemedButtonStyles = {\n    buttonBackground: '#0E639C',\n    buttonHoverBackground: '#006BB3',\n    buttonSeparator: Color.white.toString(),\n    buttonForeground: Color.white.toString(),\n    buttonBorder: undefined,\n    buttonSecondaryBackground: undefined,\n    buttonSecondaryForeground: undefined,\n    buttonSecondaryHoverBackground: undefined\n};\nexport class Button extends Disposable {\n    get onDidClick() { return this._onDidClick.event; }\n    constructor(container, options) {\n        super();\n        this._label = '';\n        this._onDidClick = this._register(new Emitter());\n        this._onDidEscape = this._register(new Emitter());\n        this.options = options;\n        this._element = document.createElement('a');\n        this._element.classList.add('monaco-button');\n        this._element.tabIndex = 0;\n        this._element.setAttribute('role', 'button');\n        this._element.classList.toggle('secondary', !!options.secondary);\n        const background = options.secondary ? options.buttonSecondaryBackground : options.buttonBackground;\n        const foreground = options.secondary ? options.buttonSecondaryForeground : options.buttonForeground;\n        this._element.style.color = foreground || '';\n        this._element.style.backgroundColor = background || '';\n        if (options.supportShortLabel) {\n            this._labelShortElement = document.createElement('div');\n            this._labelShortElement.classList.add('monaco-button-label-short');\n            this._element.appendChild(this._labelShortElement);\n            this._labelElement = document.createElement('div');\n            this._labelElement.classList.add('monaco-button-label');\n            this._element.appendChild(this._labelElement);\n            this._element.classList.add('monaco-text-button-with-short-label');\n        }\n        if (typeof options.title === 'string') {\n            this.setTitle(options.title);\n        }\n        if (typeof options.ariaLabel === 'string') {\n            this._element.setAttribute('aria-label', options.ariaLabel);\n        }\n        container.appendChild(this._element);\n        this._register(Gesture.addTarget(this._element));\n        [EventType.CLICK, TouchEventType.Tap].forEach(eventType => {\n            this._register(addDisposableListener(this._element, eventType, e => {\n                if (!this.enabled) {\n                    EventHelper.stop(e);\n                    return;\n                }\n                this._onDidClick.fire(e);\n            }));\n        });\n        this._register(addDisposableListener(this._element, EventType.KEY_DOWN, e => {\n            const event = new StandardKeyboardEvent(e);\n            let eventHandled = false;\n            if (this.enabled && (event.equals(3 /* KeyCode.Enter */) || event.equals(10 /* KeyCode.Space */))) {\n                this._onDidClick.fire(e);\n                eventHandled = true;\n            }\n            else if (event.equals(9 /* KeyCode.Escape */)) {\n                this._onDidEscape.fire(e);\n                this._element.blur();\n                eventHandled = true;\n            }\n            if (eventHandled) {\n                EventHelper.stop(event, true);\n            }\n        }));\n        this._register(addDisposableListener(this._element, EventType.MOUSE_OVER, e => {\n            if (!this._element.classList.contains('disabled')) {\n                this.updateBackground(true);\n            }\n        }));\n        this._register(addDisposableListener(this._element, EventType.MOUSE_OUT, e => {\n            this.updateBackground(false); // restore standard styles\n        }));\n        // Also set hover background when button is focused for feedback\n        this.focusTracker = this._register(trackFocus(this._element));\n        this._register(this.focusTracker.onDidFocus(() => { if (this.enabled) {\n            this.updateBackground(true);\n        } }));\n        this._register(this.focusTracker.onDidBlur(() => { if (this.enabled) {\n            this.updateBackground(false);\n        } }));\n    }\n    dispose() {\n        super.dispose();\n        this._element.remove();\n    }\n    getContentElements(content) {\n        const elements = [];\n        for (let segment of renderLabelWithIcons(content)) {\n            if (typeof (segment) === 'string') {\n                segment = segment.trim();\n                // Ignore empty segment\n                if (segment === '') {\n                    continue;\n                }\n                // Convert string segments to <span> nodes\n                const node = document.createElement('span');\n                node.textContent = segment;\n                elements.push(node);\n            }\n            else {\n                elements.push(segment);\n            }\n        }\n        return elements;\n    }\n    updateBackground(hover) {\n        let background;\n        if (this.options.secondary) {\n            background = hover ? this.options.buttonSecondaryHoverBackground : this.options.buttonSecondaryBackground;\n        }\n        else {\n            background = hover ? this.options.buttonHoverBackground : this.options.buttonBackground;\n        }\n        if (background) {\n            this._element.style.backgroundColor = background;\n        }\n    }\n    get element() {\n        return this._element;\n    }\n    set label(value) {\n        if (this._label === value) {\n            return;\n        }\n        if (isMarkdownString(this._label) && isMarkdownString(value) && markdownStringEqual(this._label, value)) {\n            return;\n        }\n        this._element.classList.add('monaco-text-button');\n        const labelElement = this.options.supportShortLabel ? this._labelElement : this._element;\n        if (isMarkdownString(value)) {\n            const rendered = renderMarkdown(value, { inline: true });\n            rendered.dispose();\n            // Don't include outer `<p>`\n            const root = rendered.element.querySelector('p')?.innerHTML;\n            if (root) {\n                // Only allow a very limited set of inline html tags\n                const sanitized = sanitize(root, { ADD_TAGS: ['b', 'i', 'u', 'code', 'span'], ALLOWED_ATTR: ['class'], RETURN_TRUSTED_TYPE: true });\n                labelElement.innerHTML = sanitized;\n            }\n            else {\n                reset(labelElement);\n            }\n        }\n        else {\n            if (this.options.supportIcons) {\n                reset(labelElement, ...this.getContentElements(value));\n            }\n            else {\n                labelElement.textContent = value;\n            }\n        }\n        let title = '';\n        if (typeof this.options.title === 'string') {\n            title = this.options.title;\n        }\n        else if (this.options.title) {\n            title = renderStringAsPlaintext(value);\n        }\n        this.setTitle(title);\n        if (typeof this.options.ariaLabel === 'string') {\n            this._element.setAttribute('aria-label', this.options.ariaLabel);\n        }\n        else if (this.options.ariaLabel) {\n            this._element.setAttribute('aria-label', title);\n        }\n        this._label = value;\n    }\n    get label() {\n        return this._label;\n    }\n    set icon(icon) {\n        this._element.classList.add(...ThemeIcon.asClassNameArray(icon));\n    }\n    set enabled(value) {\n        if (value) {\n            this._element.classList.remove('disabled');\n            this._element.setAttribute('aria-disabled', String(false));\n            this._element.tabIndex = 0;\n        }\n        else {\n            this._element.classList.add('disabled');\n            this._element.setAttribute('aria-disabled', String(true));\n        }\n    }\n    get enabled() {\n        return !this._element.classList.contains('disabled');\n    }\n    setTitle(title) {\n        if (!this._hover && title !== '') {\n            this._hover = this._register(getBaseLayerHoverDelegate().setupManagedHover(this.options.hoverDelegate ?? getDefaultHoverDelegate('mouse'), this._element, title));\n        }\n        else if (this._hover) {\n            this._hover.update(title);\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, append } from '../../dom.js';\nimport { format } from '../../../common/strings.js';\nimport './countBadge.css';\nexport class CountBadge {\n    constructor(container, options, styles) {\n        this.options = options;\n        this.styles = styles;\n        this.count = 0;\n        this.element = append(container, $('.monaco-count-badge'));\n        this.countFormat = this.options.countFormat || '{0}';\n        this.titleFormat = this.options.titleFormat || '';\n        this.setCount(this.options.count || 0);\n    }\n    setCount(count) {\n        this.count = count;\n        this.render();\n    }\n    setTitleFormat(titleFormat) {\n        this.titleFormat = titleFormat;\n        this.render();\n    }\n    render() {\n        this.element.textContent = format(this.countFormat, this.count);\n        this.element.title = format(this.titleFormat, this.count);\n        this.element.style.backgroundColor = this.styles.badgeBackground ?? '';\n        this.element.style.color = this.styles.badgeForeground ?? '';\n        if (this.styles.badgeBorder) {\n            this.element.style.border = `1px solid ${this.styles.badgeBorder}`;\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { show } from '../../dom.js';\nimport { RunOnceScheduler } from '../../../common/async.js';\nimport { Disposable, MutableDisposable } from '../../../common/lifecycle.js';\nimport './progressbar.css';\nconst CSS_DONE = 'done';\nconst CSS_ACTIVE = 'active';\nconst CSS_INFINITE = 'infinite';\nconst CSS_INFINITE_LONG_RUNNING = 'infinite-long-running';\nconst CSS_DISCRETE = 'discrete';\n/**\n * A progress bar with support for infinite or discrete progress.\n */\nexport class ProgressBar extends Disposable {\n    /**\n     * After a certain time of showing the progress bar, switch\n     * to long-running mode and throttle animations to reduce\n     * the pressure on the GPU process.\n     *\n     * https://github.com/microsoft/vscode/issues/97900\n     * https://github.com/microsoft/vscode/issues/138396\n     */\n    static { this.LONG_RUNNING_INFINITE_THRESHOLD = 10000; }\n    constructor(container, options) {\n        super();\n        this.progressSignal = this._register(new MutableDisposable());\n        this.workedVal = 0;\n        this.showDelayedScheduler = this._register(new RunOnceScheduler(() => show(this.element), 0));\n        this.longRunningScheduler = this._register(new RunOnceScheduler(() => this.infiniteLongRunning(), ProgressBar.LONG_RUNNING_INFINITE_THRESHOLD));\n        this.create(container, options);\n    }\n    create(container, options) {\n        this.element = document.createElement('div');\n        this.element.classList.add('monaco-progress-container');\n        this.element.setAttribute('role', 'progressbar');\n        this.element.setAttribute('aria-valuemin', '0');\n        container.appendChild(this.element);\n        this.bit = document.createElement('div');\n        this.bit.classList.add('progress-bit');\n        this.bit.style.backgroundColor = options?.progressBarBackground || '#0E70C0';\n        this.element.appendChild(this.bit);\n    }\n    off() {\n        this.bit.style.width = 'inherit';\n        this.bit.style.opacity = '1';\n        this.element.classList.remove(CSS_ACTIVE, CSS_INFINITE, CSS_INFINITE_LONG_RUNNING, CSS_DISCRETE);\n        this.workedVal = 0;\n        this.totalWork = undefined;\n        this.longRunningScheduler.cancel();\n        this.progressSignal.clear();\n    }\n    /**\n     * Stops the progressbar from showing any progress instantly without fading out.\n     */\n    stop() {\n        return this.doDone(false);\n    }\n    doDone(delayed) {\n        this.element.classList.add(CSS_DONE);\n        // discrete: let it grow to 100% width and hide afterwards\n        if (!this.element.classList.contains(CSS_INFINITE)) {\n            this.bit.style.width = 'inherit';\n            if (delayed) {\n                setTimeout(() => this.off(), 200);\n            }\n            else {\n                this.off();\n            }\n        }\n        // infinite: let it fade out and hide afterwards\n        else {\n            this.bit.style.opacity = '0';\n            if (delayed) {\n                setTimeout(() => this.off(), 200);\n            }\n            else {\n                this.off();\n            }\n        }\n        return this;\n    }\n    /**\n     * Use this mode to indicate progress that has no total number of work units.\n     */\n    infinite() {\n        this.bit.style.width = '2%';\n        this.bit.style.opacity = '1';\n        this.element.classList.remove(CSS_DISCRETE, CSS_DONE, CSS_INFINITE_LONG_RUNNING);\n        this.element.classList.add(CSS_ACTIVE, CSS_INFINITE);\n        this.longRunningScheduler.schedule();\n        return this;\n    }\n    infiniteLongRunning() {\n        this.element.classList.add(CSS_INFINITE_LONG_RUNNING);\n    }\n    getContainer() {\n        return this.element;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { getDefaultHoverDelegate } from '../hover/hoverDelegateFactory.js';\nimport { Toggle } from '../toggle/toggle.js';\nimport { Codicon } from '../../../common/codicons.js';\nimport * as nls from '../../../../nls.js';\nconst NLS_CASE_SENSITIVE_TOGGLE_LABEL = nls.localize('caseDescription', \"Match Case\");\nconst NLS_WHOLE_WORD_TOGGLE_LABEL = nls.localize('wordsDescription', \"Match Whole Word\");\nconst NLS_REGEX_TOGGLE_LABEL = nls.localize('regexDescription', \"Use Regular Expression\");\nexport class CaseSensitiveToggle extends Toggle {\n    constructor(opts) {\n        super({\n            icon: Codicon.caseSensitive,\n            title: NLS_CASE_SENSITIVE_TOGGLE_LABEL + opts.appendTitle,\n            isChecked: opts.isChecked,\n            hoverDelegate: opts.hoverDelegate ?? getDefaultHoverDelegate('element'),\n            inputActiveOptionBorder: opts.inputActiveOptionBorder,\n            inputActiveOptionForeground: opts.inputActiveOptionForeground,\n            inputActiveOptionBackground: opts.inputActiveOptionBackground\n        });\n    }\n}\nexport class WholeWordsToggle extends Toggle {\n    constructor(opts) {\n        super({\n            icon: Codicon.wholeWord,\n            title: NLS_WHOLE_WORD_TOGGLE_LABEL + opts.appendTitle,\n            isChecked: opts.isChecked,\n            hoverDelegate: opts.hoverDelegate ?? getDefaultHoverDelegate('element'),\n            inputActiveOptionBorder: opts.inputActiveOptionBorder,\n            inputActiveOptionForeground: opts.inputActiveOptionForeground,\n            inputActiveOptionBackground: opts.inputActiveOptionBackground\n        });\n    }\n}\nexport class RegexToggle extends Toggle {\n    constructor(opts) {\n        super({\n            icon: Codicon.regex,\n            title: NLS_REGEX_TOGGLE_LABEL + opts.appendTitle,\n            isChecked: opts.isChecked,\n            hoverDelegate: opts.hoverDelegate ?? getDefaultHoverDelegate('element'),\n            inputActiveOptionBorder: opts.inputActiveOptionBorder,\n            inputActiveOptionForeground: opts.inputActiveOptionForeground,\n            inputActiveOptionBackground: opts.inputActiveOptionBackground\n        });\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { DomEmitter } from '../../event.js';\nimport { renderFormattedText, renderText } from '../../formattedTextRenderer.js';\nimport { ActionBar } from '../actionbar/actionbar.js';\nimport * as aria from '../aria/aria.js';\nimport { getBaseLayerHoverDelegate } from '../hover/hoverDelegate2.js';\nimport { getDefaultHoverDelegate } from '../hover/hoverDelegateFactory.js';\nimport { ScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { Widget } from '../widget.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { HistoryNavigator } from '../../../common/history.js';\nimport { equals } from '../../../common/objects.js';\nimport './inputBox.css';\nimport * as nls from '../../../../nls.js';\nconst $ = dom.$;\nexport const unthemedInboxStyles = {\n    inputBackground: '#3C3C3C',\n    inputForeground: '#CCCCCC',\n    inputValidationInfoBorder: '#55AAFF',\n    inputValidationInfoBackground: '#063B49',\n    inputValidationWarningBorder: '#B89500',\n    inputValidationWarningBackground: '#352A05',\n    inputValidationErrorBorder: '#BE1100',\n    inputValidationErrorBackground: '#5A1D1D',\n    inputBorder: undefined,\n    inputValidationErrorForeground: undefined,\n    inputValidationInfoForeground: undefined,\n    inputValidationWarningForeground: undefined\n};\nexport class InputBox extends Widget {\n    constructor(container, contextViewProvider, options) {\n        super();\n        this.state = 'idle';\n        this.maxHeight = Number.POSITIVE_INFINITY;\n        this._onDidChange = this._register(new Emitter());\n        this.onDidChange = this._onDidChange.event;\n        this._onDidHeightChange = this._register(new Emitter());\n        this.onDidHeightChange = this._onDidHeightChange.event;\n        this.contextViewProvider = contextViewProvider;\n        this.options = options;\n        this.message = null;\n        this.placeholder = this.options.placeholder || '';\n        this.tooltip = this.options.tooltip ?? (this.placeholder || '');\n        this.ariaLabel = this.options.ariaLabel || '';\n        if (this.options.validationOptions) {\n            this.validation = this.options.validationOptions.validation;\n        }\n        this.element = dom.append(container, $('.monaco-inputbox.idle'));\n        const tagName = this.options.flexibleHeight ? 'textarea' : 'input';\n        const wrapper = dom.append(this.element, $('.ibwrapper'));\n        this.input = dom.append(wrapper, $(tagName + '.input.empty'));\n        this.input.setAttribute('autocorrect', 'off');\n        this.input.setAttribute('autocapitalize', 'off');\n        this.input.setAttribute('spellcheck', 'false');\n        this.onfocus(this.input, () => this.element.classList.add('synthetic-focus'));\n        this.onblur(this.input, () => this.element.classList.remove('synthetic-focus'));\n        if (this.options.flexibleHeight) {\n            this.maxHeight = typeof this.options.flexibleMaxHeight === 'number' ? this.options.flexibleMaxHeight : Number.POSITIVE_INFINITY;\n            this.mirror = dom.append(wrapper, $('div.mirror'));\n            this.mirror.innerText = '\\u00a0';\n            this.scrollableElement = new ScrollableElement(this.element, { vertical: 1 /* ScrollbarVisibility.Auto */ });\n            if (this.options.flexibleWidth) {\n                this.input.setAttribute('wrap', 'off');\n                this.mirror.style.whiteSpace = 'pre';\n                this.mirror.style.wordWrap = 'initial';\n            }\n            dom.append(container, this.scrollableElement.getDomNode());\n            this._register(this.scrollableElement);\n            // from ScrollableElement to DOM\n            this._register(this.scrollableElement.onScroll(e => this.input.scrollTop = e.scrollTop));\n            const onSelectionChange = this._register(new DomEmitter(container.ownerDocument, 'selectionchange'));\n            const onAnchoredSelectionChange = Event.filter(onSelectionChange.event, () => {\n                const selection = container.ownerDocument.getSelection();\n                return selection?.anchorNode === wrapper;\n            });\n            // from DOM to ScrollableElement\n            this._register(onAnchoredSelectionChange(this.updateScrollDimensions, this));\n            this._register(this.onDidHeightChange(this.updateScrollDimensions, this));\n        }\n        else {\n            this.input.type = this.options.type || 'text';\n            this.input.setAttribute('wrap', 'off');\n        }\n        if (this.ariaLabel) {\n            this.input.setAttribute('aria-label', this.ariaLabel);\n        }\n        if (this.placeholder && !this.options.showPlaceholderOnFocus) {\n            this.setPlaceHolder(this.placeholder);\n        }\n        if (this.tooltip) {\n            this.setTooltip(this.tooltip);\n        }\n        this.oninput(this.input, () => this.onValueChange());\n        this.onblur(this.input, () => this.onBlur());\n        this.onfocus(this.input, () => this.onFocus());\n        this._register(this.ignoreGesture(this.input));\n        setTimeout(() => this.updateMirror(), 0);\n        // Support actions\n        if (this.options.actions) {\n            this.actionbar = this._register(new ActionBar(this.element));\n            this.actionbar.push(this.options.actions, { icon: true, label: false });\n        }\n        this.applyStyles();\n    }\n    onBlur() {\n        this._hideMessage();\n        if (this.options.showPlaceholderOnFocus) {\n            this.input.setAttribute('placeholder', '');\n        }\n    }\n    onFocus() {\n        this._showMessage();\n        if (this.options.showPlaceholderOnFocus) {\n            this.input.setAttribute('placeholder', this.placeholder || '');\n        }\n    }\n    setPlaceHolder(placeHolder) {\n        this.placeholder = placeHolder;\n        this.input.setAttribute('placeholder', placeHolder);\n    }\n    setTooltip(tooltip) {\n        this.tooltip = tooltip;\n        if (!this.hover) {\n            this.hover = this._register(getBaseLayerHoverDelegate().setupManagedHover(getDefaultHoverDelegate('mouse'), this.input, tooltip));\n        }\n        else {\n            this.hover.update(tooltip);\n        }\n    }\n    get inputElement() {\n        return this.input;\n    }\n    get value() {\n        return this.input.value;\n    }\n    set value(newValue) {\n        if (this.input.value !== newValue) {\n            this.input.value = newValue;\n            this.onValueChange();\n        }\n    }\n    get height() {\n        return typeof this.cachedHeight === 'number' ? this.cachedHeight : dom.getTotalHeight(this.element);\n    }\n    focus() {\n        this.input.focus();\n    }\n    blur() {\n        this.input.blur();\n    }\n    hasFocus() {\n        return dom.isActiveElement(this.input);\n    }\n    select(range = null) {\n        this.input.select();\n        if (range) {\n            this.input.setSelectionRange(range.start, range.end);\n            if (range.end === this.input.value.length) {\n                this.input.scrollLeft = this.input.scrollWidth;\n            }\n        }\n    }\n    isSelectionAtEnd() {\n        return this.input.selectionEnd === this.input.value.length && this.input.selectionStart === this.input.selectionEnd;\n    }\n    getSelection() {\n        const selectionStart = this.input.selectionStart;\n        if (selectionStart === null) {\n            return null;\n        }\n        const selectionEnd = this.input.selectionEnd ?? selectionStart;\n        return {\n            start: selectionStart,\n            end: selectionEnd,\n        };\n    }\n    enable() {\n        this.input.removeAttribute('disabled');\n    }\n    disable() {\n        this.blur();\n        this.input.disabled = true;\n        this._hideMessage();\n    }\n    set paddingRight(paddingRight) {\n        // Set width to avoid hint text overlapping buttons\n        this.input.style.width = `calc(100% - ${paddingRight}px)`;\n        if (this.mirror) {\n            this.mirror.style.paddingRight = paddingRight + 'px';\n        }\n    }\n    updateScrollDimensions() {\n        if (typeof this.cachedContentHeight !== 'number' || typeof this.cachedHeight !== 'number' || !this.scrollableElement) {\n            return;\n        }\n        const scrollHeight = this.cachedContentHeight;\n        const height = this.cachedHeight;\n        const scrollTop = this.input.scrollTop;\n        this.scrollableElement.setScrollDimensions({ scrollHeight, height });\n        this.scrollableElement.setScrollPosition({ scrollTop });\n    }\n    showMessage(message, force) {\n        if (this.state === 'open' && equals(this.message, message)) {\n            // Already showing\n            return;\n        }\n        this.message = message;\n        this.element.classList.remove('idle');\n        this.element.classList.remove('info');\n        this.element.classList.remove('warning');\n        this.element.classList.remove('error');\n        this.element.classList.add(this.classForType(message.type));\n        const styles = this.stylesForType(this.message.type);\n        this.element.style.border = `1px solid ${dom.asCssValueWithDefault(styles.border, 'transparent')}`;\n        if (this.message.content && (this.hasFocus() || force)) {\n            this._showMessage();\n        }\n    }\n    hideMessage() {\n        this.message = null;\n        this.element.classList.remove('info');\n        this.element.classList.remove('warning');\n        this.element.classList.remove('error');\n        this.element.classList.add('idle');\n        this._hideMessage();\n        this.applyStyles();\n    }\n    validate() {\n        let errorMsg = null;\n        if (this.validation) {\n            errorMsg = this.validation(this.value);\n            if (errorMsg) {\n                this.inputElement.setAttribute('aria-invalid', 'true');\n                this.showMessage(errorMsg);\n            }\n            else if (this.inputElement.hasAttribute('aria-invalid')) {\n                this.inputElement.removeAttribute('aria-invalid');\n                this.hideMessage();\n            }\n        }\n        return errorMsg?.type;\n    }\n    stylesForType(type) {\n        const styles = this.options.inputBoxStyles;\n        switch (type) {\n            case 1 /* MessageType.INFO */: return { border: styles.inputValidationInfoBorder, background: styles.inputValidationInfoBackground, foreground: styles.inputValidationInfoForeground };\n            case 2 /* MessageType.WARNING */: return { border: styles.inputValidationWarningBorder, background: styles.inputValidationWarningBackground, foreground: styles.inputValidationWarningForeground };\n            default: return { border: styles.inputValidationErrorBorder, background: styles.inputValidationErrorBackground, foreground: styles.inputValidationErrorForeground };\n        }\n    }\n    classForType(type) {\n        switch (type) {\n            case 1 /* MessageType.INFO */: return 'info';\n            case 2 /* MessageType.WARNING */: return 'warning';\n            default: return 'error';\n        }\n    }\n    _showMessage() {\n        if (!this.contextViewProvider || !this.message) {\n            return;\n        }\n        let div;\n        const layout = () => div.style.width = dom.getTotalWidth(this.element) + 'px';\n        this.contextViewProvider.showContextView({\n            getAnchor: () => this.element,\n            anchorAlignment: 1 /* AnchorAlignment.RIGHT */,\n            render: (container) => {\n                if (!this.message) {\n                    return null;\n                }\n                div = dom.append(container, $('.monaco-inputbox-container'));\n                layout();\n                const renderOptions = {\n                    inline: true,\n                    className: 'monaco-inputbox-message'\n                };\n                const spanElement = (this.message.formatContent\n                    ? renderFormattedText(this.message.content, renderOptions)\n                    : renderText(this.message.content, renderOptions));\n                spanElement.classList.add(this.classForType(this.message.type));\n                const styles = this.stylesForType(this.message.type);\n                spanElement.style.backgroundColor = styles.background ?? '';\n                spanElement.style.color = styles.foreground ?? '';\n                spanElement.style.border = styles.border ? `1px solid ${styles.border}` : '';\n                dom.append(div, spanElement);\n                return null;\n            },\n            onHide: () => {\n                this.state = 'closed';\n            },\n            layout: layout\n        });\n        // ARIA Support\n        let alertText;\n        if (this.message.type === 3 /* MessageType.ERROR */) {\n            alertText = nls.localize('alertErrorMessage', \"Error: {0}\", this.message.content);\n        }\n        else if (this.message.type === 2 /* MessageType.WARNING */) {\n            alertText = nls.localize('alertWarningMessage', \"Warning: {0}\", this.message.content);\n        }\n        else {\n            alertText = nls.localize('alertInfoMessage', \"Info: {0}\", this.message.content);\n        }\n        aria.alert(alertText);\n        this.state = 'open';\n    }\n    _hideMessage() {\n        if (!this.contextViewProvider) {\n            return;\n        }\n        if (this.state === 'open') {\n            this.contextViewProvider.hideContextView();\n        }\n        this.state = 'idle';\n    }\n    onValueChange() {\n        this._onDidChange.fire(this.value);\n        this.validate();\n        this.updateMirror();\n        this.input.classList.toggle('empty', !this.value);\n        if (this.state === 'open' && this.contextViewProvider) {\n            this.contextViewProvider.layout();\n        }\n    }\n    updateMirror() {\n        if (!this.mirror) {\n            return;\n        }\n        const value = this.value;\n        const lastCharCode = value.charCodeAt(value.length - 1);\n        const suffix = lastCharCode === 10 ? ' ' : '';\n        const mirrorTextContent = (value + suffix)\n            .replace(/\\u000c/g, ''); // Don't measure with the form feed character, which messes up sizing\n        if (mirrorTextContent) {\n            this.mirror.textContent = value + suffix;\n        }\n        else {\n            this.mirror.innerText = '\\u00a0';\n        }\n        this.layout();\n    }\n    applyStyles() {\n        const styles = this.options.inputBoxStyles;\n        const background = styles.inputBackground ?? '';\n        const foreground = styles.inputForeground ?? '';\n        const border = styles.inputBorder ?? '';\n        this.element.style.backgroundColor = background;\n        this.element.style.color = foreground;\n        this.input.style.backgroundColor = 'inherit';\n        this.input.style.color = foreground;\n        // there's always a border, even if the color is not set.\n        this.element.style.border = `1px solid ${dom.asCssValueWithDefault(border, 'transparent')}`;\n    }\n    layout() {\n        if (!this.mirror) {\n            return;\n        }\n        const previousHeight = this.cachedContentHeight;\n        this.cachedContentHeight = dom.getTotalHeight(this.mirror);\n        if (previousHeight !== this.cachedContentHeight) {\n            this.cachedHeight = Math.min(this.cachedContentHeight, this.maxHeight);\n            this.input.style.height = this.cachedHeight + 'px';\n            this._onDidHeightChange.fire(this.cachedContentHeight);\n        }\n    }\n    insertAtCursor(text) {\n        const inputElement = this.inputElement;\n        const start = inputElement.selectionStart;\n        const end = inputElement.selectionEnd;\n        const content = inputElement.value;\n        if (start !== null && end !== null) {\n            this.value = content.substr(0, start) + text + content.substr(end);\n            inputElement.setSelectionRange(start + 1, start + 1);\n            this.layout();\n        }\n    }\n    dispose() {\n        this._hideMessage();\n        this.message = null;\n        this.actionbar?.dispose();\n        super.dispose();\n    }\n}\nexport class HistoryInputBox extends InputBox {\n    constructor(container, contextViewProvider, options) {\n        const NLS_PLACEHOLDER_HISTORY_HINT_SUFFIX_NO_PARENS = nls.localize({\n            key: 'history.inputbox.hint.suffix.noparens',\n            comment: ['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field ends in a closing parenthesis \")\", for example \"Filter (e.g. text, !exclude)\". The character inserted into the final string is \\u21C5 to represent the up and down arrow keys.']\n        }, ' or {0} for history', `\\u21C5`);\n        const NLS_PLACEHOLDER_HISTORY_HINT_SUFFIX_IN_PARENS = nls.localize({\n            key: 'history.inputbox.hint.suffix.inparens',\n            comment: ['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field does NOT end in a closing parenthesis (eg. \"Find\"). The character inserted into the final string is \\u21C5 to represent the up and down arrow keys.']\n        }, ' ({0} for history)', `\\u21C5`);\n        super(container, contextViewProvider, options);\n        this._onDidFocus = this._register(new Emitter());\n        this.onDidFocus = this._onDidFocus.event;\n        this._onDidBlur = this._register(new Emitter());\n        this.onDidBlur = this._onDidBlur.event;\n        this.history = new HistoryNavigator(options.history, 100);\n        // Function to append the history suffix to the placeholder if necessary\n        const addSuffix = () => {\n            if (options.showHistoryHint && options.showHistoryHint() && !this.placeholder.endsWith(NLS_PLACEHOLDER_HISTORY_HINT_SUFFIX_NO_PARENS) && !this.placeholder.endsWith(NLS_PLACEHOLDER_HISTORY_HINT_SUFFIX_IN_PARENS) && this.history.getHistory().length) {\n                const suffix = this.placeholder.endsWith(')') ? NLS_PLACEHOLDER_HISTORY_HINT_SUFFIX_NO_PARENS : NLS_PLACEHOLDER_HISTORY_HINT_SUFFIX_IN_PARENS;\n                const suffixedPlaceholder = this.placeholder + suffix;\n                if (options.showPlaceholderOnFocus && !dom.isActiveElement(this.input)) {\n                    this.placeholder = suffixedPlaceholder;\n                }\n                else {\n                    this.setPlaceHolder(suffixedPlaceholder);\n                }\n            }\n        };\n        // Spot the change to the textarea class attribute which occurs when it changes between non-empty and empty,\n        // and add the history suffix to the placeholder if not yet present\n        this.observer = new MutationObserver((mutationList, observer) => {\n            mutationList.forEach((mutation) => {\n                if (!mutation.target.textContent) {\n                    addSuffix();\n                }\n            });\n        });\n        this.observer.observe(this.input, { attributeFilter: ['class'] });\n        this.onfocus(this.input, () => addSuffix());\n        this.onblur(this.input, () => {\n            const resetPlaceholder = (historyHint) => {\n                if (!this.placeholder.endsWith(historyHint)) {\n                    return false;\n                }\n                else {\n                    const revertedPlaceholder = this.placeholder.slice(0, this.placeholder.length - historyHint.length);\n                    if (options.showPlaceholderOnFocus) {\n                        this.placeholder = revertedPlaceholder;\n                    }\n                    else {\n                        this.setPlaceHolder(revertedPlaceholder);\n                    }\n                    return true;\n                }\n            };\n            if (!resetPlaceholder(NLS_PLACEHOLDER_HISTORY_HINT_SUFFIX_IN_PARENS)) {\n                resetPlaceholder(NLS_PLACEHOLDER_HISTORY_HINT_SUFFIX_NO_PARENS);\n            }\n        });\n    }\n    dispose() {\n        super.dispose();\n        if (this.observer) {\n            this.observer.disconnect();\n            this.observer = undefined;\n        }\n    }\n    addToHistory(always) {\n        if (this.value && (always || this.value !== this.getCurrentValue())) {\n            this.history.add(this.value);\n        }\n    }\n    isAtLastInHistory() {\n        return this.history.isLast();\n    }\n    isNowhereInHistory() {\n        return this.history.isNowhere();\n    }\n    showNextValue() {\n        if (!this.history.has(this.value)) {\n            this.addToHistory();\n        }\n        let next = this.getNextValue();\n        if (next) {\n            next = next === this.value ? this.getNextValue() : next;\n        }\n        this.value = next ?? '';\n        aria.status(this.value ? this.value : nls.localize('clearedInput', \"Cleared Input\"));\n    }\n    showPreviousValue() {\n        if (!this.history.has(this.value)) {\n            this.addToHistory();\n        }\n        let previous = this.getPreviousValue();\n        if (previous) {\n            previous = previous === this.value ? this.getPreviousValue() : previous;\n        }\n        if (previous) {\n            this.value = previous;\n            aria.status(this.value);\n        }\n    }\n    setPlaceHolder(placeHolder) {\n        super.setPlaceHolder(placeHolder);\n        this.setTooltip(placeHolder);\n    }\n    onBlur() {\n        super.onBlur();\n        this._onDidBlur.fire();\n    }\n    onFocus() {\n        super.onFocus();\n        this._onDidFocus.fire();\n    }\n    getCurrentValue() {\n        let currentValue = this.history.current();\n        if (!currentValue) {\n            currentValue = this.history.last();\n            this.history.next();\n        }\n        return currentValue;\n    }\n    getPreviousValue() {\n        return this.history.previous() || this.history.first();\n    }\n    getNextValue() {\n        return this.history.next();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { CaseSensitiveToggle, RegexToggle, WholeWordsToggle } from './findInputToggles.js';\nimport { HistoryInputBox } from '../inputbox/inputBox.js';\nimport { Widget } from '../widget.js';\nimport { Emitter } from '../../../common/event.js';\nimport './findInput.css';\nimport * as nls from '../../../../nls.js';\nimport { DisposableStore, MutableDisposable } from '../../../common/lifecycle.js';\nimport { createInstantHoverDelegate } from '../hover/hoverDelegateFactory.js';\nconst NLS_DEFAULT_LABEL = nls.localize('defaultLabel', \"input\");\nexport class FindInput extends Widget {\n    constructor(parent, contextViewProvider, options) {\n        super();\n        this.fixFocusOnOptionClickEnabled = true;\n        this.imeSessionInProgress = false;\n        this.additionalTogglesDisposables = this._register(new MutableDisposable());\n        this.additionalToggles = [];\n        this._onDidOptionChange = this._register(new Emitter());\n        this.onDidOptionChange = this._onDidOptionChange.event;\n        this._onKeyDown = this._register(new Emitter());\n        this.onKeyDown = this._onKeyDown.event;\n        this._onMouseDown = this._register(new Emitter());\n        this.onMouseDown = this._onMouseDown.event;\n        this._onInput = this._register(new Emitter());\n        this._onKeyUp = this._register(new Emitter());\n        this._onCaseSensitiveKeyDown = this._register(new Emitter());\n        this.onCaseSensitiveKeyDown = this._onCaseSensitiveKeyDown.event;\n        this._onRegexKeyDown = this._register(new Emitter());\n        this.onRegexKeyDown = this._onRegexKeyDown.event;\n        this._lastHighlightFindOptions = 0;\n        this.placeholder = options.placeholder || '';\n        this.validation = options.validation;\n        this.label = options.label || NLS_DEFAULT_LABEL;\n        this.showCommonFindToggles = !!options.showCommonFindToggles;\n        const appendCaseSensitiveLabel = options.appendCaseSensitiveLabel || '';\n        const appendWholeWordsLabel = options.appendWholeWordsLabel || '';\n        const appendRegexLabel = options.appendRegexLabel || '';\n        const history = options.history || [];\n        const flexibleHeight = !!options.flexibleHeight;\n        const flexibleWidth = !!options.flexibleWidth;\n        const flexibleMaxHeight = options.flexibleMaxHeight;\n        this.domNode = document.createElement('div');\n        this.domNode.classList.add('monaco-findInput');\n        this.inputBox = this._register(new HistoryInputBox(this.domNode, contextViewProvider, {\n            placeholder: this.placeholder || '',\n            ariaLabel: this.label || '',\n            validationOptions: {\n                validation: this.validation\n            },\n            history,\n            showHistoryHint: options.showHistoryHint,\n            flexibleHeight,\n            flexibleWidth,\n            flexibleMaxHeight,\n            inputBoxStyles: options.inputBoxStyles,\n        }));\n        const hoverDelegate = this._register(createInstantHoverDelegate());\n        if (this.showCommonFindToggles) {\n            this.regex = this._register(new RegexToggle({\n                appendTitle: appendRegexLabel,\n                isChecked: false,\n                hoverDelegate,\n                ...options.toggleStyles\n            }));\n            this._register(this.regex.onChange(viaKeyboard => {\n                this._onDidOptionChange.fire(viaKeyboard);\n                if (!viaKeyboard && this.fixFocusOnOptionClickEnabled) {\n                    this.inputBox.focus();\n                }\n                this.validate();\n            }));\n            this._register(this.regex.onKeyDown(e => {\n                this._onRegexKeyDown.fire(e);\n            }));\n            this.wholeWords = this._register(new WholeWordsToggle({\n                appendTitle: appendWholeWordsLabel,\n                isChecked: false,\n                hoverDelegate,\n                ...options.toggleStyles\n            }));\n            this._register(this.wholeWords.onChange(viaKeyboard => {\n                this._onDidOptionChange.fire(viaKeyboard);\n                if (!viaKeyboard && this.fixFocusOnOptionClickEnabled) {\n                    this.inputBox.focus();\n                }\n                this.validate();\n            }));\n            this.caseSensitive = this._register(new CaseSensitiveToggle({\n                appendTitle: appendCaseSensitiveLabel,\n                isChecked: false,\n                hoverDelegate,\n                ...options.toggleStyles\n            }));\n            this._register(this.caseSensitive.onChange(viaKeyboard => {\n                this._onDidOptionChange.fire(viaKeyboard);\n                if (!viaKeyboard && this.fixFocusOnOptionClickEnabled) {\n                    this.inputBox.focus();\n                }\n                this.validate();\n            }));\n            this._register(this.caseSensitive.onKeyDown(e => {\n                this._onCaseSensitiveKeyDown.fire(e);\n            }));\n            // Arrow-Key support to navigate between options\n            const indexes = [this.caseSensitive.domNode, this.wholeWords.domNode, this.regex.domNode];\n            this.onkeydown(this.domNode, (event) => {\n                if (event.equals(15 /* KeyCode.LeftArrow */) || event.equals(17 /* KeyCode.RightArrow */) || event.equals(9 /* KeyCode.Escape */)) {\n                    const index = indexes.indexOf(this.domNode.ownerDocument.activeElement);\n                    if (index >= 0) {\n                        let newIndex = -1;\n                        if (event.equals(17 /* KeyCode.RightArrow */)) {\n                            newIndex = (index + 1) % indexes.length;\n                        }\n                        else if (event.equals(15 /* KeyCode.LeftArrow */)) {\n                            if (index === 0) {\n                                newIndex = indexes.length - 1;\n                            }\n                            else {\n                                newIndex = index - 1;\n                            }\n                        }\n                        if (event.equals(9 /* KeyCode.Escape */)) {\n                            indexes[index].blur();\n                            this.inputBox.focus();\n                        }\n                        else if (newIndex >= 0) {\n                            indexes[newIndex].focus();\n                        }\n                        dom.EventHelper.stop(event, true);\n                    }\n                }\n            });\n        }\n        this.controls = document.createElement('div');\n        this.controls.className = 'controls';\n        this.controls.style.display = this.showCommonFindToggles ? '' : 'none';\n        if (this.caseSensitive) {\n            this.controls.append(this.caseSensitive.domNode);\n        }\n        if (this.wholeWords) {\n            this.controls.appendChild(this.wholeWords.domNode);\n        }\n        if (this.regex) {\n            this.controls.appendChild(this.regex.domNode);\n        }\n        this.setAdditionalToggles(options?.additionalToggles);\n        if (this.controls) {\n            this.domNode.appendChild(this.controls);\n        }\n        parent?.appendChild(this.domNode);\n        this._register(dom.addDisposableListener(this.inputBox.inputElement, 'compositionstart', (e) => {\n            this.imeSessionInProgress = true;\n        }));\n        this._register(dom.addDisposableListener(this.inputBox.inputElement, 'compositionend', (e) => {\n            this.imeSessionInProgress = false;\n            this._onInput.fire();\n        }));\n        this.onkeydown(this.inputBox.inputElement, (e) => this._onKeyDown.fire(e));\n        this.onkeyup(this.inputBox.inputElement, (e) => this._onKeyUp.fire(e));\n        this.oninput(this.inputBox.inputElement, (e) => this._onInput.fire());\n        this.onmousedown(this.inputBox.inputElement, (e) => this._onMouseDown.fire(e));\n    }\n    get onDidChange() {\n        return this.inputBox.onDidChange;\n    }\n    layout(style) {\n        this.inputBox.layout();\n        this.updateInputBoxPadding(style.collapsedFindWidget);\n    }\n    enable() {\n        this.domNode.classList.remove('disabled');\n        this.inputBox.enable();\n        this.regex?.enable();\n        this.wholeWords?.enable();\n        this.caseSensitive?.enable();\n        for (const toggle of this.additionalToggles) {\n            toggle.enable();\n        }\n    }\n    disable() {\n        this.domNode.classList.add('disabled');\n        this.inputBox.disable();\n        this.regex?.disable();\n        this.wholeWords?.disable();\n        this.caseSensitive?.disable();\n        for (const toggle of this.additionalToggles) {\n            toggle.disable();\n        }\n    }\n    setFocusInputOnOptionClick(value) {\n        this.fixFocusOnOptionClickEnabled = value;\n    }\n    setEnabled(enabled) {\n        if (enabled) {\n            this.enable();\n        }\n        else {\n            this.disable();\n        }\n    }\n    setAdditionalToggles(toggles) {\n        for (const currentToggle of this.additionalToggles) {\n            currentToggle.domNode.remove();\n        }\n        this.additionalToggles = [];\n        this.additionalTogglesDisposables.value = new DisposableStore();\n        for (const toggle of toggles ?? []) {\n            this.additionalTogglesDisposables.value.add(toggle);\n            this.controls.appendChild(toggle.domNode);\n            this.additionalTogglesDisposables.value.add(toggle.onChange(viaKeyboard => {\n                this._onDidOptionChange.fire(viaKeyboard);\n                if (!viaKeyboard && this.fixFocusOnOptionClickEnabled) {\n                    this.inputBox.focus();\n                }\n            }));\n            this.additionalToggles.push(toggle);\n        }\n        if (this.additionalToggles.length > 0) {\n            this.controls.style.display = '';\n        }\n        this.updateInputBoxPadding();\n    }\n    updateInputBoxPadding(controlsHidden = false) {\n        if (controlsHidden) {\n            this.inputBox.paddingRight = 0;\n        }\n        else {\n            this.inputBox.paddingRight =\n                ((this.caseSensitive?.width() ?? 0) + (this.wholeWords?.width() ?? 0) + (this.regex?.width() ?? 0))\n                    + this.additionalToggles.reduce((r, t) => r + t.width(), 0);\n        }\n    }\n    getValue() {\n        return this.inputBox.value;\n    }\n    setValue(value) {\n        if (this.inputBox.value !== value) {\n            this.inputBox.value = value;\n        }\n    }\n    select() {\n        this.inputBox.select();\n    }\n    focus() {\n        this.inputBox.focus();\n    }\n    getCaseSensitive() {\n        return this.caseSensitive?.checked ?? false;\n    }\n    setCaseSensitive(value) {\n        if (this.caseSensitive) {\n            this.caseSensitive.checked = value;\n        }\n    }\n    getWholeWords() {\n        return this.wholeWords?.checked ?? false;\n    }\n    setWholeWords(value) {\n        if (this.wholeWords) {\n            this.wholeWords.checked = value;\n        }\n    }\n    getRegex() {\n        return this.regex?.checked ?? false;\n    }\n    setRegex(value) {\n        if (this.regex) {\n            this.regex.checked = value;\n            this.validate();\n        }\n    }\n    focusOnCaseSensitive() {\n        this.caseSensitive?.focus();\n    }\n    highlightFindOptions() {\n        this.domNode.classList.remove('highlight-' + (this._lastHighlightFindOptions));\n        this._lastHighlightFindOptions = 1 - this._lastHighlightFindOptions;\n        this.domNode.classList.add('highlight-' + (this._lastHighlightFindOptions));\n    }\n    validate() {\n        this.inputBox.validate();\n    }\n    showMessage(message) {\n        this.inputBox.showMessage(message);\n    }\n    clearMessage() {\n        this.inputBox.hideMessage();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { range } from '../../../common/arrays.js';\nimport { CancellationTokenSource } from '../../../common/cancellation.js';\nimport { Event } from '../../../common/event.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport './list.css';\nimport { List } from './listWidget.js';\nclass PagedRenderer {\n    get templateId() { return this.renderer.templateId; }\n    constructor(renderer, modelProvider) {\n        this.renderer = renderer;\n        this.modelProvider = modelProvider;\n    }\n    renderTemplate(container) {\n        const data = this.renderer.renderTemplate(container);\n        return { data, disposable: Disposable.None };\n    }\n    renderElement(index, _, data, height) {\n        data.disposable?.dispose();\n        if (!data.data) {\n            return;\n        }\n        const model = this.modelProvider();\n        if (model.isResolved(index)) {\n            return this.renderer.renderElement(model.get(index), index, data.data, height);\n        }\n        const cts = new CancellationTokenSource();\n        const promise = model.resolve(index, cts.token);\n        data.disposable = { dispose: () => cts.cancel() };\n        this.renderer.renderPlaceholder(index, data.data);\n        promise.then(entry => this.renderer.renderElement(entry, index, data.data, height));\n    }\n    disposeTemplate(data) {\n        if (data.disposable) {\n            data.disposable.dispose();\n            data.disposable = undefined;\n        }\n        if (data.data) {\n            this.renderer.disposeTemplate(data.data);\n            data.data = undefined;\n        }\n    }\n}\nclass PagedAccessibilityProvider {\n    constructor(modelProvider, accessibilityProvider) {\n        this.modelProvider = modelProvider;\n        this.accessibilityProvider = accessibilityProvider;\n    }\n    getWidgetAriaLabel() {\n        return this.accessibilityProvider.getWidgetAriaLabel();\n    }\n    getAriaLabel(index) {\n        const model = this.modelProvider();\n        if (!model.isResolved(index)) {\n            return null;\n        }\n        return this.accessibilityProvider.getAriaLabel(model.get(index));\n    }\n}\nfunction fromPagedListOptions(modelProvider, options) {\n    return {\n        ...options,\n        accessibilityProvider: options.accessibilityProvider && new PagedAccessibilityProvider(modelProvider, options.accessibilityProvider)\n    };\n}\nexport class PagedList {\n    constructor(user, container, virtualDelegate, renderers, options = {}) {\n        const modelProvider = () => this.model;\n        const pagedRenderers = renderers.map(r => new PagedRenderer(r, modelProvider));\n        this.list = new List(user, container, virtualDelegate, pagedRenderers, fromPagedListOptions(modelProvider, options));\n    }\n    updateOptions(options) {\n        this.list.updateOptions(options);\n    }\n    getHTMLElement() {\n        return this.list.getHTMLElement();\n    }\n    get onDidFocus() {\n        return this.list.onDidFocus;\n    }\n    get widget() {\n        return this.list;\n    }\n    get onDidDispose() {\n        return this.list.onDidDispose;\n    }\n    get onMouseDblClick() {\n        return Event.map(this.list.onMouseDblClick, ({ element, index, browserEvent }) => ({ element: element === undefined ? undefined : this._model.get(element), index, browserEvent }));\n    }\n    get onPointer() {\n        return Event.map(this.list.onPointer, ({ element, index, browserEvent }) => ({ element: element === undefined ? undefined : this._model.get(element), index, browserEvent }));\n    }\n    get onDidChangeSelection() {\n        return Event.map(this.list.onDidChangeSelection, ({ elements, indexes, browserEvent }) => ({ elements: elements.map(e => this._model.get(e)), indexes, browserEvent }));\n    }\n    get model() {\n        return this._model;\n    }\n    set model(model) {\n        this._model = model;\n        this.list.splice(0, this.list.length, range(model.length));\n    }\n    getFocus() {\n        return this.list.getFocus();\n    }\n    getSelection() {\n        return this.list.getSelection();\n    }\n    getSelectedElements() {\n        return this.getSelection().map(i => this.model.get(i));\n    }\n    style(styles) {\n        this.list.style(styles);\n    }\n    dispose() {\n        this.list.dispose();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { $, append, createStyleSheet, EventHelper, getWindow, isHTMLElement } from '../../dom.js';\nimport { DomEmitter } from '../../event.js';\nimport { EventType, Gesture } from '../../touch.js';\nimport { Delayer } from '../../../common/async.js';\nimport { memoize } from '../../../common/decorators.js';\nimport { Emitter } from '../../../common/event.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../common/lifecycle.js';\nimport { isMacintosh } from '../../../common/platform.js';\nimport './sash.css';\n/**\n * Allow the sashes to be visible at runtime.\n * @remark Use for development purposes only.\n */\nconst DEBUG = false;\nexport var OrthogonalEdge;\n(function (OrthogonalEdge) {\n    OrthogonalEdge[\"North\"] = \"north\";\n    OrthogonalEdge[\"South\"] = \"south\";\n    OrthogonalEdge[\"East\"] = \"east\";\n    OrthogonalEdge[\"West\"] = \"west\";\n})(OrthogonalEdge || (OrthogonalEdge = {}));\nlet globalSize = 4;\nconst onDidChangeGlobalSize = new Emitter();\nlet globalHoverDelay = 300;\nconst onDidChangeHoverDelay = new Emitter();\nclass MouseEventFactory {\n    constructor(el) {\n        this.el = el;\n        this.disposables = new DisposableStore();\n    }\n    get onPointerMove() {\n        return this.disposables.add(new DomEmitter(getWindow(this.el), 'mousemove')).event;\n    }\n    get onPointerUp() {\n        return this.disposables.add(new DomEmitter(getWindow(this.el), 'mouseup')).event;\n    }\n    dispose() {\n        this.disposables.dispose();\n    }\n}\n__decorate([\n    memoize\n], MouseEventFactory.prototype, \"onPointerMove\", null);\n__decorate([\n    memoize\n], MouseEventFactory.prototype, \"onPointerUp\", null);\nclass GestureEventFactory {\n    get onPointerMove() {\n        return this.disposables.add(new DomEmitter(this.el, EventType.Change)).event;\n    }\n    get onPointerUp() {\n        return this.disposables.add(new DomEmitter(this.el, EventType.End)).event;\n    }\n    constructor(el) {\n        this.el = el;\n        this.disposables = new DisposableStore();\n    }\n    dispose() {\n        this.disposables.dispose();\n    }\n}\n__decorate([\n    memoize\n], GestureEventFactory.prototype, \"onPointerMove\", null);\n__decorate([\n    memoize\n], GestureEventFactory.prototype, \"onPointerUp\", null);\nclass OrthogonalPointerEventFactory {\n    get onPointerMove() {\n        return this.factory.onPointerMove;\n    }\n    get onPointerUp() {\n        return this.factory.onPointerUp;\n    }\n    constructor(factory) {\n        this.factory = factory;\n    }\n    dispose() {\n        // noop\n    }\n}\n__decorate([\n    memoize\n], OrthogonalPointerEventFactory.prototype, \"onPointerMove\", null);\n__decorate([\n    memoize\n], OrthogonalPointerEventFactory.prototype, \"onPointerUp\", null);\nconst PointerEventsDisabledCssClass = 'pointer-events-disabled';\n/**\n * The {@link Sash} is the UI component which allows the user to resize other\n * components. It's usually an invisible horizontal or vertical line which, when\n * hovered, becomes highlighted and can be dragged along the perpendicular dimension\n * to its direction.\n *\n * Features:\n * - Touch event handling\n * - Corner sash support\n * - Hover with different mouse cursor support\n * - Configurable hover size\n * - Linked sash support, for 2x2 corner sashes\n */\nexport class Sash extends Disposable {\n    get state() { return this._state; }\n    get orthogonalStartSash() { return this._orthogonalStartSash; }\n    get orthogonalEndSash() { return this._orthogonalEndSash; }\n    /**\n     * The state of a sash defines whether it can be interacted with by the user\n     * as well as what mouse cursor to use, when hovered.\n     */\n    set state(state) {\n        if (this._state === state) {\n            return;\n        }\n        this.el.classList.toggle('disabled', state === 0 /* SashState.Disabled */);\n        this.el.classList.toggle('minimum', state === 1 /* SashState.AtMinimum */);\n        this.el.classList.toggle('maximum', state === 2 /* SashState.AtMaximum */);\n        this._state = state;\n        this.onDidEnablementChange.fire(state);\n    }\n    /**\n     * A reference to another sash, perpendicular to this one, which\n     * aligns at the start of this one. A corner sash will be created\n     * automatically at that location.\n     *\n     * The start of a horizontal sash is its left-most position.\n     * The start of a vertical sash is its top-most position.\n     */\n    set orthogonalStartSash(sash) {\n        if (this._orthogonalStartSash === sash) {\n            return;\n        }\n        this.orthogonalStartDragHandleDisposables.clear();\n        this.orthogonalStartSashDisposables.clear();\n        if (sash) {\n            const onChange = (state) => {\n                this.orthogonalStartDragHandleDisposables.clear();\n                if (state !== 0 /* SashState.Disabled */) {\n                    this._orthogonalStartDragHandle = append(this.el, $('.orthogonal-drag-handle.start'));\n                    this.orthogonalStartDragHandleDisposables.add(toDisposable(() => this._orthogonalStartDragHandle.remove()));\n                    this.orthogonalStartDragHandleDisposables.add(new DomEmitter(this._orthogonalStartDragHandle, 'mouseenter')).event(() => Sash.onMouseEnter(sash), undefined, this.orthogonalStartDragHandleDisposables);\n                    this.orthogonalStartDragHandleDisposables.add(new DomEmitter(this._orthogonalStartDragHandle, 'mouseleave')).event(() => Sash.onMouseLeave(sash), undefined, this.orthogonalStartDragHandleDisposables);\n                }\n            };\n            this.orthogonalStartSashDisposables.add(sash.onDidEnablementChange.event(onChange, this));\n            onChange(sash.state);\n        }\n        this._orthogonalStartSash = sash;\n    }\n    /**\n     * A reference to another sash, perpendicular to this one, which\n     * aligns at the end of this one. A corner sash will be created\n     * automatically at that location.\n     *\n     * The end of a horizontal sash is its right-most position.\n     * The end of a vertical sash is its bottom-most position.\n     */\n    set orthogonalEndSash(sash) {\n        if (this._orthogonalEndSash === sash) {\n            return;\n        }\n        this.orthogonalEndDragHandleDisposables.clear();\n        this.orthogonalEndSashDisposables.clear();\n        if (sash) {\n            const onChange = (state) => {\n                this.orthogonalEndDragHandleDisposables.clear();\n                if (state !== 0 /* SashState.Disabled */) {\n                    this._orthogonalEndDragHandle = append(this.el, $('.orthogonal-drag-handle.end'));\n                    this.orthogonalEndDragHandleDisposables.add(toDisposable(() => this._orthogonalEndDragHandle.remove()));\n                    this.orthogonalEndDragHandleDisposables.add(new DomEmitter(this._orthogonalEndDragHandle, 'mouseenter')).event(() => Sash.onMouseEnter(sash), undefined, this.orthogonalEndDragHandleDisposables);\n                    this.orthogonalEndDragHandleDisposables.add(new DomEmitter(this._orthogonalEndDragHandle, 'mouseleave')).event(() => Sash.onMouseLeave(sash), undefined, this.orthogonalEndDragHandleDisposables);\n                }\n            };\n            this.orthogonalEndSashDisposables.add(sash.onDidEnablementChange.event(onChange, this));\n            onChange(sash.state);\n        }\n        this._orthogonalEndSash = sash;\n    }\n    constructor(container, layoutProvider, options) {\n        super();\n        this.hoverDelay = globalHoverDelay;\n        this.hoverDelayer = this._register(new Delayer(this.hoverDelay));\n        this._state = 3 /* SashState.Enabled */;\n        this.onDidEnablementChange = this._register(new Emitter());\n        this._onDidStart = this._register(new Emitter());\n        this._onDidChange = this._register(new Emitter());\n        this._onDidReset = this._register(new Emitter());\n        this._onDidEnd = this._register(new Emitter());\n        this.orthogonalStartSashDisposables = this._register(new DisposableStore());\n        this.orthogonalStartDragHandleDisposables = this._register(new DisposableStore());\n        this.orthogonalEndSashDisposables = this._register(new DisposableStore());\n        this.orthogonalEndDragHandleDisposables = this._register(new DisposableStore());\n        /**\n         * An event which fires whenever the user starts dragging this sash.\n         */\n        this.onDidStart = this._onDidStart.event;\n        /**\n         * An event which fires whenever the user moves the mouse while\n         * dragging this sash.\n         */\n        this.onDidChange = this._onDidChange.event;\n        /**\n         * An event which fires whenever the user double clicks this sash.\n         */\n        this.onDidReset = this._onDidReset.event;\n        /**\n         * An event which fires whenever the user stops dragging this sash.\n         */\n        this.onDidEnd = this._onDidEnd.event;\n        /**\n         * A linked sash will be forwarded the same user interactions and events\n         * so it moves exactly the same way as this sash.\n         *\n         * Useful in 2x2 grids. Not meant for widespread usage.\n         */\n        this.linkedSash = undefined;\n        this.el = append(container, $('.monaco-sash'));\n        if (options.orthogonalEdge) {\n            this.el.classList.add(`orthogonal-edge-${options.orthogonalEdge}`);\n        }\n        if (isMacintosh) {\n            this.el.classList.add('mac');\n        }\n        const onMouseDown = this._register(new DomEmitter(this.el, 'mousedown')).event;\n        this._register(onMouseDown(e => this.onPointerStart(e, new MouseEventFactory(container)), this));\n        const onMouseDoubleClick = this._register(new DomEmitter(this.el, 'dblclick')).event;\n        this._register(onMouseDoubleClick(this.onPointerDoublePress, this));\n        const onMouseEnter = this._register(new DomEmitter(this.el, 'mouseenter')).event;\n        this._register(onMouseEnter(() => Sash.onMouseEnter(this)));\n        const onMouseLeave = this._register(new DomEmitter(this.el, 'mouseleave')).event;\n        this._register(onMouseLeave(() => Sash.onMouseLeave(this)));\n        this._register(Gesture.addTarget(this.el));\n        const onTouchStart = this._register(new DomEmitter(this.el, EventType.Start)).event;\n        this._register(onTouchStart(e => this.onPointerStart(e, new GestureEventFactory(this.el)), this));\n        const onTap = this._register(new DomEmitter(this.el, EventType.Tap)).event;\n        let doubleTapTimeout = undefined;\n        this._register(onTap(event => {\n            if (doubleTapTimeout) {\n                clearTimeout(doubleTapTimeout);\n                doubleTapTimeout = undefined;\n                this.onPointerDoublePress(event);\n                return;\n            }\n            clearTimeout(doubleTapTimeout);\n            doubleTapTimeout = setTimeout(() => doubleTapTimeout = undefined, 250);\n        }, this));\n        if (typeof options.size === 'number') {\n            this.size = options.size;\n            if (options.orientation === 0 /* Orientation.VERTICAL */) {\n                this.el.style.width = `${this.size}px`;\n            }\n            else {\n                this.el.style.height = `${this.size}px`;\n            }\n        }\n        else {\n            this.size = globalSize;\n            this._register(onDidChangeGlobalSize.event(size => {\n                this.size = size;\n                this.layout();\n            }));\n        }\n        this._register(onDidChangeHoverDelay.event(delay => this.hoverDelay = delay));\n        this.layoutProvider = layoutProvider;\n        this.orthogonalStartSash = options.orthogonalStartSash;\n        this.orthogonalEndSash = options.orthogonalEndSash;\n        this.orientation = options.orientation || 0 /* Orientation.VERTICAL */;\n        if (this.orientation === 1 /* Orientation.HORIZONTAL */) {\n            this.el.classList.add('horizontal');\n            this.el.classList.remove('vertical');\n        }\n        else {\n            this.el.classList.remove('horizontal');\n            this.el.classList.add('vertical');\n        }\n        this.el.classList.toggle('debug', DEBUG);\n        this.layout();\n    }\n    onPointerStart(event, pointerEventFactory) {\n        EventHelper.stop(event);\n        let isMultisashResize = false;\n        if (!event.__orthogonalSashEvent) {\n            const orthogonalSash = this.getOrthogonalSash(event);\n            if (orthogonalSash) {\n                isMultisashResize = true;\n                event.__orthogonalSashEvent = true;\n                orthogonalSash.onPointerStart(event, new OrthogonalPointerEventFactory(pointerEventFactory));\n            }\n        }\n        if (this.linkedSash && !event.__linkedSashEvent) {\n            event.__linkedSashEvent = true;\n            this.linkedSash.onPointerStart(event, new OrthogonalPointerEventFactory(pointerEventFactory));\n        }\n        if (!this.state) {\n            return;\n        }\n        const iframes = this.el.ownerDocument.getElementsByTagName('iframe');\n        for (const iframe of iframes) {\n            iframe.classList.add(PointerEventsDisabledCssClass); // disable mouse events on iframes as long as we drag the sash\n        }\n        const startX = event.pageX;\n        const startY = event.pageY;\n        const altKey = event.altKey;\n        const startEvent = { startX, currentX: startX, startY, currentY: startY, altKey };\n        this.el.classList.add('active');\n        this._onDidStart.fire(startEvent);\n        // fix https://github.com/microsoft/vscode/issues/21675\n        const style = createStyleSheet(this.el);\n        const updateStyle = () => {\n            let cursor = '';\n            if (isMultisashResize) {\n                cursor = 'all-scroll';\n            }\n            else if (this.orientation === 1 /* Orientation.HORIZONTAL */) {\n                if (this.state === 1 /* SashState.AtMinimum */) {\n                    cursor = 's-resize';\n                }\n                else if (this.state === 2 /* SashState.AtMaximum */) {\n                    cursor = 'n-resize';\n                }\n                else {\n                    cursor = isMacintosh ? 'row-resize' : 'ns-resize';\n                }\n            }\n            else {\n                if (this.state === 1 /* SashState.AtMinimum */) {\n                    cursor = 'e-resize';\n                }\n                else if (this.state === 2 /* SashState.AtMaximum */) {\n                    cursor = 'w-resize';\n                }\n                else {\n                    cursor = isMacintosh ? 'col-resize' : 'ew-resize';\n                }\n            }\n            style.textContent = `* { cursor: ${cursor} !important; }`;\n        };\n        const disposables = new DisposableStore();\n        updateStyle();\n        if (!isMultisashResize) {\n            this.onDidEnablementChange.event(updateStyle, null, disposables);\n        }\n        const onPointerMove = (e) => {\n            EventHelper.stop(e, false);\n            const event = { startX, currentX: e.pageX, startY, currentY: e.pageY, altKey };\n            this._onDidChange.fire(event);\n        };\n        const onPointerUp = (e) => {\n            EventHelper.stop(e, false);\n            style.remove();\n            this.el.classList.remove('active');\n            this._onDidEnd.fire();\n            disposables.dispose();\n            for (const iframe of iframes) {\n                iframe.classList.remove(PointerEventsDisabledCssClass);\n            }\n        };\n        pointerEventFactory.onPointerMove(onPointerMove, null, disposables);\n        pointerEventFactory.onPointerUp(onPointerUp, null, disposables);\n        disposables.add(pointerEventFactory);\n    }\n    onPointerDoublePress(e) {\n        const orthogonalSash = this.getOrthogonalSash(e);\n        if (orthogonalSash) {\n            orthogonalSash._onDidReset.fire();\n        }\n        if (this.linkedSash) {\n            this.linkedSash._onDidReset.fire();\n        }\n        this._onDidReset.fire();\n    }\n    static onMouseEnter(sash, fromLinkedSash = false) {\n        if (sash.el.classList.contains('active')) {\n            sash.hoverDelayer.cancel();\n            sash.el.classList.add('hover');\n        }\n        else {\n            sash.hoverDelayer.trigger(() => sash.el.classList.add('hover'), sash.hoverDelay).then(undefined, () => { });\n        }\n        if (!fromLinkedSash && sash.linkedSash) {\n            Sash.onMouseEnter(sash.linkedSash, true);\n        }\n    }\n    static onMouseLeave(sash, fromLinkedSash = false) {\n        sash.hoverDelayer.cancel();\n        sash.el.classList.remove('hover');\n        if (!fromLinkedSash && sash.linkedSash) {\n            Sash.onMouseLeave(sash.linkedSash, true);\n        }\n    }\n    /**\n     * Forcefully stop any user interactions with this sash.\n     * Useful when hiding a parent component, while the user is still\n     * interacting with the sash.\n     */\n    clearSashHoverState() {\n        Sash.onMouseLeave(this);\n    }\n    /**\n     * Layout the sash. The sash will size and position itself\n     * based on its provided {@link ISashLayoutProvider layout provider}.\n     */\n    layout() {\n        if (this.orientation === 0 /* Orientation.VERTICAL */) {\n            const verticalProvider = this.layoutProvider;\n            this.el.style.left = verticalProvider.getVerticalSashLeft(this) - (this.size / 2) + 'px';\n            if (verticalProvider.getVerticalSashTop) {\n                this.el.style.top = verticalProvider.getVerticalSashTop(this) + 'px';\n            }\n            if (verticalProvider.getVerticalSashHeight) {\n                this.el.style.height = verticalProvider.getVerticalSashHeight(this) + 'px';\n            }\n        }\n        else {\n            const horizontalProvider = this.layoutProvider;\n            this.el.style.top = horizontalProvider.getHorizontalSashTop(this) - (this.size / 2) + 'px';\n            if (horizontalProvider.getHorizontalSashLeft) {\n                this.el.style.left = horizontalProvider.getHorizontalSashLeft(this) + 'px';\n            }\n            if (horizontalProvider.getHorizontalSashWidth) {\n                this.el.style.width = horizontalProvider.getHorizontalSashWidth(this) + 'px';\n            }\n        }\n    }\n    getOrthogonalSash(e) {\n        const target = e.initialTarget ?? e.target;\n        if (!target || !(isHTMLElement(target))) {\n            return undefined;\n        }\n        if (target.classList.contains('orthogonal-drag-handle')) {\n            return target.classList.contains('start') ? this.orthogonalStartSash : this.orthogonalEndSash;\n        }\n        return undefined;\n    }\n    dispose() {\n        super.dispose();\n        this.el.remove();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, addDisposableListener, append, getWindow, scheduleAtNextAnimationFrame } from '../../dom.js';\nimport { DomEmitter } from '../../event.js';\nimport { Sash } from '../sash/sash.js';\nimport { SmoothScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { pushToEnd, pushToStart, range } from '../../../common/arrays.js';\nimport { Color } from '../../../common/color.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { combinedDisposable, Disposable, dispose, toDisposable } from '../../../common/lifecycle.js';\nimport { clamp } from '../../../common/numbers.js';\nimport { Scrollable } from '../../../common/scrollable.js';\nimport * as types from '../../../common/types.js';\nimport './splitview.css';\nconst defaultStyles = {\n    separatorBorder: Color.transparent\n};\nclass ViewItem {\n    set size(size) {\n        this._size = size;\n    }\n    get size() {\n        return this._size;\n    }\n    get visible() {\n        return typeof this._cachedVisibleSize === 'undefined';\n    }\n    setVisible(visible, size) {\n        if (visible === this.visible) {\n            return;\n        }\n        if (visible) {\n            this.size = clamp(this._cachedVisibleSize, this.viewMinimumSize, this.viewMaximumSize);\n            this._cachedVisibleSize = undefined;\n        }\n        else {\n            this._cachedVisibleSize = typeof size === 'number' ? size : this.size;\n            this.size = 0;\n        }\n        this.container.classList.toggle('visible', visible);\n        try {\n            this.view.setVisible?.(visible);\n        }\n        catch (e) {\n            console.error('Splitview: Failed to set visible view');\n            console.error(e);\n        }\n    }\n    get minimumSize() { return this.visible ? this.view.minimumSize : 0; }\n    get viewMinimumSize() { return this.view.minimumSize; }\n    get maximumSize() { return this.visible ? this.view.maximumSize : 0; }\n    get viewMaximumSize() { return this.view.maximumSize; }\n    get priority() { return this.view.priority; }\n    get proportionalLayout() { return this.view.proportionalLayout ?? true; }\n    get snap() { return !!this.view.snap; }\n    set enabled(enabled) {\n        this.container.style.pointerEvents = enabled ? '' : 'none';\n    }\n    constructor(container, view, size, disposable) {\n        this.container = container;\n        this.view = view;\n        this.disposable = disposable;\n        this._cachedVisibleSize = undefined;\n        if (typeof size === 'number') {\n            this._size = size;\n            this._cachedVisibleSize = undefined;\n            container.classList.add('visible');\n        }\n        else {\n            this._size = 0;\n            this._cachedVisibleSize = size.cachedVisibleSize;\n        }\n    }\n    layout(offset, layoutContext) {\n        this.layoutContainer(offset);\n        try {\n            this.view.layout(this.size, offset, layoutContext);\n        }\n        catch (e) {\n            console.error('Splitview: Failed to layout view');\n            console.error(e);\n        }\n    }\n    dispose() {\n        this.disposable.dispose();\n    }\n}\nclass VerticalViewItem extends ViewItem {\n    layoutContainer(offset) {\n        this.container.style.top = `${offset}px`;\n        this.container.style.height = `${this.size}px`;\n    }\n}\nclass HorizontalViewItem extends ViewItem {\n    layoutContainer(offset) {\n        this.container.style.left = `${offset}px`;\n        this.container.style.width = `${this.size}px`;\n    }\n}\nvar State;\n(function (State) {\n    State[State[\"Idle\"] = 0] = \"Idle\";\n    State[State[\"Busy\"] = 1] = \"Busy\";\n})(State || (State = {}));\nexport var Sizing;\n(function (Sizing) {\n    /**\n     * When adding or removing views, distribute the delta space among\n     * all other views.\n     */\n    Sizing.Distribute = { type: 'distribute' };\n    /**\n     * When adding or removing views, split the delta space with another\n     * specific view, indexed by the provided `index`.\n     */\n    function Split(index) { return { type: 'split', index }; }\n    Sizing.Split = Split;\n    /**\n     * When adding a view, use DistributeSizing when all pre-existing views are\n     * distributed evenly, otherwise use SplitSizing.\n     */\n    function Auto(index) { return { type: 'auto', index }; }\n    Sizing.Auto = Auto;\n    /**\n     * When adding or removing views, assume the view is invisible.\n     */\n    function Invisible(cachedVisibleSize) { return { type: 'invisible', cachedVisibleSize }; }\n    Sizing.Invisible = Invisible;\n})(Sizing || (Sizing = {}));\n/**\n * The {@link SplitView} is the UI component which implements a one dimensional\n * flex-like layout algorithm for a collection of {@link IView} instances, which\n * are essentially HTMLElement instances with the following size constraints:\n *\n * - {@link IView.minimumSize}\n * - {@link IView.maximumSize}\n * - {@link IView.priority}\n * - {@link IView.snap}\n *\n * In case the SplitView doesn't have enough size to fit all views, it will overflow\n * its content with a scrollbar.\n *\n * In between each pair of views there will be a {@link Sash} allowing the user\n * to resize the views, making sure the constraints are respected.\n *\n * An optional {@link TLayoutContext layout context type} may be used in order to\n * pass along layout contextual data from the {@link SplitView.layout} method down\n * to each view's {@link IView.layout} calls.\n *\n * Features:\n * - Flex-like layout algorithm\n * - Snap support\n * - Orthogonal sash support, for corner sashes\n * - View hide/show support\n * - View swap/move support\n * - Alt key modifier behavior, macOS style\n */\nexport class SplitView extends Disposable {\n    get orthogonalStartSash() { return this._orthogonalStartSash; }\n    get orthogonalEndSash() { return this._orthogonalEndSash; }\n    get startSnappingEnabled() { return this._startSnappingEnabled; }\n    get endSnappingEnabled() { return this._endSnappingEnabled; }\n    /**\n     * A reference to a sash, perpendicular to all sashes in this {@link SplitView},\n     * located at the left- or top-most side of the SplitView.\n     * Corner sashes will be created automatically at the intersections.\n     */\n    set orthogonalStartSash(sash) {\n        for (const sashItem of this.sashItems) {\n            sashItem.sash.orthogonalStartSash = sash;\n        }\n        this._orthogonalStartSash = sash;\n    }\n    /**\n     * A reference to a sash, perpendicular to all sashes in this {@link SplitView},\n     * located at the right- or bottom-most side of the SplitView.\n     * Corner sashes will be created automatically at the intersections.\n     */\n    set orthogonalEndSash(sash) {\n        for (const sashItem of this.sashItems) {\n            sashItem.sash.orthogonalEndSash = sash;\n        }\n        this._orthogonalEndSash = sash;\n    }\n    /**\n     * Enable/disable snapping at the beginning of this {@link SplitView}.\n     */\n    set startSnappingEnabled(startSnappingEnabled) {\n        if (this._startSnappingEnabled === startSnappingEnabled) {\n            return;\n        }\n        this._startSnappingEnabled = startSnappingEnabled;\n        this.updateSashEnablement();\n    }\n    /**\n     * Enable/disable snapping at the end of this {@link SplitView}.\n     */\n    set endSnappingEnabled(endSnappingEnabled) {\n        if (this._endSnappingEnabled === endSnappingEnabled) {\n            return;\n        }\n        this._endSnappingEnabled = endSnappingEnabled;\n        this.updateSashEnablement();\n    }\n    /**\n     * Create a new {@link SplitView} instance.\n     */\n    constructor(container, options = {}) {\n        super();\n        this.size = 0;\n        this._contentSize = 0;\n        this.proportions = undefined;\n        this.viewItems = [];\n        this.sashItems = []; // used in tests\n        this.state = State.Idle;\n        this._onDidSashChange = this._register(new Emitter());\n        this._onDidSashReset = this._register(new Emitter());\n        this._startSnappingEnabled = true;\n        this._endSnappingEnabled = true;\n        /**\n         * Fires whenever the user resizes a {@link Sash sash}.\n         */\n        this.onDidSashChange = this._onDidSashChange.event;\n        /**\n         * Fires whenever the user double clicks a {@link Sash sash}.\n         */\n        this.onDidSashReset = this._onDidSashReset.event;\n        this.orientation = options.orientation ?? 0 /* Orientation.VERTICAL */;\n        this.inverseAltBehavior = options.inverseAltBehavior ?? false;\n        this.proportionalLayout = options.proportionalLayout ?? true;\n        this.getSashOrthogonalSize = options.getSashOrthogonalSize;\n        this.el = document.createElement('div');\n        this.el.classList.add('monaco-split-view2');\n        this.el.classList.add(this.orientation === 0 /* Orientation.VERTICAL */ ? 'vertical' : 'horizontal');\n        container.appendChild(this.el);\n        this.sashContainer = append(this.el, $('.sash-container'));\n        this.viewContainer = $('.split-view-container');\n        this.scrollable = this._register(new Scrollable({\n            forceIntegerValues: true,\n            smoothScrollDuration: 125,\n            scheduleAtNextAnimationFrame: callback => scheduleAtNextAnimationFrame(getWindow(this.el), callback),\n        }));\n        this.scrollableElement = this._register(new SmoothScrollableElement(this.viewContainer, {\n            vertical: this.orientation === 0 /* Orientation.VERTICAL */ ? (options.scrollbarVisibility ?? 1 /* ScrollbarVisibility.Auto */) : 2 /* ScrollbarVisibility.Hidden */,\n            horizontal: this.orientation === 1 /* Orientation.HORIZONTAL */ ? (options.scrollbarVisibility ?? 1 /* ScrollbarVisibility.Auto */) : 2 /* ScrollbarVisibility.Hidden */\n        }, this.scrollable));\n        // https://github.com/microsoft/vscode/issues/157737\n        const onDidScrollViewContainer = this._register(new DomEmitter(this.viewContainer, 'scroll')).event;\n        this._register(onDidScrollViewContainer(_ => {\n            const position = this.scrollableElement.getScrollPosition();\n            const scrollLeft = Math.abs(this.viewContainer.scrollLeft - position.scrollLeft) <= 1 ? undefined : this.viewContainer.scrollLeft;\n            const scrollTop = Math.abs(this.viewContainer.scrollTop - position.scrollTop) <= 1 ? undefined : this.viewContainer.scrollTop;\n            if (scrollLeft !== undefined || scrollTop !== undefined) {\n                this.scrollableElement.setScrollPosition({ scrollLeft, scrollTop });\n            }\n        }));\n        this.onDidScroll = this.scrollableElement.onScroll;\n        this._register(this.onDidScroll(e => {\n            if (e.scrollTopChanged) {\n                this.viewContainer.scrollTop = e.scrollTop;\n            }\n            if (e.scrollLeftChanged) {\n                this.viewContainer.scrollLeft = e.scrollLeft;\n            }\n        }));\n        append(this.el, this.scrollableElement.getDomNode());\n        this.style(options.styles || defaultStyles);\n        // We have an existing set of view, add them now\n        if (options.descriptor) {\n            this.size = options.descriptor.size;\n            options.descriptor.views.forEach((viewDescriptor, index) => {\n                const sizing = types.isUndefined(viewDescriptor.visible) || viewDescriptor.visible ? viewDescriptor.size : { type: 'invisible', cachedVisibleSize: viewDescriptor.size };\n                const view = viewDescriptor.view;\n                this.doAddView(view, sizing, index, true);\n            });\n            // Initialize content size and proportions for first layout\n            this._contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n            this.saveProportions();\n        }\n    }\n    style(styles) {\n        if (styles.separatorBorder.isTransparent()) {\n            this.el.classList.remove('separator-border');\n            this.el.style.removeProperty('--separator-border');\n        }\n        else {\n            this.el.classList.add('separator-border');\n            this.el.style.setProperty('--separator-border', styles.separatorBorder.toString());\n        }\n    }\n    /**\n     * Add a {@link IView view} to this {@link SplitView}.\n     *\n     * @param view The view to add.\n     * @param size Either a fixed size, or a dynamic {@link Sizing} strategy.\n     * @param index The index to insert the view on.\n     * @param skipLayout Whether layout should be skipped.\n     */\n    addView(view, size, index = this.viewItems.length, skipLayout) {\n        this.doAddView(view, size, index, skipLayout);\n    }\n    /**\n     * Layout the {@link SplitView}.\n     *\n     * @param size The entire size of the {@link SplitView}.\n     * @param layoutContext An optional layout context to pass along to {@link IView views}.\n     */\n    layout(size, layoutContext) {\n        const previousSize = Math.max(this.size, this._contentSize);\n        this.size = size;\n        this.layoutContext = layoutContext;\n        if (!this.proportions) {\n            const indexes = range(this.viewItems.length);\n            const lowPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */);\n            const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n            this.resize(this.viewItems.length - 1, size - previousSize, undefined, lowPriorityIndexes, highPriorityIndexes);\n        }\n        else {\n            let total = 0;\n            for (let i = 0; i < this.viewItems.length; i++) {\n                const item = this.viewItems[i];\n                const proportion = this.proportions[i];\n                if (typeof proportion === 'number') {\n                    total += proportion;\n                }\n                else {\n                    size -= item.size;\n                }\n            }\n            for (let i = 0; i < this.viewItems.length; i++) {\n                const item = this.viewItems[i];\n                const proportion = this.proportions[i];\n                if (typeof proportion === 'number' && total > 0) {\n                    item.size = clamp(Math.round(proportion * size / total), item.minimumSize, item.maximumSize);\n                }\n            }\n        }\n        this.distributeEmptySpace();\n        this.layoutViews();\n    }\n    saveProportions() {\n        if (this.proportionalLayout && this._contentSize > 0) {\n            this.proportions = this.viewItems.map(v => v.proportionalLayout && v.visible ? v.size / this._contentSize : undefined);\n        }\n    }\n    onSashStart({ sash, start, alt }) {\n        for (const item of this.viewItems) {\n            item.enabled = false;\n        }\n        const index = this.sashItems.findIndex(item => item.sash === sash);\n        // This way, we can press Alt while we resize a sash, macOS style!\n        const disposable = combinedDisposable(addDisposableListener(this.el.ownerDocument.body, 'keydown', e => resetSashDragState(this.sashDragState.current, e.altKey)), addDisposableListener(this.el.ownerDocument.body, 'keyup', () => resetSashDragState(this.sashDragState.current, false)));\n        const resetSashDragState = (start, alt) => {\n            const sizes = this.viewItems.map(i => i.size);\n            let minDelta = Number.NEGATIVE_INFINITY;\n            let maxDelta = Number.POSITIVE_INFINITY;\n            if (this.inverseAltBehavior) {\n                alt = !alt;\n            }\n            if (alt) {\n                // When we're using the last sash with Alt, we're resizing\n                // the view to the left/up, instead of right/down as usual\n                // Thus, we must do the inverse of the usual\n                const isLastSash = index === this.sashItems.length - 1;\n                if (isLastSash) {\n                    const viewItem = this.viewItems[index];\n                    minDelta = (viewItem.minimumSize - viewItem.size) / 2;\n                    maxDelta = (viewItem.maximumSize - viewItem.size) / 2;\n                }\n                else {\n                    const viewItem = this.viewItems[index + 1];\n                    minDelta = (viewItem.size - viewItem.maximumSize) / 2;\n                    maxDelta = (viewItem.size - viewItem.minimumSize) / 2;\n                }\n            }\n            let snapBefore;\n            let snapAfter;\n            if (!alt) {\n                const upIndexes = range(index, -1);\n                const downIndexes = range(index + 1, this.viewItems.length);\n                const minDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].minimumSize - sizes[i]), 0);\n                const maxDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].viewMaximumSize - sizes[i]), 0);\n                const maxDeltaDown = downIndexes.length === 0 ? Number.POSITIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].minimumSize), 0);\n                const minDeltaDown = downIndexes.length === 0 ? Number.NEGATIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].viewMaximumSize), 0);\n                const minDelta = Math.max(minDeltaUp, minDeltaDown);\n                const maxDelta = Math.min(maxDeltaDown, maxDeltaUp);\n                const snapBeforeIndex = this.findFirstSnapIndex(upIndexes);\n                const snapAfterIndex = this.findFirstSnapIndex(downIndexes);\n                if (typeof snapBeforeIndex === 'number') {\n                    const viewItem = this.viewItems[snapBeforeIndex];\n                    const halfSize = Math.floor(viewItem.viewMinimumSize / 2);\n                    snapBefore = {\n                        index: snapBeforeIndex,\n                        limitDelta: viewItem.visible ? minDelta - halfSize : minDelta + halfSize,\n                        size: viewItem.size\n                    };\n                }\n                if (typeof snapAfterIndex === 'number') {\n                    const viewItem = this.viewItems[snapAfterIndex];\n                    const halfSize = Math.floor(viewItem.viewMinimumSize / 2);\n                    snapAfter = {\n                        index: snapAfterIndex,\n                        limitDelta: viewItem.visible ? maxDelta + halfSize : maxDelta - halfSize,\n                        size: viewItem.size\n                    };\n                }\n            }\n            this.sashDragState = { start, current: start, index, sizes, minDelta, maxDelta, alt, snapBefore, snapAfter, disposable };\n        };\n        resetSashDragState(start, alt);\n    }\n    onSashChange({ current }) {\n        const { index, start, sizes, alt, minDelta, maxDelta, snapBefore, snapAfter } = this.sashDragState;\n        this.sashDragState.current = current;\n        const delta = current - start;\n        const newDelta = this.resize(index, delta, sizes, undefined, undefined, minDelta, maxDelta, snapBefore, snapAfter);\n        if (alt) {\n            const isLastSash = index === this.sashItems.length - 1;\n            const newSizes = this.viewItems.map(i => i.size);\n            const viewItemIndex = isLastSash ? index : index + 1;\n            const viewItem = this.viewItems[viewItemIndex];\n            const newMinDelta = viewItem.size - viewItem.maximumSize;\n            const newMaxDelta = viewItem.size - viewItem.minimumSize;\n            const resizeIndex = isLastSash ? index - 1 : index + 1;\n            this.resize(resizeIndex, -newDelta, newSizes, undefined, undefined, newMinDelta, newMaxDelta);\n        }\n        this.distributeEmptySpace();\n        this.layoutViews();\n    }\n    onSashEnd(index) {\n        this._onDidSashChange.fire(index);\n        this.sashDragState.disposable.dispose();\n        this.saveProportions();\n        for (const item of this.viewItems) {\n            item.enabled = true;\n        }\n    }\n    onViewChange(item, size) {\n        const index = this.viewItems.indexOf(item);\n        if (index < 0 || index >= this.viewItems.length) {\n            return;\n        }\n        size = typeof size === 'number' ? size : item.size;\n        size = clamp(size, item.minimumSize, item.maximumSize);\n        if (this.inverseAltBehavior && index > 0) {\n            // In this case, we want the view to grow or shrink both sides equally\n            // so we just resize the \"left\" side by half and let `resize` do the clamping magic\n            this.resize(index - 1, Math.floor((item.size - size) / 2));\n            this.distributeEmptySpace();\n            this.layoutViews();\n        }\n        else {\n            item.size = size;\n            this.relayout([index], undefined);\n        }\n    }\n    /**\n     * Resize a {@link IView view} within the {@link SplitView}.\n     *\n     * @param index The {@link IView view} index.\n     * @param size The {@link IView view} size.\n     */\n    resizeView(index, size) {\n        if (index < 0 || index >= this.viewItems.length) {\n            return;\n        }\n        if (this.state !== State.Idle) {\n            throw new Error('Cant modify splitview');\n        }\n        this.state = State.Busy;\n        try {\n            const indexes = range(this.viewItems.length).filter(i => i !== index);\n            const lowPriorityIndexes = [...indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */), index];\n            const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n            const item = this.viewItems[index];\n            size = Math.round(size);\n            size = clamp(size, item.minimumSize, Math.min(item.maximumSize, this.size));\n            item.size = size;\n            this.relayout(lowPriorityIndexes, highPriorityIndexes);\n        }\n        finally {\n            this.state = State.Idle;\n        }\n    }\n    /**\n     * Distribute the entire {@link SplitView} size among all {@link IView views}.\n     */\n    distributeViewSizes() {\n        const flexibleViewItems = [];\n        let flexibleSize = 0;\n        for (const item of this.viewItems) {\n            if (item.maximumSize - item.minimumSize > 0) {\n                flexibleViewItems.push(item);\n                flexibleSize += item.size;\n            }\n        }\n        const size = Math.floor(flexibleSize / flexibleViewItems.length);\n        for (const item of flexibleViewItems) {\n            item.size = clamp(size, item.minimumSize, item.maximumSize);\n        }\n        const indexes = range(this.viewItems.length);\n        const lowPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */);\n        const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n        this.relayout(lowPriorityIndexes, highPriorityIndexes);\n    }\n    /**\n     * Returns the size of a {@link IView view}.\n     */\n    getViewSize(index) {\n        if (index < 0 || index >= this.viewItems.length) {\n            return -1;\n        }\n        return this.viewItems[index].size;\n    }\n    doAddView(view, size, index = this.viewItems.length, skipLayout) {\n        if (this.state !== State.Idle) {\n            throw new Error('Cant modify splitview');\n        }\n        this.state = State.Busy;\n        try {\n            // Add view\n            const container = $('.split-view-view');\n            if (index === this.viewItems.length) {\n                this.viewContainer.appendChild(container);\n            }\n            else {\n                this.viewContainer.insertBefore(container, this.viewContainer.children.item(index));\n            }\n            const onChangeDisposable = view.onDidChange(size => this.onViewChange(item, size));\n            const containerDisposable = toDisposable(() => container.remove());\n            const disposable = combinedDisposable(onChangeDisposable, containerDisposable);\n            let viewSize;\n            if (typeof size === 'number') {\n                viewSize = size;\n            }\n            else {\n                if (size.type === 'auto') {\n                    if (this.areViewsDistributed()) {\n                        size = { type: 'distribute' };\n                    }\n                    else {\n                        size = { type: 'split', index: size.index };\n                    }\n                }\n                if (size.type === 'split') {\n                    viewSize = this.getViewSize(size.index) / 2;\n                }\n                else if (size.type === 'invisible') {\n                    viewSize = { cachedVisibleSize: size.cachedVisibleSize };\n                }\n                else {\n                    viewSize = view.minimumSize;\n                }\n            }\n            const item = this.orientation === 0 /* Orientation.VERTICAL */\n                ? new VerticalViewItem(container, view, viewSize, disposable)\n                : new HorizontalViewItem(container, view, viewSize, disposable);\n            this.viewItems.splice(index, 0, item);\n            // Add sash\n            if (this.viewItems.length > 1) {\n                const opts = { orthogonalStartSash: this.orthogonalStartSash, orthogonalEndSash: this.orthogonalEndSash };\n                const sash = this.orientation === 0 /* Orientation.VERTICAL */\n                    ? new Sash(this.sashContainer, { getHorizontalSashTop: s => this.getSashPosition(s), getHorizontalSashWidth: this.getSashOrthogonalSize }, { ...opts, orientation: 1 /* Orientation.HORIZONTAL */ })\n                    : new Sash(this.sashContainer, { getVerticalSashLeft: s => this.getSashPosition(s), getVerticalSashHeight: this.getSashOrthogonalSize }, { ...opts, orientation: 0 /* Orientation.VERTICAL */ });\n                const sashEventMapper = this.orientation === 0 /* Orientation.VERTICAL */\n                    ? (e) => ({ sash, start: e.startY, current: e.currentY, alt: e.altKey })\n                    : (e) => ({ sash, start: e.startX, current: e.currentX, alt: e.altKey });\n                const onStart = Event.map(sash.onDidStart, sashEventMapper);\n                const onStartDisposable = onStart(this.onSashStart, this);\n                const onChange = Event.map(sash.onDidChange, sashEventMapper);\n                const onChangeDisposable = onChange(this.onSashChange, this);\n                const onEnd = Event.map(sash.onDidEnd, () => this.sashItems.findIndex(item => item.sash === sash));\n                const onEndDisposable = onEnd(this.onSashEnd, this);\n                const onDidResetDisposable = sash.onDidReset(() => {\n                    const index = this.sashItems.findIndex(item => item.sash === sash);\n                    const upIndexes = range(index, -1);\n                    const downIndexes = range(index + 1, this.viewItems.length);\n                    const snapBeforeIndex = this.findFirstSnapIndex(upIndexes);\n                    const snapAfterIndex = this.findFirstSnapIndex(downIndexes);\n                    if (typeof snapBeforeIndex === 'number' && !this.viewItems[snapBeforeIndex].visible) {\n                        return;\n                    }\n                    if (typeof snapAfterIndex === 'number' && !this.viewItems[snapAfterIndex].visible) {\n                        return;\n                    }\n                    this._onDidSashReset.fire(index);\n                });\n                const disposable = combinedDisposable(onStartDisposable, onChangeDisposable, onEndDisposable, onDidResetDisposable, sash);\n                const sashItem = { sash, disposable };\n                this.sashItems.splice(index - 1, 0, sashItem);\n            }\n            container.appendChild(view.element);\n            let highPriorityIndexes;\n            if (typeof size !== 'number' && size.type === 'split') {\n                highPriorityIndexes = [size.index];\n            }\n            if (!skipLayout) {\n                this.relayout([index], highPriorityIndexes);\n            }\n            if (!skipLayout && typeof size !== 'number' && size.type === 'distribute') {\n                this.distributeViewSizes();\n            }\n        }\n        finally {\n            this.state = State.Idle;\n        }\n    }\n    relayout(lowPriorityIndexes, highPriorityIndexes) {\n        const contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n        this.resize(this.viewItems.length - 1, this.size - contentSize, undefined, lowPriorityIndexes, highPriorityIndexes);\n        this.distributeEmptySpace();\n        this.layoutViews();\n        this.saveProportions();\n    }\n    resize(index, delta, sizes = this.viewItems.map(i => i.size), lowPriorityIndexes, highPriorityIndexes, overloadMinDelta = Number.NEGATIVE_INFINITY, overloadMaxDelta = Number.POSITIVE_INFINITY, snapBefore, snapAfter) {\n        if (index < 0 || index >= this.viewItems.length) {\n            return 0;\n        }\n        const upIndexes = range(index, -1);\n        const downIndexes = range(index + 1, this.viewItems.length);\n        if (highPriorityIndexes) {\n            for (const index of highPriorityIndexes) {\n                pushToStart(upIndexes, index);\n                pushToStart(downIndexes, index);\n            }\n        }\n        if (lowPriorityIndexes) {\n            for (const index of lowPriorityIndexes) {\n                pushToEnd(upIndexes, index);\n                pushToEnd(downIndexes, index);\n            }\n        }\n        const upItems = upIndexes.map(i => this.viewItems[i]);\n        const upSizes = upIndexes.map(i => sizes[i]);\n        const downItems = downIndexes.map(i => this.viewItems[i]);\n        const downSizes = downIndexes.map(i => sizes[i]);\n        const minDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].minimumSize - sizes[i]), 0);\n        const maxDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].maximumSize - sizes[i]), 0);\n        const maxDeltaDown = downIndexes.length === 0 ? Number.POSITIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].minimumSize), 0);\n        const minDeltaDown = downIndexes.length === 0 ? Number.NEGATIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].maximumSize), 0);\n        const minDelta = Math.max(minDeltaUp, minDeltaDown, overloadMinDelta);\n        const maxDelta = Math.min(maxDeltaDown, maxDeltaUp, overloadMaxDelta);\n        let snapped = false;\n        if (snapBefore) {\n            const snapView = this.viewItems[snapBefore.index];\n            const visible = delta >= snapBefore.limitDelta;\n            snapped = visible !== snapView.visible;\n            snapView.setVisible(visible, snapBefore.size);\n        }\n        if (!snapped && snapAfter) {\n            const snapView = this.viewItems[snapAfter.index];\n            const visible = delta < snapAfter.limitDelta;\n            snapped = visible !== snapView.visible;\n            snapView.setVisible(visible, snapAfter.size);\n        }\n        if (snapped) {\n            return this.resize(index, delta, sizes, lowPriorityIndexes, highPriorityIndexes, overloadMinDelta, overloadMaxDelta);\n        }\n        delta = clamp(delta, minDelta, maxDelta);\n        for (let i = 0, deltaUp = delta; i < upItems.length; i++) {\n            const item = upItems[i];\n            const size = clamp(upSizes[i] + deltaUp, item.minimumSize, item.maximumSize);\n            const viewDelta = size - upSizes[i];\n            deltaUp -= viewDelta;\n            item.size = size;\n        }\n        for (let i = 0, deltaDown = delta; i < downItems.length; i++) {\n            const item = downItems[i];\n            const size = clamp(downSizes[i] - deltaDown, item.minimumSize, item.maximumSize);\n            const viewDelta = size - downSizes[i];\n            deltaDown += viewDelta;\n            item.size = size;\n        }\n        return delta;\n    }\n    distributeEmptySpace(lowPriorityIndex) {\n        const contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n        let emptyDelta = this.size - contentSize;\n        const indexes = range(this.viewItems.length - 1, -1);\n        const lowPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */);\n        const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n        for (const index of highPriorityIndexes) {\n            pushToStart(indexes, index);\n        }\n        for (const index of lowPriorityIndexes) {\n            pushToEnd(indexes, index);\n        }\n        if (typeof lowPriorityIndex === 'number') {\n            pushToEnd(indexes, lowPriorityIndex);\n        }\n        for (let i = 0; emptyDelta !== 0 && i < indexes.length; i++) {\n            const item = this.viewItems[indexes[i]];\n            const size = clamp(item.size + emptyDelta, item.minimumSize, item.maximumSize);\n            const viewDelta = size - item.size;\n            emptyDelta -= viewDelta;\n            item.size = size;\n        }\n    }\n    layoutViews() {\n        // Save new content size\n        this._contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n        // Layout views\n        let offset = 0;\n        for (const viewItem of this.viewItems) {\n            viewItem.layout(offset, this.layoutContext);\n            offset += viewItem.size;\n        }\n        // Layout sashes\n        this.sashItems.forEach(item => item.sash.layout());\n        this.updateSashEnablement();\n        this.updateScrollableElement();\n    }\n    updateScrollableElement() {\n        if (this.orientation === 0 /* Orientation.VERTICAL */) {\n            this.scrollableElement.setScrollDimensions({\n                height: this.size,\n                scrollHeight: this._contentSize\n            });\n        }\n        else {\n            this.scrollableElement.setScrollDimensions({\n                width: this.size,\n                scrollWidth: this._contentSize\n            });\n        }\n    }\n    updateSashEnablement() {\n        let previous = false;\n        const collapsesDown = this.viewItems.map(i => previous = (i.size - i.minimumSize > 0) || previous);\n        previous = false;\n        const expandsDown = this.viewItems.map(i => previous = (i.maximumSize - i.size > 0) || previous);\n        const reverseViews = [...this.viewItems].reverse();\n        previous = false;\n        const collapsesUp = reverseViews.map(i => previous = (i.size - i.minimumSize > 0) || previous).reverse();\n        previous = false;\n        const expandsUp = reverseViews.map(i => previous = (i.maximumSize - i.size > 0) || previous).reverse();\n        let position = 0;\n        for (let index = 0; index < this.sashItems.length; index++) {\n            const { sash } = this.sashItems[index];\n            const viewItem = this.viewItems[index];\n            position += viewItem.size;\n            const min = !(collapsesDown[index] && expandsUp[index + 1]);\n            const max = !(expandsDown[index] && collapsesUp[index + 1]);\n            if (min && max) {\n                const upIndexes = range(index, -1);\n                const downIndexes = range(index + 1, this.viewItems.length);\n                const snapBeforeIndex = this.findFirstSnapIndex(upIndexes);\n                const snapAfterIndex = this.findFirstSnapIndex(downIndexes);\n                const snappedBefore = typeof snapBeforeIndex === 'number' && !this.viewItems[snapBeforeIndex].visible;\n                const snappedAfter = typeof snapAfterIndex === 'number' && !this.viewItems[snapAfterIndex].visible;\n                if (snappedBefore && collapsesUp[index] && (position > 0 || this.startSnappingEnabled)) {\n                    sash.state = 1 /* SashState.AtMinimum */;\n                }\n                else if (snappedAfter && collapsesDown[index] && (position < this._contentSize || this.endSnappingEnabled)) {\n                    sash.state = 2 /* SashState.AtMaximum */;\n                }\n                else {\n                    sash.state = 0 /* SashState.Disabled */;\n                }\n            }\n            else if (min && !max) {\n                sash.state = 1 /* SashState.AtMinimum */;\n            }\n            else if (!min && max) {\n                sash.state = 2 /* SashState.AtMaximum */;\n            }\n            else {\n                sash.state = 3 /* SashState.Enabled */;\n            }\n        }\n    }\n    getSashPosition(sash) {\n        let position = 0;\n        for (let i = 0; i < this.sashItems.length; i++) {\n            position += this.viewItems[i].size;\n            if (this.sashItems[i].sash === sash) {\n                return position;\n            }\n        }\n        return 0;\n    }\n    findFirstSnapIndex(indexes) {\n        // visible views first\n        for (const index of indexes) {\n            const viewItem = this.viewItems[index];\n            if (!viewItem.visible) {\n                continue;\n            }\n            if (viewItem.snap) {\n                return index;\n            }\n        }\n        // then, hidden views\n        for (const index of indexes) {\n            const viewItem = this.viewItems[index];\n            if (viewItem.visible && viewItem.maximumSize - viewItem.minimumSize > 0) {\n                return undefined;\n            }\n            if (!viewItem.visible && viewItem.snap) {\n                return index;\n            }\n        }\n        return undefined;\n    }\n    areViewsDistributed() {\n        let min = undefined, max = undefined;\n        for (const view of this.viewItems) {\n            min = min === undefined ? view.size : Math.min(min, view.size);\n            max = max === undefined ? view.size : Math.max(max, view.size);\n            if (max - min > 2) {\n                return false;\n            }\n        }\n        return true;\n    }\n    dispose() {\n        this.sashDragState?.disposable.dispose();\n        dispose(this.viewItems);\n        this.viewItems = [];\n        this.sashItems.forEach(i => i.disposable.dispose());\n        this.sashItems = [];\n        super.dispose();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, append, clearNode, createStyleSheet } from '../../dom.js';\nimport { getBaseLayerHoverDelegate } from '../hover/hoverDelegate2.js';\nimport { getDefaultHoverDelegate } from '../hover/hoverDelegateFactory.js';\nimport { List, unthemedListStyles } from '../list/listWidget.js';\nimport { SplitView } from '../splitview/splitview.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { Disposable, DisposableStore } from '../../../common/lifecycle.js';\nimport './table.css';\nclass TableListRenderer {\n    static { this.TemplateId = 'row'; }\n    constructor(columns, renderers, getColumnSize) {\n        this.columns = columns;\n        this.getColumnSize = getColumnSize;\n        this.templateId = TableListRenderer.TemplateId;\n        this.renderedTemplates = new Set();\n        const rendererMap = new Map(renderers.map(r => [r.templateId, r]));\n        this.renderers = [];\n        for (const column of columns) {\n            const renderer = rendererMap.get(column.templateId);\n            if (!renderer) {\n                throw new Error(`Table cell renderer for template id ${column.templateId} not found.`);\n            }\n            this.renderers.push(renderer);\n        }\n    }\n    renderTemplate(container) {\n        const rowContainer = append(container, $('.monaco-table-tr'));\n        const cellContainers = [];\n        const cellTemplateData = [];\n        for (let i = 0; i < this.columns.length; i++) {\n            const renderer = this.renderers[i];\n            const cellContainer = append(rowContainer, $('.monaco-table-td', { 'data-col-index': i }));\n            cellContainer.style.width = `${this.getColumnSize(i)}px`;\n            cellContainers.push(cellContainer);\n            cellTemplateData.push(renderer.renderTemplate(cellContainer));\n        }\n        const result = { container, cellContainers, cellTemplateData };\n        this.renderedTemplates.add(result);\n        return result;\n    }\n    renderElement(element, index, templateData, height) {\n        for (let i = 0; i < this.columns.length; i++) {\n            const column = this.columns[i];\n            const cell = column.project(element);\n            const renderer = this.renderers[i];\n            renderer.renderElement(cell, index, templateData.cellTemplateData[i], height);\n        }\n    }\n    disposeElement(element, index, templateData, height) {\n        for (let i = 0; i < this.columns.length; i++) {\n            const renderer = this.renderers[i];\n            if (renderer.disposeElement) {\n                const column = this.columns[i];\n                const cell = column.project(element);\n                renderer.disposeElement(cell, index, templateData.cellTemplateData[i], height);\n            }\n        }\n    }\n    disposeTemplate(templateData) {\n        for (let i = 0; i < this.columns.length; i++) {\n            const renderer = this.renderers[i];\n            renderer.disposeTemplate(templateData.cellTemplateData[i]);\n        }\n        clearNode(templateData.container);\n        this.renderedTemplates.delete(templateData);\n    }\n    layoutColumn(index, size) {\n        for (const { cellContainers } of this.renderedTemplates) {\n            cellContainers[index].style.width = `${size}px`;\n        }\n    }\n}\nfunction asListVirtualDelegate(delegate) {\n    return {\n        getHeight(row) { return delegate.getHeight(row); },\n        getTemplateId() { return TableListRenderer.TemplateId; },\n    };\n}\nclass ColumnHeader extends Disposable {\n    get minimumSize() { return this.column.minimumWidth ?? 120; }\n    get maximumSize() { return this.column.maximumWidth ?? Number.POSITIVE_INFINITY; }\n    get onDidChange() { return this.column.onDidChangeWidthConstraints ?? Event.None; }\n    constructor(column, index) {\n        super();\n        this.column = column;\n        this.index = index;\n        this._onDidLayout = new Emitter();\n        this.onDidLayout = this._onDidLayout.event;\n        this.element = $('.monaco-table-th', { 'data-col-index': index }, column.label);\n        if (column.tooltip) {\n            this._register(getBaseLayerHoverDelegate().setupManagedHover(getDefaultHoverDelegate('mouse'), this.element, column.tooltip));\n        }\n    }\n    layout(size) {\n        this._onDidLayout.fire([this.index, size]);\n    }\n}\nexport class Table {\n    static { this.InstanceCount = 0; }\n    get onDidChangeFocus() { return this.list.onDidChangeFocus; }\n    get onDidChangeSelection() { return this.list.onDidChangeSelection; }\n    get onDidScroll() { return this.list.onDidScroll; }\n    get onMouseDblClick() { return this.list.onMouseDblClick; }\n    get onPointer() { return this.list.onPointer; }\n    get onDidFocus() { return this.list.onDidFocus; }\n    get scrollTop() { return this.list.scrollTop; }\n    set scrollTop(scrollTop) { this.list.scrollTop = scrollTop; }\n    get scrollHeight() { return this.list.scrollHeight; }\n    get renderHeight() { return this.list.renderHeight; }\n    get onDidDispose() { return this.list.onDidDispose; }\n    constructor(user, container, virtualDelegate, columns, renderers, _options) {\n        this.virtualDelegate = virtualDelegate;\n        this.columns = columns;\n        this.domId = `table_id_${++Table.InstanceCount}`;\n        this.disposables = new DisposableStore();\n        this.cachedWidth = 0;\n        this.cachedHeight = 0;\n        this.domNode = append(container, $(`.monaco-table.${this.domId}`));\n        const headers = columns.map((c, i) => this.disposables.add(new ColumnHeader(c, i)));\n        const descriptor = {\n            size: headers.reduce((a, b) => a + b.column.weight, 0),\n            views: headers.map(view => ({ size: view.column.weight, view }))\n        };\n        this.splitview = this.disposables.add(new SplitView(this.domNode, {\n            orientation: 1 /* Orientation.HORIZONTAL */,\n            scrollbarVisibility: 2 /* ScrollbarVisibility.Hidden */,\n            getSashOrthogonalSize: () => this.cachedHeight,\n            descriptor\n        }));\n        this.splitview.el.style.height = `${virtualDelegate.headerRowHeight}px`;\n        this.splitview.el.style.lineHeight = `${virtualDelegate.headerRowHeight}px`;\n        const renderer = new TableListRenderer(columns, renderers, i => this.splitview.getViewSize(i));\n        this.list = this.disposables.add(new List(user, this.domNode, asListVirtualDelegate(virtualDelegate), [renderer], _options));\n        Event.any(...headers.map(h => h.onDidLayout))(([index, size]) => renderer.layoutColumn(index, size), null, this.disposables);\n        this.splitview.onDidSashReset(index => {\n            const totalWeight = columns.reduce((r, c) => r + c.weight, 0);\n            const size = columns[index].weight / totalWeight * this.cachedWidth;\n            this.splitview.resizeView(index, size);\n        }, null, this.disposables);\n        this.styleElement = createStyleSheet(this.domNode);\n        this.style(unthemedListStyles);\n    }\n    updateOptions(options) {\n        this.list.updateOptions(options);\n    }\n    splice(start, deleteCount, elements = []) {\n        this.list.splice(start, deleteCount, elements);\n    }\n    getHTMLElement() {\n        return this.domNode;\n    }\n    style(styles) {\n        const content = [];\n        content.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\ttop: ${this.virtualDelegate.headerRowHeight + 1}px;\n\t\t\theight: calc(100% - ${this.virtualDelegate.headerRowHeight}px);\n\t\t}`);\n        this.styleElement.textContent = content.join('\\n');\n        this.list.style(styles);\n    }\n    getSelectedElements() {\n        return this.list.getSelectedElements();\n    }\n    getSelection() {\n        return this.list.getSelection();\n    }\n    getFocus() {\n        return this.list.getFocus();\n    }\n    dispose() {\n        this.disposables.dispose();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport var ObjectTreeElementCollapseState;\n(function (ObjectTreeElementCollapseState) {\n    ObjectTreeElementCollapseState[ObjectTreeElementCollapseState[\"Expanded\"] = 0] = \"Expanded\";\n    ObjectTreeElementCollapseState[ObjectTreeElementCollapseState[\"Collapsed\"] = 1] = \"Collapsed\";\n    /**\n     * If the element is already in the tree, preserve its current state. Else, expand it.\n     */\n    ObjectTreeElementCollapseState[ObjectTreeElementCollapseState[\"PreserveOrExpanded\"] = 2] = \"PreserveOrExpanded\";\n    /**\n     * If the element is already in the tree, preserve its current state. Else, collapse it.\n     */\n    ObjectTreeElementCollapseState[ObjectTreeElementCollapseState[\"PreserveOrCollapsed\"] = 3] = \"PreserveOrCollapsed\";\n})(ObjectTreeElementCollapseState || (ObjectTreeElementCollapseState = {}));\nexport var TreeMouseEventTarget;\n(function (TreeMouseEventTarget) {\n    TreeMouseEventTarget[TreeMouseEventTarget[\"Unknown\"] = 0] = \"Unknown\";\n    TreeMouseEventTarget[TreeMouseEventTarget[\"Twistie\"] = 1] = \"Twistie\";\n    TreeMouseEventTarget[TreeMouseEventTarget[\"Element\"] = 2] = \"Element\";\n    TreeMouseEventTarget[TreeMouseEventTarget[\"Filter\"] = 3] = \"Filter\";\n})(TreeMouseEventTarget || (TreeMouseEventTarget = {}));\nexport class TreeError extends Error {\n    constructor(user, message) {\n        super(`TreeError [${user}] ${message}`);\n    }\n}\nexport class WeakMapper {\n    constructor(fn) {\n        this.fn = fn;\n        this._map = new WeakMap();\n    }\n    map(key) {\n        let result = this._map.get(key);\n        if (!result) {\n            result = this.fn(key);\n            this._map.set(key, result);\n        }\n        return result;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { TreeError } from './tree.js';\nimport { splice, tail2 } from '../../../common/arrays.js';\nimport { Delayer } from '../../../common/async.js';\nimport { MicrotaskDelay } from '../../../common/symbols.js';\nimport { LcsDiff } from '../../../common/diff/diff.js';\nimport { Emitter, EventBufferer } from '../../../common/event.js';\nimport { Iterable } from '../../../common/iterator.js';\nexport function isFilterResult(obj) {\n    return typeof obj === 'object' && 'visibility' in obj && 'data' in obj;\n}\nexport function getVisibleState(visibility) {\n    switch (visibility) {\n        case true: return 1 /* TreeVisibility.Visible */;\n        case false: return 0 /* TreeVisibility.Hidden */;\n        default: return visibility;\n    }\n}\nfunction isCollapsibleStateUpdate(update) {\n    return typeof update.collapsible === 'boolean';\n}\nexport class IndexTreeModel {\n    constructor(user, list, rootElement, options = {}) {\n        this.user = user;\n        this.list = list;\n        this.rootRef = [];\n        this.eventBufferer = new EventBufferer();\n        this._onDidChangeCollapseState = new Emitter();\n        this.onDidChangeCollapseState = this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event);\n        this._onDidChangeRenderNodeCount = new Emitter();\n        this.onDidChangeRenderNodeCount = this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event);\n        this._onDidSplice = new Emitter();\n        this.onDidSplice = this._onDidSplice.event;\n        this.refilterDelayer = new Delayer(MicrotaskDelay);\n        this.collapseByDefault = typeof options.collapseByDefault === 'undefined' ? false : options.collapseByDefault;\n        this.allowNonCollapsibleParents = options.allowNonCollapsibleParents ?? false;\n        this.filter = options.filter;\n        this.autoExpandSingleChildren = typeof options.autoExpandSingleChildren === 'undefined' ? false : options.autoExpandSingleChildren;\n        this.root = {\n            parent: undefined,\n            element: rootElement,\n            children: [],\n            depth: 0,\n            visibleChildrenCount: 0,\n            visibleChildIndex: -1,\n            collapsible: false,\n            collapsed: false,\n            renderNodeCount: 0,\n            visibility: 1 /* TreeVisibility.Visible */,\n            visible: true,\n            filterData: undefined\n        };\n    }\n    splice(location, deleteCount, toInsert = Iterable.empty(), options = {}) {\n        if (location.length === 0) {\n            throw new TreeError(this.user, 'Invalid tree location');\n        }\n        if (options.diffIdentityProvider) {\n            this.spliceSmart(options.diffIdentityProvider, location, deleteCount, toInsert, options);\n        }\n        else {\n            this.spliceSimple(location, deleteCount, toInsert, options);\n        }\n    }\n    spliceSmart(identity, location, deleteCount, toInsertIterable = Iterable.empty(), options, recurseLevels = options.diffDepth ?? 0) {\n        const { parentNode } = this.getParentNodeWithListIndex(location);\n        if (!parentNode.lastDiffIds) {\n            return this.spliceSimple(location, deleteCount, toInsertIterable, options);\n        }\n        const toInsert = [...toInsertIterable];\n        const index = location[location.length - 1];\n        const diff = new LcsDiff({ getElements: () => parentNode.lastDiffIds }, {\n            getElements: () => [\n                ...parentNode.children.slice(0, index),\n                ...toInsert,\n                ...parentNode.children.slice(index + deleteCount),\n            ].map(e => identity.getId(e.element).toString())\n        }).ComputeDiff(false);\n        // if we were given a 'best effort' diff, use default behavior\n        if (diff.quitEarly) {\n            parentNode.lastDiffIds = undefined;\n            return this.spliceSimple(location, deleteCount, toInsert, options);\n        }\n        const locationPrefix = location.slice(0, -1);\n        const recurseSplice = (fromOriginal, fromModified, count) => {\n            if (recurseLevels > 0) {\n                for (let i = 0; i < count; i++) {\n                    fromOriginal--;\n                    fromModified--;\n                    this.spliceSmart(identity, [...locationPrefix, fromOriginal, 0], Number.MAX_SAFE_INTEGER, toInsert[fromModified].children, options, recurseLevels - 1);\n                }\n            }\n        };\n        let lastStartO = Math.min(parentNode.children.length, index + deleteCount);\n        let lastStartM = toInsert.length;\n        for (const change of diff.changes.sort((a, b) => b.originalStart - a.originalStart)) {\n            recurseSplice(lastStartO, lastStartM, lastStartO - (change.originalStart + change.originalLength));\n            lastStartO = change.originalStart;\n            lastStartM = change.modifiedStart - index;\n            this.spliceSimple([...locationPrefix, lastStartO], change.originalLength, Iterable.slice(toInsert, lastStartM, lastStartM + change.modifiedLength), options);\n        }\n        // at this point, startO === startM === count since any remaining prefix should match\n        recurseSplice(lastStartO, lastStartM, lastStartO);\n    }\n    spliceSimple(location, deleteCount, toInsert = Iterable.empty(), { onDidCreateNode, onDidDeleteNode, diffIdentityProvider }) {\n        const { parentNode, listIndex, revealed, visible } = this.getParentNodeWithListIndex(location);\n        const treeListElementsToInsert = [];\n        const nodesToInsertIterator = Iterable.map(toInsert, el => this.createTreeNode(el, parentNode, parentNode.visible ? 1 /* TreeVisibility.Visible */ : 0 /* TreeVisibility.Hidden */, revealed, treeListElementsToInsert, onDidCreateNode));\n        const lastIndex = location[location.length - 1];\n        // figure out what's the visible child start index right before the\n        // splice point\n        let visibleChildStartIndex = 0;\n        for (let i = lastIndex; i >= 0 && i < parentNode.children.length; i--) {\n            const child = parentNode.children[i];\n            if (child.visible) {\n                visibleChildStartIndex = child.visibleChildIndex;\n                break;\n            }\n        }\n        const nodesToInsert = [];\n        let insertedVisibleChildrenCount = 0;\n        let renderNodeCount = 0;\n        for (const child of nodesToInsertIterator) {\n            nodesToInsert.push(child);\n            renderNodeCount += child.renderNodeCount;\n            if (child.visible) {\n                child.visibleChildIndex = visibleChildStartIndex + insertedVisibleChildrenCount++;\n            }\n        }\n        const deletedNodes = splice(parentNode.children, lastIndex, deleteCount, nodesToInsert);\n        if (!diffIdentityProvider) {\n            parentNode.lastDiffIds = undefined;\n        }\n        else if (parentNode.lastDiffIds) {\n            splice(parentNode.lastDiffIds, lastIndex, deleteCount, nodesToInsert.map(n => diffIdentityProvider.getId(n.element).toString()));\n        }\n        else {\n            parentNode.lastDiffIds = parentNode.children.map(n => diffIdentityProvider.getId(n.element).toString());\n        }\n        // figure out what is the count of deleted visible children\n        let deletedVisibleChildrenCount = 0;\n        for (const child of deletedNodes) {\n            if (child.visible) {\n                deletedVisibleChildrenCount++;\n            }\n        }\n        // and adjust for all visible children after the splice point\n        if (deletedVisibleChildrenCount !== 0) {\n            for (let i = lastIndex + nodesToInsert.length; i < parentNode.children.length; i++) {\n                const child = parentNode.children[i];\n                if (child.visible) {\n                    child.visibleChildIndex -= deletedVisibleChildrenCount;\n                }\n            }\n        }\n        // update parent's visible children count\n        parentNode.visibleChildrenCount += insertedVisibleChildrenCount - deletedVisibleChildrenCount;\n        if (revealed && visible) {\n            const visibleDeleteCount = deletedNodes.reduce((r, node) => r + (node.visible ? node.renderNodeCount : 0), 0);\n            this._updateAncestorsRenderNodeCount(parentNode, renderNodeCount - visibleDeleteCount);\n            this.list.splice(listIndex, visibleDeleteCount, treeListElementsToInsert);\n        }\n        if (deletedNodes.length > 0 && onDidDeleteNode) {\n            const visit = (node) => {\n                onDidDeleteNode(node);\n                node.children.forEach(visit);\n            };\n            deletedNodes.forEach(visit);\n        }\n        this._onDidSplice.fire({ insertedNodes: nodesToInsert, deletedNodes });\n        let node = parentNode;\n        while (node) {\n            if (node.visibility === 2 /* TreeVisibility.Recurse */) {\n                // delayed to avoid excessive refiltering, see #135941\n                this.refilterDelayer.trigger(() => this.refilter());\n                break;\n            }\n            node = node.parent;\n        }\n    }\n    rerender(location) {\n        if (location.length === 0) {\n            throw new TreeError(this.user, 'Invalid tree location');\n        }\n        const { node, listIndex, revealed } = this.getTreeNodeWithListIndex(location);\n        if (node.visible && revealed) {\n            this.list.splice(listIndex, 1, [node]);\n        }\n    }\n    has(location) {\n        return this.hasTreeNode(location);\n    }\n    getListIndex(location) {\n        const { listIndex, visible, revealed } = this.getTreeNodeWithListIndex(location);\n        return visible && revealed ? listIndex : -1;\n    }\n    getListRenderCount(location) {\n        return this.getTreeNode(location).renderNodeCount;\n    }\n    isCollapsible(location) {\n        return this.getTreeNode(location).collapsible;\n    }\n    setCollapsible(location, collapsible) {\n        const node = this.getTreeNode(location);\n        if (typeof collapsible === 'undefined') {\n            collapsible = !node.collapsible;\n        }\n        const update = { collapsible };\n        return this.eventBufferer.bufferEvents(() => this._setCollapseState(location, update));\n    }\n    isCollapsed(location) {\n        return this.getTreeNode(location).collapsed;\n    }\n    setCollapsed(location, collapsed, recursive) {\n        const node = this.getTreeNode(location);\n        if (typeof collapsed === 'undefined') {\n            collapsed = !node.collapsed;\n        }\n        const update = { collapsed, recursive: recursive || false };\n        return this.eventBufferer.bufferEvents(() => this._setCollapseState(location, update));\n    }\n    _setCollapseState(location, update) {\n        const { node, listIndex, revealed } = this.getTreeNodeWithListIndex(location);\n        const result = this._setListNodeCollapseState(node, listIndex, revealed, update);\n        if (node !== this.root && this.autoExpandSingleChildren && result && !isCollapsibleStateUpdate(update) && node.collapsible && !node.collapsed && !update.recursive) {\n            let onlyVisibleChildIndex = -1;\n            for (let i = 0; i < node.children.length; i++) {\n                const child = node.children[i];\n                if (child.visible) {\n                    if (onlyVisibleChildIndex > -1) {\n                        onlyVisibleChildIndex = -1;\n                        break;\n                    }\n                    else {\n                        onlyVisibleChildIndex = i;\n                    }\n                }\n            }\n            if (onlyVisibleChildIndex > -1) {\n                this._setCollapseState([...location, onlyVisibleChildIndex], update);\n            }\n        }\n        return result;\n    }\n    _setListNodeCollapseState(node, listIndex, revealed, update) {\n        const result = this._setNodeCollapseState(node, update, false);\n        if (!revealed || !node.visible || !result) {\n            return result;\n        }\n        const previousRenderNodeCount = node.renderNodeCount;\n        const toInsert = this.updateNodeAfterCollapseChange(node);\n        const deleteCount = previousRenderNodeCount - (listIndex === -1 ? 0 : 1);\n        this.list.splice(listIndex + 1, deleteCount, toInsert.slice(1));\n        return result;\n    }\n    _setNodeCollapseState(node, update, deep) {\n        let result;\n        if (node === this.root) {\n            result = false;\n        }\n        else {\n            if (isCollapsibleStateUpdate(update)) {\n                result = node.collapsible !== update.collapsible;\n                node.collapsible = update.collapsible;\n            }\n            else if (!node.collapsible) {\n                result = false;\n            }\n            else {\n                result = node.collapsed !== update.collapsed;\n                node.collapsed = update.collapsed;\n            }\n            if (result) {\n                this._onDidChangeCollapseState.fire({ node, deep });\n            }\n        }\n        if (!isCollapsibleStateUpdate(update) && update.recursive) {\n            for (const child of node.children) {\n                result = this._setNodeCollapseState(child, update, true) || result;\n            }\n        }\n        return result;\n    }\n    expandTo(location) {\n        this.eventBufferer.bufferEvents(() => {\n            let node = this.getTreeNode(location);\n            while (node.parent) {\n                node = node.parent;\n                location = location.slice(0, location.length - 1);\n                if (node.collapsed) {\n                    this._setCollapseState(location, { collapsed: false, recursive: false });\n                }\n            }\n        });\n    }\n    refilter() {\n        const previousRenderNodeCount = this.root.renderNodeCount;\n        const toInsert = this.updateNodeAfterFilterChange(this.root);\n        this.list.splice(0, previousRenderNodeCount, toInsert);\n        this.refilterDelayer.cancel();\n    }\n    createTreeNode(treeElement, parent, parentVisibility, revealed, treeListElements, onDidCreateNode) {\n        const node = {\n            parent,\n            element: treeElement.element,\n            children: [],\n            depth: parent.depth + 1,\n            visibleChildrenCount: 0,\n            visibleChildIndex: -1,\n            collapsible: typeof treeElement.collapsible === 'boolean' ? treeElement.collapsible : (typeof treeElement.collapsed !== 'undefined'),\n            collapsed: typeof treeElement.collapsed === 'undefined' ? this.collapseByDefault : treeElement.collapsed,\n            renderNodeCount: 1,\n            visibility: 1 /* TreeVisibility.Visible */,\n            visible: true,\n            filterData: undefined\n        };\n        const visibility = this._filterNode(node, parentVisibility);\n        node.visibility = visibility;\n        if (revealed) {\n            treeListElements.push(node);\n        }\n        const childElements = treeElement.children || Iterable.empty();\n        const childRevealed = revealed && visibility !== 0 /* TreeVisibility.Hidden */ && !node.collapsed;\n        let visibleChildrenCount = 0;\n        let renderNodeCount = 1;\n        for (const el of childElements) {\n            const child = this.createTreeNode(el, node, visibility, childRevealed, treeListElements, onDidCreateNode);\n            node.children.push(child);\n            renderNodeCount += child.renderNodeCount;\n            if (child.visible) {\n                child.visibleChildIndex = visibleChildrenCount++;\n            }\n        }\n        if (!this.allowNonCollapsibleParents) {\n            node.collapsible = node.collapsible || node.children.length > 0;\n        }\n        node.visibleChildrenCount = visibleChildrenCount;\n        node.visible = visibility === 2 /* TreeVisibility.Recurse */ ? visibleChildrenCount > 0 : (visibility === 1 /* TreeVisibility.Visible */);\n        if (!node.visible) {\n            node.renderNodeCount = 0;\n            if (revealed) {\n                treeListElements.pop();\n            }\n        }\n        else if (!node.collapsed) {\n            node.renderNodeCount = renderNodeCount;\n        }\n        onDidCreateNode?.(node);\n        return node;\n    }\n    updateNodeAfterCollapseChange(node) {\n        const previousRenderNodeCount = node.renderNodeCount;\n        const result = [];\n        this._updateNodeAfterCollapseChange(node, result);\n        this._updateAncestorsRenderNodeCount(node.parent, result.length - previousRenderNodeCount);\n        return result;\n    }\n    _updateNodeAfterCollapseChange(node, result) {\n        if (node.visible === false) {\n            return 0;\n        }\n        result.push(node);\n        node.renderNodeCount = 1;\n        if (!node.collapsed) {\n            for (const child of node.children) {\n                node.renderNodeCount += this._updateNodeAfterCollapseChange(child, result);\n            }\n        }\n        this._onDidChangeRenderNodeCount.fire(node);\n        return node.renderNodeCount;\n    }\n    updateNodeAfterFilterChange(node) {\n        const previousRenderNodeCount = node.renderNodeCount;\n        const result = [];\n        this._updateNodeAfterFilterChange(node, node.visible ? 1 /* TreeVisibility.Visible */ : 0 /* TreeVisibility.Hidden */, result);\n        this._updateAncestorsRenderNodeCount(node.parent, result.length - previousRenderNodeCount);\n        return result;\n    }\n    _updateNodeAfterFilterChange(node, parentVisibility, result, revealed = true) {\n        let visibility;\n        if (node !== this.root) {\n            visibility = this._filterNode(node, parentVisibility);\n            if (visibility === 0 /* TreeVisibility.Hidden */) {\n                node.visible = false;\n                node.renderNodeCount = 0;\n                return false;\n            }\n            if (revealed) {\n                result.push(node);\n            }\n        }\n        const resultStartLength = result.length;\n        node.renderNodeCount = node === this.root ? 0 : 1;\n        let hasVisibleDescendants = false;\n        if (!node.collapsed || visibility !== 0 /* TreeVisibility.Hidden */) {\n            let visibleChildIndex = 0;\n            for (const child of node.children) {\n                hasVisibleDescendants = this._updateNodeAfterFilterChange(child, visibility, result, revealed && !node.collapsed) || hasVisibleDescendants;\n                if (child.visible) {\n                    child.visibleChildIndex = visibleChildIndex++;\n                }\n            }\n            node.visibleChildrenCount = visibleChildIndex;\n        }\n        else {\n            node.visibleChildrenCount = 0;\n        }\n        if (node !== this.root) {\n            node.visible = visibility === 2 /* TreeVisibility.Recurse */ ? hasVisibleDescendants : (visibility === 1 /* TreeVisibility.Visible */);\n            node.visibility = visibility;\n        }\n        if (!node.visible) {\n            node.renderNodeCount = 0;\n            if (revealed) {\n                result.pop();\n            }\n        }\n        else if (!node.collapsed) {\n            node.renderNodeCount += result.length - resultStartLength;\n        }\n        this._onDidChangeRenderNodeCount.fire(node);\n        return node.visible;\n    }\n    _updateAncestorsRenderNodeCount(node, diff) {\n        if (diff === 0) {\n            return;\n        }\n        while (node) {\n            node.renderNodeCount += diff;\n            this._onDidChangeRenderNodeCount.fire(node);\n            node = node.parent;\n        }\n    }\n    _filterNode(node, parentVisibility) {\n        const result = this.filter ? this.filter.filter(node.element, parentVisibility) : 1 /* TreeVisibility.Visible */;\n        if (typeof result === 'boolean') {\n            node.filterData = undefined;\n            return result ? 1 /* TreeVisibility.Visible */ : 0 /* TreeVisibility.Hidden */;\n        }\n        else if (isFilterResult(result)) {\n            node.filterData = result.data;\n            return getVisibleState(result.visibility);\n        }\n        else {\n            node.filterData = undefined;\n            return getVisibleState(result);\n        }\n    }\n    // cheap\n    hasTreeNode(location, node = this.root) {\n        if (!location || location.length === 0) {\n            return true;\n        }\n        const [index, ...rest] = location;\n        if (index < 0 || index > node.children.length) {\n            return false;\n        }\n        return this.hasTreeNode(rest, node.children[index]);\n    }\n    // cheap\n    getTreeNode(location, node = this.root) {\n        if (!location || location.length === 0) {\n            return node;\n        }\n        const [index, ...rest] = location;\n        if (index < 0 || index > node.children.length) {\n            throw new TreeError(this.user, 'Invalid tree location');\n        }\n        return this.getTreeNode(rest, node.children[index]);\n    }\n    // expensive\n    getTreeNodeWithListIndex(location) {\n        if (location.length === 0) {\n            return { node: this.root, listIndex: -1, revealed: true, visible: false };\n        }\n        const { parentNode, listIndex, revealed, visible } = this.getParentNodeWithListIndex(location);\n        const index = location[location.length - 1];\n        if (index < 0 || index > parentNode.children.length) {\n            throw new TreeError(this.user, 'Invalid tree location');\n        }\n        const node = parentNode.children[index];\n        return { node, listIndex, revealed, visible: visible && node.visible };\n    }\n    getParentNodeWithListIndex(location, node = this.root, listIndex = 0, revealed = true, visible = true) {\n        const [index, ...rest] = location;\n        if (index < 0 || index > node.children.length) {\n            throw new TreeError(this.user, 'Invalid tree location');\n        }\n        // TODO@joao perf!\n        for (let i = 0; i < index; i++) {\n            listIndex += node.children[i].renderNodeCount;\n        }\n        revealed = revealed && !node.collapsed;\n        visible = visible && node.visible;\n        if (rest.length === 0) {\n            return { parentNode: node, listIndex, revealed, visible };\n        }\n        return this.getParentNodeWithListIndex(rest, node.children[index], listIndex + 1, revealed, visible);\n    }\n    getNode(location = []) {\n        return this.getTreeNode(location);\n    }\n    // TODO@joao perf!\n    getNodeLocation(node) {\n        const location = [];\n        let indexTreeNode = node; // typing woes\n        while (indexTreeNode.parent) {\n            location.push(indexTreeNode.parent.children.indexOf(indexTreeNode));\n            indexTreeNode = indexTreeNode.parent;\n        }\n        return location.reverse();\n    }\n    getParentNodeLocation(location) {\n        if (location.length === 0) {\n            return undefined;\n        }\n        else if (location.length === 1) {\n            return [];\n        }\n        else {\n            return tail2(location)[0];\n        }\n    }\n    getFirstElementChild(location) {\n        const node = this.getTreeNode(location);\n        if (node.children.length === 0) {\n            return undefined;\n        }\n        return node.children[0].element;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, append, clearNode, createStyleSheet, getWindow, h, hasParentWithClass, asCssValueWithDefault, isKeyboardEvent, addDisposableListener } from '../../dom.js';\nimport { DomEmitter } from '../../event.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { ActionBar } from '../actionbar/actionbar.js';\nimport { FindInput } from '../findinput/findInput.js';\nimport { unthemedInboxStyles } from '../inputbox/inputBox.js';\nimport { ElementsDragAndDropData } from '../list/listView.js';\nimport { isActionItem, isButton, isInputElement, isMonacoCustomToggle, isMonacoEditor, isStickyScrollContainer, isStickyScrollElement, List, MouseController } from '../list/listWidget.js';\nimport { Toggle, unthemedToggleStyles } from '../toggle/toggle.js';\nimport { getVisibleState, isFilterResult } from './indexTreeModel.js';\nimport { TreeMouseEventTarget } from './tree.js';\nimport { Action } from '../../../common/actions.js';\nimport { distinct, equals, range } from '../../../common/arrays.js';\nimport { Delayer, disposableTimeout, timeout } from '../../../common/async.js';\nimport { Codicon } from '../../../common/codicons.js';\nimport { ThemeIcon } from '../../../common/themables.js';\nimport { SetMap } from '../../../common/map.js';\nimport { Emitter, Event, EventBufferer, Relay } from '../../../common/event.js';\nimport { fuzzyScore, FuzzyScore } from '../../../common/filters.js';\nimport { Disposable, DisposableStore, dispose, toDisposable } from '../../../common/lifecycle.js';\nimport { clamp } from '../../../common/numbers.js';\nimport { isNumber } from '../../../common/types.js';\nimport './media/tree.css';\nimport { localize } from '../../../../nls.js';\nimport { createInstantHoverDelegate, getDefaultHoverDelegate } from '../hover/hoverDelegateFactory.js';\nimport { autorun, constObservable } from '../../../common/observable.js';\nimport { alert } from '../aria/aria.js';\nclass TreeElementsDragAndDropData extends ElementsDragAndDropData {\n    constructor(data) {\n        super(data.elements.map(node => node.element));\n        this.data = data;\n    }\n}\nfunction asTreeDragAndDropData(data) {\n    if (data instanceof ElementsDragAndDropData) {\n        return new TreeElementsDragAndDropData(data);\n    }\n    return data;\n}\nclass TreeNodeListDragAndDrop {\n    constructor(modelProvider, dnd) {\n        this.modelProvider = modelProvider;\n        this.dnd = dnd;\n        this.autoExpandDisposable = Disposable.None;\n        this.disposables = new DisposableStore();\n    }\n    getDragURI(node) {\n        return this.dnd.getDragURI(node.element);\n    }\n    getDragLabel(nodes, originalEvent) {\n        if (this.dnd.getDragLabel) {\n            return this.dnd.getDragLabel(nodes.map(node => node.element), originalEvent);\n        }\n        return undefined;\n    }\n    onDragStart(data, originalEvent) {\n        this.dnd.onDragStart?.(asTreeDragAndDropData(data), originalEvent);\n    }\n    onDragOver(data, targetNode, targetIndex, targetSector, originalEvent, raw = true) {\n        const result = this.dnd.onDragOver(asTreeDragAndDropData(data), targetNode && targetNode.element, targetIndex, targetSector, originalEvent);\n        const didChangeAutoExpandNode = this.autoExpandNode !== targetNode;\n        if (didChangeAutoExpandNode) {\n            this.autoExpandDisposable.dispose();\n            this.autoExpandNode = targetNode;\n        }\n        if (typeof targetNode === 'undefined') {\n            return result;\n        }\n        if (didChangeAutoExpandNode && typeof result !== 'boolean' && result.autoExpand) {\n            this.autoExpandDisposable = disposableTimeout(() => {\n                const model = this.modelProvider();\n                const ref = model.getNodeLocation(targetNode);\n                if (model.isCollapsed(ref)) {\n                    model.setCollapsed(ref, false);\n                }\n                this.autoExpandNode = undefined;\n            }, 500, this.disposables);\n        }\n        if (typeof result === 'boolean' || !result.accept || typeof result.bubble === 'undefined' || result.feedback) {\n            if (!raw) {\n                const accept = typeof result === 'boolean' ? result : result.accept;\n                const effect = typeof result === 'boolean' ? undefined : result.effect;\n                return { accept, effect, feedback: [targetIndex] };\n            }\n            return result;\n        }\n        if (result.bubble === 1 /* TreeDragOverBubble.Up */) {\n            const model = this.modelProvider();\n            const ref = model.getNodeLocation(targetNode);\n            const parentRef = model.getParentNodeLocation(ref);\n            const parentNode = model.getNode(parentRef);\n            const parentIndex = parentRef && model.getListIndex(parentRef);\n            return this.onDragOver(data, parentNode, parentIndex, targetSector, originalEvent, false);\n        }\n        const model = this.modelProvider();\n        const ref = model.getNodeLocation(targetNode);\n        const start = model.getListIndex(ref);\n        const length = model.getListRenderCount(ref);\n        return { ...result, feedback: range(start, start + length) };\n    }\n    drop(data, targetNode, targetIndex, targetSector, originalEvent) {\n        this.autoExpandDisposable.dispose();\n        this.autoExpandNode = undefined;\n        this.dnd.drop(asTreeDragAndDropData(data), targetNode && targetNode.element, targetIndex, targetSector, originalEvent);\n    }\n    onDragEnd(originalEvent) {\n        this.dnd.onDragEnd?.(originalEvent);\n    }\n    dispose() {\n        this.disposables.dispose();\n        this.dnd.dispose();\n    }\n}\nfunction asListOptions(modelProvider, options) {\n    return options && {\n        ...options,\n        identityProvider: options.identityProvider && {\n            getId(el) {\n                return options.identityProvider.getId(el.element);\n            }\n        },\n        dnd: options.dnd && new TreeNodeListDragAndDrop(modelProvider, options.dnd),\n        multipleSelectionController: options.multipleSelectionController && {\n            isSelectionSingleChangeEvent(e) {\n                return options.multipleSelectionController.isSelectionSingleChangeEvent({ ...e, element: e.element });\n            },\n            isSelectionRangeChangeEvent(e) {\n                return options.multipleSelectionController.isSelectionRangeChangeEvent({ ...e, element: e.element });\n            }\n        },\n        accessibilityProvider: options.accessibilityProvider && {\n            ...options.accessibilityProvider,\n            getSetSize(node) {\n                const model = modelProvider();\n                const ref = model.getNodeLocation(node);\n                const parentRef = model.getParentNodeLocation(ref);\n                const parentNode = model.getNode(parentRef);\n                return parentNode.visibleChildrenCount;\n            },\n            getPosInSet(node) {\n                return node.visibleChildIndex + 1;\n            },\n            isChecked: options.accessibilityProvider && options.accessibilityProvider.isChecked ? (node) => {\n                return options.accessibilityProvider.isChecked(node.element);\n            } : undefined,\n            getRole: options.accessibilityProvider && options.accessibilityProvider.getRole ? (node) => {\n                return options.accessibilityProvider.getRole(node.element);\n            } : () => 'treeitem',\n            getAriaLabel(e) {\n                return options.accessibilityProvider.getAriaLabel(e.element);\n            },\n            getWidgetAriaLabel() {\n                return options.accessibilityProvider.getWidgetAriaLabel();\n            },\n            getWidgetRole: options.accessibilityProvider && options.accessibilityProvider.getWidgetRole ? () => options.accessibilityProvider.getWidgetRole() : () => 'tree',\n            getAriaLevel: options.accessibilityProvider && options.accessibilityProvider.getAriaLevel ? (node) => options.accessibilityProvider.getAriaLevel(node.element) : (node) => {\n                return node.depth;\n            },\n            getActiveDescendantId: options.accessibilityProvider.getActiveDescendantId && (node => {\n                return options.accessibilityProvider.getActiveDescendantId(node.element);\n            })\n        },\n        keyboardNavigationLabelProvider: options.keyboardNavigationLabelProvider && {\n            ...options.keyboardNavigationLabelProvider,\n            getKeyboardNavigationLabel(node) {\n                return options.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(node.element);\n            }\n        }\n    };\n}\nexport class ComposedTreeDelegate {\n    constructor(delegate) {\n        this.delegate = delegate;\n    }\n    getHeight(element) {\n        return this.delegate.getHeight(element.element);\n    }\n    getTemplateId(element) {\n        return this.delegate.getTemplateId(element.element);\n    }\n    hasDynamicHeight(element) {\n        return !!this.delegate.hasDynamicHeight && this.delegate.hasDynamicHeight(element.element);\n    }\n    setDynamicHeight(element, height) {\n        this.delegate.setDynamicHeight?.(element.element, height);\n    }\n}\nexport var RenderIndentGuides;\n(function (RenderIndentGuides) {\n    RenderIndentGuides[\"None\"] = \"none\";\n    RenderIndentGuides[\"OnHover\"] = \"onHover\";\n    RenderIndentGuides[\"Always\"] = \"always\";\n})(RenderIndentGuides || (RenderIndentGuides = {}));\nclass EventCollection {\n    get elements() {\n        return this._elements;\n    }\n    constructor(onDidChange, _elements = []) {\n        this._elements = _elements;\n        this.disposables = new DisposableStore();\n        this.onDidChange = Event.forEach(onDidChange, elements => this._elements = elements, this.disposables);\n    }\n    dispose() {\n        this.disposables.dispose();\n    }\n}\nexport class TreeRenderer {\n    static { this.DefaultIndent = 8; }\n    constructor(renderer, modelProvider, onDidChangeCollapseState, activeNodes, renderedIndentGuides, options = {}) {\n        this.renderer = renderer;\n        this.modelProvider = modelProvider;\n        this.activeNodes = activeNodes;\n        this.renderedIndentGuides = renderedIndentGuides;\n        this.renderedElements = new Map();\n        this.renderedNodes = new Map();\n        this.indent = TreeRenderer.DefaultIndent;\n        this.hideTwistiesOfChildlessElements = false;\n        this.shouldRenderIndentGuides = false;\n        this.activeIndentNodes = new Set();\n        this.indentGuidesDisposable = Disposable.None;\n        this.disposables = new DisposableStore();\n        this.templateId = renderer.templateId;\n        this.updateOptions(options);\n        Event.map(onDidChangeCollapseState, e => e.node)(this.onDidChangeNodeTwistieState, this, this.disposables);\n        renderer.onDidChangeTwistieState?.(this.onDidChangeTwistieState, this, this.disposables);\n    }\n    updateOptions(options = {}) {\n        if (typeof options.indent !== 'undefined') {\n            const indent = clamp(options.indent, 0, 40);\n            if (indent !== this.indent) {\n                this.indent = indent;\n                for (const [node, templateData] of this.renderedNodes) {\n                    this.renderTreeElement(node, templateData);\n                }\n            }\n        }\n        if (typeof options.renderIndentGuides !== 'undefined') {\n            const shouldRenderIndentGuides = options.renderIndentGuides !== RenderIndentGuides.None;\n            if (shouldRenderIndentGuides !== this.shouldRenderIndentGuides) {\n                this.shouldRenderIndentGuides = shouldRenderIndentGuides;\n                for (const [node, templateData] of this.renderedNodes) {\n                    this._renderIndentGuides(node, templateData);\n                }\n                this.indentGuidesDisposable.dispose();\n                if (shouldRenderIndentGuides) {\n                    const disposables = new DisposableStore();\n                    this.activeNodes.onDidChange(this._onDidChangeActiveNodes, this, disposables);\n                    this.indentGuidesDisposable = disposables;\n                    this._onDidChangeActiveNodes(this.activeNodes.elements);\n                }\n            }\n        }\n        if (typeof options.hideTwistiesOfChildlessElements !== 'undefined') {\n            this.hideTwistiesOfChildlessElements = options.hideTwistiesOfChildlessElements;\n        }\n    }\n    renderTemplate(container) {\n        const el = append(container, $('.monaco-tl-row'));\n        const indent = append(el, $('.monaco-tl-indent'));\n        const twistie = append(el, $('.monaco-tl-twistie'));\n        const contents = append(el, $('.monaco-tl-contents'));\n        const templateData = this.renderer.renderTemplate(contents);\n        return { container, indent, twistie, indentGuidesDisposable: Disposable.None, templateData };\n    }\n    renderElement(node, index, templateData, height) {\n        this.renderedNodes.set(node, templateData);\n        this.renderedElements.set(node.element, node);\n        this.renderTreeElement(node, templateData);\n        this.renderer.renderElement(node, index, templateData.templateData, height);\n    }\n    disposeElement(node, index, templateData, height) {\n        templateData.indentGuidesDisposable.dispose();\n        this.renderer.disposeElement?.(node, index, templateData.templateData, height);\n        if (typeof height === 'number') {\n            this.renderedNodes.delete(node);\n            this.renderedElements.delete(node.element);\n        }\n    }\n    disposeTemplate(templateData) {\n        this.renderer.disposeTemplate(templateData.templateData);\n    }\n    onDidChangeTwistieState(element) {\n        const node = this.renderedElements.get(element);\n        if (!node) {\n            return;\n        }\n        this.onDidChangeNodeTwistieState(node);\n    }\n    onDidChangeNodeTwistieState(node) {\n        const templateData = this.renderedNodes.get(node);\n        if (!templateData) {\n            return;\n        }\n        this._onDidChangeActiveNodes(this.activeNodes.elements);\n        this.renderTreeElement(node, templateData);\n    }\n    renderTreeElement(node, templateData) {\n        const indent = TreeRenderer.DefaultIndent + (node.depth - 1) * this.indent;\n        templateData.twistie.style.paddingLeft = `${indent}px`;\n        templateData.indent.style.width = `${indent + this.indent - 16}px`;\n        if (node.collapsible) {\n            templateData.container.setAttribute('aria-expanded', String(!node.collapsed));\n        }\n        else {\n            templateData.container.removeAttribute('aria-expanded');\n        }\n        templateData.twistie.classList.remove(...ThemeIcon.asClassNameArray(Codicon.treeItemExpanded));\n        let twistieRendered = false;\n        if (this.renderer.renderTwistie) {\n            twistieRendered = this.renderer.renderTwistie(node.element, templateData.twistie);\n        }\n        if (node.collapsible && (!this.hideTwistiesOfChildlessElements || node.visibleChildrenCount > 0)) {\n            if (!twistieRendered) {\n                templateData.twistie.classList.add(...ThemeIcon.asClassNameArray(Codicon.treeItemExpanded));\n            }\n            templateData.twistie.classList.add('collapsible');\n            templateData.twistie.classList.toggle('collapsed', node.collapsed);\n        }\n        else {\n            templateData.twistie.classList.remove('collapsible', 'collapsed');\n        }\n        this._renderIndentGuides(node, templateData);\n    }\n    _renderIndentGuides(node, templateData) {\n        clearNode(templateData.indent);\n        templateData.indentGuidesDisposable.dispose();\n        if (!this.shouldRenderIndentGuides) {\n            return;\n        }\n        const disposableStore = new DisposableStore();\n        const model = this.modelProvider();\n        while (true) {\n            const ref = model.getNodeLocation(node);\n            const parentRef = model.getParentNodeLocation(ref);\n            if (!parentRef) {\n                break;\n            }\n            const parent = model.getNode(parentRef);\n            const guide = $('.indent-guide', { style: `width: ${this.indent}px` });\n            if (this.activeIndentNodes.has(parent)) {\n                guide.classList.add('active');\n            }\n            if (templateData.indent.childElementCount === 0) {\n                templateData.indent.appendChild(guide);\n            }\n            else {\n                templateData.indent.insertBefore(guide, templateData.indent.firstElementChild);\n            }\n            this.renderedIndentGuides.add(parent, guide);\n            disposableStore.add(toDisposable(() => this.renderedIndentGuides.delete(parent, guide)));\n            node = parent;\n        }\n        templateData.indentGuidesDisposable = disposableStore;\n    }\n    _onDidChangeActiveNodes(nodes) {\n        if (!this.shouldRenderIndentGuides) {\n            return;\n        }\n        const set = new Set();\n        const model = this.modelProvider();\n        nodes.forEach(node => {\n            const ref = model.getNodeLocation(node);\n            try {\n                const parentRef = model.getParentNodeLocation(ref);\n                if (node.collapsible && node.children.length > 0 && !node.collapsed) {\n                    set.add(node);\n                }\n                else if (parentRef) {\n                    set.add(model.getNode(parentRef));\n                }\n            }\n            catch {\n                // noop\n            }\n        });\n        this.activeIndentNodes.forEach(node => {\n            if (!set.has(node)) {\n                this.renderedIndentGuides.forEach(node, line => line.classList.remove('active'));\n            }\n        });\n        set.forEach(node => {\n            if (!this.activeIndentNodes.has(node)) {\n                this.renderedIndentGuides.forEach(node, line => line.classList.add('active'));\n            }\n        });\n        this.activeIndentNodes = set;\n    }\n    dispose() {\n        this.renderedNodes.clear();\n        this.renderedElements.clear();\n        this.indentGuidesDisposable.dispose();\n        dispose(this.disposables);\n    }\n}\nclass FindFilter {\n    get totalCount() { return this._totalCount; }\n    get matchCount() { return this._matchCount; }\n    constructor(tree, keyboardNavigationLabelProvider, _filter) {\n        this.tree = tree;\n        this.keyboardNavigationLabelProvider = keyboardNavigationLabelProvider;\n        this._filter = _filter;\n        this._totalCount = 0;\n        this._matchCount = 0;\n        this._pattern = '';\n        this._lowercasePattern = '';\n        this.disposables = new DisposableStore();\n        tree.onWillRefilter(this.reset, this, this.disposables);\n    }\n    filter(element, parentVisibility) {\n        let visibility = 1 /* TreeVisibility.Visible */;\n        if (this._filter) {\n            const result = this._filter.filter(element, parentVisibility);\n            if (typeof result === 'boolean') {\n                visibility = result ? 1 /* TreeVisibility.Visible */ : 0 /* TreeVisibility.Hidden */;\n            }\n            else if (isFilterResult(result)) {\n                visibility = getVisibleState(result.visibility);\n            }\n            else {\n                visibility = result;\n            }\n            if (visibility === 0 /* TreeVisibility.Hidden */) {\n                return false;\n            }\n        }\n        this._totalCount++;\n        if (!this._pattern) {\n            this._matchCount++;\n            return { data: FuzzyScore.Default, visibility };\n        }\n        const label = this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(element);\n        const labels = Array.isArray(label) ? label : [label];\n        for (const l of labels) {\n            const labelStr = l && l.toString();\n            if (typeof labelStr === 'undefined') {\n                return { data: FuzzyScore.Default, visibility };\n            }\n            let score;\n            if (this.tree.findMatchType === TreeFindMatchType.Contiguous) {\n                const index = labelStr.toLowerCase().indexOf(this._lowercasePattern);\n                if (index > -1) {\n                    score = [Number.MAX_SAFE_INTEGER, 0];\n                    for (let i = this._lowercasePattern.length; i > 0; i--) {\n                        score.push(index + i - 1);\n                    }\n                }\n            }\n            else {\n                score = fuzzyScore(this._pattern, this._lowercasePattern, 0, labelStr, labelStr.toLowerCase(), 0, { firstMatchCanBeWeak: true, boostFullMatch: true });\n            }\n            if (score) {\n                this._matchCount++;\n                return labels.length === 1 ?\n                    { data: score, visibility } :\n                    { data: { label: labelStr, score: score }, visibility };\n            }\n        }\n        if (this.tree.findMode === TreeFindMode.Filter) {\n            if (typeof this.tree.options.defaultFindVisibility === 'number') {\n                return this.tree.options.defaultFindVisibility;\n            }\n            else if (this.tree.options.defaultFindVisibility) {\n                return this.tree.options.defaultFindVisibility(element);\n            }\n            else {\n                return 2 /* TreeVisibility.Recurse */;\n            }\n        }\n        else {\n            return { data: FuzzyScore.Default, visibility };\n        }\n    }\n    reset() {\n        this._totalCount = 0;\n        this._matchCount = 0;\n    }\n    dispose() {\n        dispose(this.disposables);\n    }\n}\nexport class ModeToggle extends Toggle {\n    constructor(opts) {\n        super({\n            icon: Codicon.listFilter,\n            title: localize('filter', \"Filter\"),\n            isChecked: opts.isChecked ?? false,\n            hoverDelegate: opts.hoverDelegate ?? getDefaultHoverDelegate('element'),\n            inputActiveOptionBorder: opts.inputActiveOptionBorder,\n            inputActiveOptionForeground: opts.inputActiveOptionForeground,\n            inputActiveOptionBackground: opts.inputActiveOptionBackground\n        });\n    }\n}\nexport class FuzzyToggle extends Toggle {\n    constructor(opts) {\n        super({\n            icon: Codicon.searchFuzzy,\n            title: localize('fuzzySearch', \"Fuzzy Match\"),\n            isChecked: opts.isChecked ?? false,\n            hoverDelegate: opts.hoverDelegate ?? getDefaultHoverDelegate('element'),\n            inputActiveOptionBorder: opts.inputActiveOptionBorder,\n            inputActiveOptionForeground: opts.inputActiveOptionForeground,\n            inputActiveOptionBackground: opts.inputActiveOptionBackground\n        });\n    }\n}\nconst unthemedFindWidgetStyles = {\n    inputBoxStyles: unthemedInboxStyles,\n    toggleStyles: unthemedToggleStyles,\n    listFilterWidgetBackground: undefined,\n    listFilterWidgetNoMatchesOutline: undefined,\n    listFilterWidgetOutline: undefined,\n    listFilterWidgetShadow: undefined\n};\nexport var TreeFindMode;\n(function (TreeFindMode) {\n    TreeFindMode[TreeFindMode[\"Highlight\"] = 0] = \"Highlight\";\n    TreeFindMode[TreeFindMode[\"Filter\"] = 1] = \"Filter\";\n})(TreeFindMode || (TreeFindMode = {}));\nexport var TreeFindMatchType;\n(function (TreeFindMatchType) {\n    TreeFindMatchType[TreeFindMatchType[\"Fuzzy\"] = 0] = \"Fuzzy\";\n    TreeFindMatchType[TreeFindMatchType[\"Contiguous\"] = 1] = \"Contiguous\";\n})(TreeFindMatchType || (TreeFindMatchType = {}));\nclass FindWidget extends Disposable {\n    set mode(mode) {\n        this.modeToggle.checked = mode === TreeFindMode.Filter;\n        this.findInput.inputBox.setPlaceHolder(mode === TreeFindMode.Filter ? localize('type to filter', \"Type to filter\") : localize('type to search', \"Type to search\"));\n    }\n    set matchType(matchType) {\n        this.matchTypeToggle.checked = matchType === TreeFindMatchType.Fuzzy;\n    }\n    constructor(container, tree, contextViewProvider, mode, matchType, options) {\n        super();\n        this.tree = tree;\n        this.elements = h('.monaco-tree-type-filter', [\n            h('.monaco-tree-type-filter-grab.codicon.codicon-debug-gripper@grab', { tabIndex: 0 }),\n            h('.monaco-tree-type-filter-input@findInput'),\n            h('.monaco-tree-type-filter-actionbar@actionbar'),\n        ]);\n        this.width = 0;\n        this.right = 0;\n        this.top = 0;\n        this._onDidDisable = new Emitter();\n        container.appendChild(this.elements.root);\n        this._register(toDisposable(() => this.elements.root.remove()));\n        const styles = options?.styles ?? unthemedFindWidgetStyles;\n        if (styles.listFilterWidgetBackground) {\n            this.elements.root.style.backgroundColor = styles.listFilterWidgetBackground;\n        }\n        if (styles.listFilterWidgetShadow) {\n            this.elements.root.style.boxShadow = `0 0 8px 2px ${styles.listFilterWidgetShadow}`;\n        }\n        const toggleHoverDelegate = this._register(createInstantHoverDelegate());\n        this.modeToggle = this._register(new ModeToggle({ ...styles.toggleStyles, isChecked: mode === TreeFindMode.Filter, hoverDelegate: toggleHoverDelegate }));\n        this.matchTypeToggle = this._register(new FuzzyToggle({ ...styles.toggleStyles, isChecked: matchType === TreeFindMatchType.Fuzzy, hoverDelegate: toggleHoverDelegate }));\n        this.onDidChangeMode = Event.map(this.modeToggle.onChange, () => this.modeToggle.checked ? TreeFindMode.Filter : TreeFindMode.Highlight, this._store);\n        this.onDidChangeMatchType = Event.map(this.matchTypeToggle.onChange, () => this.matchTypeToggle.checked ? TreeFindMatchType.Fuzzy : TreeFindMatchType.Contiguous, this._store);\n        this.findInput = this._register(new FindInput(this.elements.findInput, contextViewProvider, {\n            label: localize('type to search', \"Type to search\"),\n            additionalToggles: [this.modeToggle, this.matchTypeToggle],\n            showCommonFindToggles: false,\n            inputBoxStyles: styles.inputBoxStyles,\n            toggleStyles: styles.toggleStyles,\n            history: options?.history\n        }));\n        this.actionbar = this._register(new ActionBar(this.elements.actionbar));\n        this.mode = mode;\n        const emitter = this._register(new DomEmitter(this.findInput.inputBox.inputElement, 'keydown'));\n        const onKeyDown = Event.chain(emitter.event, $ => $.map(e => new StandardKeyboardEvent(e)));\n        this._register(onKeyDown((e) => {\n            // Using equals() so we reserve modified keys for future use\n            if (e.equals(3 /* KeyCode.Enter */)) {\n                // This is the only keyboard way to return to the tree from a history item that isn't the last one\n                e.preventDefault();\n                e.stopPropagation();\n                this.findInput.inputBox.addToHistory();\n                this.tree.domFocus();\n                return;\n            }\n            if (e.equals(18 /* KeyCode.DownArrow */)) {\n                e.preventDefault();\n                e.stopPropagation();\n                if (this.findInput.inputBox.isAtLastInHistory() || this.findInput.inputBox.isNowhereInHistory()) {\n                    // Retain original pre-history DownArrow behavior\n                    this.findInput.inputBox.addToHistory();\n                    this.tree.domFocus();\n                }\n                else {\n                    // Downward through history\n                    this.findInput.inputBox.showNextValue();\n                }\n                return;\n            }\n            if (e.equals(16 /* KeyCode.UpArrow */)) {\n                e.preventDefault();\n                e.stopPropagation();\n                // Upward through history\n                this.findInput.inputBox.showPreviousValue();\n                return;\n            }\n        }));\n        const closeAction = this._register(new Action('close', localize('close', \"Close\"), 'codicon codicon-close', true, () => this.dispose()));\n        this.actionbar.push(closeAction, { icon: true, label: false });\n        const onGrabMouseDown = this._register(new DomEmitter(this.elements.grab, 'mousedown'));\n        this._register(onGrabMouseDown.event(e => {\n            const disposables = new DisposableStore();\n            const onWindowMouseMove = disposables.add(new DomEmitter(getWindow(e), 'mousemove'));\n            const onWindowMouseUp = disposables.add(new DomEmitter(getWindow(e), 'mouseup'));\n            const startRight = this.right;\n            const startX = e.pageX;\n            const startTop = this.top;\n            const startY = e.pageY;\n            this.elements.grab.classList.add('grabbing');\n            const transition = this.elements.root.style.transition;\n            this.elements.root.style.transition = 'unset';\n            const update = (e) => {\n                const deltaX = e.pageX - startX;\n                this.right = startRight - deltaX;\n                const deltaY = e.pageY - startY;\n                this.top = startTop + deltaY;\n                this.layout();\n            };\n            disposables.add(onWindowMouseMove.event(update));\n            disposables.add(onWindowMouseUp.event(e => {\n                update(e);\n                this.elements.grab.classList.remove('grabbing');\n                this.elements.root.style.transition = transition;\n                disposables.dispose();\n            }));\n        }));\n        const onGrabKeyDown = Event.chain(this._register(new DomEmitter(this.elements.grab, 'keydown')).event, $ => $.map(e => new StandardKeyboardEvent(e)));\n        this._register(onGrabKeyDown((e) => {\n            let right;\n            let top;\n            if (e.keyCode === 15 /* KeyCode.LeftArrow */) {\n                right = Number.POSITIVE_INFINITY;\n            }\n            else if (e.keyCode === 17 /* KeyCode.RightArrow */) {\n                right = 0;\n            }\n            else if (e.keyCode === 10 /* KeyCode.Space */) {\n                right = this.right === 0 ? Number.POSITIVE_INFINITY : 0;\n            }\n            if (e.keyCode === 16 /* KeyCode.UpArrow */) {\n                top = 0;\n            }\n            else if (e.keyCode === 18 /* KeyCode.DownArrow */) {\n                top = Number.POSITIVE_INFINITY;\n            }\n            if (right !== undefined) {\n                e.preventDefault();\n                e.stopPropagation();\n                this.right = right;\n                this.layout();\n            }\n            if (top !== undefined) {\n                e.preventDefault();\n                e.stopPropagation();\n                this.top = top;\n                const transition = this.elements.root.style.transition;\n                this.elements.root.style.transition = 'unset';\n                this.layout();\n                setTimeout(() => {\n                    this.elements.root.style.transition = transition;\n                }, 0);\n            }\n        }));\n        this.onDidChangeValue = this.findInput.onDidChange;\n    }\n    layout(width = this.width) {\n        this.width = width;\n        this.right = clamp(this.right, 0, Math.max(0, width - 212));\n        this.elements.root.style.right = `${this.right}px`;\n        this.top = clamp(this.top, 0, 24);\n        this.elements.root.style.top = `${this.top}px`;\n    }\n    showMessage(message) {\n        this.findInput.showMessage(message);\n    }\n    clearMessage() {\n        this.findInput.clearMessage();\n    }\n    async dispose() {\n        this._onDidDisable.fire();\n        this.elements.root.classList.add('disabled');\n        await timeout(300);\n        super.dispose();\n    }\n}\nclass FindController {\n    get pattern() { return this._pattern; }\n    get mode() { return this._mode; }\n    set mode(mode) {\n        if (mode === this._mode) {\n            return;\n        }\n        this._mode = mode;\n        if (this.widget) {\n            this.widget.mode = this._mode;\n        }\n        this.tree.refilter();\n        this.render();\n        this._onDidChangeMode.fire(mode);\n    }\n    get matchType() { return this._matchType; }\n    set matchType(matchType) {\n        if (matchType === this._matchType) {\n            return;\n        }\n        this._matchType = matchType;\n        if (this.widget) {\n            this.widget.matchType = this._matchType;\n        }\n        this.tree.refilter();\n        this.render();\n        this._onDidChangeMatchType.fire(matchType);\n    }\n    constructor(tree, model, view, filter, contextViewProvider, options = {}) {\n        this.tree = tree;\n        this.view = view;\n        this.filter = filter;\n        this.contextViewProvider = contextViewProvider;\n        this.options = options;\n        this._pattern = '';\n        this.width = 0;\n        this._onDidChangeMode = new Emitter();\n        this.onDidChangeMode = this._onDidChangeMode.event;\n        this._onDidChangeMatchType = new Emitter();\n        this.onDidChangeMatchType = this._onDidChangeMatchType.event;\n        this._onDidChangePattern = new Emitter();\n        this._onDidChangeOpenState = new Emitter();\n        this.onDidChangeOpenState = this._onDidChangeOpenState.event;\n        this.enabledDisposables = new DisposableStore();\n        this.disposables = new DisposableStore();\n        this._mode = tree.options.defaultFindMode ?? TreeFindMode.Highlight;\n        this._matchType = tree.options.defaultFindMatchType ?? TreeFindMatchType.Fuzzy;\n        model.onDidSplice(this.onDidSpliceModel, this, this.disposables);\n    }\n    updateOptions(optionsUpdate = {}) {\n        if (optionsUpdate.defaultFindMode !== undefined) {\n            this.mode = optionsUpdate.defaultFindMode;\n        }\n        if (optionsUpdate.defaultFindMatchType !== undefined) {\n            this.matchType = optionsUpdate.defaultFindMatchType;\n        }\n    }\n    onDidSpliceModel() {\n        if (!this.widget || this.pattern.length === 0) {\n            return;\n        }\n        this.tree.refilter();\n        this.render();\n    }\n    render() {\n        const noMatches = this.filter.totalCount > 0 && this.filter.matchCount === 0;\n        if (this.pattern && noMatches) {\n            alert(localize('replFindNoResults', \"No results\"));\n            if (this.tree.options.showNotFoundMessage ?? true) {\n                this.widget?.showMessage({ type: 2 /* MessageType.WARNING */, content: localize('not found', \"No elements found.\") });\n            }\n            else {\n                this.widget?.showMessage({ type: 2 /* MessageType.WARNING */ });\n            }\n        }\n        else {\n            this.widget?.clearMessage();\n            if (this.pattern) {\n                alert(localize('replFindResults', \"{0} results\", this.filter.matchCount));\n            }\n        }\n    }\n    shouldAllowFocus(node) {\n        if (!this.widget || !this.pattern) {\n            return true;\n        }\n        if (this.filter.totalCount > 0 && this.filter.matchCount <= 1) {\n            return true;\n        }\n        return !FuzzyScore.isDefault(node.filterData);\n    }\n    layout(width) {\n        this.width = width;\n        this.widget?.layout(width);\n    }\n    dispose() {\n        this._history = undefined;\n        this._onDidChangePattern.dispose();\n        this.enabledDisposables.dispose();\n        this.disposables.dispose();\n    }\n}\nfunction stickyScrollNodeStateEquals(node1, node2) {\n    return node1.position === node2.position && stickyScrollNodeEquals(node1, node2);\n}\nfunction stickyScrollNodeEquals(node1, node2) {\n    return node1.node.element === node2.node.element &&\n        node1.startIndex === node2.startIndex &&\n        node1.height === node2.height &&\n        node1.endIndex === node2.endIndex;\n}\nclass StickyScrollState {\n    constructor(stickyNodes = []) {\n        this.stickyNodes = stickyNodes;\n    }\n    get count() { return this.stickyNodes.length; }\n    equal(state) {\n        return equals(this.stickyNodes, state.stickyNodes, stickyScrollNodeStateEquals);\n    }\n    lastNodePartiallyVisible() {\n        if (this.count === 0) {\n            return false;\n        }\n        const lastStickyNode = this.stickyNodes[this.count - 1];\n        if (this.count === 1) {\n            return lastStickyNode.position !== 0;\n        }\n        const secondLastStickyNode = this.stickyNodes[this.count - 2];\n        return secondLastStickyNode.position + secondLastStickyNode.height !== lastStickyNode.position;\n    }\n    animationStateChanged(previousState) {\n        if (!equals(this.stickyNodes, previousState.stickyNodes, stickyScrollNodeEquals)) {\n            return false;\n        }\n        if (this.count === 0) {\n            return false;\n        }\n        const lastStickyNode = this.stickyNodes[this.count - 1];\n        const previousLastStickyNode = previousState.stickyNodes[previousState.count - 1];\n        return lastStickyNode.position !== previousLastStickyNode.position;\n    }\n}\nclass DefaultStickyScrollDelegate {\n    constrainStickyScrollNodes(stickyNodes, stickyScrollMaxItemCount, maxWidgetHeight) {\n        for (let i = 0; i < stickyNodes.length; i++) {\n            const stickyNode = stickyNodes[i];\n            const stickyNodeBottom = stickyNode.position + stickyNode.height;\n            if (stickyNodeBottom > maxWidgetHeight || i >= stickyScrollMaxItemCount) {\n                return stickyNodes.slice(0, i);\n            }\n        }\n        return stickyNodes;\n    }\n}\nclass StickyScrollController extends Disposable {\n    constructor(tree, model, view, renderers, treeDelegate, options = {}) {\n        super();\n        this.tree = tree;\n        this.model = model;\n        this.view = view;\n        this.treeDelegate = treeDelegate;\n        this.maxWidgetViewRatio = 0.4;\n        const stickyScrollOptions = this.validateStickySettings(options);\n        this.stickyScrollMaxItemCount = stickyScrollOptions.stickyScrollMaxItemCount;\n        this.stickyScrollDelegate = options.stickyScrollDelegate ?? new DefaultStickyScrollDelegate();\n        this._widget = this._register(new StickyScrollWidget(view.getScrollableElement(), view, tree, renderers, treeDelegate, options.accessibilityProvider));\n        this.onDidChangeHasFocus = this._widget.onDidChangeHasFocus;\n        this.onContextMenu = this._widget.onContextMenu;\n        this._register(view.onDidScroll(() => this.update()));\n        this._register(view.onDidChangeContentHeight(() => this.update()));\n        this._register(tree.onDidChangeCollapseState(() => this.update()));\n        this.update();\n    }\n    get height() {\n        return this._widget.height;\n    }\n    getNodeAtHeight(height) {\n        let index;\n        if (height === 0) {\n            index = this.view.firstVisibleIndex;\n        }\n        else {\n            index = this.view.indexAt(height + this.view.scrollTop);\n        }\n        if (index < 0 || index >= this.view.length) {\n            return undefined;\n        }\n        return this.view.element(index);\n    }\n    update() {\n        const firstVisibleNode = this.getNodeAtHeight(0);\n        // Don't render anything if there are no elements\n        if (!firstVisibleNode || this.tree.scrollTop === 0) {\n            this._widget.setState(undefined);\n            return;\n        }\n        const stickyState = this.findStickyState(firstVisibleNode);\n        this._widget.setState(stickyState);\n    }\n    findStickyState(firstVisibleNode) {\n        const stickyNodes = [];\n        let firstVisibleNodeUnderWidget = firstVisibleNode;\n        let stickyNodesHeight = 0;\n        let nextStickyNode = this.getNextStickyNode(firstVisibleNodeUnderWidget, undefined, stickyNodesHeight);\n        while (nextStickyNode) {\n            stickyNodes.push(nextStickyNode);\n            stickyNodesHeight += nextStickyNode.height;\n            if (stickyNodes.length <= this.stickyScrollMaxItemCount) {\n                firstVisibleNodeUnderWidget = this.getNextVisibleNode(nextStickyNode);\n                if (!firstVisibleNodeUnderWidget) {\n                    break;\n                }\n            }\n            nextStickyNode = this.getNextStickyNode(firstVisibleNodeUnderWidget, nextStickyNode.node, stickyNodesHeight);\n        }\n        const contrainedStickyNodes = this.constrainStickyNodes(stickyNodes);\n        return contrainedStickyNodes.length ? new StickyScrollState(contrainedStickyNodes) : undefined;\n    }\n    getNextVisibleNode(previousStickyNode) {\n        return this.getNodeAtHeight(previousStickyNode.position + previousStickyNode.height);\n    }\n    getNextStickyNode(firstVisibleNodeUnderWidget, previousStickyNode, stickyNodesHeight) {\n        const nextStickyNode = this.getAncestorUnderPrevious(firstVisibleNodeUnderWidget, previousStickyNode);\n        if (!nextStickyNode) {\n            return undefined;\n        }\n        if (nextStickyNode === firstVisibleNodeUnderWidget) {\n            if (!this.nodeIsUncollapsedParent(firstVisibleNodeUnderWidget)) {\n                return undefined;\n            }\n            if (this.nodeTopAlignsWithStickyNodesBottom(firstVisibleNodeUnderWidget, stickyNodesHeight)) {\n                return undefined;\n            }\n        }\n        return this.createStickyScrollNode(nextStickyNode, stickyNodesHeight);\n    }\n    nodeTopAlignsWithStickyNodesBottom(node, stickyNodesHeight) {\n        const nodeIndex = this.getNodeIndex(node);\n        const elementTop = this.view.getElementTop(nodeIndex);\n        const stickyPosition = stickyNodesHeight;\n        return this.view.scrollTop === elementTop - stickyPosition;\n    }\n    createStickyScrollNode(node, currentStickyNodesHeight) {\n        const height = this.treeDelegate.getHeight(node);\n        const { startIndex, endIndex } = this.getNodeRange(node);\n        const position = this.calculateStickyNodePosition(endIndex, currentStickyNodesHeight, height);\n        return { node, position, height, startIndex, endIndex };\n    }\n    getAncestorUnderPrevious(node, previousAncestor = undefined) {\n        let currentAncestor = node;\n        let parentOfcurrentAncestor = this.getParentNode(currentAncestor);\n        while (parentOfcurrentAncestor) {\n            if (parentOfcurrentAncestor === previousAncestor) {\n                return currentAncestor;\n            }\n            currentAncestor = parentOfcurrentAncestor;\n            parentOfcurrentAncestor = this.getParentNode(currentAncestor);\n        }\n        if (previousAncestor === undefined) {\n            return currentAncestor;\n        }\n        return undefined;\n    }\n    calculateStickyNodePosition(lastDescendantIndex, stickyRowPositionTop, stickyNodeHeight) {\n        let lastChildRelativeTop = this.view.getRelativeTop(lastDescendantIndex);\n        // If the last descendant is only partially visible at the top of the view, getRelativeTop() returns null\n        // In that case, utilize the next node's relative top to calculate the sticky node's position\n        if (lastChildRelativeTop === null && this.view.firstVisibleIndex === lastDescendantIndex && lastDescendantIndex + 1 < this.view.length) {\n            const nodeHeight = this.treeDelegate.getHeight(this.view.element(lastDescendantIndex));\n            const nextNodeRelativeTop = this.view.getRelativeTop(lastDescendantIndex + 1);\n            lastChildRelativeTop = nextNodeRelativeTop ? nextNodeRelativeTop - nodeHeight / this.view.renderHeight : null;\n        }\n        if (lastChildRelativeTop === null) {\n            return stickyRowPositionTop;\n        }\n        const lastChildNode = this.view.element(lastDescendantIndex);\n        const lastChildHeight = this.treeDelegate.getHeight(lastChildNode);\n        const topOfLastChild = lastChildRelativeTop * this.view.renderHeight;\n        const bottomOfLastChild = topOfLastChild + lastChildHeight;\n        if (stickyRowPositionTop + stickyNodeHeight > bottomOfLastChild && stickyRowPositionTop <= bottomOfLastChild) {\n            return bottomOfLastChild - stickyNodeHeight;\n        }\n        return stickyRowPositionTop;\n    }\n    constrainStickyNodes(stickyNodes) {\n        if (stickyNodes.length === 0) {\n            return [];\n        }\n        // Check if sticky nodes need to be constrained\n        const maximumStickyWidgetHeight = this.view.renderHeight * this.maxWidgetViewRatio;\n        const lastStickyNode = stickyNodes[stickyNodes.length - 1];\n        if (stickyNodes.length <= this.stickyScrollMaxItemCount && lastStickyNode.position + lastStickyNode.height <= maximumStickyWidgetHeight) {\n            return stickyNodes;\n        }\n        // constrain sticky nodes\n        const constrainedStickyNodes = this.stickyScrollDelegate.constrainStickyScrollNodes(stickyNodes, this.stickyScrollMaxItemCount, maximumStickyWidgetHeight);\n        if (!constrainedStickyNodes.length) {\n            return [];\n        }\n        // Validate constraints\n        const lastConstrainedStickyNode = constrainedStickyNodes[constrainedStickyNodes.length - 1];\n        if (constrainedStickyNodes.length > this.stickyScrollMaxItemCount || lastConstrainedStickyNode.position + lastConstrainedStickyNode.height > maximumStickyWidgetHeight) {\n            throw new Error('stickyScrollDelegate violates constraints');\n        }\n        return constrainedStickyNodes;\n    }\n    getParentNode(node) {\n        const nodeLocation = this.model.getNodeLocation(node);\n        const parentLocation = this.model.getParentNodeLocation(nodeLocation);\n        return parentLocation ? this.model.getNode(parentLocation) : undefined;\n    }\n    nodeIsUncollapsedParent(node) {\n        const nodeLocation = this.model.getNodeLocation(node);\n        return this.model.getListRenderCount(nodeLocation) > 1;\n    }\n    getNodeIndex(node) {\n        const nodeLocation = this.model.getNodeLocation(node);\n        const nodeIndex = this.model.getListIndex(nodeLocation);\n        return nodeIndex;\n    }\n    getNodeRange(node) {\n        const nodeLocation = this.model.getNodeLocation(node);\n        const startIndex = this.model.getListIndex(nodeLocation);\n        if (startIndex < 0) {\n            throw new Error('Node not found in tree');\n        }\n        const renderCount = this.model.getListRenderCount(nodeLocation);\n        const endIndex = startIndex + renderCount - 1;\n        return { startIndex, endIndex };\n    }\n    nodePositionTopBelowWidget(node) {\n        const ancestors = [];\n        let currentAncestor = this.getParentNode(node);\n        while (currentAncestor) {\n            ancestors.push(currentAncestor);\n            currentAncestor = this.getParentNode(currentAncestor);\n        }\n        let widgetHeight = 0;\n        for (let i = 0; i < ancestors.length && i < this.stickyScrollMaxItemCount; i++) {\n            widgetHeight += this.treeDelegate.getHeight(ancestors[i]);\n        }\n        return widgetHeight;\n    }\n    domFocus() {\n        this._widget.domFocus();\n    }\n    // Whether sticky scroll was the last focused part in the tree or not\n    focusedLast() {\n        return this._widget.focusedLast();\n    }\n    updateOptions(optionsUpdate = {}) {\n        if (!optionsUpdate.stickyScrollMaxItemCount) {\n            return;\n        }\n        const validatedOptions = this.validateStickySettings(optionsUpdate);\n        if (this.stickyScrollMaxItemCount !== validatedOptions.stickyScrollMaxItemCount) {\n            this.stickyScrollMaxItemCount = validatedOptions.stickyScrollMaxItemCount;\n            this.update();\n        }\n    }\n    validateStickySettings(options) {\n        let stickyScrollMaxItemCount = 7;\n        if (typeof options.stickyScrollMaxItemCount === 'number') {\n            stickyScrollMaxItemCount = Math.max(options.stickyScrollMaxItemCount, 1);\n        }\n        return { stickyScrollMaxItemCount };\n    }\n}\nclass StickyScrollWidget {\n    constructor(container, view, tree, treeRenderers, treeDelegate, accessibilityProvider) {\n        this.view = view;\n        this.tree = tree;\n        this.treeRenderers = treeRenderers;\n        this.treeDelegate = treeDelegate;\n        this.accessibilityProvider = accessibilityProvider;\n        this._previousElements = [];\n        this._previousStateDisposables = new DisposableStore();\n        this._rootDomNode = $('.monaco-tree-sticky-container.empty');\n        container.appendChild(this._rootDomNode);\n        const shadow = $('.monaco-tree-sticky-container-shadow');\n        this._rootDomNode.appendChild(shadow);\n        this.stickyScrollFocus = new StickyScrollFocus(this._rootDomNode, view);\n        this.onDidChangeHasFocus = this.stickyScrollFocus.onDidChangeHasFocus;\n        this.onContextMenu = this.stickyScrollFocus.onContextMenu;\n    }\n    get height() {\n        if (!this._previousState) {\n            return 0;\n        }\n        const lastElement = this._previousState.stickyNodes[this._previousState.count - 1];\n        return lastElement.position + lastElement.height;\n    }\n    setState(state) {\n        const wasVisible = !!this._previousState && this._previousState.count > 0;\n        const isVisible = !!state && state.count > 0;\n        // If state has not changed, do nothing\n        if ((!wasVisible && !isVisible) || (wasVisible && isVisible && this._previousState.equal(state))) {\n            return;\n        }\n        // Update visibility of the widget if changed\n        if (wasVisible !== isVisible) {\n            this.setVisible(isVisible);\n        }\n        if (!isVisible) {\n            this._previousState = undefined;\n            this._previousElements = [];\n            this._previousStateDisposables.clear();\n            return;\n        }\n        const lastStickyNode = state.stickyNodes[state.count - 1];\n        // If the new state is only a change in the last node's position, update the position of the last element\n        if (this._previousState && state.animationStateChanged(this._previousState)) {\n            this._previousElements[this._previousState.count - 1].style.top = `${lastStickyNode.position}px`;\n        }\n        // create new dom elements\n        else {\n            this._previousStateDisposables.clear();\n            const elements = Array(state.count);\n            for (let stickyIndex = state.count - 1; stickyIndex >= 0; stickyIndex--) {\n                const stickyNode = state.stickyNodes[stickyIndex];\n                const { element, disposable } = this.createElement(stickyNode, stickyIndex, state.count);\n                elements[stickyIndex] = element;\n                this._rootDomNode.appendChild(element);\n                this._previousStateDisposables.add(disposable);\n            }\n            this.stickyScrollFocus.updateElements(elements, state);\n            this._previousElements = elements;\n        }\n        this._previousState = state;\n        // Set the height of the widget to the bottom of the last sticky node\n        this._rootDomNode.style.height = `${lastStickyNode.position + lastStickyNode.height}px`;\n    }\n    createElement(stickyNode, stickyIndex, stickyNodesTotal) {\n        const nodeIndex = stickyNode.startIndex;\n        // Sticky element container\n        const stickyElement = document.createElement('div');\n        stickyElement.style.top = `${stickyNode.position}px`;\n        if (this.tree.options.setRowHeight !== false) {\n            stickyElement.style.height = `${stickyNode.height}px`;\n        }\n        if (this.tree.options.setRowLineHeight !== false) {\n            stickyElement.style.lineHeight = `${stickyNode.height}px`;\n        }\n        stickyElement.classList.add('monaco-tree-sticky-row');\n        stickyElement.classList.add('monaco-list-row');\n        stickyElement.setAttribute('data-index', `${nodeIndex}`);\n        stickyElement.setAttribute('data-parity', nodeIndex % 2 === 0 ? 'even' : 'odd');\n        stickyElement.setAttribute('id', this.view.getElementID(nodeIndex));\n        const accessibilityDisposable = this.setAccessibilityAttributes(stickyElement, stickyNode.node.element, stickyIndex, stickyNodesTotal);\n        // Get the renderer for the node\n        const nodeTemplateId = this.treeDelegate.getTemplateId(stickyNode.node);\n        const renderer = this.treeRenderers.find((renderer) => renderer.templateId === nodeTemplateId);\n        if (!renderer) {\n            throw new Error(`No renderer found for template id ${nodeTemplateId}`);\n        }\n        // To make sure we do not influence the original node, we create a copy of the node\n        // We need to check if it is already a unique instance of the node by the delegate\n        let nodeCopy = stickyNode.node;\n        if (nodeCopy === this.tree.getNode(this.tree.getNodeLocation(stickyNode.node))) {\n            nodeCopy = new Proxy(stickyNode.node, {});\n        }\n        // Render the element\n        const templateData = renderer.renderTemplate(stickyElement);\n        renderer.renderElement(nodeCopy, stickyNode.startIndex, templateData, stickyNode.height);\n        // Remove the element from the DOM when state is disposed\n        const disposable = toDisposable(() => {\n            accessibilityDisposable.dispose();\n            renderer.disposeElement(nodeCopy, stickyNode.startIndex, templateData, stickyNode.height);\n            renderer.disposeTemplate(templateData);\n            stickyElement.remove();\n        });\n        return { element: stickyElement, disposable };\n    }\n    setAccessibilityAttributes(container, element, stickyIndex, stickyNodesTotal) {\n        if (!this.accessibilityProvider) {\n            return Disposable.None;\n        }\n        if (this.accessibilityProvider.getSetSize) {\n            container.setAttribute('aria-setsize', String(this.accessibilityProvider.getSetSize(element, stickyIndex, stickyNodesTotal)));\n        }\n        if (this.accessibilityProvider.getPosInSet) {\n            container.setAttribute('aria-posinset', String(this.accessibilityProvider.getPosInSet(element, stickyIndex)));\n        }\n        if (this.accessibilityProvider.getRole) {\n            container.setAttribute('role', this.accessibilityProvider.getRole(element) ?? 'treeitem');\n        }\n        const ariaLabel = this.accessibilityProvider.getAriaLabel(element);\n        const observable = (ariaLabel && typeof ariaLabel !== 'string') ? ariaLabel : constObservable(ariaLabel);\n        const result = autorun(reader => {\n            const value = reader.readObservable(observable);\n            if (value) {\n                container.setAttribute('aria-label', value);\n            }\n            else {\n                container.removeAttribute('aria-label');\n            }\n        });\n        if (typeof ariaLabel === 'string') {\n        }\n        else if (ariaLabel) {\n            container.setAttribute('aria-label', ariaLabel.get());\n        }\n        const ariaLevel = this.accessibilityProvider.getAriaLevel && this.accessibilityProvider.getAriaLevel(element);\n        if (typeof ariaLevel === 'number') {\n            container.setAttribute('aria-level', `${ariaLevel}`);\n        }\n        // Sticky Scroll elements can not be selected\n        container.setAttribute('aria-selected', String(false));\n        return result;\n    }\n    setVisible(visible) {\n        this._rootDomNode.classList.toggle('empty', !visible);\n        if (!visible) {\n            this.stickyScrollFocus.updateElements([], undefined);\n        }\n    }\n    domFocus() {\n        this.stickyScrollFocus.domFocus();\n    }\n    focusedLast() {\n        return this.stickyScrollFocus.focusedLast();\n    }\n    dispose() {\n        this.stickyScrollFocus.dispose();\n        this._previousStateDisposables.dispose();\n        this._rootDomNode.remove();\n    }\n}\nclass StickyScrollFocus extends Disposable {\n    get domHasFocus() { return this._domHasFocus; }\n    set domHasFocus(hasFocus) {\n        if (hasFocus !== this._domHasFocus) {\n            this._onDidChangeHasFocus.fire(hasFocus);\n            this._domHasFocus = hasFocus;\n        }\n    }\n    constructor(container, view) {\n        super();\n        this.container = container;\n        this.view = view;\n        this.focusedIndex = -1;\n        this.elements = [];\n        this._onDidChangeHasFocus = new Emitter();\n        this.onDidChangeHasFocus = this._onDidChangeHasFocus.event;\n        this._onContextMenu = new Emitter();\n        this.onContextMenu = this._onContextMenu.event;\n        this._domHasFocus = false;\n        this._register(addDisposableListener(this.container, 'focus', () => this.onFocus()));\n        this._register(addDisposableListener(this.container, 'blur', () => this.onBlur()));\n        this._register(this.view.onDidFocus(() => this.toggleStickyScrollFocused(false)));\n        this._register(this.view.onKeyDown((e) => this.onKeyDown(e)));\n        this._register(this.view.onMouseDown((e) => this.onMouseDown(e)));\n        this._register(this.view.onContextMenu((e) => this.handleContextMenu(e)));\n    }\n    handleContextMenu(e) {\n        const target = e.browserEvent.target;\n        if (!isStickyScrollContainer(target) && !isStickyScrollElement(target)) {\n            if (this.focusedLast()) {\n                this.view.domFocus();\n            }\n            return;\n        }\n        // The list handles the context menu triggered by a mouse event\n        // In that case only set the focus of the element clicked and leave the rest to the list to handle\n        if (!isKeyboardEvent(e.browserEvent)) {\n            if (!this.state) {\n                throw new Error('Context menu should not be triggered when state is undefined');\n            }\n            const stickyIndex = this.state.stickyNodes.findIndex(stickyNode => stickyNode.node.element === e.element?.element);\n            if (stickyIndex === -1) {\n                throw new Error('Context menu should not be triggered when element is not in sticky scroll widget');\n            }\n            this.container.focus();\n            this.setFocus(stickyIndex);\n            return;\n        }\n        if (!this.state || this.focusedIndex < 0) {\n            throw new Error('Context menu key should not be triggered when focus is not in sticky scroll widget');\n        }\n        const stickyNode = this.state.stickyNodes[this.focusedIndex];\n        const element = stickyNode.node.element;\n        const anchor = this.elements[this.focusedIndex];\n        this._onContextMenu.fire({ element, anchor, browserEvent: e.browserEvent, isStickyScroll: true });\n    }\n    onKeyDown(e) {\n        // Sticky Scroll Navigation\n        if (this.domHasFocus && this.state) {\n            // Move up\n            if (e.key === 'ArrowUp') {\n                this.setFocusedElement(Math.max(0, this.focusedIndex - 1));\n                e.preventDefault();\n                e.stopPropagation();\n            }\n            // Move down, if last sticky node is focused, move focus into first child of last sticky node\n            else if (e.key === 'ArrowDown' || e.key === 'ArrowRight') {\n                if (this.focusedIndex >= this.state.count - 1) {\n                    const nodeIndexToFocus = this.state.stickyNodes[this.state.count - 1].startIndex + 1;\n                    this.view.domFocus();\n                    this.view.setFocus([nodeIndexToFocus]);\n                    this.scrollNodeUnderWidget(nodeIndexToFocus, this.state);\n                }\n                else {\n                    this.setFocusedElement(this.focusedIndex + 1);\n                }\n                e.preventDefault();\n                e.stopPropagation();\n            }\n        }\n    }\n    onMouseDown(e) {\n        const target = e.browserEvent.target;\n        if (!isStickyScrollContainer(target) && !isStickyScrollElement(target)) {\n            return;\n        }\n        e.browserEvent.preventDefault();\n        e.browserEvent.stopPropagation();\n    }\n    updateElements(elements, state) {\n        if (state && state.count === 0) {\n            throw new Error('Sticky scroll state must be undefined when there are no sticky nodes');\n        }\n        if (state && state.count !== elements.length) {\n            throw new Error('Sticky scroll focus received illigel state');\n        }\n        const previousIndex = this.focusedIndex;\n        this.removeFocus();\n        this.elements = elements;\n        this.state = state;\n        if (state) {\n            const newFocusedIndex = clamp(previousIndex, 0, state.count - 1);\n            this.setFocus(newFocusedIndex);\n        }\n        else {\n            if (this.domHasFocus) {\n                this.view.domFocus();\n            }\n        }\n        // must come last as it calls blur()\n        this.container.tabIndex = state ? 0 : -1;\n    }\n    setFocusedElement(stickyIndex) {\n        // doesn't imply that the widget has (or will have) focus\n        const state = this.state;\n        if (!state) {\n            throw new Error('Cannot set focus when state is undefined');\n        }\n        this.setFocus(stickyIndex);\n        if (stickyIndex < state.count - 1) {\n            return;\n        }\n        // If the last sticky node is not fully visible, scroll it into view\n        if (state.lastNodePartiallyVisible()) {\n            const lastStickyNode = state.stickyNodes[stickyIndex];\n            this.scrollNodeUnderWidget(lastStickyNode.endIndex + 1, state);\n        }\n    }\n    scrollNodeUnderWidget(nodeIndex, state) {\n        const lastStickyNode = state.stickyNodes[state.count - 1];\n        const secondLastStickyNode = state.count > 1 ? state.stickyNodes[state.count - 2] : undefined;\n        const elementScrollTop = this.view.getElementTop(nodeIndex);\n        const elementTargetViewTop = secondLastStickyNode ? secondLastStickyNode.position + secondLastStickyNode.height + lastStickyNode.height : lastStickyNode.height;\n        this.view.scrollTop = elementScrollTop - elementTargetViewTop;\n    }\n    domFocus() {\n        if (!this.state) {\n            throw new Error('Cannot focus when state is undefined');\n        }\n        this.container.focus();\n    }\n    focusedLast() {\n        if (!this.state) {\n            return false;\n        }\n        return this.view.getHTMLElement().classList.contains('sticky-scroll-focused');\n    }\n    removeFocus() {\n        if (this.focusedIndex === -1) {\n            return;\n        }\n        this.toggleElementFocus(this.elements[this.focusedIndex], false);\n        this.focusedIndex = -1;\n    }\n    setFocus(newFocusIndex) {\n        if (0 > newFocusIndex) {\n            throw new Error('addFocus() can not remove focus');\n        }\n        if (!this.state && newFocusIndex >= 0) {\n            throw new Error('Cannot set focus index when state is undefined');\n        }\n        if (this.state && newFocusIndex >= this.state.count) {\n            throw new Error('Cannot set focus index to an index that does not exist');\n        }\n        const oldIndex = this.focusedIndex;\n        if (oldIndex >= 0) {\n            this.toggleElementFocus(this.elements[oldIndex], false);\n        }\n        if (newFocusIndex >= 0) {\n            this.toggleElementFocus(this.elements[newFocusIndex], true);\n        }\n        this.focusedIndex = newFocusIndex;\n    }\n    toggleElementFocus(element, focused) {\n        this.toggleElementActiveFocus(element, focused && this.domHasFocus);\n        this.toggleElementPassiveFocus(element, focused);\n    }\n    toggleCurrentElementActiveFocus(focused) {\n        if (this.focusedIndex === -1) {\n            return;\n        }\n        this.toggleElementActiveFocus(this.elements[this.focusedIndex], focused);\n    }\n    toggleElementActiveFocus(element, focused) {\n        // active focus is set when sticky scroll has focus\n        element.classList.toggle('focused', focused);\n    }\n    toggleElementPassiveFocus(element, focused) {\n        // passive focus allows to show focus when sticky scroll does not have focus\n        // for example when the context menu has focus\n        element.classList.toggle('passive-focused', focused);\n    }\n    toggleStickyScrollFocused(focused) {\n        // Weather the last focus in the view was sticky scroll and not the list\n        // Is only removed when the focus is back in the tree an no longer in sticky scroll\n        this.view.getHTMLElement().classList.toggle('sticky-scroll-focused', focused);\n    }\n    onFocus() {\n        if (!this.state || this.elements.length === 0) {\n            throw new Error('Cannot focus when state is undefined or elements are empty');\n        }\n        this.domHasFocus = true;\n        this.toggleStickyScrollFocused(true);\n        this.toggleCurrentElementActiveFocus(true);\n        if (this.focusedIndex === -1) {\n            this.setFocus(0);\n        }\n    }\n    onBlur() {\n        this.domHasFocus = false;\n        this.toggleCurrentElementActiveFocus(false);\n    }\n    dispose() {\n        this.toggleStickyScrollFocused(false);\n        this._onDidChangeHasFocus.fire(false);\n        super.dispose();\n    }\n}\nfunction asTreeMouseEvent(event) {\n    let target = TreeMouseEventTarget.Unknown;\n    if (hasParentWithClass(event.browserEvent.target, 'monaco-tl-twistie', 'monaco-tl-row')) {\n        target = TreeMouseEventTarget.Twistie;\n    }\n    else if (hasParentWithClass(event.browserEvent.target, 'monaco-tl-contents', 'monaco-tl-row')) {\n        target = TreeMouseEventTarget.Element;\n    }\n    else if (hasParentWithClass(event.browserEvent.target, 'monaco-tree-type-filter', 'monaco-list')) {\n        target = TreeMouseEventTarget.Filter;\n    }\n    return {\n        browserEvent: event.browserEvent,\n        element: event.element ? event.element.element : null,\n        target\n    };\n}\nfunction asTreeContextMenuEvent(event) {\n    const isStickyScroll = isStickyScrollContainer(event.browserEvent.target);\n    return {\n        element: event.element ? event.element.element : null,\n        browserEvent: event.browserEvent,\n        anchor: event.anchor,\n        isStickyScroll\n    };\n}\nfunction dfs(node, fn) {\n    fn(node);\n    node.children.forEach(child => dfs(child, fn));\n}\n/**\n * The trait concept needs to exist at the tree level, because collapsed\n * tree nodes will not be known by the list.\n */\nclass Trait {\n    get nodeSet() {\n        if (!this._nodeSet) {\n            this._nodeSet = this.createNodeSet();\n        }\n        return this._nodeSet;\n    }\n    constructor(getFirstViewElementWithTrait, identityProvider) {\n        this.getFirstViewElementWithTrait = getFirstViewElementWithTrait;\n        this.identityProvider = identityProvider;\n        this.nodes = [];\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n    }\n    set(nodes, browserEvent) {\n        if (!browserEvent?.__forceEvent && equals(this.nodes, nodes)) {\n            return;\n        }\n        this._set(nodes, false, browserEvent);\n    }\n    _set(nodes, silent, browserEvent) {\n        this.nodes = [...nodes];\n        this.elements = undefined;\n        this._nodeSet = undefined;\n        if (!silent) {\n            const that = this;\n            this._onDidChange.fire({ get elements() { return that.get(); }, browserEvent });\n        }\n    }\n    get() {\n        if (!this.elements) {\n            this.elements = this.nodes.map(node => node.element);\n        }\n        return [...this.elements];\n    }\n    getNodes() {\n        return this.nodes;\n    }\n    has(node) {\n        return this.nodeSet.has(node);\n    }\n    onDidModelSplice({ insertedNodes, deletedNodes }) {\n        if (!this.identityProvider) {\n            const set = this.createNodeSet();\n            const visit = (node) => set.delete(node);\n            deletedNodes.forEach(node => dfs(node, visit));\n            this.set([...set.values()]);\n            return;\n        }\n        const deletedNodesIdSet = new Set();\n        const deletedNodesVisitor = (node) => deletedNodesIdSet.add(this.identityProvider.getId(node.element).toString());\n        deletedNodes.forEach(node => dfs(node, deletedNodesVisitor));\n        const insertedNodesMap = new Map();\n        const insertedNodesVisitor = (node) => insertedNodesMap.set(this.identityProvider.getId(node.element).toString(), node);\n        insertedNodes.forEach(node => dfs(node, insertedNodesVisitor));\n        const nodes = [];\n        for (const node of this.nodes) {\n            const id = this.identityProvider.getId(node.element).toString();\n            const wasDeleted = deletedNodesIdSet.has(id);\n            if (!wasDeleted) {\n                nodes.push(node);\n            }\n            else {\n                const insertedNode = insertedNodesMap.get(id);\n                if (insertedNode && insertedNode.visible) {\n                    nodes.push(insertedNode);\n                }\n            }\n        }\n        if (this.nodes.length > 0 && nodes.length === 0) {\n            const node = this.getFirstViewElementWithTrait();\n            if (node) {\n                nodes.push(node);\n            }\n        }\n        this._set(nodes, true);\n    }\n    createNodeSet() {\n        const set = new Set();\n        for (const node of this.nodes) {\n            set.add(node);\n        }\n        return set;\n    }\n}\nclass TreeNodeListMouseController extends MouseController {\n    constructor(list, tree, stickyScrollProvider) {\n        super(list);\n        this.tree = tree;\n        this.stickyScrollProvider = stickyScrollProvider;\n    }\n    onViewPointer(e) {\n        if (isButton(e.browserEvent.target) ||\n            isInputElement(e.browserEvent.target) ||\n            isMonacoEditor(e.browserEvent.target)) {\n            return;\n        }\n        if (e.browserEvent.isHandledByList) {\n            return;\n        }\n        const node = e.element;\n        if (!node) {\n            return super.onViewPointer(e);\n        }\n        if (this.isSelectionRangeChangeEvent(e) || this.isSelectionSingleChangeEvent(e)) {\n            return super.onViewPointer(e);\n        }\n        const target = e.browserEvent.target;\n        const onTwistie = target.classList.contains('monaco-tl-twistie')\n            || (target.classList.contains('monaco-icon-label') && target.classList.contains('folder-icon') && e.browserEvent.offsetX < 16);\n        const isStickyElement = isStickyScrollElement(e.browserEvent.target);\n        let expandOnlyOnTwistieClick = false;\n        if (isStickyElement) {\n            expandOnlyOnTwistieClick = true;\n        }\n        else if (typeof this.tree.expandOnlyOnTwistieClick === 'function') {\n            expandOnlyOnTwistieClick = this.tree.expandOnlyOnTwistieClick(node.element);\n        }\n        else {\n            expandOnlyOnTwistieClick = !!this.tree.expandOnlyOnTwistieClick;\n        }\n        if (!isStickyElement) {\n            if (expandOnlyOnTwistieClick && !onTwistie && e.browserEvent.detail !== 2) {\n                return super.onViewPointer(e);\n            }\n            if (!this.tree.expandOnDoubleClick && e.browserEvent.detail === 2) {\n                return super.onViewPointer(e);\n            }\n        }\n        else {\n            this.handleStickyScrollMouseEvent(e, node);\n        }\n        if (node.collapsible && (!isStickyElement || onTwistie)) {\n            const location = this.tree.getNodeLocation(node);\n            const recursive = e.browserEvent.altKey;\n            this.tree.setFocus([location]);\n            this.tree.toggleCollapsed(location, recursive);\n            if (onTwistie) {\n                // Do not set this before calling a handler on the super class, because it will reject it as handled\n                e.browserEvent.isHandledByList = true;\n                return;\n            }\n        }\n        if (!isStickyElement) {\n            super.onViewPointer(e);\n        }\n    }\n    handleStickyScrollMouseEvent(e, node) {\n        if (isMonacoCustomToggle(e.browserEvent.target) || isActionItem(e.browserEvent.target)) {\n            return;\n        }\n        const stickyScrollController = this.stickyScrollProvider();\n        if (!stickyScrollController) {\n            throw new Error('Sticky scroll controller not found');\n        }\n        const nodeIndex = this.list.indexOf(node);\n        const elementScrollTop = this.list.getElementTop(nodeIndex);\n        const elementTargetViewTop = stickyScrollController.nodePositionTopBelowWidget(node);\n        this.tree.scrollTop = elementScrollTop - elementTargetViewTop;\n        this.list.domFocus();\n        this.list.setFocus([nodeIndex]);\n        this.list.setSelection([nodeIndex]);\n    }\n    onDoubleClick(e) {\n        const onTwistie = e.browserEvent.target.classList.contains('monaco-tl-twistie');\n        if (onTwistie || !this.tree.expandOnDoubleClick) {\n            return;\n        }\n        if (e.browserEvent.isHandledByList) {\n            return;\n        }\n        super.onDoubleClick(e);\n    }\n    // to make sure dom focus is not stolen (for example with context menu)\n    onMouseDown(e) {\n        const target = e.browserEvent.target;\n        if (!isStickyScrollContainer(target) && !isStickyScrollElement(target)) {\n            super.onMouseDown(e);\n            return;\n        }\n    }\n    onContextMenu(e) {\n        const target = e.browserEvent.target;\n        if (!isStickyScrollContainer(target) && !isStickyScrollElement(target)) {\n            super.onContextMenu(e);\n            return;\n        }\n    }\n}\n/**\n * We use this List subclass to restore selection and focus as nodes\n * get rendered in the list, possibly due to a node expand() call.\n */\nclass TreeNodeList extends List {\n    constructor(user, container, virtualDelegate, renderers, focusTrait, selectionTrait, anchorTrait, options) {\n        super(user, container, virtualDelegate, renderers, options);\n        this.focusTrait = focusTrait;\n        this.selectionTrait = selectionTrait;\n        this.anchorTrait = anchorTrait;\n    }\n    createMouseController(options) {\n        return new TreeNodeListMouseController(this, options.tree, options.stickyScrollProvider);\n    }\n    splice(start, deleteCount, elements = []) {\n        super.splice(start, deleteCount, elements);\n        if (elements.length === 0) {\n            return;\n        }\n        const additionalFocus = [];\n        const additionalSelection = [];\n        let anchor;\n        elements.forEach((node, index) => {\n            if (this.focusTrait.has(node)) {\n                additionalFocus.push(start + index);\n            }\n            if (this.selectionTrait.has(node)) {\n                additionalSelection.push(start + index);\n            }\n            if (this.anchorTrait.has(node)) {\n                anchor = start + index;\n            }\n        });\n        if (additionalFocus.length > 0) {\n            super.setFocus(distinct([...super.getFocus(), ...additionalFocus]));\n        }\n        if (additionalSelection.length > 0) {\n            super.setSelection(distinct([...super.getSelection(), ...additionalSelection]));\n        }\n        if (typeof anchor === 'number') {\n            super.setAnchor(anchor);\n        }\n    }\n    setFocus(indexes, browserEvent, fromAPI = false) {\n        super.setFocus(indexes, browserEvent);\n        if (!fromAPI) {\n            this.focusTrait.set(indexes.map(i => this.element(i)), browserEvent);\n        }\n    }\n    setSelection(indexes, browserEvent, fromAPI = false) {\n        super.setSelection(indexes, browserEvent);\n        if (!fromAPI) {\n            this.selectionTrait.set(indexes.map(i => this.element(i)), browserEvent);\n        }\n    }\n    setAnchor(index, fromAPI = false) {\n        super.setAnchor(index);\n        if (!fromAPI) {\n            if (typeof index === 'undefined') {\n                this.anchorTrait.set([]);\n            }\n            else {\n                this.anchorTrait.set([this.element(index)]);\n            }\n        }\n    }\n}\nexport class AbstractTree {\n    get onDidScroll() { return this.view.onDidScroll; }\n    get onDidChangeFocus() { return this.eventBufferer.wrapEvent(this.focus.onDidChange); }\n    get onDidChangeSelection() { return this.eventBufferer.wrapEvent(this.selection.onDidChange); }\n    get onMouseDblClick() { return Event.filter(Event.map(this.view.onMouseDblClick, asTreeMouseEvent), e => e.target !== TreeMouseEventTarget.Filter); }\n    get onMouseOver() { return Event.map(this.view.onMouseOver, asTreeMouseEvent); }\n    get onMouseOut() { return Event.map(this.view.onMouseOut, asTreeMouseEvent); }\n    get onContextMenu() { return Event.any(Event.filter(Event.map(this.view.onContextMenu, asTreeContextMenuEvent), e => !e.isStickyScroll), this.stickyScrollController?.onContextMenu ?? Event.None); }\n    get onPointer() { return Event.map(this.view.onPointer, asTreeMouseEvent); }\n    get onKeyDown() { return this.view.onKeyDown; }\n    get onDidFocus() { return this.view.onDidFocus; }\n    get onDidChangeModel() { return Event.signal(this.model.onDidSplice); }\n    get onDidChangeCollapseState() { return this.model.onDidChangeCollapseState; }\n    get findMode() { return this.findController?.mode ?? TreeFindMode.Highlight; }\n    set findMode(findMode) { if (this.findController) {\n        this.findController.mode = findMode;\n    } }\n    get findMatchType() { return this.findController?.matchType ?? TreeFindMatchType.Fuzzy; }\n    set findMatchType(findFuzzy) { if (this.findController) {\n        this.findController.matchType = findFuzzy;\n    } }\n    get expandOnDoubleClick() { return typeof this._options.expandOnDoubleClick === 'undefined' ? true : this._options.expandOnDoubleClick; }\n    get expandOnlyOnTwistieClick() { return typeof this._options.expandOnlyOnTwistieClick === 'undefined' ? true : this._options.expandOnlyOnTwistieClick; }\n    get onDidDispose() { return this.view.onDidDispose; }\n    constructor(_user, container, delegate, renderers, _options = {}) {\n        this._user = _user;\n        this._options = _options;\n        this.eventBufferer = new EventBufferer();\n        this.onDidChangeFindOpenState = Event.None;\n        this.onDidChangeStickyScrollFocused = Event.None;\n        this.disposables = new DisposableStore();\n        this._onWillRefilter = new Emitter();\n        this.onWillRefilter = this._onWillRefilter.event;\n        this._onDidUpdateOptions = new Emitter();\n        this.treeDelegate = new ComposedTreeDelegate(delegate);\n        const onDidChangeCollapseStateRelay = new Relay();\n        const onDidChangeActiveNodes = new Relay();\n        const activeNodes = this.disposables.add(new EventCollection(onDidChangeActiveNodes.event));\n        const renderedIndentGuides = new SetMap();\n        this.renderers = renderers.map(r => new TreeRenderer(r, () => this.model, onDidChangeCollapseStateRelay.event, activeNodes, renderedIndentGuides, _options));\n        for (const r of this.renderers) {\n            this.disposables.add(r);\n        }\n        let filter;\n        if (_options.keyboardNavigationLabelProvider) {\n            filter = new FindFilter(this, _options.keyboardNavigationLabelProvider, _options.filter);\n            _options = { ..._options, filter: filter }; // TODO need typescript help here\n            this.disposables.add(filter);\n        }\n        this.focus = new Trait(() => this.view.getFocusedElements()[0], _options.identityProvider);\n        this.selection = new Trait(() => this.view.getSelectedElements()[0], _options.identityProvider);\n        this.anchor = new Trait(() => this.view.getAnchorElement(), _options.identityProvider);\n        this.view = new TreeNodeList(_user, container, this.treeDelegate, this.renderers, this.focus, this.selection, this.anchor, { ...asListOptions(() => this.model, _options), tree: this, stickyScrollProvider: () => this.stickyScrollController });\n        this.model = this.createModel(_user, this.view, _options);\n        onDidChangeCollapseStateRelay.input = this.model.onDidChangeCollapseState;\n        const onDidModelSplice = Event.forEach(this.model.onDidSplice, e => {\n            this.eventBufferer.bufferEvents(() => {\n                this.focus.onDidModelSplice(e);\n                this.selection.onDidModelSplice(e);\n            });\n        }, this.disposables);\n        // Make sure the `forEach` always runs\n        onDidModelSplice(() => null, null, this.disposables);\n        // Active nodes can change when the model changes or when focus or selection change.\n        // We debounce it with 0 delay since these events may fire in the same stack and we only\n        // want to run this once. It also doesn't matter if it runs on the next tick since it's only\n        // a nice to have UI feature.\n        const activeNodesEmitter = this.disposables.add(new Emitter());\n        const activeNodesDebounce = this.disposables.add(new Delayer(0));\n        this.disposables.add(Event.any(onDidModelSplice, this.focus.onDidChange, this.selection.onDidChange)(() => {\n            activeNodesDebounce.trigger(() => {\n                const set = new Set();\n                for (const node of this.focus.getNodes()) {\n                    set.add(node);\n                }\n                for (const node of this.selection.getNodes()) {\n                    set.add(node);\n                }\n                activeNodesEmitter.fire([...set.values()]);\n            });\n        }));\n        onDidChangeActiveNodes.input = activeNodesEmitter.event;\n        if (_options.keyboardSupport !== false) {\n            const onKeyDown = Event.chain(this.view.onKeyDown, $ => $.filter(e => !isInputElement(e.target))\n                .map(e => new StandardKeyboardEvent(e)));\n            Event.chain(onKeyDown, $ => $.filter(e => e.keyCode === 15 /* KeyCode.LeftArrow */))(this.onLeftArrow, this, this.disposables);\n            Event.chain(onKeyDown, $ => $.filter(e => e.keyCode === 17 /* KeyCode.RightArrow */))(this.onRightArrow, this, this.disposables);\n            Event.chain(onKeyDown, $ => $.filter(e => e.keyCode === 10 /* KeyCode.Space */))(this.onSpace, this, this.disposables);\n        }\n        if ((_options.findWidgetEnabled ?? true) && _options.keyboardNavigationLabelProvider && _options.contextViewProvider) {\n            const opts = this.options.findWidgetStyles ? { styles: this.options.findWidgetStyles } : undefined;\n            this.findController = new FindController(this, this.model, this.view, filter, _options.contextViewProvider, opts);\n            this.focusNavigationFilter = node => this.findController.shouldAllowFocus(node);\n            this.onDidChangeFindOpenState = this.findController.onDidChangeOpenState;\n            this.disposables.add(this.findController);\n            this.onDidChangeFindMode = this.findController.onDidChangeMode;\n            this.onDidChangeFindMatchType = this.findController.onDidChangeMatchType;\n        }\n        else {\n            this.onDidChangeFindMode = Event.None;\n            this.onDidChangeFindMatchType = Event.None;\n        }\n        if (_options.enableStickyScroll) {\n            this.stickyScrollController = new StickyScrollController(this, this.model, this.view, this.renderers, this.treeDelegate, _options);\n            this.onDidChangeStickyScrollFocused = this.stickyScrollController.onDidChangeHasFocus;\n        }\n        this.styleElement = createStyleSheet(this.view.getHTMLElement());\n        this.getHTMLElement().classList.toggle('always', this._options.renderIndentGuides === RenderIndentGuides.Always);\n    }\n    updateOptions(optionsUpdate = {}) {\n        this._options = { ...this._options, ...optionsUpdate };\n        for (const renderer of this.renderers) {\n            renderer.updateOptions(optionsUpdate);\n        }\n        this.view.updateOptions(this._options);\n        this.findController?.updateOptions(optionsUpdate);\n        this.updateStickyScroll(optionsUpdate);\n        this._onDidUpdateOptions.fire(this._options);\n        this.getHTMLElement().classList.toggle('always', this._options.renderIndentGuides === RenderIndentGuides.Always);\n    }\n    get options() {\n        return this._options;\n    }\n    updateStickyScroll(optionsUpdate) {\n        if (!this.stickyScrollController && this._options.enableStickyScroll) {\n            this.stickyScrollController = new StickyScrollController(this, this.model, this.view, this.renderers, this.treeDelegate, this._options);\n            this.onDidChangeStickyScrollFocused = this.stickyScrollController.onDidChangeHasFocus;\n        }\n        else if (this.stickyScrollController && !this._options.enableStickyScroll) {\n            this.onDidChangeStickyScrollFocused = Event.None;\n            this.stickyScrollController.dispose();\n            this.stickyScrollController = undefined;\n        }\n        this.stickyScrollController?.updateOptions(optionsUpdate);\n    }\n    // Widget\n    getHTMLElement() {\n        return this.view.getHTMLElement();\n    }\n    get scrollTop() {\n        return this.view.scrollTop;\n    }\n    set scrollTop(scrollTop) {\n        this.view.scrollTop = scrollTop;\n    }\n    get scrollHeight() {\n        return this.view.scrollHeight;\n    }\n    get renderHeight() {\n        return this.view.renderHeight;\n    }\n    get ariaLabel() {\n        return this.view.ariaLabel;\n    }\n    set ariaLabel(value) {\n        this.view.ariaLabel = value;\n    }\n    domFocus() {\n        if (this.stickyScrollController?.focusedLast()) {\n            this.stickyScrollController.domFocus();\n        }\n        else {\n            this.view.domFocus();\n        }\n    }\n    layout(height, width) {\n        this.view.layout(height, width);\n        if (isNumber(width)) {\n            this.findController?.layout(width);\n        }\n    }\n    style(styles) {\n        const suffix = `.${this.view.domId}`;\n        const content = [];\n        if (styles.treeIndentGuidesStroke) {\n            content.push(`.monaco-list${suffix}:hover .monaco-tl-indent > .indent-guide, .monaco-list${suffix}.always .monaco-tl-indent > .indent-guide  { border-color: ${styles.treeInactiveIndentGuidesStroke}; }`);\n            content.push(`.monaco-list${suffix} .monaco-tl-indent > .indent-guide.active { border-color: ${styles.treeIndentGuidesStroke}; }`);\n        }\n        // Sticky Scroll Background\n        const stickyScrollBackground = styles.treeStickyScrollBackground ?? styles.listBackground;\n        if (stickyScrollBackground) {\n            content.push(`.monaco-list${suffix} .monaco-scrollable-element .monaco-tree-sticky-container { background-color: ${stickyScrollBackground}; }`);\n            content.push(`.monaco-list${suffix} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-row { background-color: ${stickyScrollBackground}; }`);\n        }\n        // Sticky Scroll Border\n        if (styles.treeStickyScrollBorder) {\n            content.push(`.monaco-list${suffix} .monaco-scrollable-element .monaco-tree-sticky-container { border-bottom: 1px solid ${styles.treeStickyScrollBorder}; }`);\n        }\n        // Sticky Scroll Shadow\n        if (styles.treeStickyScrollShadow) {\n            content.push(`.monaco-list${suffix} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-container-shadow { box-shadow: ${styles.treeStickyScrollShadow} 0 6px 6px -6px inset; height: 3px; }`);\n        }\n        // Sticky Scroll Focus\n        if (styles.listFocusForeground) {\n            content.push(`.monaco-list${suffix}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { color: ${styles.listFocusForeground}; }`);\n            content.push(`.monaco-list${suffix}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { color: inherit; }`);\n        }\n        // Sticky Scroll Focus Outlines\n        const focusAndSelectionOutline = asCssValueWithDefault(styles.listFocusAndSelectionOutline, asCssValueWithDefault(styles.listSelectionOutline, styles.listFocusOutline ?? ''));\n        if (focusAndSelectionOutline) { // default: listFocusOutline\n            content.push(`.monaco-list${suffix}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused.selected { outline: 1px solid ${focusAndSelectionOutline}; outline-offset: -1px;}`);\n            content.push(`.monaco-list${suffix}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused.selected { outline: inherit;}`);\n        }\n        if (styles.listFocusOutline) { // default: set\n            content.push(`.monaco-list${suffix}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { outline: 1px solid ${styles.listFocusOutline}; outline-offset: -1px; }`);\n            content.push(`.monaco-list${suffix}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { outline: inherit; }`);\n            content.push(`.monaco-workbench.context-menu-visible .monaco-list${suffix}.last-focused.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.passive-focused { outline: 1px solid ${styles.listFocusOutline}; outline-offset: -1px; }`);\n            content.push(`.monaco-workbench.context-menu-visible .monaco-list${suffix}.last-focused.sticky-scroll-focused .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`);\n            content.push(`.monaco-workbench.context-menu-visible .monaco-list${suffix}.last-focused:not(.sticky-scroll-focused) .monaco-tree-sticky-container .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`);\n        }\n        this.styleElement.textContent = content.join('\\n');\n        this.view.style(styles);\n    }\n    // Tree navigation\n    getParentElement(location) {\n        const parentRef = this.model.getParentNodeLocation(location);\n        const parentNode = this.model.getNode(parentRef);\n        return parentNode.element;\n    }\n    getFirstElementChild(location) {\n        return this.model.getFirstElementChild(location);\n    }\n    // Tree\n    getNode(location) {\n        return this.model.getNode(location);\n    }\n    getNodeLocation(node) {\n        return this.model.getNodeLocation(node);\n    }\n    collapse(location, recursive = false) {\n        return this.model.setCollapsed(location, true, recursive);\n    }\n    expand(location, recursive = false) {\n        return this.model.setCollapsed(location, false, recursive);\n    }\n    toggleCollapsed(location, recursive = false) {\n        return this.model.setCollapsed(location, undefined, recursive);\n    }\n    isCollapsible(location) {\n        return this.model.isCollapsible(location);\n    }\n    setCollapsible(location, collapsible) {\n        return this.model.setCollapsible(location, collapsible);\n    }\n    isCollapsed(location) {\n        return this.model.isCollapsed(location);\n    }\n    refilter() {\n        this._onWillRefilter.fire(undefined);\n        this.model.refilter();\n    }\n    setSelection(elements, browserEvent) {\n        this.eventBufferer.bufferEvents(() => {\n            const nodes = elements.map(e => this.model.getNode(e));\n            this.selection.set(nodes, browserEvent);\n            const indexes = elements.map(e => this.model.getListIndex(e)).filter(i => i > -1);\n            this.view.setSelection(indexes, browserEvent, true);\n        });\n    }\n    getSelection() {\n        return this.selection.get();\n    }\n    setFocus(elements, browserEvent) {\n        this.eventBufferer.bufferEvents(() => {\n            const nodes = elements.map(e => this.model.getNode(e));\n            this.focus.set(nodes, browserEvent);\n            const indexes = elements.map(e => this.model.getListIndex(e)).filter(i => i > -1);\n            this.view.setFocus(indexes, browserEvent, true);\n        });\n    }\n    focusNext(n = 1, loop = false, browserEvent, filter = (isKeyboardEvent(browserEvent) && browserEvent.altKey) ? undefined : this.focusNavigationFilter) {\n        this.view.focusNext(n, loop, browserEvent, filter);\n    }\n    focusPrevious(n = 1, loop = false, browserEvent, filter = (isKeyboardEvent(browserEvent) && browserEvent.altKey) ? undefined : this.focusNavigationFilter) {\n        this.view.focusPrevious(n, loop, browserEvent, filter);\n    }\n    focusNextPage(browserEvent, filter = (isKeyboardEvent(browserEvent) && browserEvent.altKey) ? undefined : this.focusNavigationFilter) {\n        return this.view.focusNextPage(browserEvent, filter);\n    }\n    focusPreviousPage(browserEvent, filter = (isKeyboardEvent(browserEvent) && browserEvent.altKey) ? undefined : this.focusNavigationFilter) {\n        return this.view.focusPreviousPage(browserEvent, filter, () => this.stickyScrollController?.height ?? 0);\n    }\n    focusLast(browserEvent, filter = (isKeyboardEvent(browserEvent) && browserEvent.altKey) ? undefined : this.focusNavigationFilter) {\n        this.view.focusLast(browserEvent, filter);\n    }\n    focusFirst(browserEvent, filter = (isKeyboardEvent(browserEvent) && browserEvent.altKey) ? undefined : this.focusNavigationFilter) {\n        this.view.focusFirst(browserEvent, filter);\n    }\n    getFocus() {\n        return this.focus.get();\n    }\n    reveal(location, relativeTop) {\n        this.model.expandTo(location);\n        const index = this.model.getListIndex(location);\n        if (index === -1) {\n            return;\n        }\n        if (!this.stickyScrollController) {\n            this.view.reveal(index, relativeTop);\n        }\n        else {\n            const paddingTop = this.stickyScrollController.nodePositionTopBelowWidget(this.getNode(location));\n            this.view.reveal(index, relativeTop, paddingTop);\n        }\n    }\n    // List\n    onLeftArrow(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        const nodes = this.view.getFocusedElements();\n        if (nodes.length === 0) {\n            return;\n        }\n        const node = nodes[0];\n        const location = this.model.getNodeLocation(node);\n        const didChange = this.model.setCollapsed(location, true);\n        if (!didChange) {\n            const parentLocation = this.model.getParentNodeLocation(location);\n            if (!parentLocation) {\n                return;\n            }\n            const parentListIndex = this.model.getListIndex(parentLocation);\n            this.view.reveal(parentListIndex);\n            this.view.setFocus([parentListIndex]);\n        }\n    }\n    onRightArrow(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        const nodes = this.view.getFocusedElements();\n        if (nodes.length === 0) {\n            return;\n        }\n        const node = nodes[0];\n        const location = this.model.getNodeLocation(node);\n        const didChange = this.model.setCollapsed(location, false);\n        if (!didChange) {\n            if (!node.children.some(child => child.visible)) {\n                return;\n            }\n            const [focusedIndex] = this.view.getFocus();\n            const firstChildIndex = focusedIndex + 1;\n            this.view.reveal(firstChildIndex);\n            this.view.setFocus([firstChildIndex]);\n        }\n    }\n    onSpace(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        const nodes = this.view.getFocusedElements();\n        if (nodes.length === 0) {\n            return;\n        }\n        const node = nodes[0];\n        const location = this.model.getNodeLocation(node);\n        const recursive = e.browserEvent.altKey;\n        this.model.setCollapsed(location, undefined, recursive);\n    }\n    dispose() {\n        dispose(this.disposables);\n        this.stickyScrollController?.dispose();\n        this.view.dispose();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { IndexTreeModel } from './indexTreeModel.js';\nimport { ObjectTreeElementCollapseState, TreeError } from './tree.js';\nimport { Iterable } from '../../../common/iterator.js';\nexport class ObjectTreeModel {\n    constructor(user, list, options = {}) {\n        this.user = user;\n        this.rootRef = null;\n        this.nodes = new Map();\n        this.nodesByIdentity = new Map();\n        this.model = new IndexTreeModel(user, list, null, options);\n        this.onDidSplice = this.model.onDidSplice;\n        this.onDidChangeCollapseState = this.model.onDidChangeCollapseState;\n        this.onDidChangeRenderNodeCount = this.model.onDidChangeRenderNodeCount;\n        if (options.sorter) {\n            this.sorter = {\n                compare(a, b) {\n                    return options.sorter.compare(a.element, b.element);\n                }\n            };\n        }\n        this.identityProvider = options.identityProvider;\n    }\n    setChildren(element, children = Iterable.empty(), options = {}) {\n        const location = this.getElementLocation(element);\n        this._setChildren(location, this.preserveCollapseState(children), options);\n    }\n    _setChildren(location, children = Iterable.empty(), options) {\n        const insertedElements = new Set();\n        const insertedElementIds = new Set();\n        const onDidCreateNode = (node) => {\n            if (node.element === null) {\n                return;\n            }\n            const tnode = node;\n            insertedElements.add(tnode.element);\n            this.nodes.set(tnode.element, tnode);\n            if (this.identityProvider) {\n                const id = this.identityProvider.getId(tnode.element).toString();\n                insertedElementIds.add(id);\n                this.nodesByIdentity.set(id, tnode);\n            }\n            options.onDidCreateNode?.(tnode);\n        };\n        const onDidDeleteNode = (node) => {\n            if (node.element === null) {\n                return;\n            }\n            const tnode = node;\n            if (!insertedElements.has(tnode.element)) {\n                this.nodes.delete(tnode.element);\n            }\n            if (this.identityProvider) {\n                const id = this.identityProvider.getId(tnode.element).toString();\n                if (!insertedElementIds.has(id)) {\n                    this.nodesByIdentity.delete(id);\n                }\n            }\n            options.onDidDeleteNode?.(tnode);\n        };\n        this.model.splice([...location, 0], Number.MAX_VALUE, children, { ...options, onDidCreateNode, onDidDeleteNode });\n    }\n    preserveCollapseState(elements = Iterable.empty()) {\n        if (this.sorter) {\n            elements = [...elements].sort(this.sorter.compare.bind(this.sorter));\n        }\n        return Iterable.map(elements, treeElement => {\n            let node = this.nodes.get(treeElement.element);\n            if (!node && this.identityProvider) {\n                const id = this.identityProvider.getId(treeElement.element).toString();\n                node = this.nodesByIdentity.get(id);\n            }\n            if (!node) {\n                let collapsed;\n                if (typeof treeElement.collapsed === 'undefined') {\n                    collapsed = undefined;\n                }\n                else if (treeElement.collapsed === ObjectTreeElementCollapseState.Collapsed || treeElement.collapsed === ObjectTreeElementCollapseState.PreserveOrCollapsed) {\n                    collapsed = true;\n                }\n                else if (treeElement.collapsed === ObjectTreeElementCollapseState.Expanded || treeElement.collapsed === ObjectTreeElementCollapseState.PreserveOrExpanded) {\n                    collapsed = false;\n                }\n                else {\n                    collapsed = Boolean(treeElement.collapsed);\n                }\n                return {\n                    ...treeElement,\n                    children: this.preserveCollapseState(treeElement.children),\n                    collapsed\n                };\n            }\n            const collapsible = typeof treeElement.collapsible === 'boolean' ? treeElement.collapsible : node.collapsible;\n            let collapsed;\n            if (typeof treeElement.collapsed === 'undefined' || treeElement.collapsed === ObjectTreeElementCollapseState.PreserveOrCollapsed || treeElement.collapsed === ObjectTreeElementCollapseState.PreserveOrExpanded) {\n                collapsed = node.collapsed;\n            }\n            else if (treeElement.collapsed === ObjectTreeElementCollapseState.Collapsed) {\n                collapsed = true;\n            }\n            else if (treeElement.collapsed === ObjectTreeElementCollapseState.Expanded) {\n                collapsed = false;\n            }\n            else {\n                collapsed = Boolean(treeElement.collapsed);\n            }\n            return {\n                ...treeElement,\n                collapsible,\n                collapsed,\n                children: this.preserveCollapseState(treeElement.children)\n            };\n        });\n    }\n    rerender(element) {\n        const location = this.getElementLocation(element);\n        this.model.rerender(location);\n    }\n    getFirstElementChild(ref = null) {\n        const location = this.getElementLocation(ref);\n        return this.model.getFirstElementChild(location);\n    }\n    has(element) {\n        return this.nodes.has(element);\n    }\n    getListIndex(element) {\n        const location = this.getElementLocation(element);\n        return this.model.getListIndex(location);\n    }\n    getListRenderCount(element) {\n        const location = this.getElementLocation(element);\n        return this.model.getListRenderCount(location);\n    }\n    isCollapsible(element) {\n        const location = this.getElementLocation(element);\n        return this.model.isCollapsible(location);\n    }\n    setCollapsible(element, collapsible) {\n        const location = this.getElementLocation(element);\n        return this.model.setCollapsible(location, collapsible);\n    }\n    isCollapsed(element) {\n        const location = this.getElementLocation(element);\n        return this.model.isCollapsed(location);\n    }\n    setCollapsed(element, collapsed, recursive) {\n        const location = this.getElementLocation(element);\n        return this.model.setCollapsed(location, collapsed, recursive);\n    }\n    expandTo(element) {\n        const location = this.getElementLocation(element);\n        this.model.expandTo(location);\n    }\n    refilter() {\n        this.model.refilter();\n    }\n    getNode(element = null) {\n        if (element === null) {\n            return this.model.getNode(this.model.rootRef);\n        }\n        const node = this.nodes.get(element);\n        if (!node) {\n            throw new TreeError(this.user, `Tree element not found: ${element}`);\n        }\n        return node;\n    }\n    getNodeLocation(node) {\n        return node.element;\n    }\n    getParentNodeLocation(element) {\n        if (element === null) {\n            throw new TreeError(this.user, `Invalid getParentNodeLocation call`);\n        }\n        const node = this.nodes.get(element);\n        if (!node) {\n            throw new TreeError(this.user, `Tree element not found: ${element}`);\n        }\n        const location = this.model.getNodeLocation(node);\n        const parentLocation = this.model.getParentNodeLocation(location);\n        const parent = this.model.getNode(parentLocation);\n        return parent.element;\n    }\n    getElementLocation(element) {\n        if (element === null) {\n            return [];\n        }\n        const node = this.nodes.get(element);\n        if (!node) {\n            throw new TreeError(this.user, `Tree element not found: ${element}`);\n        }\n        return this.model.getNodeLocation(node);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { ObjectTreeModel } from './objectTreeModel.js';\nimport { TreeError, WeakMapper } from './tree.js';\nimport { equals } from '../../../common/arrays.js';\nimport { Event } from '../../../common/event.js';\nimport { Iterable } from '../../../common/iterator.js';\nfunction noCompress(element) {\n    const elements = [element.element];\n    const incompressible = element.incompressible || false;\n    return {\n        element: { elements, incompressible },\n        children: Iterable.map(Iterable.from(element.children), noCompress),\n        collapsible: element.collapsible,\n        collapsed: element.collapsed\n    };\n}\n// Exported only for test reasons, do not use directly\nexport function compress(element) {\n    const elements = [element.element];\n    const incompressible = element.incompressible || false;\n    let childrenIterator;\n    let children;\n    while (true) {\n        [children, childrenIterator] = Iterable.consume(Iterable.from(element.children), 2);\n        if (children.length !== 1) {\n            break;\n        }\n        if (children[0].incompressible) {\n            break;\n        }\n        element = children[0];\n        elements.push(element.element);\n    }\n    return {\n        element: { elements, incompressible },\n        children: Iterable.map(Iterable.concat(children, childrenIterator), compress),\n        collapsible: element.collapsible,\n        collapsed: element.collapsed\n    };\n}\nfunction _decompress(element, index = 0) {\n    let children;\n    if (index < element.element.elements.length - 1) {\n        children = [_decompress(element, index + 1)];\n    }\n    else {\n        children = Iterable.map(Iterable.from(element.children), el => _decompress(el, 0));\n    }\n    if (index === 0 && element.element.incompressible) {\n        return {\n            element: element.element.elements[index],\n            children,\n            incompressible: true,\n            collapsible: element.collapsible,\n            collapsed: element.collapsed\n        };\n    }\n    return {\n        element: element.element.elements[index],\n        children,\n        collapsible: element.collapsible,\n        collapsed: element.collapsed\n    };\n}\n// Exported only for test reasons, do not use directly\nexport function decompress(element) {\n    return _decompress(element, 0);\n}\nfunction splice(treeElement, element, children) {\n    if (treeElement.element === element) {\n        return { ...treeElement, children };\n    }\n    return { ...treeElement, children: Iterable.map(Iterable.from(treeElement.children), e => splice(e, element, children)) };\n}\nconst wrapIdentityProvider = (base) => ({\n    getId(node) {\n        return node.elements.map(e => base.getId(e).toString()).join('\\0');\n    }\n});\n// Exported only for test reasons, do not use directly\nexport class CompressedObjectTreeModel {\n    get onDidSplice() { return this.model.onDidSplice; }\n    get onDidChangeCollapseState() { return this.model.onDidChangeCollapseState; }\n    get onDidChangeRenderNodeCount() { return this.model.onDidChangeRenderNodeCount; }\n    constructor(user, list, options = {}) {\n        this.user = user;\n        this.rootRef = null;\n        this.nodes = new Map();\n        this.model = new ObjectTreeModel(user, list, options);\n        this.enabled = typeof options.compressionEnabled === 'undefined' ? true : options.compressionEnabled;\n        this.identityProvider = options.identityProvider;\n    }\n    setChildren(element, children = Iterable.empty(), options) {\n        // Diffs must be deep, since the compression can affect nested elements.\n        // @see https://github.com/microsoft/vscode/pull/114237#issuecomment-759425034\n        const diffIdentityProvider = options.diffIdentityProvider && wrapIdentityProvider(options.diffIdentityProvider);\n        if (element === null) {\n            const compressedChildren = Iterable.map(children, this.enabled ? compress : noCompress);\n            this._setChildren(null, compressedChildren, { diffIdentityProvider, diffDepth: Infinity });\n            return;\n        }\n        const compressedNode = this.nodes.get(element);\n        if (!compressedNode) {\n            throw new TreeError(this.user, 'Unknown compressed tree node');\n        }\n        const node = this.model.getNode(compressedNode);\n        const compressedParentNode = this.model.getParentNodeLocation(compressedNode);\n        const parent = this.model.getNode(compressedParentNode);\n        const decompressedElement = decompress(node);\n        const splicedElement = splice(decompressedElement, element, children);\n        const recompressedElement = (this.enabled ? compress : noCompress)(splicedElement);\n        // If the recompressed node is identical to the original, just set its children.\n        // Saves work and churn diffing the parent element.\n        const elementComparator = options.diffIdentityProvider\n            ? ((a, b) => options.diffIdentityProvider.getId(a) === options.diffIdentityProvider.getId(b))\n            : undefined;\n        if (equals(recompressedElement.element.elements, node.element.elements, elementComparator)) {\n            this._setChildren(compressedNode, recompressedElement.children || Iterable.empty(), { diffIdentityProvider, diffDepth: 1 });\n            return;\n        }\n        const parentChildren = parent.children\n            .map(child => child === node ? recompressedElement : child);\n        this._setChildren(parent.element, parentChildren, {\n            diffIdentityProvider,\n            diffDepth: node.depth - parent.depth,\n        });\n    }\n    isCompressionEnabled() {\n        return this.enabled;\n    }\n    setCompressionEnabled(enabled) {\n        if (enabled === this.enabled) {\n            return;\n        }\n        this.enabled = enabled;\n        const root = this.model.getNode();\n        const rootChildren = root.children;\n        const decompressedRootChildren = Iterable.map(rootChildren, decompress);\n        const recompressedRootChildren = Iterable.map(decompressedRootChildren, enabled ? compress : noCompress);\n        // it should be safe to always use deep diff mode here if an identity\n        // provider is available, since we know the raw nodes are unchanged.\n        this._setChildren(null, recompressedRootChildren, {\n            diffIdentityProvider: this.identityProvider,\n            diffDepth: Infinity,\n        });\n    }\n    _setChildren(node, children, options) {\n        const insertedElements = new Set();\n        const onDidCreateNode = (node) => {\n            for (const element of node.element.elements) {\n                insertedElements.add(element);\n                this.nodes.set(element, node.element);\n            }\n        };\n        const onDidDeleteNode = (node) => {\n            for (const element of node.element.elements) {\n                if (!insertedElements.has(element)) {\n                    this.nodes.delete(element);\n                }\n            }\n        };\n        this.model.setChildren(node, children, { ...options, onDidCreateNode, onDidDeleteNode });\n    }\n    has(element) {\n        return this.nodes.has(element);\n    }\n    getListIndex(location) {\n        const node = this.getCompressedNode(location);\n        return this.model.getListIndex(node);\n    }\n    getListRenderCount(location) {\n        const node = this.getCompressedNode(location);\n        return this.model.getListRenderCount(node);\n    }\n    getNode(location) {\n        if (typeof location === 'undefined') {\n            return this.model.getNode();\n        }\n        const node = this.getCompressedNode(location);\n        return this.model.getNode(node);\n    }\n    // TODO: review this\n    getNodeLocation(node) {\n        const compressedNode = this.model.getNodeLocation(node);\n        if (compressedNode === null) {\n            return null;\n        }\n        return compressedNode.elements[compressedNode.elements.length - 1];\n    }\n    // TODO: review this\n    getParentNodeLocation(location) {\n        const compressedNode = this.getCompressedNode(location);\n        const parentNode = this.model.getParentNodeLocation(compressedNode);\n        if (parentNode === null) {\n            return null;\n        }\n        return parentNode.elements[parentNode.elements.length - 1];\n    }\n    getFirstElementChild(location) {\n        const compressedNode = this.getCompressedNode(location);\n        return this.model.getFirstElementChild(compressedNode);\n    }\n    isCollapsible(location) {\n        const compressedNode = this.getCompressedNode(location);\n        return this.model.isCollapsible(compressedNode);\n    }\n    setCollapsible(location, collapsible) {\n        const compressedNode = this.getCompressedNode(location);\n        return this.model.setCollapsible(compressedNode, collapsible);\n    }\n    isCollapsed(location) {\n        const compressedNode = this.getCompressedNode(location);\n        return this.model.isCollapsed(compressedNode);\n    }\n    setCollapsed(location, collapsed, recursive) {\n        const compressedNode = this.getCompressedNode(location);\n        return this.model.setCollapsed(compressedNode, collapsed, recursive);\n    }\n    expandTo(location) {\n        const compressedNode = this.getCompressedNode(location);\n        this.model.expandTo(compressedNode);\n    }\n    rerender(location) {\n        const compressedNode = this.getCompressedNode(location);\n        this.model.rerender(compressedNode);\n    }\n    refilter() {\n        this.model.refilter();\n    }\n    getCompressedNode(element) {\n        if (element === null) {\n            return null;\n        }\n        const node = this.nodes.get(element);\n        if (!node) {\n            throw new TreeError(this.user, `Tree element not found: ${element}`);\n        }\n        return node;\n    }\n}\nexport const DefaultElementMapper = elements => elements[elements.length - 1];\nclass CompressedTreeNodeWrapper {\n    get element() { return this.node.element === null ? null : this.unwrapper(this.node.element); }\n    get children() { return this.node.children.map(node => new CompressedTreeNodeWrapper(this.unwrapper, node)); }\n    get depth() { return this.node.depth; }\n    get visibleChildrenCount() { return this.node.visibleChildrenCount; }\n    get visibleChildIndex() { return this.node.visibleChildIndex; }\n    get collapsible() { return this.node.collapsible; }\n    get collapsed() { return this.node.collapsed; }\n    get visible() { return this.node.visible; }\n    get filterData() { return this.node.filterData; }\n    constructor(unwrapper, node) {\n        this.unwrapper = unwrapper;\n        this.node = node;\n    }\n}\nfunction mapList(nodeMapper, list) {\n    return {\n        splice(start, deleteCount, toInsert) {\n            list.splice(start, deleteCount, toInsert.map(node => nodeMapper.map(node)));\n        },\n        updateElementHeight(index, height) {\n            list.updateElementHeight(index, height);\n        }\n    };\n}\nfunction mapOptions(compressedNodeUnwrapper, options) {\n    return {\n        ...options,\n        identityProvider: options.identityProvider && {\n            getId(node) {\n                return options.identityProvider.getId(compressedNodeUnwrapper(node));\n            }\n        },\n        sorter: options.sorter && {\n            compare(node, otherNode) {\n                return options.sorter.compare(node.elements[0], otherNode.elements[0]);\n            }\n        },\n        filter: options.filter && {\n            filter(node, parentVisibility) {\n                return options.filter.filter(compressedNodeUnwrapper(node), parentVisibility);\n            }\n        }\n    };\n}\nexport class CompressibleObjectTreeModel {\n    get onDidSplice() {\n        return Event.map(this.model.onDidSplice, ({ insertedNodes, deletedNodes }) => ({\n            insertedNodes: insertedNodes.map(node => this.nodeMapper.map(node)),\n            deletedNodes: deletedNodes.map(node => this.nodeMapper.map(node)),\n        }));\n    }\n    get onDidChangeCollapseState() {\n        return Event.map(this.model.onDidChangeCollapseState, ({ node, deep }) => ({\n            node: this.nodeMapper.map(node),\n            deep\n        }));\n    }\n    get onDidChangeRenderNodeCount() {\n        return Event.map(this.model.onDidChangeRenderNodeCount, node => this.nodeMapper.map(node));\n    }\n    constructor(user, list, options = {}) {\n        this.rootRef = null;\n        this.elementMapper = options.elementMapper || DefaultElementMapper;\n        const compressedNodeUnwrapper = node => this.elementMapper(node.elements);\n        this.nodeMapper = new WeakMapper(node => new CompressedTreeNodeWrapper(compressedNodeUnwrapper, node));\n        this.model = new CompressedObjectTreeModel(user, mapList(this.nodeMapper, list), mapOptions(compressedNodeUnwrapper, options));\n    }\n    setChildren(element, children = Iterable.empty(), options = {}) {\n        this.model.setChildren(element, children, options);\n    }\n    isCompressionEnabled() {\n        return this.model.isCompressionEnabled();\n    }\n    setCompressionEnabled(enabled) {\n        this.model.setCompressionEnabled(enabled);\n    }\n    has(location) {\n        return this.model.has(location);\n    }\n    getListIndex(location) {\n        return this.model.getListIndex(location);\n    }\n    getListRenderCount(location) {\n        return this.model.getListRenderCount(location);\n    }\n    getNode(location) {\n        return this.nodeMapper.map(this.model.getNode(location));\n    }\n    getNodeLocation(node) {\n        return node.element;\n    }\n    getParentNodeLocation(location) {\n        return this.model.getParentNodeLocation(location);\n    }\n    getFirstElementChild(location) {\n        const result = this.model.getFirstElementChild(location);\n        if (result === null || typeof result === 'undefined') {\n            return result;\n        }\n        return this.elementMapper(result.elements);\n    }\n    isCollapsible(location) {\n        return this.model.isCollapsible(location);\n    }\n    setCollapsible(location, collapsed) {\n        return this.model.setCollapsible(location, collapsed);\n    }\n    isCollapsed(location) {\n        return this.model.isCollapsed(location);\n    }\n    setCollapsed(location, collapsed, recursive) {\n        return this.model.setCollapsed(location, collapsed, recursive);\n    }\n    expandTo(location) {\n        return this.model.expandTo(location);\n    }\n    rerender(location) {\n        return this.model.rerender(location);\n    }\n    refilter() {\n        return this.model.refilter();\n    }\n    getCompressedTreeNode(location = null) {\n        return this.model.getNode(location);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { AbstractTree } from './abstractTree.js';\nimport { CompressibleObjectTreeModel } from './compressedObjectTreeModel.js';\nimport { ObjectTreeModel } from './objectTreeModel.js';\nimport { memoize } from '../../../common/decorators.js';\nimport { Iterable } from '../../../common/iterator.js';\nexport class ObjectTree extends AbstractTree {\n    get onDidChangeCollapseState() { return this.model.onDidChangeCollapseState; }\n    constructor(user, container, delegate, renderers, options = {}) {\n        super(user, container, delegate, renderers, options);\n        this.user = user;\n    }\n    setChildren(element, children = Iterable.empty(), options) {\n        this.model.setChildren(element, children, options);\n    }\n    rerender(element) {\n        if (element === undefined) {\n            this.view.rerender();\n            return;\n        }\n        this.model.rerender(element);\n    }\n    hasElement(element) {\n        return this.model.has(element);\n    }\n    createModel(user, view, options) {\n        return new ObjectTreeModel(user, view, options);\n    }\n}\nclass CompressibleRenderer {\n    get compressedTreeNodeProvider() {\n        return this._compressedTreeNodeProvider();\n    }\n    constructor(_compressedTreeNodeProvider, stickyScrollDelegate, renderer) {\n        this._compressedTreeNodeProvider = _compressedTreeNodeProvider;\n        this.stickyScrollDelegate = stickyScrollDelegate;\n        this.renderer = renderer;\n        this.templateId = renderer.templateId;\n        if (renderer.onDidChangeTwistieState) {\n            this.onDidChangeTwistieState = renderer.onDidChangeTwistieState;\n        }\n    }\n    renderTemplate(container) {\n        const data = this.renderer.renderTemplate(container);\n        return { compressedTreeNode: undefined, data };\n    }\n    renderElement(node, index, templateData, height) {\n        let compressedTreeNode = this.stickyScrollDelegate.getCompressedNode(node);\n        if (!compressedTreeNode) {\n            compressedTreeNode = this.compressedTreeNodeProvider.getCompressedTreeNode(node.element);\n        }\n        if (compressedTreeNode.element.elements.length === 1) {\n            templateData.compressedTreeNode = undefined;\n            this.renderer.renderElement(node, index, templateData.data, height);\n        }\n        else {\n            templateData.compressedTreeNode = compressedTreeNode;\n            this.renderer.renderCompressedElements(compressedTreeNode, index, templateData.data, height);\n        }\n    }\n    disposeElement(node, index, templateData, height) {\n        if (templateData.compressedTreeNode) {\n            this.renderer.disposeCompressedElements?.(templateData.compressedTreeNode, index, templateData.data, height);\n        }\n        else {\n            this.renderer.disposeElement?.(node, index, templateData.data, height);\n        }\n    }\n    disposeTemplate(templateData) {\n        this.renderer.disposeTemplate(templateData.data);\n    }\n    renderTwistie(element, twistieElement) {\n        if (this.renderer.renderTwistie) {\n            return this.renderer.renderTwistie(element, twistieElement);\n        }\n        return false;\n    }\n}\n__decorate([\n    memoize\n], CompressibleRenderer.prototype, \"compressedTreeNodeProvider\", null);\nclass CompressibleStickyScrollDelegate {\n    constructor(modelProvider) {\n        this.modelProvider = modelProvider;\n        this.compressedStickyNodes = new Map();\n    }\n    getCompressedNode(node) {\n        return this.compressedStickyNodes.get(node);\n    }\n    constrainStickyScrollNodes(stickyNodes, stickyScrollMaxItemCount, maxWidgetHeight) {\n        this.compressedStickyNodes.clear();\n        if (stickyNodes.length === 0) {\n            return [];\n        }\n        for (let i = 0; i < stickyNodes.length; i++) {\n            const stickyNode = stickyNodes[i];\n            const stickyNodeBottom = stickyNode.position + stickyNode.height;\n            const followingReachesMaxHeight = i + 1 < stickyNodes.length && stickyNodeBottom + stickyNodes[i + 1].height > maxWidgetHeight;\n            if (followingReachesMaxHeight || i >= stickyScrollMaxItemCount - 1 && stickyScrollMaxItemCount < stickyNodes.length) {\n                const uncompressedStickyNodes = stickyNodes.slice(0, i);\n                const overflowingStickyNodes = stickyNodes.slice(i);\n                const compressedStickyNode = this.compressStickyNodes(overflowingStickyNodes);\n                return [...uncompressedStickyNodes, compressedStickyNode];\n            }\n        }\n        return stickyNodes;\n    }\n    compressStickyNodes(stickyNodes) {\n        if (stickyNodes.length === 0) {\n            throw new Error('Can\\'t compress empty sticky nodes');\n        }\n        const compressionModel = this.modelProvider();\n        if (!compressionModel.isCompressionEnabled()) {\n            return stickyNodes[0];\n        }\n        // Collect all elements to be compressed\n        const elements = [];\n        for (let i = 0; i < stickyNodes.length; i++) {\n            const stickyNode = stickyNodes[i];\n            const compressedNode = compressionModel.getCompressedTreeNode(stickyNode.node.element);\n            if (compressedNode.element) {\n                // if an element is incompressible, it can't be compressed with it's parent element\n                if (i !== 0 && compressedNode.element.incompressible) {\n                    break;\n                }\n                elements.push(...compressedNode.element.elements);\n            }\n        }\n        if (elements.length < 2) {\n            return stickyNodes[0];\n        }\n        // Compress the elements\n        const lastStickyNode = stickyNodes[stickyNodes.length - 1];\n        const compressedElement = { elements, incompressible: false };\n        const compressedNode = { ...lastStickyNode.node, children: [], element: compressedElement };\n        const stickyTreeNode = new Proxy(stickyNodes[0].node, {});\n        const compressedStickyNode = {\n            node: stickyTreeNode,\n            startIndex: stickyNodes[0].startIndex,\n            endIndex: lastStickyNode.endIndex,\n            position: stickyNodes[0].position,\n            height: stickyNodes[0].height,\n        };\n        this.compressedStickyNodes.set(stickyTreeNode, compressedNode);\n        return compressedStickyNode;\n    }\n}\nfunction asObjectTreeOptions(compressedTreeNodeProvider, options) {\n    return options && {\n        ...options,\n        keyboardNavigationLabelProvider: options.keyboardNavigationLabelProvider && {\n            getKeyboardNavigationLabel(e) {\n                let compressedTreeNode;\n                try {\n                    compressedTreeNode = compressedTreeNodeProvider().getCompressedTreeNode(e);\n                }\n                catch {\n                    return options.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e);\n                }\n                if (compressedTreeNode.element.elements.length === 1) {\n                    return options.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e);\n                }\n                else {\n                    return options.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(compressedTreeNode.element.elements);\n                }\n            }\n        }\n    };\n}\nexport class CompressibleObjectTree extends ObjectTree {\n    constructor(user, container, delegate, renderers, options = {}) {\n        const compressedTreeNodeProvider = () => this;\n        const stickyScrollDelegate = new CompressibleStickyScrollDelegate(() => this.model);\n        const compressibleRenderers = renderers.map(r => new CompressibleRenderer(compressedTreeNodeProvider, stickyScrollDelegate, r));\n        super(user, container, delegate, compressibleRenderers, { ...asObjectTreeOptions(compressedTreeNodeProvider, options), stickyScrollDelegate });\n    }\n    setChildren(element, children = Iterable.empty(), options) {\n        this.model.setChildren(element, children, options);\n    }\n    createModel(user, view, options) {\n        return new CompressibleObjectTreeModel(user, view, options);\n    }\n    updateOptions(optionsUpdate = {}) {\n        super.updateOptions(optionsUpdate);\n        if (typeof optionsUpdate.compressionEnabled !== 'undefined') {\n            this.model.setCompressionEnabled(optionsUpdate.compressionEnabled);\n        }\n    }\n    getCompressedTreeNode(element = null) {\n        return this.model.getCompressedTreeNode(element);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { ElementsDragAndDropData } from '../list/listView.js';\nimport { ComposedTreeDelegate } from './abstractTree.js';\nimport { getVisibleState, isFilterResult } from './indexTreeModel.js';\nimport { CompressibleObjectTree, ObjectTree } from './objectTree.js';\nimport { ObjectTreeElementCollapseState, TreeError, WeakMapper } from './tree.js';\nimport { createCancelablePromise, Promises, timeout } from '../../../common/async.js';\nimport { Codicon } from '../../../common/codicons.js';\nimport { ThemeIcon } from '../../../common/themables.js';\nimport { isCancellationError, onUnexpectedError } from '../../../common/errors.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { Iterable } from '../../../common/iterator.js';\nimport { DisposableStore, dispose } from '../../../common/lifecycle.js';\nimport { isIterable } from '../../../common/types.js';\nfunction createAsyncDataTreeNode(props) {\n    return {\n        ...props,\n        children: [],\n        refreshPromise: undefined,\n        stale: true,\n        slow: false,\n        forceExpanded: false\n    };\n}\nfunction isAncestor(ancestor, descendant) {\n    if (!descendant.parent) {\n        return false;\n    }\n    else if (descendant.parent === ancestor) {\n        return true;\n    }\n    else {\n        return isAncestor(ancestor, descendant.parent);\n    }\n}\nfunction intersects(node, other) {\n    return node === other || isAncestor(node, other) || isAncestor(other, node);\n}\nclass AsyncDataTreeNodeWrapper {\n    get element() { return this.node.element.element; }\n    get children() { return this.node.children.map(node => new AsyncDataTreeNodeWrapper(node)); }\n    get depth() { return this.node.depth; }\n    get visibleChildrenCount() { return this.node.visibleChildrenCount; }\n    get visibleChildIndex() { return this.node.visibleChildIndex; }\n    get collapsible() { return this.node.collapsible; }\n    get collapsed() { return this.node.collapsed; }\n    get visible() { return this.node.visible; }\n    get filterData() { return this.node.filterData; }\n    constructor(node) {\n        this.node = node;\n    }\n}\nclass AsyncDataTreeRenderer {\n    constructor(renderer, nodeMapper, onDidChangeTwistieState) {\n        this.renderer = renderer;\n        this.nodeMapper = nodeMapper;\n        this.onDidChangeTwistieState = onDidChangeTwistieState;\n        this.renderedNodes = new Map();\n        this.templateId = renderer.templateId;\n    }\n    renderTemplate(container) {\n        const templateData = this.renderer.renderTemplate(container);\n        return { templateData };\n    }\n    renderElement(node, index, templateData, height) {\n        this.renderer.renderElement(this.nodeMapper.map(node), index, templateData.templateData, height);\n    }\n    renderTwistie(element, twistieElement) {\n        if (element.slow) {\n            twistieElement.classList.add(...ThemeIcon.asClassNameArray(Codicon.treeItemLoading));\n            return true;\n        }\n        else {\n            twistieElement.classList.remove(...ThemeIcon.asClassNameArray(Codicon.treeItemLoading));\n            return false;\n        }\n    }\n    disposeElement(node, index, templateData, height) {\n        this.renderer.disposeElement?.(this.nodeMapper.map(node), index, templateData.templateData, height);\n    }\n    disposeTemplate(templateData) {\n        this.renderer.disposeTemplate(templateData.templateData);\n    }\n    dispose() {\n        this.renderedNodes.clear();\n    }\n}\nfunction asTreeEvent(e) {\n    return {\n        browserEvent: e.browserEvent,\n        elements: e.elements.map(e => e.element)\n    };\n}\nfunction asTreeMouseEvent(e) {\n    return {\n        browserEvent: e.browserEvent,\n        element: e.element && e.element.element,\n        target: e.target\n    };\n}\nclass AsyncDataTreeElementsDragAndDropData extends ElementsDragAndDropData {\n    constructor(data) {\n        super(data.elements.map(node => node.element));\n        this.data = data;\n    }\n}\nfunction asAsyncDataTreeDragAndDropData(data) {\n    if (data instanceof ElementsDragAndDropData) {\n        return new AsyncDataTreeElementsDragAndDropData(data);\n    }\n    return data;\n}\nclass AsyncDataTreeNodeListDragAndDrop {\n    constructor(dnd) {\n        this.dnd = dnd;\n    }\n    getDragURI(node) {\n        return this.dnd.getDragURI(node.element);\n    }\n    getDragLabel(nodes, originalEvent) {\n        if (this.dnd.getDragLabel) {\n            return this.dnd.getDragLabel(nodes.map(node => node.element), originalEvent);\n        }\n        return undefined;\n    }\n    onDragStart(data, originalEvent) {\n        this.dnd.onDragStart?.(asAsyncDataTreeDragAndDropData(data), originalEvent);\n    }\n    onDragOver(data, targetNode, targetIndex, targetSector, originalEvent, raw = true) {\n        return this.dnd.onDragOver(asAsyncDataTreeDragAndDropData(data), targetNode && targetNode.element, targetIndex, targetSector, originalEvent);\n    }\n    drop(data, targetNode, targetIndex, targetSector, originalEvent) {\n        this.dnd.drop(asAsyncDataTreeDragAndDropData(data), targetNode && targetNode.element, targetIndex, targetSector, originalEvent);\n    }\n    onDragEnd(originalEvent) {\n        this.dnd.onDragEnd?.(originalEvent);\n    }\n    dispose() {\n        this.dnd.dispose();\n    }\n}\nfunction asObjectTreeOptions(options) {\n    return options && {\n        ...options,\n        collapseByDefault: true,\n        identityProvider: options.identityProvider && {\n            getId(el) {\n                return options.identityProvider.getId(el.element);\n            }\n        },\n        dnd: options.dnd && new AsyncDataTreeNodeListDragAndDrop(options.dnd),\n        multipleSelectionController: options.multipleSelectionController && {\n            isSelectionSingleChangeEvent(e) {\n                return options.multipleSelectionController.isSelectionSingleChangeEvent({ ...e, element: e.element });\n            },\n            isSelectionRangeChangeEvent(e) {\n                return options.multipleSelectionController.isSelectionRangeChangeEvent({ ...e, element: e.element });\n            }\n        },\n        accessibilityProvider: options.accessibilityProvider && {\n            ...options.accessibilityProvider,\n            getPosInSet: undefined,\n            getSetSize: undefined,\n            getRole: options.accessibilityProvider.getRole ? (el) => {\n                return options.accessibilityProvider.getRole(el.element);\n            } : () => 'treeitem',\n            isChecked: options.accessibilityProvider.isChecked ? (e) => {\n                return !!(options.accessibilityProvider?.isChecked(e.element));\n            } : undefined,\n            getAriaLabel(e) {\n                return options.accessibilityProvider.getAriaLabel(e.element);\n            },\n            getWidgetAriaLabel() {\n                return options.accessibilityProvider.getWidgetAriaLabel();\n            },\n            getWidgetRole: options.accessibilityProvider.getWidgetRole ? () => options.accessibilityProvider.getWidgetRole() : () => 'tree',\n            getAriaLevel: options.accessibilityProvider.getAriaLevel && (node => {\n                return options.accessibilityProvider.getAriaLevel(node.element);\n            }),\n            getActiveDescendantId: options.accessibilityProvider.getActiveDescendantId && (node => {\n                return options.accessibilityProvider.getActiveDescendantId(node.element);\n            })\n        },\n        filter: options.filter && {\n            filter(e, parentVisibility) {\n                return options.filter.filter(e.element, parentVisibility);\n            }\n        },\n        keyboardNavigationLabelProvider: options.keyboardNavigationLabelProvider && {\n            ...options.keyboardNavigationLabelProvider,\n            getKeyboardNavigationLabel(e) {\n                return options.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element);\n            }\n        },\n        sorter: undefined,\n        expandOnlyOnTwistieClick: typeof options.expandOnlyOnTwistieClick === 'undefined' ? undefined : (typeof options.expandOnlyOnTwistieClick !== 'function' ? options.expandOnlyOnTwistieClick : (e => options.expandOnlyOnTwistieClick(e.element))),\n        defaultFindVisibility: e => {\n            if (e.hasChildren && e.stale) {\n                return 1 /* TreeVisibility.Visible */;\n            }\n            else if (typeof options.defaultFindVisibility === 'number') {\n                return options.defaultFindVisibility;\n            }\n            else if (typeof options.defaultFindVisibility === 'undefined') {\n                return 2 /* TreeVisibility.Recurse */;\n            }\n            else {\n                return options.defaultFindVisibility(e.element);\n            }\n        }\n    };\n}\nfunction dfs(node, fn) {\n    fn(node);\n    node.children.forEach(child => dfs(child, fn));\n}\nexport class AsyncDataTree {\n    get onDidScroll() { return this.tree.onDidScroll; }\n    get onDidChangeFocus() { return Event.map(this.tree.onDidChangeFocus, asTreeEvent); }\n    get onDidChangeSelection() { return Event.map(this.tree.onDidChangeSelection, asTreeEvent); }\n    get onMouseDblClick() { return Event.map(this.tree.onMouseDblClick, asTreeMouseEvent); }\n    get onPointer() { return Event.map(this.tree.onPointer, asTreeMouseEvent); }\n    get onDidFocus() { return this.tree.onDidFocus; }\n    /**\n     * To be used internally only!\n     * @deprecated\n     */\n    get onDidChangeModel() { return this.tree.onDidChangeModel; }\n    get onDidChangeCollapseState() { return this.tree.onDidChangeCollapseState; }\n    get onDidChangeFindOpenState() { return this.tree.onDidChangeFindOpenState; }\n    get onDidChangeStickyScrollFocused() { return this.tree.onDidChangeStickyScrollFocused; }\n    get onDidDispose() { return this.tree.onDidDispose; }\n    constructor(user, container, delegate, renderers, dataSource, options = {}) {\n        this.user = user;\n        this.dataSource = dataSource;\n        this.nodes = new Map();\n        this.subTreeRefreshPromises = new Map();\n        this.refreshPromises = new Map();\n        this._onDidRender = new Emitter();\n        this._onDidChangeNodeSlowState = new Emitter();\n        this.nodeMapper = new WeakMapper(node => new AsyncDataTreeNodeWrapper(node));\n        this.disposables = new DisposableStore();\n        this.identityProvider = options.identityProvider;\n        this.autoExpandSingleChildren = typeof options.autoExpandSingleChildren === 'undefined' ? false : options.autoExpandSingleChildren;\n        this.sorter = options.sorter;\n        this.getDefaultCollapseState = e => options.collapseByDefault ? (options.collapseByDefault(e) ? ObjectTreeElementCollapseState.PreserveOrCollapsed : ObjectTreeElementCollapseState.PreserveOrExpanded) : undefined;\n        this.tree = this.createTree(user, container, delegate, renderers, options);\n        this.onDidChangeFindMode = this.tree.onDidChangeFindMode;\n        this.onDidChangeFindMatchType = this.tree.onDidChangeFindMatchType;\n        this.root = createAsyncDataTreeNode({\n            element: undefined,\n            parent: null,\n            hasChildren: true,\n            defaultCollapseState: undefined\n        });\n        if (this.identityProvider) {\n            this.root = {\n                ...this.root,\n                id: null\n            };\n        }\n        this.nodes.set(null, this.root);\n        this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState, this, this.disposables);\n    }\n    createTree(user, container, delegate, renderers, options) {\n        const objectTreeDelegate = new ComposedTreeDelegate(delegate);\n        const objectTreeRenderers = renderers.map(r => new AsyncDataTreeRenderer(r, this.nodeMapper, this._onDidChangeNodeSlowState.event));\n        const objectTreeOptions = asObjectTreeOptions(options) || {};\n        return new ObjectTree(user, container, objectTreeDelegate, objectTreeRenderers, objectTreeOptions);\n    }\n    updateOptions(options = {}) {\n        this.tree.updateOptions(options);\n    }\n    // Widget\n    getHTMLElement() {\n        return this.tree.getHTMLElement();\n    }\n    get scrollTop() {\n        return this.tree.scrollTop;\n    }\n    set scrollTop(scrollTop) {\n        this.tree.scrollTop = scrollTop;\n    }\n    get scrollHeight() {\n        return this.tree.scrollHeight;\n    }\n    get renderHeight() {\n        return this.tree.renderHeight;\n    }\n    domFocus() {\n        this.tree.domFocus();\n    }\n    layout(height, width) {\n        this.tree.layout(height, width);\n    }\n    style(styles) {\n        this.tree.style(styles);\n    }\n    // Model\n    getInput() {\n        return this.root.element;\n    }\n    async setInput(input, viewState) {\n        this.refreshPromises.forEach(promise => promise.cancel());\n        this.refreshPromises.clear();\n        this.root.element = input;\n        const viewStateContext = viewState && { viewState, focus: [], selection: [] };\n        await this._updateChildren(input, true, false, viewStateContext);\n        if (viewStateContext) {\n            this.tree.setFocus(viewStateContext.focus);\n            this.tree.setSelection(viewStateContext.selection);\n        }\n        if (viewState && typeof viewState.scrollTop === 'number') {\n            this.scrollTop = viewState.scrollTop;\n        }\n    }\n    async _updateChildren(element = this.root.element, recursive = true, rerender = false, viewStateContext, options) {\n        if (typeof this.root.element === 'undefined') {\n            throw new TreeError(this.user, 'Tree input not set');\n        }\n        if (this.root.refreshPromise) {\n            await this.root.refreshPromise;\n            await Event.toPromise(this._onDidRender.event);\n        }\n        const node = this.getDataNode(element);\n        await this.refreshAndRenderNode(node, recursive, viewStateContext, options);\n        if (rerender) {\n            try {\n                this.tree.rerender(node);\n            }\n            catch {\n                // missing nodes are fine, this could've resulted from\n                // parallel refresh calls, removing `node` altogether\n            }\n        }\n    }\n    // View\n    rerender(element) {\n        if (element === undefined || element === this.root.element) {\n            this.tree.rerender();\n            return;\n        }\n        const node = this.getDataNode(element);\n        this.tree.rerender(node);\n    }\n    // Tree\n    getNode(element = this.root.element) {\n        const dataNode = this.getDataNode(element);\n        const node = this.tree.getNode(dataNode === this.root ? null : dataNode);\n        return this.nodeMapper.map(node);\n    }\n    collapse(element, recursive = false) {\n        const node = this.getDataNode(element);\n        return this.tree.collapse(node === this.root ? null : node, recursive);\n    }\n    async expand(element, recursive = false) {\n        if (typeof this.root.element === 'undefined') {\n            throw new TreeError(this.user, 'Tree input not set');\n        }\n        if (this.root.refreshPromise) {\n            await this.root.refreshPromise;\n            await Event.toPromise(this._onDidRender.event);\n        }\n        const node = this.getDataNode(element);\n        if (this.tree.hasElement(node) && !this.tree.isCollapsible(node)) {\n            return false;\n        }\n        if (node.refreshPromise) {\n            await this.root.refreshPromise;\n            await Event.toPromise(this._onDidRender.event);\n        }\n        if (node !== this.root && !node.refreshPromise && !this.tree.isCollapsed(node)) {\n            return false;\n        }\n        const result = this.tree.expand(node === this.root ? null : node, recursive);\n        if (node.refreshPromise) {\n            await this.root.refreshPromise;\n            await Event.toPromise(this._onDidRender.event);\n        }\n        return result;\n    }\n    setSelection(elements, browserEvent) {\n        const nodes = elements.map(e => this.getDataNode(e));\n        this.tree.setSelection(nodes, browserEvent);\n    }\n    getSelection() {\n        const nodes = this.tree.getSelection();\n        return nodes.map(n => n.element);\n    }\n    setFocus(elements, browserEvent) {\n        const nodes = elements.map(e => this.getDataNode(e));\n        this.tree.setFocus(nodes, browserEvent);\n    }\n    getFocus() {\n        const nodes = this.tree.getFocus();\n        return nodes.map(n => n.element);\n    }\n    reveal(element, relativeTop) {\n        this.tree.reveal(this.getDataNode(element), relativeTop);\n    }\n    // Tree navigation\n    getParentElement(element) {\n        const node = this.tree.getParentElement(this.getDataNode(element));\n        return (node && node.element);\n    }\n    getFirstElementChild(element = this.root.element) {\n        const dataNode = this.getDataNode(element);\n        const node = this.tree.getFirstElementChild(dataNode === this.root ? null : dataNode);\n        return (node && node.element);\n    }\n    // Implementation\n    getDataNode(element) {\n        const node = this.nodes.get((element === this.root.element ? null : element));\n        if (!node) {\n            throw new TreeError(this.user, `Data tree node not found: ${element}`);\n        }\n        return node;\n    }\n    async refreshAndRenderNode(node, recursive, viewStateContext, options) {\n        await this.refreshNode(node, recursive, viewStateContext);\n        if (this.disposables.isDisposed) {\n            return; // tree disposed during refresh (#199264)\n        }\n        this.render(node, viewStateContext, options);\n    }\n    async refreshNode(node, recursive, viewStateContext) {\n        let result;\n        this.subTreeRefreshPromises.forEach((refreshPromise, refreshNode) => {\n            if (!result && intersects(refreshNode, node)) {\n                result = refreshPromise.then(() => this.refreshNode(node, recursive, viewStateContext));\n            }\n        });\n        if (result) {\n            return result;\n        }\n        if (node !== this.root) {\n            const treeNode = this.tree.getNode(node);\n            if (treeNode.collapsed) {\n                node.hasChildren = !!this.dataSource.hasChildren(node.element);\n                node.stale = true;\n                this.setChildren(node, [], recursive, viewStateContext);\n                return;\n            }\n        }\n        return this.doRefreshSubTree(node, recursive, viewStateContext);\n    }\n    async doRefreshSubTree(node, recursive, viewStateContext) {\n        let done;\n        node.refreshPromise = new Promise(c => done = c);\n        this.subTreeRefreshPromises.set(node, node.refreshPromise);\n        node.refreshPromise.finally(() => {\n            node.refreshPromise = undefined;\n            this.subTreeRefreshPromises.delete(node);\n        });\n        try {\n            const childrenToRefresh = await this.doRefreshNode(node, recursive, viewStateContext);\n            node.stale = false;\n            await Promises.settled(childrenToRefresh.map(child => this.doRefreshSubTree(child, recursive, viewStateContext)));\n        }\n        finally {\n            done();\n        }\n    }\n    async doRefreshNode(node, recursive, viewStateContext) {\n        node.hasChildren = !!this.dataSource.hasChildren(node.element);\n        let childrenPromise;\n        if (!node.hasChildren) {\n            childrenPromise = Promise.resolve(Iterable.empty());\n        }\n        else {\n            const children = this.doGetChildren(node);\n            if (isIterable(children)) {\n                childrenPromise = Promise.resolve(children);\n            }\n            else {\n                const slowTimeout = timeout(800);\n                slowTimeout.then(() => {\n                    node.slow = true;\n                    this._onDidChangeNodeSlowState.fire(node);\n                }, _ => null);\n                childrenPromise = children.finally(() => slowTimeout.cancel());\n            }\n        }\n        try {\n            const children = await childrenPromise;\n            return this.setChildren(node, children, recursive, viewStateContext);\n        }\n        catch (err) {\n            if (node !== this.root && this.tree.hasElement(node)) {\n                this.tree.collapse(node);\n            }\n            if (isCancellationError(err)) {\n                return [];\n            }\n            throw err;\n        }\n        finally {\n            if (node.slow) {\n                node.slow = false;\n                this._onDidChangeNodeSlowState.fire(node);\n            }\n        }\n    }\n    doGetChildren(node) {\n        let result = this.refreshPromises.get(node);\n        if (result) {\n            return result;\n        }\n        const children = this.dataSource.getChildren(node.element);\n        if (isIterable(children)) {\n            return this.processChildren(children);\n        }\n        else {\n            result = createCancelablePromise(async () => this.processChildren(await children));\n            this.refreshPromises.set(node, result);\n            return result.finally(() => { this.refreshPromises.delete(node); });\n        }\n    }\n    _onDidChangeCollapseState({ node, deep }) {\n        if (node.element === null) {\n            return;\n        }\n        if (!node.collapsed && node.element.stale) {\n            if (deep) {\n                this.collapse(node.element.element);\n            }\n            else {\n                this.refreshAndRenderNode(node.element, false)\n                    .catch(onUnexpectedError);\n            }\n        }\n    }\n    setChildren(node, childrenElementsIterable, recursive, viewStateContext) {\n        const childrenElements = [...childrenElementsIterable];\n        // perf: if the node was and still is a leaf, avoid all this hassle\n        if (node.children.length === 0 && childrenElements.length === 0) {\n            return [];\n        }\n        const nodesToForget = new Map();\n        const childrenTreeNodesById = new Map();\n        for (const child of node.children) {\n            nodesToForget.set(child.element, child);\n            if (this.identityProvider) {\n                childrenTreeNodesById.set(child.id, { node: child, collapsed: this.tree.hasElement(child) && this.tree.isCollapsed(child) });\n            }\n        }\n        const childrenToRefresh = [];\n        const children = childrenElements.map(element => {\n            const hasChildren = !!this.dataSource.hasChildren(element);\n            if (!this.identityProvider) {\n                const asyncDataTreeNode = createAsyncDataTreeNode({ element, parent: node, hasChildren, defaultCollapseState: this.getDefaultCollapseState(element) });\n                if (hasChildren && asyncDataTreeNode.defaultCollapseState === ObjectTreeElementCollapseState.PreserveOrExpanded) {\n                    childrenToRefresh.push(asyncDataTreeNode);\n                }\n                return asyncDataTreeNode;\n            }\n            const id = this.identityProvider.getId(element).toString();\n            const result = childrenTreeNodesById.get(id);\n            if (result) {\n                const asyncDataTreeNode = result.node;\n                nodesToForget.delete(asyncDataTreeNode.element);\n                this.nodes.delete(asyncDataTreeNode.element);\n                this.nodes.set(element, asyncDataTreeNode);\n                asyncDataTreeNode.element = element;\n                asyncDataTreeNode.hasChildren = hasChildren;\n                if (recursive) {\n                    if (result.collapsed) {\n                        asyncDataTreeNode.children.forEach(node => dfs(node, node => this.nodes.delete(node.element)));\n                        asyncDataTreeNode.children.splice(0, asyncDataTreeNode.children.length);\n                        asyncDataTreeNode.stale = true;\n                    }\n                    else {\n                        childrenToRefresh.push(asyncDataTreeNode);\n                    }\n                }\n                else if (hasChildren && !result.collapsed) {\n                    childrenToRefresh.push(asyncDataTreeNode);\n                }\n                return asyncDataTreeNode;\n            }\n            const childAsyncDataTreeNode = createAsyncDataTreeNode({ element, parent: node, id, hasChildren, defaultCollapseState: this.getDefaultCollapseState(element) });\n            if (viewStateContext && viewStateContext.viewState.focus && viewStateContext.viewState.focus.indexOf(id) > -1) {\n                viewStateContext.focus.push(childAsyncDataTreeNode);\n            }\n            if (viewStateContext && viewStateContext.viewState.selection && viewStateContext.viewState.selection.indexOf(id) > -1) {\n                viewStateContext.selection.push(childAsyncDataTreeNode);\n            }\n            if (viewStateContext && viewStateContext.viewState.expanded && viewStateContext.viewState.expanded.indexOf(id) > -1) {\n                childrenToRefresh.push(childAsyncDataTreeNode);\n            }\n            else if (hasChildren && childAsyncDataTreeNode.defaultCollapseState === ObjectTreeElementCollapseState.PreserveOrExpanded) {\n                childrenToRefresh.push(childAsyncDataTreeNode);\n            }\n            return childAsyncDataTreeNode;\n        });\n        for (const node of nodesToForget.values()) {\n            dfs(node, node => this.nodes.delete(node.element));\n        }\n        for (const child of children) {\n            this.nodes.set(child.element, child);\n        }\n        node.children.splice(0, node.children.length, ...children);\n        // TODO@joao this doesn't take filter into account\n        if (node !== this.root && this.autoExpandSingleChildren && children.length === 1 && childrenToRefresh.length === 0) {\n            children[0].forceExpanded = true;\n            childrenToRefresh.push(children[0]);\n        }\n        return childrenToRefresh;\n    }\n    render(node, viewStateContext, options) {\n        const children = node.children.map(node => this.asTreeElement(node, viewStateContext));\n        const objectTreeOptions = options && {\n            ...options,\n            diffIdentityProvider: options.diffIdentityProvider && {\n                getId(node) {\n                    return options.diffIdentityProvider.getId(node.element);\n                }\n            }\n        };\n        this.tree.setChildren(node === this.root ? null : node, children, objectTreeOptions);\n        if (node !== this.root) {\n            this.tree.setCollapsible(node, node.hasChildren);\n        }\n        this._onDidRender.fire();\n    }\n    asTreeElement(node, viewStateContext) {\n        if (node.stale) {\n            return {\n                element: node,\n                collapsible: node.hasChildren,\n                collapsed: true\n            };\n        }\n        let collapsed;\n        if (viewStateContext && viewStateContext.viewState.expanded && node.id && viewStateContext.viewState.expanded.indexOf(node.id) > -1) {\n            collapsed = false;\n        }\n        else if (node.forceExpanded) {\n            collapsed = false;\n            node.forceExpanded = false;\n        }\n        else {\n            collapsed = node.defaultCollapseState;\n        }\n        return {\n            element: node,\n            children: node.hasChildren ? Iterable.map(node.children, child => this.asTreeElement(child, viewStateContext)) : [],\n            collapsible: node.hasChildren,\n            collapsed\n        };\n    }\n    processChildren(children) {\n        if (this.sorter) {\n            children = [...children].sort(this.sorter.compare.bind(this.sorter));\n        }\n        return children;\n    }\n    dispose() {\n        this.disposables.dispose();\n        this.tree.dispose();\n    }\n}\nclass CompressibleAsyncDataTreeNodeWrapper {\n    get element() {\n        return {\n            elements: this.node.element.elements.map(e => e.element),\n            incompressible: this.node.element.incompressible\n        };\n    }\n    get children() { return this.node.children.map(node => new CompressibleAsyncDataTreeNodeWrapper(node)); }\n    get depth() { return this.node.depth; }\n    get visibleChildrenCount() { return this.node.visibleChildrenCount; }\n    get visibleChildIndex() { return this.node.visibleChildIndex; }\n    get collapsible() { return this.node.collapsible; }\n    get collapsed() { return this.node.collapsed; }\n    get visible() { return this.node.visible; }\n    get filterData() { return this.node.filterData; }\n    constructor(node) {\n        this.node = node;\n    }\n}\nclass CompressibleAsyncDataTreeRenderer {\n    constructor(renderer, nodeMapper, compressibleNodeMapperProvider, onDidChangeTwistieState) {\n        this.renderer = renderer;\n        this.nodeMapper = nodeMapper;\n        this.compressibleNodeMapperProvider = compressibleNodeMapperProvider;\n        this.onDidChangeTwistieState = onDidChangeTwistieState;\n        this.renderedNodes = new Map();\n        this.disposables = [];\n        this.templateId = renderer.templateId;\n    }\n    renderTemplate(container) {\n        const templateData = this.renderer.renderTemplate(container);\n        return { templateData };\n    }\n    renderElement(node, index, templateData, height) {\n        this.renderer.renderElement(this.nodeMapper.map(node), index, templateData.templateData, height);\n    }\n    renderCompressedElements(node, index, templateData, height) {\n        this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(node), index, templateData.templateData, height);\n    }\n    renderTwistie(element, twistieElement) {\n        if (element.slow) {\n            twistieElement.classList.add(...ThemeIcon.asClassNameArray(Codicon.treeItemLoading));\n            return true;\n        }\n        else {\n            twistieElement.classList.remove(...ThemeIcon.asClassNameArray(Codicon.treeItemLoading));\n            return false;\n        }\n    }\n    disposeElement(node, index, templateData, height) {\n        this.renderer.disposeElement?.(this.nodeMapper.map(node), index, templateData.templateData, height);\n    }\n    disposeCompressedElements(node, index, templateData, height) {\n        this.renderer.disposeCompressedElements?.(this.compressibleNodeMapperProvider().map(node), index, templateData.templateData, height);\n    }\n    disposeTemplate(templateData) {\n        this.renderer.disposeTemplate(templateData.templateData);\n    }\n    dispose() {\n        this.renderedNodes.clear();\n        this.disposables = dispose(this.disposables);\n    }\n}\nfunction asCompressibleObjectTreeOptions(options) {\n    const objectTreeOptions = options && asObjectTreeOptions(options);\n    return objectTreeOptions && {\n        ...objectTreeOptions,\n        keyboardNavigationLabelProvider: objectTreeOptions.keyboardNavigationLabelProvider && {\n            ...objectTreeOptions.keyboardNavigationLabelProvider,\n            getCompressedNodeKeyboardNavigationLabel(els) {\n                return options.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(els.map(e => e.element));\n            }\n        }\n    };\n}\nexport class CompressibleAsyncDataTree extends AsyncDataTree {\n    constructor(user, container, virtualDelegate, compressionDelegate, renderers, dataSource, options = {}) {\n        super(user, container, virtualDelegate, renderers, dataSource, options);\n        this.compressionDelegate = compressionDelegate;\n        this.compressibleNodeMapper = new WeakMapper(node => new CompressibleAsyncDataTreeNodeWrapper(node));\n        this.filter = options.filter;\n    }\n    createTree(user, container, delegate, renderers, options) {\n        const objectTreeDelegate = new ComposedTreeDelegate(delegate);\n        const objectTreeRenderers = renderers.map(r => new CompressibleAsyncDataTreeRenderer(r, this.nodeMapper, () => this.compressibleNodeMapper, this._onDidChangeNodeSlowState.event));\n        const objectTreeOptions = asCompressibleObjectTreeOptions(options) || {};\n        return new CompressibleObjectTree(user, container, objectTreeDelegate, objectTreeRenderers, objectTreeOptions);\n    }\n    asTreeElement(node, viewStateContext) {\n        return {\n            incompressible: this.compressionDelegate.isIncompressible(node.element),\n            ...super.asTreeElement(node, viewStateContext)\n        };\n    }\n    updateOptions(options = {}) {\n        this.tree.updateOptions(options);\n    }\n    render(node, viewStateContext, options) {\n        if (!this.identityProvider) {\n            return super.render(node, viewStateContext);\n        }\n        // Preserve traits across compressions. Hacky but does the trick.\n        // This is hard to fix properly since it requires rewriting the traits\n        // across trees and lists. Let's just keep it this way for now.\n        const getId = (element) => this.identityProvider.getId(element).toString();\n        const getUncompressedIds = (nodes) => {\n            const result = new Set();\n            for (const node of nodes) {\n                const compressedNode = this.tree.getCompressedTreeNode(node === this.root ? null : node);\n                if (!compressedNode.element) {\n                    continue;\n                }\n                for (const node of compressedNode.element.elements) {\n                    result.add(getId(node.element));\n                }\n            }\n            return result;\n        };\n        const oldSelection = getUncompressedIds(this.tree.getSelection());\n        const oldFocus = getUncompressedIds(this.tree.getFocus());\n        super.render(node, viewStateContext, options);\n        const selection = this.getSelection();\n        let didChangeSelection = false;\n        const focus = this.getFocus();\n        let didChangeFocus = false;\n        const visit = (node) => {\n            const compressedNode = node.element;\n            if (compressedNode) {\n                for (let i = 0; i < compressedNode.elements.length; i++) {\n                    const id = getId(compressedNode.elements[i].element);\n                    const element = compressedNode.elements[compressedNode.elements.length - 1].element;\n                    // github.com/microsoft/vscode/issues/85938\n                    if (oldSelection.has(id) && selection.indexOf(element) === -1) {\n                        selection.push(element);\n                        didChangeSelection = true;\n                    }\n                    if (oldFocus.has(id) && focus.indexOf(element) === -1) {\n                        focus.push(element);\n                        didChangeFocus = true;\n                    }\n                }\n            }\n            node.children.forEach(visit);\n        };\n        visit(this.tree.getCompressedTreeNode(node === this.root ? null : node));\n        if (didChangeSelection) {\n            this.setSelection(selection);\n        }\n        if (didChangeFocus) {\n            this.setFocus(focus);\n        }\n    }\n    // For compressed async data trees, `TreeVisibility.Recurse` doesn't currently work\n    // and we have to filter everything beforehand\n    // Related to #85193 and #85835\n    processChildren(children) {\n        if (this.filter) {\n            children = Iterable.filter(children, e => {\n                const result = this.filter.filter(e, 1 /* TreeVisibility.Visible */);\n                const visibility = getVisibility(result);\n                if (visibility === 2 /* TreeVisibility.Recurse */) {\n                    throw new Error('Recursive tree visibility not supported in async data compressed trees');\n                }\n                return visibility === 1 /* TreeVisibility.Visible */;\n            });\n        }\n        return super.processChildren(children);\n    }\n}\nfunction getVisibility(filterResult) {\n    if (typeof filterResult === 'boolean') {\n        return filterResult ? 1 /* TreeVisibility.Visible */ : 0 /* TreeVisibility.Hidden */;\n    }\n    else if (isFilterResult(filterResult)) {\n        return getVisibleState(filterResult.visibility);\n    }\n    else {\n        return getVisibleState(filterResult);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { AbstractTree } from './abstractTree.js';\nimport { ObjectTreeModel } from './objectTreeModel.js';\nexport class DataTree extends AbstractTree {\n    constructor(user, container, delegate, renderers, dataSource, options = {}) {\n        super(user, container, delegate, renderers, options);\n        this.user = user;\n        this.dataSource = dataSource;\n        this.identityProvider = options.identityProvider;\n    }\n    createModel(user, view, options) {\n        return new ObjectTreeModel(user, view, options);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { getBaseLayerHoverDelegate } from '../hover/hoverDelegate2.js';\nimport { getDefaultHoverDelegate } from '../hover/hoverDelegateFactory.js';\nimport { renderLabelWithIcons } from '../iconLabel/iconLabels.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport * as objects from '../../../common/objects.js';\n/**\n * A widget which can render a label with substring highlights, often\n * originating from a filter function like the fuzzy matcher.\n */\nexport class HighlightedLabel extends Disposable {\n    /**\n     * Create a new {@link HighlightedLabel}.\n     *\n     * @param container The parent container to append to.\n     */\n    constructor(container, options) {\n        super();\n        this.options = options;\n        this.text = '';\n        this.title = '';\n        this.highlights = [];\n        this.didEverRender = false;\n        this.supportIcons = options?.supportIcons ?? false;\n        this.domNode = dom.append(container, dom.$('span.monaco-highlighted-label'));\n    }\n    /**\n     * The label's DOM node.\n     */\n    get element() {\n        return this.domNode;\n    }\n    /**\n     * Set the label and highlights.\n     *\n     * @param text The label to display.\n     * @param highlights The ranges to highlight.\n     * @param title An optional title for the hover tooltip.\n     * @param escapeNewLines Whether to escape new lines.\n     * @returns\n     */\n    set(text, highlights = [], title = '', escapeNewLines) {\n        if (!text) {\n            text = '';\n        }\n        if (escapeNewLines) {\n            // adjusts highlights inplace\n            text = HighlightedLabel.escapeNewLines(text, highlights);\n        }\n        if (this.didEverRender && this.text === text && this.title === title && objects.equals(this.highlights, highlights)) {\n            return;\n        }\n        this.text = text;\n        this.title = title;\n        this.highlights = highlights;\n        this.render();\n    }\n    render() {\n        const children = [];\n        let pos = 0;\n        for (const highlight of this.highlights) {\n            if (highlight.end === highlight.start) {\n                continue;\n            }\n            if (pos < highlight.start) {\n                const substring = this.text.substring(pos, highlight.start);\n                if (this.supportIcons) {\n                    children.push(...renderLabelWithIcons(substring));\n                }\n                else {\n                    children.push(substring);\n                }\n                pos = highlight.start;\n            }\n            const substring = this.text.substring(pos, highlight.end);\n            const element = dom.$('span.highlight', undefined, ...this.supportIcons ? renderLabelWithIcons(substring) : [substring]);\n            if (highlight.extraClasses) {\n                element.classList.add(...highlight.extraClasses);\n            }\n            children.push(element);\n            pos = highlight.end;\n        }\n        if (pos < this.text.length) {\n            const substring = this.text.substring(pos);\n            if (this.supportIcons) {\n                children.push(...renderLabelWithIcons(substring));\n            }\n            else {\n                children.push(substring);\n            }\n        }\n        dom.reset(this.domNode, ...children);\n        if (this.options?.hoverDelegate?.showNativeHover) {\n            /* While custom hover is not inside custom hover */\n            this.domNode.title = this.title;\n        }\n        else {\n            if (!this.customHover && this.title !== '') {\n                const hoverDelegate = this.options?.hoverDelegate ?? getDefaultHoverDelegate('mouse');\n                this.customHover = this._register(getBaseLayerHoverDelegate().setupManagedHover(hoverDelegate, this.domNode, this.title));\n            }\n            else if (this.customHover) {\n                this.customHover.update(this.title);\n            }\n        }\n        this.didEverRender = true;\n    }\n    static escapeNewLines(text, highlights) {\n        let total = 0;\n        let extra = 0;\n        return text.replace(/\\r\\n|\\r|\\n/g, (match, offset) => {\n            extra = match === '\\r\\n' ? -1 : 0;\n            offset += total;\n            for (const highlight of highlights) {\n                if (highlight.end <= offset) {\n                    continue;\n                }\n                if (highlight.start >= offset) {\n                    highlight.start += extra;\n                }\n                if (highlight.end >= offset) {\n                    highlight.end += extra;\n                }\n            }\n            total += extra;\n            return '\\u23CE';\n        });\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './iconlabel.css';\nimport * as dom from '../../dom.js';\nimport { HighlightedLabel } from '../highlightedlabel/highlightedLabel.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport { equals } from '../../../common/objects.js';\nimport { Range } from '../../../common/range.js';\nimport { getDefaultHoverDelegate } from '../hover/hoverDelegateFactory.js';\nimport { getBaseLayerHoverDelegate } from '../hover/hoverDelegate2.js';\nimport { isString } from '../../../common/types.js';\nimport { stripIcons } from '../../../common/iconLabels.js';\nclass FastLabelNode {\n    constructor(_element) {\n        this._element = _element;\n    }\n    get element() {\n        return this._element;\n    }\n    set textContent(content) {\n        if (this.disposed || content === this._textContent) {\n            return;\n        }\n        this._textContent = content;\n        this._element.textContent = content;\n    }\n    set classNames(classNames) {\n        if (this.disposed || equals(classNames, this._classNames)) {\n            return;\n        }\n        this._classNames = classNames;\n        this._element.classList.value = '';\n        this._element.classList.add(...classNames);\n    }\n    set empty(empty) {\n        if (this.disposed || empty === this._empty) {\n            return;\n        }\n        this._empty = empty;\n        this._element.style.marginLeft = empty ? '0' : '';\n    }\n    dispose() {\n        this.disposed = true;\n    }\n}\nexport class IconLabel extends Disposable {\n    constructor(container, options) {\n        super();\n        this.customHovers = new Map();\n        this.creationOptions = options;\n        this.domNode = this._register(new FastLabelNode(dom.append(container, dom.$('.monaco-icon-label'))));\n        this.labelContainer = dom.append(this.domNode.element, dom.$('.monaco-icon-label-container'));\n        this.nameContainer = dom.append(this.labelContainer, dom.$('span.monaco-icon-name-container'));\n        if (options?.supportHighlights || options?.supportIcons) {\n            this.nameNode = this._register(new LabelWithHighlights(this.nameContainer, !!options.supportIcons));\n        }\n        else {\n            this.nameNode = new Label(this.nameContainer);\n        }\n        this.hoverDelegate = options?.hoverDelegate ?? getDefaultHoverDelegate('mouse');\n    }\n    get element() {\n        return this.domNode.element;\n    }\n    setLabel(label, description, options) {\n        const labelClasses = ['monaco-icon-label'];\n        const containerClasses = ['monaco-icon-label-container'];\n        let ariaLabel = '';\n        if (options) {\n            if (options.extraClasses) {\n                labelClasses.push(...options.extraClasses);\n            }\n            if (options.italic) {\n                labelClasses.push('italic');\n            }\n            if (options.strikethrough) {\n                labelClasses.push('strikethrough');\n            }\n            if (options.disabledCommand) {\n                containerClasses.push('disabled');\n            }\n            if (options.title) {\n                if (typeof options.title === 'string') {\n                    ariaLabel += options.title;\n                }\n                else {\n                    ariaLabel += label;\n                }\n            }\n        }\n        const existingIconNode = this.domNode.element.querySelector('.monaco-icon-label-iconpath');\n        if (options?.iconPath) {\n            let iconNode;\n            if (!existingIconNode || !(dom.isHTMLElement(existingIconNode))) {\n                iconNode = dom.$('.monaco-icon-label-iconpath');\n                this.domNode.element.prepend(iconNode);\n            }\n            else {\n                iconNode = existingIconNode;\n            }\n            iconNode.style.backgroundImage = dom.asCSSUrl(options?.iconPath);\n        }\n        else if (existingIconNode) {\n            existingIconNode.remove();\n        }\n        this.domNode.classNames = labelClasses;\n        this.domNode.element.setAttribute('aria-label', ariaLabel);\n        this.labelContainer.classList.value = '';\n        this.labelContainer.classList.add(...containerClasses);\n        this.setupHover(options?.descriptionTitle ? this.labelContainer : this.element, options?.title);\n        this.nameNode.setLabel(label, options);\n        if (description || this.descriptionNode) {\n            const descriptionNode = this.getOrCreateDescriptionNode();\n            if (descriptionNode instanceof HighlightedLabel) {\n                descriptionNode.set(description || '', options ? options.descriptionMatches : undefined, undefined, options?.labelEscapeNewLines);\n                this.setupHover(descriptionNode.element, options?.descriptionTitle);\n            }\n            else {\n                descriptionNode.textContent = description && options?.labelEscapeNewLines ? HighlightedLabel.escapeNewLines(description, []) : (description || '');\n                this.setupHover(descriptionNode.element, options?.descriptionTitle || '');\n                descriptionNode.empty = !description;\n            }\n        }\n        if (options?.suffix || this.suffixNode) {\n            const suffixNode = this.getOrCreateSuffixNode();\n            suffixNode.textContent = options?.suffix ?? '';\n        }\n    }\n    setupHover(htmlElement, tooltip) {\n        const previousCustomHover = this.customHovers.get(htmlElement);\n        if (previousCustomHover) {\n            previousCustomHover.dispose();\n            this.customHovers.delete(htmlElement);\n        }\n        if (!tooltip) {\n            htmlElement.removeAttribute('title');\n            return;\n        }\n        if (this.hoverDelegate.showNativeHover) {\n            function setupNativeHover(htmlElement, tooltip) {\n                if (isString(tooltip)) {\n                    // Icons don't render in the native hover so we strip them out\n                    htmlElement.title = stripIcons(tooltip);\n                }\n                else if (tooltip?.markdownNotSupportedFallback) {\n                    htmlElement.title = tooltip.markdownNotSupportedFallback;\n                }\n                else {\n                    htmlElement.removeAttribute('title');\n                }\n            }\n            setupNativeHover(htmlElement, tooltip);\n        }\n        else {\n            const hoverDisposable = getBaseLayerHoverDelegate().setupManagedHover(this.hoverDelegate, htmlElement, tooltip);\n            if (hoverDisposable) {\n                this.customHovers.set(htmlElement, hoverDisposable);\n            }\n        }\n    }\n    dispose() {\n        super.dispose();\n        for (const disposable of this.customHovers.values()) {\n            disposable.dispose();\n        }\n        this.customHovers.clear();\n    }\n    getOrCreateSuffixNode() {\n        if (!this.suffixNode) {\n            const suffixContainer = this._register(new FastLabelNode(dom.after(this.nameContainer, dom.$('span.monaco-icon-suffix-container'))));\n            this.suffixNode = this._register(new FastLabelNode(dom.append(suffixContainer.element, dom.$('span.label-suffix'))));\n        }\n        return this.suffixNode;\n    }\n    getOrCreateDescriptionNode() {\n        if (!this.descriptionNode) {\n            const descriptionContainer = this._register(new FastLabelNode(dom.append(this.labelContainer, dom.$('span.monaco-icon-description-container'))));\n            if (this.creationOptions?.supportDescriptionHighlights) {\n                this.descriptionNode = this._register(new HighlightedLabel(dom.append(descriptionContainer.element, dom.$('span.label-description')), { supportIcons: !!this.creationOptions.supportIcons }));\n            }\n            else {\n                this.descriptionNode = this._register(new FastLabelNode(dom.append(descriptionContainer.element, dom.$('span.label-description'))));\n            }\n        }\n        return this.descriptionNode;\n    }\n}\nclass Label {\n    constructor(container) {\n        this.container = container;\n        this.label = undefined;\n        this.singleLabel = undefined;\n    }\n    setLabel(label, options) {\n        if (this.label === label && equals(this.options, options)) {\n            return;\n        }\n        this.label = label;\n        this.options = options;\n        if (typeof label === 'string') {\n            if (!this.singleLabel) {\n                this.container.innerText = '';\n                this.container.classList.remove('multiple');\n                this.singleLabel = dom.append(this.container, dom.$('a.label-name', { id: options?.domId }));\n            }\n            this.singleLabel.textContent = label;\n        }\n        else {\n            this.container.innerText = '';\n            this.container.classList.add('multiple');\n            this.singleLabel = undefined;\n            for (let i = 0; i < label.length; i++) {\n                const l = label[i];\n                const id = options?.domId && `${options?.domId}_${i}`;\n                dom.append(this.container, dom.$('a.label-name', { id, 'data-icon-label-count': label.length, 'data-icon-label-index': i, 'role': 'treeitem' }, l));\n                if (i < label.length - 1) {\n                    dom.append(this.container, dom.$('span.label-separator', undefined, options?.separator || '/'));\n                }\n            }\n        }\n    }\n}\nfunction splitMatches(labels, separator, matches) {\n    if (!matches) {\n        return undefined;\n    }\n    let labelStart = 0;\n    return labels.map(label => {\n        const labelRange = { start: labelStart, end: labelStart + label.length };\n        const result = matches\n            .map(match => Range.intersect(labelRange, match))\n            .filter(range => !Range.isEmpty(range))\n            .map(({ start, end }) => ({ start: start - labelStart, end: end - labelStart }));\n        labelStart = labelRange.end + separator.length;\n        return result;\n    });\n}\nclass LabelWithHighlights extends Disposable {\n    constructor(container, supportIcons) {\n        super();\n        this.container = container;\n        this.supportIcons = supportIcons;\n        this.label = undefined;\n        this.singleLabel = undefined;\n    }\n    setLabel(label, options) {\n        if (this.label === label && equals(this.options, options)) {\n            return;\n        }\n        this.label = label;\n        this.options = options;\n        if (typeof label === 'string') {\n            if (!this.singleLabel) {\n                this.container.innerText = '';\n                this.container.classList.remove('multiple');\n                this.singleLabel = this._register(new HighlightedLabel(dom.append(this.container, dom.$('a.label-name', { id: options?.domId })), { supportIcons: this.supportIcons }));\n            }\n            this.singleLabel.set(label, options?.matches, undefined, options?.labelEscapeNewLines);\n        }\n        else {\n            this.container.innerText = '';\n            this.container.classList.add('multiple');\n            this.singleLabel = undefined;\n            const separator = options?.separator || '/';\n            const matches = splitMatches(label, separator, options?.matches);\n            for (let i = 0; i < label.length; i++) {\n                const l = label[i];\n                const m = matches ? matches[i] : undefined;\n                const id = options?.domId && `${options?.domId}_${i}`;\n                const name = dom.$('a.label-name', { id, 'data-icon-label-count': label.length, 'data-icon-label-index': i, 'role': 'treeitem' });\n                const highlightedLabel = this._register(new HighlightedLabel(dom.append(this.container, name), { supportIcons: this.supportIcons }));\n                highlightedLabel.set(l, m, undefined, options?.labelEscapeNewLines);\n                if (i < label.length - 1) {\n                    dom.append(name, dom.$('span.label-separator', undefined, separator));\n                }\n            }\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { getBaseLayerHoverDelegate } from '../hover/hoverDelegate2.js';\nimport { getDefaultHoverDelegate } from '../hover/hoverDelegateFactory.js';\nimport { UILabelProvider } from '../../../common/keybindingLabels.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport { equals } from '../../../common/objects.js';\nimport './keybindingLabel.css';\nimport { localize } from '../../../../nls.js';\nconst $ = dom.$;\nexport const unthemedKeybindingLabelOptions = {\n    keybindingLabelBackground: undefined,\n    keybindingLabelForeground: undefined,\n    keybindingLabelBorder: undefined,\n    keybindingLabelBottomBorder: undefined,\n    keybindingLabelShadow: undefined\n};\nexport class KeybindingLabel extends Disposable {\n    constructor(container, os, options) {\n        super();\n        this.os = os;\n        this.keyElements = new Set();\n        this.options = options || Object.create(null);\n        const labelForeground = this.options.keybindingLabelForeground;\n        this.domNode = dom.append(container, $('.monaco-keybinding'));\n        if (labelForeground) {\n            this.domNode.style.color = labelForeground;\n        }\n        this.hover = this._register(getBaseLayerHoverDelegate().setupManagedHover(getDefaultHoverDelegate('mouse'), this.domNode, ''));\n        this.didEverRender = false;\n        container.appendChild(this.domNode);\n    }\n    get element() {\n        return this.domNode;\n    }\n    set(keybinding, matches) {\n        if (this.didEverRender && this.keybinding === keybinding && KeybindingLabel.areSame(this.matches, matches)) {\n            return;\n        }\n        this.keybinding = keybinding;\n        this.matches = matches;\n        this.render();\n    }\n    render() {\n        this.clear();\n        if (this.keybinding) {\n            const chords = this.keybinding.getChords();\n            if (chords[0]) {\n                this.renderChord(this.domNode, chords[0], this.matches ? this.matches.firstPart : null);\n            }\n            for (let i = 1; i < chords.length; i++) {\n                dom.append(this.domNode, $('span.monaco-keybinding-key-chord-separator', undefined, ' '));\n                this.renderChord(this.domNode, chords[i], this.matches ? this.matches.chordPart : null);\n            }\n            const title = (this.options.disableTitle ?? false) ? undefined : this.keybinding.getAriaLabel() || undefined;\n            this.hover.update(title);\n            this.domNode.setAttribute('aria-label', title || '');\n        }\n        else if (this.options && this.options.renderUnboundKeybindings) {\n            this.renderUnbound(this.domNode);\n        }\n        this.didEverRender = true;\n    }\n    clear() {\n        dom.clearNode(this.domNode);\n        this.keyElements.clear();\n    }\n    renderChord(parent, chord, match) {\n        const modifierLabels = UILabelProvider.modifierLabels[this.os];\n        if (chord.ctrlKey) {\n            this.renderKey(parent, modifierLabels.ctrlKey, Boolean(match?.ctrlKey), modifierLabels.separator);\n        }\n        if (chord.shiftKey) {\n            this.renderKey(parent, modifierLabels.shiftKey, Boolean(match?.shiftKey), modifierLabels.separator);\n        }\n        if (chord.altKey) {\n            this.renderKey(parent, modifierLabels.altKey, Boolean(match?.altKey), modifierLabels.separator);\n        }\n        if (chord.metaKey) {\n            this.renderKey(parent, modifierLabels.metaKey, Boolean(match?.metaKey), modifierLabels.separator);\n        }\n        const keyLabel = chord.keyLabel;\n        if (keyLabel) {\n            this.renderKey(parent, keyLabel, Boolean(match?.keyCode), '');\n        }\n    }\n    renderKey(parent, label, highlight, separator) {\n        dom.append(parent, this.createKeyElement(label, highlight ? '.highlight' : ''));\n        if (separator) {\n            dom.append(parent, $('span.monaco-keybinding-key-separator', undefined, separator));\n        }\n    }\n    renderUnbound(parent) {\n        dom.append(parent, this.createKeyElement(localize('unbound', \"Unbound\")));\n    }\n    createKeyElement(label, extraClass = '') {\n        const keyElement = $('span.monaco-keybinding-key' + extraClass, undefined, label);\n        this.keyElements.add(keyElement);\n        if (this.options.keybindingLabelBackground) {\n            keyElement.style.backgroundColor = this.options.keybindingLabelBackground;\n        }\n        if (this.options.keybindingLabelBorder) {\n            keyElement.style.borderColor = this.options.keybindingLabelBorder;\n        }\n        if (this.options.keybindingLabelBottomBorder) {\n            keyElement.style.borderBottomColor = this.options.keybindingLabelBottomBorder;\n        }\n        if (this.options.keybindingLabelShadow) {\n            keyElement.style.boxShadow = `inset 0 -1px 0 ${this.options.keybindingLabelShadow}`;\n        }\n        return keyElement;\n    }\n    static areSame(a, b) {\n        if (a === b || (!a && !b)) {\n            return true;\n        }\n        return !!a && !!b && equals(a.firstPart, b.firstPart) && equals(a.chordPart, b.chordPart);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './mouseCursor.css';\nexport const MOUSE_CURSOR_TEXT_CSS_CLASS_NAME = `monaco-mouse-cursor-text`;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { ActionBar } from '../actionbar/actionbar.js';\nimport { DropdownMenuActionViewItem } from '../dropdown/dropdownActionViewItem.js';\nimport { Action, SubmenuAction } from '../../../common/actions.js';\nimport { Codicon } from '../../../common/codicons.js';\nimport { ThemeIcon } from '../../../common/themables.js';\nimport { EventMultiplexer } from '../../../common/event.js';\nimport { Disposable, DisposableStore } from '../../../common/lifecycle.js';\nimport './toolbar.css';\nimport * as nls from '../../../../nls.js';\nimport { createInstantHoverDelegate } from '../hover/hoverDelegateFactory.js';\n/**\n * A widget that combines an action bar for primary actions and a dropdown for secondary actions.\n */\nexport class ToolBar extends Disposable {\n    constructor(container, contextMenuProvider, options = { orientation: 0 /* ActionsOrientation.HORIZONTAL */ }) {\n        super();\n        this.submenuActionViewItems = [];\n        this.hasSecondaryActions = false;\n        this._onDidChangeDropdownVisibility = this._register(new EventMultiplexer());\n        this.onDidChangeDropdownVisibility = this._onDidChangeDropdownVisibility.event;\n        this.disposables = this._register(new DisposableStore());\n        options.hoverDelegate = options.hoverDelegate ?? this._register(createInstantHoverDelegate());\n        this.options = options;\n        this.toggleMenuAction = this._register(new ToggleMenuAction(() => this.toggleMenuActionViewItem?.show(), options.toggleMenuTitle));\n        this.element = document.createElement('div');\n        this.element.className = 'monaco-toolbar';\n        container.appendChild(this.element);\n        this.actionBar = this._register(new ActionBar(this.element, {\n            orientation: options.orientation,\n            ariaLabel: options.ariaLabel,\n            actionRunner: options.actionRunner,\n            allowContextMenu: options.allowContextMenu,\n            highlightToggledItems: options.highlightToggledItems,\n            hoverDelegate: options.hoverDelegate,\n            actionViewItemProvider: (action, viewItemOptions) => {\n                if (action.id === ToggleMenuAction.ID) {\n                    this.toggleMenuActionViewItem = new DropdownMenuActionViewItem(action, action.menuActions, contextMenuProvider, {\n                        actionViewItemProvider: this.options.actionViewItemProvider,\n                        actionRunner: this.actionRunner,\n                        keybindingProvider: this.options.getKeyBinding,\n                        classNames: ThemeIcon.asClassNameArray(options.moreIcon ?? Codicon.toolBarMore),\n                        anchorAlignmentProvider: this.options.anchorAlignmentProvider,\n                        menuAsChild: !!this.options.renderDropdownAsChildElement,\n                        skipTelemetry: this.options.skipTelemetry,\n                        isMenu: true,\n                        hoverDelegate: this.options.hoverDelegate\n                    });\n                    this.toggleMenuActionViewItem.setActionContext(this.actionBar.context);\n                    this.disposables.add(this._onDidChangeDropdownVisibility.add(this.toggleMenuActionViewItem.onDidChangeVisibility));\n                    return this.toggleMenuActionViewItem;\n                }\n                if (options.actionViewItemProvider) {\n                    const result = options.actionViewItemProvider(action, viewItemOptions);\n                    if (result) {\n                        return result;\n                    }\n                }\n                if (action instanceof SubmenuAction) {\n                    const result = new DropdownMenuActionViewItem(action, action.actions, contextMenuProvider, {\n                        actionViewItemProvider: this.options.actionViewItemProvider,\n                        actionRunner: this.actionRunner,\n                        keybindingProvider: this.options.getKeyBinding,\n                        classNames: action.class,\n                        anchorAlignmentProvider: this.options.anchorAlignmentProvider,\n                        menuAsChild: !!this.options.renderDropdownAsChildElement,\n                        skipTelemetry: this.options.skipTelemetry,\n                        hoverDelegate: this.options.hoverDelegate\n                    });\n                    result.setActionContext(this.actionBar.context);\n                    this.submenuActionViewItems.push(result);\n                    this.disposables.add(this._onDidChangeDropdownVisibility.add(result.onDidChangeVisibility));\n                    return result;\n                }\n                return undefined;\n            }\n        }));\n    }\n    set actionRunner(actionRunner) {\n        this.actionBar.actionRunner = actionRunner;\n    }\n    get actionRunner() {\n        return this.actionBar.actionRunner;\n    }\n    getElement() {\n        return this.element;\n    }\n    getItemAction(indexOrElement) {\n        return this.actionBar.getAction(indexOrElement);\n    }\n    setActions(primaryActions, secondaryActions) {\n        this.clear();\n        const primaryActionsToSet = primaryActions ? primaryActions.slice(0) : [];\n        // Inject additional action to open secondary actions if present\n        this.hasSecondaryActions = !!(secondaryActions && secondaryActions.length > 0);\n        if (this.hasSecondaryActions && secondaryActions) {\n            this.toggleMenuAction.menuActions = secondaryActions.slice(0);\n            primaryActionsToSet.push(this.toggleMenuAction);\n        }\n        primaryActionsToSet.forEach(action => {\n            this.actionBar.push(action, { icon: this.options.icon ?? true, label: this.options.label ?? false, keybinding: this.getKeybindingLabel(action) });\n        });\n    }\n    getKeybindingLabel(action) {\n        const key = this.options.getKeyBinding?.(action);\n        return key?.getLabel() ?? undefined;\n    }\n    clear() {\n        this.submenuActionViewItems = [];\n        this.disposables.clear();\n        this.actionBar.clear();\n    }\n    dispose() {\n        this.clear();\n        this.disposables.dispose();\n        super.dispose();\n    }\n}\nexport class ToggleMenuAction extends Action {\n    static { this.ID = 'toolbar.toggle.more'; }\n    constructor(toggleDropdownMenu, title) {\n        title = title || nls.localize('moreActions', \"More Actions...\");\n        super(ToggleMenuAction.ID, title, undefined, true);\n        this._menuActions = [];\n        this.toggleDropdownMenu = toggleDropdownMenu;\n    }\n    async run() {\n        this.toggleDropdownMenu();\n    }\n    get menuActions() {\n        return this._menuActions;\n    }\n    set menuActions(actions) {\n        this._menuActions = actions;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Dimension } from '../../dom.js';\nimport { OrthogonalEdge, Sash } from '../sash/sash.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { DisposableStore } from '../../../common/lifecycle.js';\nexport class ResizableHTMLElement {\n    constructor() {\n        this._onDidWillResize = new Emitter();\n        this.onDidWillResize = this._onDidWillResize.event;\n        this._onDidResize = new Emitter();\n        this.onDidResize = this._onDidResize.event;\n        this._sashListener = new DisposableStore();\n        this._size = new Dimension(0, 0);\n        this._minSize = new Dimension(0, 0);\n        this._maxSize = new Dimension(Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER);\n        this.domNode = document.createElement('div');\n        this._eastSash = new Sash(this.domNode, { getVerticalSashLeft: () => this._size.width }, { orientation: 0 /* Orientation.VERTICAL */ });\n        this._westSash = new Sash(this.domNode, { getVerticalSashLeft: () => 0 }, { orientation: 0 /* Orientation.VERTICAL */ });\n        this._northSash = new Sash(this.domNode, { getHorizontalSashTop: () => 0 }, { orientation: 1 /* Orientation.HORIZONTAL */, orthogonalEdge: OrthogonalEdge.North });\n        this._southSash = new Sash(this.domNode, { getHorizontalSashTop: () => this._size.height }, { orientation: 1 /* Orientation.HORIZONTAL */, orthogonalEdge: OrthogonalEdge.South });\n        this._northSash.orthogonalStartSash = this._westSash;\n        this._northSash.orthogonalEndSash = this._eastSash;\n        this._southSash.orthogonalStartSash = this._westSash;\n        this._southSash.orthogonalEndSash = this._eastSash;\n        let currentSize;\n        let deltaY = 0;\n        let deltaX = 0;\n        this._sashListener.add(Event.any(this._northSash.onDidStart, this._eastSash.onDidStart, this._southSash.onDidStart, this._westSash.onDidStart)(() => {\n            if (currentSize === undefined) {\n                this._onDidWillResize.fire();\n                currentSize = this._size;\n                deltaY = 0;\n                deltaX = 0;\n            }\n        }));\n        this._sashListener.add(Event.any(this._northSash.onDidEnd, this._eastSash.onDidEnd, this._southSash.onDidEnd, this._westSash.onDidEnd)(() => {\n            if (currentSize !== undefined) {\n                currentSize = undefined;\n                deltaY = 0;\n                deltaX = 0;\n                this._onDidResize.fire({ dimension: this._size, done: true });\n            }\n        }));\n        this._sashListener.add(this._eastSash.onDidChange(e => {\n            if (currentSize) {\n                deltaX = e.currentX - e.startX;\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n                this._onDidResize.fire({ dimension: this._size, done: false, east: true });\n            }\n        }));\n        this._sashListener.add(this._westSash.onDidChange(e => {\n            if (currentSize) {\n                deltaX = -(e.currentX - e.startX);\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n                this._onDidResize.fire({ dimension: this._size, done: false, west: true });\n            }\n        }));\n        this._sashListener.add(this._northSash.onDidChange(e => {\n            if (currentSize) {\n                deltaY = -(e.currentY - e.startY);\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n                this._onDidResize.fire({ dimension: this._size, done: false, north: true });\n            }\n        }));\n        this._sashListener.add(this._southSash.onDidChange(e => {\n            if (currentSize) {\n                deltaY = e.currentY - e.startY;\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n                this._onDidResize.fire({ dimension: this._size, done: false, south: true });\n            }\n        }));\n        this._sashListener.add(Event.any(this._eastSash.onDidReset, this._westSash.onDidReset)(e => {\n            if (this._preferredSize) {\n                this.layout(this._size.height, this._preferredSize.width);\n                this._onDidResize.fire({ dimension: this._size, done: true });\n            }\n        }));\n        this._sashListener.add(Event.any(this._northSash.onDidReset, this._southSash.onDidReset)(e => {\n            if (this._preferredSize) {\n                this.layout(this._preferredSize.height, this._size.width);\n                this._onDidResize.fire({ dimension: this._size, done: true });\n            }\n        }));\n    }\n    dispose() {\n        this._northSash.dispose();\n        this._southSash.dispose();\n        this._eastSash.dispose();\n        this._westSash.dispose();\n        this._sashListener.dispose();\n        this._onDidResize.dispose();\n        this._onDidWillResize.dispose();\n        this.domNode.remove();\n    }\n    enableSashes(north, east, south, west) {\n        this._northSash.state = north ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\n        this._eastSash.state = east ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\n        this._southSash.state = south ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\n        this._westSash.state = west ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\n    }\n    layout(height = this.size.height, width = this.size.width) {\n        const { height: minHeight, width: minWidth } = this._minSize;\n        const { height: maxHeight, width: maxWidth } = this._maxSize;\n        height = Math.max(minHeight, Math.min(maxHeight, height));\n        width = Math.max(minWidth, Math.min(maxWidth, width));\n        const newSize = new Dimension(width, height);\n        if (!Dimension.equals(newSize, this._size)) {\n            this.domNode.style.height = height + 'px';\n            this.domNode.style.width = width + 'px';\n            this._size = newSize;\n            this._northSash.layout();\n            this._eastSash.layout();\n            this._southSash.layout();\n            this._westSash.layout();\n        }\n    }\n    clearSashHoverState() {\n        this._eastSash.clearSashHoverState();\n        this._westSash.clearSashHoverState();\n        this._northSash.clearSashHoverState();\n        this._southSash.clearSashHoverState();\n    }\n    get size() {\n        return this._size;\n    }\n    set maxSize(value) {\n        this._maxSize = value;\n    }\n    get maxSize() {\n        return this._maxSize;\n    }\n    set minSize(value) {\n        this._minSize = value;\n    }\n    get minSize() {\n        return this._minSize;\n    }\n    set preferredSize(value) {\n        this._preferredSize = value;\n    }\n    get preferredSize() {\n        return this._preferredSize;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { Toggle } from '../toggle/toggle.js';\nimport { HistoryInputBox } from '../inputbox/inputBox.js';\nimport { Widget } from '../widget.js';\nimport { Codicon } from '../../../common/codicons.js';\nimport { Emitter } from '../../../common/event.js';\nimport './findInput.css';\nimport * as nls from '../../../../nls.js';\nimport { getDefaultHoverDelegate } from '../hover/hoverDelegateFactory.js';\nconst NLS_DEFAULT_LABEL = nls.localize('defaultLabel', \"input\");\nconst NLS_PRESERVE_CASE_LABEL = nls.localize('label.preserveCaseToggle', \"Preserve Case\");\nclass PreserveCaseToggle extends Toggle {\n    constructor(opts) {\n        super({\n            // TODO: does this need its own icon?\n            icon: Codicon.preserveCase,\n            title: NLS_PRESERVE_CASE_LABEL + opts.appendTitle,\n            isChecked: opts.isChecked,\n            hoverDelegate: opts.hoverDelegate ?? getDefaultHoverDelegate('element'),\n            inputActiveOptionBorder: opts.inputActiveOptionBorder,\n            inputActiveOptionForeground: opts.inputActiveOptionForeground,\n            inputActiveOptionBackground: opts.inputActiveOptionBackground,\n        });\n    }\n}\nexport class ReplaceInput extends Widget {\n    constructor(parent, contextViewProvider, _showOptionButtons, options) {\n        super();\n        this._showOptionButtons = _showOptionButtons;\n        this.fixFocusOnOptionClickEnabled = true;\n        this.cachedOptionsWidth = 0;\n        this._onDidOptionChange = this._register(new Emitter());\n        this.onDidOptionChange = this._onDidOptionChange.event;\n        this._onKeyDown = this._register(new Emitter());\n        this.onKeyDown = this._onKeyDown.event;\n        this._onMouseDown = this._register(new Emitter());\n        this._onInput = this._register(new Emitter());\n        this._onKeyUp = this._register(new Emitter());\n        this._onPreserveCaseKeyDown = this._register(new Emitter());\n        this.onPreserveCaseKeyDown = this._onPreserveCaseKeyDown.event;\n        this.contextViewProvider = contextViewProvider;\n        this.placeholder = options.placeholder || '';\n        this.validation = options.validation;\n        this.label = options.label || NLS_DEFAULT_LABEL;\n        const appendPreserveCaseLabel = options.appendPreserveCaseLabel || '';\n        const history = options.history || [];\n        const flexibleHeight = !!options.flexibleHeight;\n        const flexibleWidth = !!options.flexibleWidth;\n        const flexibleMaxHeight = options.flexibleMaxHeight;\n        this.domNode = document.createElement('div');\n        this.domNode.classList.add('monaco-findInput');\n        this.inputBox = this._register(new HistoryInputBox(this.domNode, this.contextViewProvider, {\n            ariaLabel: this.label || '',\n            placeholder: this.placeholder || '',\n            validationOptions: {\n                validation: this.validation\n            },\n            history,\n            showHistoryHint: options.showHistoryHint,\n            flexibleHeight,\n            flexibleWidth,\n            flexibleMaxHeight,\n            inputBoxStyles: options.inputBoxStyles\n        }));\n        this.preserveCase = this._register(new PreserveCaseToggle({\n            appendTitle: appendPreserveCaseLabel,\n            isChecked: false,\n            ...options.toggleStyles\n        }));\n        this._register(this.preserveCase.onChange(viaKeyboard => {\n            this._onDidOptionChange.fire(viaKeyboard);\n            if (!viaKeyboard && this.fixFocusOnOptionClickEnabled) {\n                this.inputBox.focus();\n            }\n            this.validate();\n        }));\n        this._register(this.preserveCase.onKeyDown(e => {\n            this._onPreserveCaseKeyDown.fire(e);\n        }));\n        if (this._showOptionButtons) {\n            this.cachedOptionsWidth = this.preserveCase.width();\n        }\n        else {\n            this.cachedOptionsWidth = 0;\n        }\n        // Arrow-Key support to navigate between options\n        const indexes = [this.preserveCase.domNode];\n        this.onkeydown(this.domNode, (event) => {\n            if (event.equals(15 /* KeyCode.LeftArrow */) || event.equals(17 /* KeyCode.RightArrow */) || event.equals(9 /* KeyCode.Escape */)) {\n                const index = indexes.indexOf(this.domNode.ownerDocument.activeElement);\n                if (index >= 0) {\n                    let newIndex = -1;\n                    if (event.equals(17 /* KeyCode.RightArrow */)) {\n                        newIndex = (index + 1) % indexes.length;\n                    }\n                    else if (event.equals(15 /* KeyCode.LeftArrow */)) {\n                        if (index === 0) {\n                            newIndex = indexes.length - 1;\n                        }\n                        else {\n                            newIndex = index - 1;\n                        }\n                    }\n                    if (event.equals(9 /* KeyCode.Escape */)) {\n                        indexes[index].blur();\n                        this.inputBox.focus();\n                    }\n                    else if (newIndex >= 0) {\n                        indexes[newIndex].focus();\n                    }\n                    dom.EventHelper.stop(event, true);\n                }\n            }\n        });\n        const controls = document.createElement('div');\n        controls.className = 'controls';\n        controls.style.display = this._showOptionButtons ? 'block' : 'none';\n        controls.appendChild(this.preserveCase.domNode);\n        this.domNode.appendChild(controls);\n        parent?.appendChild(this.domNode);\n        this.onkeydown(this.inputBox.inputElement, (e) => this._onKeyDown.fire(e));\n        this.onkeyup(this.inputBox.inputElement, (e) => this._onKeyUp.fire(e));\n        this.oninput(this.inputBox.inputElement, (e) => this._onInput.fire());\n        this.onmousedown(this.inputBox.inputElement, (e) => this._onMouseDown.fire(e));\n    }\n    enable() {\n        this.domNode.classList.remove('disabled');\n        this.inputBox.enable();\n        this.preserveCase.enable();\n    }\n    disable() {\n        this.domNode.classList.add('disabled');\n        this.inputBox.disable();\n        this.preserveCase.disable();\n    }\n    setEnabled(enabled) {\n        if (enabled) {\n            this.enable();\n        }\n        else {\n            this.disable();\n        }\n    }\n    select() {\n        this.inputBox.select();\n    }\n    focus() {\n        this.inputBox.focus();\n    }\n    getPreserveCase() {\n        return this.preserveCase.checked;\n    }\n    setPreserveCase(value) {\n        this.preserveCase.checked = value;\n    }\n    focusOnPreserve() {\n        this.preserveCase.focus();\n    }\n    validate() {\n        this.inputBox?.validate();\n    }\n    set width(newWidth) {\n        this.inputBox.paddingRight = this.cachedOptionsWidth;\n        this.domNode.style.width = newWidth + 'px';\n    }\n    dispose() {\n        super.dispose();\n    }\n}\n"],"names":["addDisposableListener","getWindow","EventType","addStandardDisposableListener","WindowIntervalTimer","getDomNodePagePosition","scheduleAtNextAnimationFrame","append","$$4","clearNode","hide","show","isHTMLElement","getDomNodeZoomLevel","getTotalWidth","getTotalHeight","getActiveWindow","isAncestor$1","getContentWidth","getContentHeight","getTopLeftOffset","animate","isSVGElement","EventHelper","createStyleSheet","asCssValueWithDefault","getActiveElement","isMouseEvent","trackFocus","isInShadowDOM","Dimension","sanitize","reset","isActiveElement","isKeyboardEvent","hasParentWithClass","asCSSUrl","after","StandardKeyboardEvent","Disposable","ThemeIcon","TimeoutTimer","isWindows","Codicon","Scrollable","Emitter","dispose","isMacintosh","localize","toDisposable","DisposableStore","isIOS","Range","Lazy","Delayer","Event","distinct","disposableTimeout","clamp","BugIndicatingError","memoize","equals","Color","binarySearch","range","EventBufferer","firstOrDefault","timeout","isNumber","constObservable","autorun","matchesPrefix","matchesFuzzy2","KeyCodeUtils","assertType","Separator","Action","ActionRunner","isUndefinedOrNull","isFunction","isLinux","SubmenuAction","RunOnceScheduler","EmptySubmenuAction","stripIcons","escape","ltrim","rtrim","getCodiconFontCharacters","isMarkdownString","markdownStringEqual","format","MutableDisposable","HistoryNavigator","equals$1","CancellationTokenSource","isUndefined","combinedDisposable","pushToStart","pushToEnd","MicrotaskDelay","Iterable","LcsDiff","splice$1","tail2","Relay","SetMap","FuzzyScore","fuzzyScore","Promises","isIterable","isCancellationError","createCancelablePromise","onUnexpectedError","isString","UILabelProvider","EventMultiplexer","StandardMouseEvent","GlobalPointerMoveMonitor","StandardWheelEvent","isChrome","getZoomFactor","BrowserFeatures","DomEmitter","DataTransfers","isFirefox","renderFormattedText","renderText","Gesture","EventType$1","renderMarkdown","renderStringAsPlaintext","createFastDomNode","Widget","domNode","listener","dom.addDisposableListener","dom.EventType","e","dom.getWindow","ARROW_IMG_SIZE","ScrollbarArrow","opts","dom.addStandardDisposableListener","dom.WindowIntervalTimer","scheduleRepeater","pointerMoveData","ScrollbarVisibilityController","visibility","visibleClassName","invisibleClassName","rawShouldBeVisible","shouldBeVisible","isNeeded","_a","withFadeAway","POINTER_DRAG_RESET_DISTANCE","AbstractScrollbar","arrow","top","left","width","height","visibleSize","elementScrollSize","elementScrollPosition","domTop","sliderStart","sliderStop","pointerPos","offsetX","offsetY","domNodePosition","dom.getDomNodePagePosition","offset","initialPointerPosition","initialPointerOrthogonalPosition","initialScrollbarState","pointerOrthogonalPosition","pointerOrthogonalDelta","platform.isWindows","pointerDelta","_desiredScrollPosition","desiredScrollPosition","scrollbarSize","MINIMUM_SLIDER_SIZE","ScrollbarState","arrowSize","oppositeScrollbarSize","scrollSize","scrollPosition","iVisibleSize","iScrollSize","iScrollPosition","computedAvailableSize","computedRepresentableSize","computedIsNeeded","computedSliderSize","computedSliderRatio","computedSliderPosition","r","desiredSliderPosition","correctedOffset","delta","HorizontalScrollbar","scrollable","options","host","scrollDimensions","arrowDelta","scrollbarDelta","sliderSize","sliderPosition","largeSize","smallSize","size","target","VerticalScrollbar","HIDE_TIMEOUT","SCROLL_WHEEL_SENSITIVITY","MouseWheelClassifierItem","timestamp","deltaX","deltaY","_MouseWheelClassifier","remainingInfluence","score","iteration","index","influence","targetWindow","pageZoomFactor","previousItem","item","absDeltaX","absDeltaY","absPreviousDeltaX","absPreviousDeltaY","minDeltaX","minDeltaY","maxDeltaX","maxDeltaY","value","MouseWheelClassifier","AbstractScrollableElement","element","resolveOptions","scrollbarHost","mouseWheelEvent","browserEvent","dimensions","newClassName","platform.isMacintosh","newOptions","shouldListen","onMouseWheel","classifier","didScroll","shiftConvert","futureScrollPosition","deltaScrollTop","desiredScrollTop","deltaScrollLeft","desiredScrollLeft","consumeMouseWheel","scrollState","enableTop","enableLeft","leftClassName","topClassName","topLeftClassName","ScrollableElement","callback","dom.scheduleAtNextAnimationFrame","update","SmoothScrollableElement","DomScrollableElement","result","$","dom.$","HoverWidget","HoverAction","parent","actionOptions","keybindingLabel","dom.append","label","ClickAction","KeyDownAction","enabled","getHoverAccessibleViewHint","shouldHaveHint","keybinding","container","run","keyCodes","event","keyCode","labelWithIconsRegex","renderLabelWithIcons","text","elements","match","textStart","textStop","escaped","codicon","renderIcon","icon","node","MAX_MESSAGE_LENGTH","ariaContainer","alertContainer","alertContainer2","statusContainer","statusContainer2","setARIAContainer","createAlertContainer","createStatusContainer","alert","msg","dom.clearNode","insertMessage","status","isAnchor","obj","anchor","LayoutAnchorMode","layout","viewportSize","viewSize","layoutAfterAnchorBoundary","layoutBeforeAnchorBoundary","_ContextView","domPosition","DOM.$","DOM.hide","usedShadowDOM","style","SHADOW_ROOT_CSS","toDisposeOnSetContainer","DOM.addStandardDisposableListener","delegate","_b","DOM.clearNode","DOM.show","platform.isIOS","around","DOM.isHTMLElement","elementPosition","DOM.getDomNodePagePosition","zoom","DOM.getDomNodeZoomLevel","viewSizeWidth","DOM.getTotalWidth","viewSizeHeight","DOM.getTotalHeight","anchorPosition","anchorAlignment","anchorAxisAlignment","activeWindow","DOM.getActiveWindow","verticalAnchor","horizontalAnchor","containerPosition","data","onCapture","DOM.getWindow","DOM.isAncestor","ContextView","nullHoverDelegateFactory","hoverDelegateFactory","defaultHoverDelegateMouse","defaultHoverDelegateElement","setHoverDelegateFactory","hoverDelegateProvider","getDefaultHoverDelegate","placement","createInstantHoverDelegate","baseHoverDelegate","setBaseLayerHoverDelegate","hoverDelegate","getBaseLayerHoverDelegate","CombinedSpliceable","spliceables","start","deleteCount","ListError","user","message","groupIntersect","groups","intersection","shift","end","much","consolidate","previousGroup","group","concat","g","RangeMap","paddingTop","topPadding","items","diff","before","middle","i","t","len","position","count","newSize","groupCount","newCount","RowCache","renderers","templateId","isStale","templateData","row","makeChanges","cachedRows","cachedRow","renderer","__decorate","decorators","key","desc","c","d","StaticDND","DefaultOptions","ElementsDragAndDropData","ExternalElementsDragAndDropData","NativeDragAndDropData","dataTransfer","file","equalsDragFeedback","f1","f2","ListViewAccessibilityProvider","accessibilityProvider","l","_","_ListView","virtualDelegate","cb","TouchEventType","scrollableOptions","lastRenderRange","previousRenderRange","deleteRange","removeRange","rowsToDispose","rows","previousRestRange","previousRenderedRestRange","previousUnrenderedRestRanges","inserted","deleted","renderRange","renderedRestRange","updateRange","removeRanges","unrenderedRestRanges","insertRanges","scrollWidth","renderTop","renderHeight","renderLeft","updateItemsInDOM","rangesToInsert","rangesToRemove","rangesToUpdate","role","checked","referenceNode","uri","scrollTop","reuseAnimation","sector","err","dragImage","feedback","a","b","dragOverEffectPosition","dragData","viewTop","upperLimit","targetIndex","relativePosition","scrollableElement","rawIndex","inSmoothScrolling","anchorElementIndex","anchorElementTopDelta","heightDiff","didChange","unrenderRanges","renderRanges","newScrollTop","_c","isAncestor","ListView","TraitRenderer","trait","renderedElementIndex","el","rendered","insertCount","renderedElement","indexes","Trait$1","_trait","sortedIndexes","j","numericSort","sortedResult","toRender","disjunction","Trait","SelectionTrait","setAriaSelected","TraitSpliceable","view","identityProvider","pastElementsWithTrait","pastElementsWithTraitSet","elementsWithTrait","isInputElement","isListElementDescendantOfClass","className","isMonacoEditor","isMonacoCustomToggle","isActionItem","isStickyScrollElement","isStickyScrollContainer","isButton","KeyboardController","list","optionsUpdate","TypeNavigationMode","TypeNavigationControllerState","DefaultKeyboardNavigationDelegate","TypeNavigationController","keyboardNavigationLabelProvider","keyboardNavigationEventFilter","typing","onChar","onClear","focus","ariaLabel","word","labelStr","fuzzy","DOMFocusController","onKeyDown","focusedDomElement","tabIndexElement","isSelectionSingleChangeEvent","isSelectionRangeChangeEvent","isMouseRightClick","DefaultMultipleSelectionController","MouseController","min","max","rangeSelection","selection","contiguousRange","getContiguousRangeContaining","newSelection","relativeComplement","DefaultStyleController","styleElement","selectorSuffix","styles","suffix","content","focusAndSelectionOutline","inactiveFocusAndSelectionOutline","unthemedListStyles","one","other","PipelineRenderer","_templateId","AccessibiltyRenderer","observable","reader","ariaLevel","ListViewDragAndDrop","dnd","originalEvent","targetElement","targetSector","List","didJustPressContextMenuKey","fromKeyDown","fromKeyUp","fromMouse","_options","baseRenderers","viewOptions","n","loop","filter","lastPageIndex","currentlyFocusedElementIndex","lastGoodPageIndex","previousScrollTop","nextpageScrollTop","getPaddingTop","firstPageIndex","firstGoodPageIndex","relativeTop","elementTop","elementHeight","m","viewItemBottom","scrollBottom","id","SELECT_OPTION_ENTRY_TEMPLATE_ID","SelectListRenderer","detail","decoratorRight","isDisabled","_templateData","_SelectBoxList","selected","contextViewProvider","selectBoxOptions","title","widthControlOuterDiv","widthControlInnerDiv","dom.createStyleSheet","dom.EventHelper","listIsVisibleOnTouchStart","showDropDown","arrays.equals","option","focusable","background","foreground","border","listBackground","dom.asCssValueWithDefault","optionsBorder","disabled","focusSelect","preLayoutPosition","maxDetailsPaneHeight","_option","window","selectPosition","verticalPadding","maxSelectDropDownHeightBelow","maxSelectDropDownHeightAbove","selectWidth","selectMinWidth","selectOptimalWidth","listHeight","minRequiredDropDownHeight","maxVisibleOptionsBelow","maxVisibleOptionsAbove","elementWidth","longest","longestLength","detailLength","rightDecoratorLength","dom.getTotalWidth","onSelectDropDownKeyDown","dom.isAncestor","listRowElement","actionHandler","cleanRenderedMarkdown","child","selectedIndex","description","descriptionIsMarkdown","nextOptionDisabled","ch","optionIndex","SelectBoxList","SelectBoxNative","eventType","showSelect","SelectBox","BaseActionViewItem","context","action","actionRunner","newContext","enableDragging","preserveFocus","types.isUndefinedOrNull","ActionViewItem","types.assertType","kbLabel","nls.localize","SelectActionViewItem","ctx","BaseDropdown","labelRenderer","GestureEventType","cleanupFn","DropdownMenu","actions","DropdownMenuActionViewItem","menuActionsOrProvider","contextMenuProvider","classNames","s","isActionsArray","visible","that","ActionBar","DisposableMap","previousKeys","nextKeys","DOM.addDisposableListener","DOM.EventType","eventHandled","focusedItem","DOM.trackFocus","DOM.getActiveElement","firstEnabled","vi","ret","elem","indexOrElement","arg","types.isNumber","actionViewItemElement","viewItemOptions","DOM.EventHelper","selectFirst","forceLoop","forceFocus","startIndex","fromRight","preventScroll","actionViewItem","focusItem","types.isFunction","MENU_MNEMONIC_REGEX","MENU_ESCAPED_MNEMONIC_REGEX","HorizontalDirection","VerticalDirection","Menu","menuStyles","menuElement","parentData","SubmenuMenuActionViewItem","relatedTarget","lastFocusedItem","scrollElement","idx","MenuSeparatorActionViewItem","array","getMenuWidgetCSS","fgColor","bgColor","borderRadius","shadow","menuActionViewItem","mnemonic","actionViewItems","menuItemOptions","BaseMenuActionViewItem","menuStyle","matches","pos","setSize","cleanLabel","cleanMnemonic","strings.escape","escMatch","replaceDoubleEscapes","str","strings.ltrim","strings.rtrim","isSelected","outline","outlineOffset","submenuActions","submenuOptions","force","windowDimensions","submenu","entry","expandDirection","selectFirstItem","computedStyles","entryBox","entryBoxUpdated","viewBox","regex","mnemonicInText","formatRule","fontCharacter","isForShadowDom","scrollbarShadowColor","scrollbarSliderBackgroundColor","scrollbarSliderHoverBackgroundColor","scrollbarSliderActiveBackgroundColor","Toggle","classes","ev","keyboardEvent","newIsChecked","Button","segment","hover","labelElement","root","sanitized","CountBadge","titleFormat","CSS_DONE","CSS_ACTIVE","CSS_INFINITE","CSS_INFINITE_LONG_RUNNING","CSS_DISCRETE","_ProgressBar","delayed","ProgressBar","NLS_CASE_SENSITIVE_TOGGLE_LABEL","NLS_WHOLE_WORD_TOGGLE_LABEL","NLS_REGEX_TOGGLE_LABEL","CaseSensitiveToggle","WholeWordsToggle","RegexToggle","InputBox","tagName","wrapper","onSelectionChange","onAnchoredSelectionChange","placeHolder","tooltip","newValue","dom.getTotalHeight","dom.isActiveElement","selectionStart","selectionEnd","paddingRight","scrollHeight","errorMsg","type","div","renderOptions","spanElement","alertText","aria.alert","previousHeight","inputElement","HistoryInputBox","NLS_PLACEHOLDER_HISTORY_HINT_SUFFIX_NO_PARENS","NLS_PLACEHOLDER_HISTORY_HINT_SUFFIX_IN_PARENS","addSuffix","suffixedPlaceholder","mutationList","observer","mutation","resetPlaceholder","historyHint","revertedPlaceholder","always","next","aria.status","previous","currentValue","NLS_DEFAULT_LABEL","FindInput","appendCaseSensitiveLabel","appendWholeWordsLabel","appendRegexLabel","history","flexibleHeight","flexibleWidth","flexibleMaxHeight","viaKeyboard","newIndex","toggle","toggles","currentToggle","controlsHidden","PagedRenderer","modelProvider","model","cts","promise","PagedAccessibilityProvider","fromPagedListOptions","PagedList","pagedRenderers","DEBUG","OrthogonalEdge","globalSize","onDidChangeGlobalSize","globalHoverDelay","onDidChangeHoverDelay","MouseEventFactory","GestureEventFactory","OrthogonalPointerEventFactory","factory","PointerEventsDisabledCssClass","Sash","state","sash","onChange","layoutProvider","onMouseDown","onMouseDoubleClick","onMouseEnter","onMouseLeave","onTouchStart","onTap","doubleTapTimeout","delay","pointerEventFactory","isMultisashResize","orthogonalSash","iframes","iframe","startX","startY","altKey","startEvent","updateStyle","cursor","disposables","onPointerMove","onPointerUp","fromLinkedSash","verticalProvider","horizontalProvider","defaultStyles","ViewItem","disposable","layoutContext","VerticalViewItem","HorizontalViewItem","State","Sizing","Split","Auto","Invisible","cachedVisibleSize","SplitView","sashItem","startSnappingEnabled","endSnappingEnabled","onDidScrollViewContainer","scrollLeft","viewDescriptor","sizing","types.isUndefined","skipLayout","previousSize","total","proportion","lowPriorityIndexes","highPriorityIndexes","v","alt","resetSashDragState","sizes","minDelta","maxDelta","viewItem","snapBefore","snapAfter","upIndexes","downIndexes","minDeltaUp","maxDeltaUp","maxDeltaDown","minDeltaDown","snapBeforeIndex","snapAfterIndex","halfSize","current","newDelta","isLastSash","newSizes","viewItemIndex","newMinDelta","newMaxDelta","resizeIndex","flexibleViewItems","flexibleSize","onChangeDisposable","containerDisposable","sashEventMapper","onStartDisposable","onEndDisposable","onDidResetDisposable","contentSize","overloadMinDelta","overloadMaxDelta","upItems","upSizes","downItems","downSizes","snapped","snapView","deltaUp","viewDelta","deltaDown","lowPriorityIndex","emptyDelta","collapsesDown","expandsDown","reverseViews","collapsesUp","expandsUp","snappedBefore","snappedAfter","_TableListRenderer","columns","getColumnSize","rendererMap","column","rowContainer","cellContainers","cellTemplateData","cellContainer","cell","TableListRenderer","asListVirtualDelegate","ColumnHeader","_Table","headers","descriptor","totalWeight","Table","ObjectTreeElementCollapseState","TreeMouseEventTarget","TreeError","WeakMapper","fn","isFilterResult","getVisibleState","isCollapsibleStateUpdate","IndexTreeModel","rootElement","location","toInsert","identity","toInsertIterable","recurseLevels","parentNode","locationPrefix","recurseSplice","fromOriginal","fromModified","lastStartO","lastStartM","change","onDidCreateNode","onDidDeleteNode","diffIdentityProvider","listIndex","revealed","treeListElementsToInsert","nodesToInsertIterator","lastIndex","visibleChildStartIndex","nodesToInsert","insertedVisibleChildrenCount","renderNodeCount","deletedNodes","splice","deletedVisibleChildrenCount","visibleDeleteCount","visit","collapsible","collapsed","recursive","onlyVisibleChildIndex","previousRenderNodeCount","deep","treeElement","parentVisibility","treeListElements","childElements","childRevealed","visibleChildrenCount","resultStartLength","hasVisibleDescendants","visibleChildIndex","rest","indexTreeNode","TreeElementsDragAndDropData","asTreeDragAndDropData","TreeNodeListDragAndDrop","nodes","targetNode","raw","didChangeAutoExpandNode","ref","accept","effect","parentRef","parentIndex","length","asListOptions","ComposedTreeDelegate","RenderIndentGuides","EventCollection","onDidChange","_elements","_TreeRenderer","onDidChangeCollapseState","activeNodes","renderedIndentGuides","indent","shouldRenderIndentGuides","twistie","contents","twistieRendered","disposableStore","guide","set","line","TreeRenderer","FindFilter","tree","_filter","labels","TreeFindMatchType","TreeFindMode","FindController","mode","matchType","noMatches","stickyScrollNodeStateEquals","node1","node2","stickyScrollNodeEquals","StickyScrollState","stickyNodes","lastStickyNode","secondLastStickyNode","previousState","previousLastStickyNode","DefaultStickyScrollDelegate","stickyScrollMaxItemCount","maxWidgetHeight","stickyNode","StickyScrollController","treeDelegate","stickyScrollOptions","StickyScrollWidget","firstVisibleNode","stickyState","firstVisibleNodeUnderWidget","stickyNodesHeight","nextStickyNode","contrainedStickyNodes","previousStickyNode","nodeIndex","stickyPosition","currentStickyNodesHeight","endIndex","previousAncestor","currentAncestor","parentOfcurrentAncestor","lastDescendantIndex","stickyRowPositionTop","stickyNodeHeight","lastChildRelativeTop","nodeHeight","nextNodeRelativeTop","lastChildNode","lastChildHeight","bottomOfLastChild","maximumStickyWidgetHeight","constrainedStickyNodes","lastConstrainedStickyNode","nodeLocation","parentLocation","renderCount","ancestors","widgetHeight","validatedOptions","treeRenderers","StickyScrollFocus","lastElement","wasVisible","isVisible","stickyIndex","stickyNodesTotal","stickyElement","accessibilityDisposable","nodeTemplateId","nodeCopy","hasFocus","nodeIndexToFocus","previousIndex","newFocusedIndex","elementScrollTop","elementTargetViewTop","newFocusIndex","oldIndex","focused","asTreeMouseEvent","asTreeContextMenuEvent","isStickyScroll","dfs","getFirstViewElementWithTrait","silent","insertedNodes","deletedNodesIdSet","deletedNodesVisitor","insertedNodesMap","insertedNodesVisitor","insertedNode","TreeNodeListMouseController","stickyScrollProvider","onTwistie","isStickyElement","expandOnlyOnTwistieClick","stickyScrollController","TreeNodeList","focusTrait","selectionTrait","anchorTrait","additionalFocus","additionalSelection","fromAPI","AbstractTree","findMode","findFuzzy","_user","onDidChangeCollapseStateRelay","onDidChangeActiveNodes","onDidModelSplice","activeNodesEmitter","activeNodesDebounce","stickyScrollBackground","parentListIndex","focusedIndex","firstChildIndex","ObjectTreeModel","children","insertedElements","insertedElementIds","tnode","noCompress","incompressible","compress","childrenIterator","_decompress","decompress","wrapIdentityProvider","base","CompressedObjectTreeModel","compressedChildren","compressedNode","compressedParentNode","decompressedElement","splicedElement","recompressedElement","elementComparator","parentChildren","rootChildren","decompressedRootChildren","recompressedRootChildren","DefaultElementMapper","CompressedTreeNodeWrapper","unwrapper","mapList","nodeMapper","mapOptions","compressedNodeUnwrapper","otherNode","CompressibleObjectTreeModel","ObjectTree","CompressibleRenderer","_compressedTreeNodeProvider","stickyScrollDelegate","compressedTreeNode","_d","twistieElement","CompressibleStickyScrollDelegate","stickyNodeBottom","uncompressedStickyNodes","overflowingStickyNodes","compressedStickyNode","compressionModel","compressedElement","stickyTreeNode","asObjectTreeOptions","compressedTreeNodeProvider","CompressibleObjectTree","compressibleRenderers","createAsyncDataTreeNode","props","ancestor","descendant","intersects","AsyncDataTreeNodeWrapper","AsyncDataTreeRenderer","onDidChangeTwistieState","asTreeEvent","AsyncDataTreeElementsDragAndDropData","asAsyncDataTreeDragAndDropData","AsyncDataTreeNodeListDragAndDrop","AsyncDataTree","dataSource","objectTreeDelegate","objectTreeRenderers","objectTreeOptions","input","viewState","viewStateContext","rerender","dataNode","refreshPromise","refreshNode","done","childrenToRefresh","childrenPromise","slowTimeout","childrenElementsIterable","childrenElements","nodesToForget","childrenTreeNodesById","hasChildren","asyncDataTreeNode","childAsyncDataTreeNode","CompressibleAsyncDataTreeNodeWrapper","CompressibleAsyncDataTreeRenderer","compressibleNodeMapperProvider","asCompressibleObjectTreeOptions","els","CompressibleAsyncDataTree","compressionDelegate","getId","getUncompressedIds","oldSelection","oldFocus","didChangeSelection","didChangeFocus","getVisibility","filterResult","DataTree","HighlightedLabel","highlights","escapeNewLines","objects.equals","highlight","substring","dom.reset","extra","FastLabelNode","_element","empty","IconLabel","LabelWithHighlights","Label","labelClasses","containerClasses","existingIconNode","iconNode","dom.isHTMLElement","dom.asCSSUrl","descriptionNode","suffixNode","htmlElement","previousCustomHover","hoverDisposable","suffixContainer","dom.after","descriptionContainer","splitMatches","separator","labelStart","labelRange","supportIcons","name","unthemedKeybindingLabelOptions","KeybindingLabel","os","labelForeground","chords","chord","modifierLabels","keyLabel","extraClass","keyElement","MOUSE_CURSOR_TEXT_CSS_CLASS_NAME","ToolBar","ToggleMenuAction","primaryActions","secondaryActions","primaryActionsToSet","_ToggleMenuAction","toggleDropdownMenu","ResizableHTMLElement","currentSize","north","east","south","west","minHeight","minWidth","maxHeight","maxWidth","NLS_PRESERVE_CASE_LABEL","PreserveCaseToggle","ReplaceInput","_showOptionButtons","appendPreserveCaseLabel","controls","newWidth"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53]}