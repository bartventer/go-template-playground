{"version":3,"file":"monaco-editor-esm-vs-base-browser-dom-CW6twH0t.js","sources":["../../../node_modules/monaco-editor/esm/vs/base/browser/dompurify/dompurify.js","../../../node_modules/monaco-editor/esm/vs/base/browser/dom.js","../../../node_modules/monaco-editor/esm/vs/base/browser/domObservable.js"],"sourcesContent":["/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */\n\nconst {\n  entries,\n  setPrototypeOf,\n  isFrozen,\n  getPrototypeOf,\n  getOwnPropertyDescriptor\n} = Object;\nlet {\n  freeze,\n  seal,\n  create\n} = Object; // eslint-disable-line import/no-mutable-exports\nlet {\n  apply,\n  construct\n} = typeof Reflect !== 'undefined' && Reflect;\nif (!freeze) {\n  freeze = function freeze(x) {\n    return x;\n  };\n}\nif (!seal) {\n  seal = function seal(x) {\n    return x;\n  };\n}\nif (!apply) {\n  apply = function apply(fun, thisValue, args) {\n    return fun.apply(thisValue, args);\n  };\n}\nif (!construct) {\n  construct = function construct(Func, args) {\n    return new Func(...args);\n  };\n}\nconst arrayForEach = unapply(Array.prototype.forEach);\nconst arrayPop = unapply(Array.prototype.pop);\nconst arrayPush = unapply(Array.prototype.push);\nconst stringToLowerCase = unapply(String.prototype.toLowerCase);\nconst stringToString = unapply(String.prototype.toString);\nconst stringMatch = unapply(String.prototype.match);\nconst stringReplace = unapply(String.prototype.replace);\nconst stringIndexOf = unapply(String.prototype.indexOf);\nconst stringTrim = unapply(String.prototype.trim);\nconst objectHasOwnProperty = unapply(Object.prototype.hasOwnProperty);\nconst regExpTest = unapply(RegExp.prototype.test);\nconst typeErrorCreate = unconstruct(TypeError);\n\n/**\n * Creates a new function that calls the given function with a specified thisArg and arguments.\n *\n * @param {Function} func - The function to be wrapped and called.\n * @returns {Function} A new function that calls the given function with a specified thisArg and arguments.\n */\nfunction unapply(func) {\n  return function (thisArg) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    return apply(func, thisArg, args);\n  };\n}\n\n/**\n * Creates a new function that constructs an instance of the given constructor function with the provided arguments.\n *\n * @param {Function} func - The constructor function to be wrapped and called.\n * @returns {Function} A new function that constructs an instance of the given constructor function with the provided arguments.\n */\nfunction unconstruct(func) {\n  return function () {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n    return construct(func, args);\n  };\n}\n\n/**\n * Add properties to a lookup table\n *\n * @param {Object} set - The set to which elements will be added.\n * @param {Array} array - The array containing elements to be added to the set.\n * @param {Function} transformCaseFunc - An optional function to transform the case of each element before adding to the set.\n * @returns {Object} The modified set with added elements.\n */\nfunction addToSet(set, array) {\n  let transformCaseFunc = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : stringToLowerCase;\n  if (setPrototypeOf) {\n    // Make 'in' and truthy checks like Boolean(set.constructor)\n    // independent of any properties defined on Object.prototype.\n    // Prevent prototype setters from intercepting set as a this value.\n    setPrototypeOf(set, null);\n  }\n  let l = array.length;\n  while (l--) {\n    let element = array[l];\n    if (typeof element === 'string') {\n      const lcElement = transformCaseFunc(element);\n      if (lcElement !== element) {\n        // Config presets (e.g. tags.js, attrs.js) are immutable.\n        if (!isFrozen(array)) {\n          array[l] = lcElement;\n        }\n        element = lcElement;\n      }\n    }\n    set[element] = true;\n  }\n  return set;\n}\n\n/**\n * Clean up an array to harden against CSPP\n *\n * @param {Array} array - The array to be cleaned.\n * @returns {Array} The cleaned version of the array\n */\nfunction cleanArray(array) {\n  for (let index = 0; index < array.length; index++) {\n    const isPropertyExist = objectHasOwnProperty(array, index);\n    if (!isPropertyExist) {\n      array[index] = null;\n    }\n  }\n  return array;\n}\n\n/**\n * Shallow clone an object\n *\n * @param {Object} object - The object to be cloned.\n * @returns {Object} A new object that copies the original.\n */\nfunction clone(object) {\n  const newObject = create(null);\n  for (const [property, value] of entries(object)) {\n    const isPropertyExist = objectHasOwnProperty(object, property);\n    if (isPropertyExist) {\n      if (Array.isArray(value)) {\n        newObject[property] = cleanArray(value);\n      } else if (value && typeof value === 'object' && value.constructor === Object) {\n        newObject[property] = clone(value);\n      } else {\n        newObject[property] = value;\n      }\n    }\n  }\n  return newObject;\n}\n\n/**\n * This method automatically checks if the prop is function or getter and behaves accordingly.\n *\n * @param {Object} object - The object to look up the getter function in its prototype chain.\n * @param {String} prop - The property name for which to find the getter function.\n * @returns {Function} The getter function found in the prototype chain or a fallback function.\n */\nfunction lookupGetter(object, prop) {\n  while (object !== null) {\n    const desc = getOwnPropertyDescriptor(object, prop);\n    if (desc) {\n      if (desc.get) {\n        return unapply(desc.get);\n      }\n      if (typeof desc.value === 'function') {\n        return unapply(desc.value);\n      }\n    }\n    object = getPrototypeOf(object);\n  }\n  function fallbackValue() {\n    return null;\n  }\n  return fallbackValue;\n}\n\nconst html$1 = freeze(['a', 'abbr', 'acronym', 'address', 'area', 'article', 'aside', 'audio', 'b', 'bdi', 'bdo', 'big', 'blink', 'blockquote', 'body', 'br', 'button', 'canvas', 'caption', 'center', 'cite', 'code', 'col', 'colgroup', 'content', 'data', 'datalist', 'dd', 'decorator', 'del', 'details', 'dfn', 'dialog', 'dir', 'div', 'dl', 'dt', 'element', 'em', 'fieldset', 'figcaption', 'figure', 'font', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'head', 'header', 'hgroup', 'hr', 'html', 'i', 'img', 'input', 'ins', 'kbd', 'label', 'legend', 'li', 'main', 'map', 'mark', 'marquee', 'menu', 'menuitem', 'meter', 'nav', 'nobr', 'ol', 'optgroup', 'option', 'output', 'p', 'picture', 'pre', 'progress', 'q', 'rp', 'rt', 'ruby', 's', 'samp', 'section', 'select', 'shadow', 'small', 'source', 'spacer', 'span', 'strike', 'strong', 'style', 'sub', 'summary', 'sup', 'table', 'tbody', 'td', 'template', 'textarea', 'tfoot', 'th', 'thead', 'time', 'tr', 'track', 'tt', 'u', 'ul', 'var', 'video', 'wbr']);\n\n// SVG\nconst svg$1 = freeze(['svg', 'a', 'altglyph', 'altglyphdef', 'altglyphitem', 'animatecolor', 'animatemotion', 'animatetransform', 'circle', 'clippath', 'defs', 'desc', 'ellipse', 'filter', 'font', 'g', 'glyph', 'glyphref', 'hkern', 'image', 'line', 'lineargradient', 'marker', 'mask', 'metadata', 'mpath', 'path', 'pattern', 'polygon', 'polyline', 'radialgradient', 'rect', 'stop', 'style', 'switch', 'symbol', 'text', 'textpath', 'title', 'tref', 'tspan', 'view', 'vkern']);\nconst svgFilters = freeze(['feBlend', 'feColorMatrix', 'feComponentTransfer', 'feComposite', 'feConvolveMatrix', 'feDiffuseLighting', 'feDisplacementMap', 'feDistantLight', 'feDropShadow', 'feFlood', 'feFuncA', 'feFuncB', 'feFuncG', 'feFuncR', 'feGaussianBlur', 'feImage', 'feMerge', 'feMergeNode', 'feMorphology', 'feOffset', 'fePointLight', 'feSpecularLighting', 'feSpotLight', 'feTile', 'feTurbulence']);\n\n// List of SVG elements that are disallowed by default.\n// We still need to know them so that we can do namespace\n// checks properly in case one wants to add them to\n// allow-list.\nconst svgDisallowed = freeze(['animate', 'color-profile', 'cursor', 'discard', 'font-face', 'font-face-format', 'font-face-name', 'font-face-src', 'font-face-uri', 'foreignobject', 'hatch', 'hatchpath', 'mesh', 'meshgradient', 'meshpatch', 'meshrow', 'missing-glyph', 'script', 'set', 'solidcolor', 'unknown', 'use']);\nconst mathMl$1 = freeze(['math', 'menclose', 'merror', 'mfenced', 'mfrac', 'mglyph', 'mi', 'mlabeledtr', 'mmultiscripts', 'mn', 'mo', 'mover', 'mpadded', 'mphantom', 'mroot', 'mrow', 'ms', 'mspace', 'msqrt', 'mstyle', 'msub', 'msup', 'msubsup', 'mtable', 'mtd', 'mtext', 'mtr', 'munder', 'munderover', 'mprescripts']);\n\n// Similarly to SVG, we want to know all MathML elements,\n// even those that we disallow by default.\nconst mathMlDisallowed = freeze(['maction', 'maligngroup', 'malignmark', 'mlongdiv', 'mscarries', 'mscarry', 'msgroup', 'mstack', 'msline', 'msrow', 'semantics', 'annotation', 'annotation-xml', 'mprescripts', 'none']);\nconst text = freeze(['#text']);\n\nconst html = freeze(['accept', 'action', 'align', 'alt', 'autocapitalize', 'autocomplete', 'autopictureinpicture', 'autoplay', 'background', 'bgcolor', 'border', 'capture', 'cellpadding', 'cellspacing', 'checked', 'cite', 'class', 'clear', 'color', 'cols', 'colspan', 'controls', 'controlslist', 'coords', 'crossorigin', 'datetime', 'decoding', 'default', 'dir', 'disabled', 'disablepictureinpicture', 'disableremoteplayback', 'download', 'draggable', 'enctype', 'enterkeyhint', 'face', 'for', 'headers', 'height', 'hidden', 'high', 'href', 'hreflang', 'id', 'inputmode', 'integrity', 'ismap', 'kind', 'label', 'lang', 'list', 'loading', 'loop', 'low', 'max', 'maxlength', 'media', 'method', 'min', 'minlength', 'multiple', 'muted', 'name', 'nonce', 'noshade', 'novalidate', 'nowrap', 'open', 'optimum', 'pattern', 'placeholder', 'playsinline', 'popover', 'popovertarget', 'popovertargetaction', 'poster', 'preload', 'pubdate', 'radiogroup', 'readonly', 'rel', 'required', 'rev', 'reversed', 'role', 'rows', 'rowspan', 'spellcheck', 'scope', 'selected', 'shape', 'size', 'sizes', 'span', 'srclang', 'start', 'src', 'srcset', 'step', 'style', 'summary', 'tabindex', 'title', 'translate', 'type', 'usemap', 'valign', 'value', 'width', 'wrap', 'xmlns', 'slot']);\nconst svg = freeze(['accent-height', 'accumulate', 'additive', 'alignment-baseline', 'amplitude', 'ascent', 'attributename', 'attributetype', 'azimuth', 'basefrequency', 'baseline-shift', 'begin', 'bias', 'by', 'class', 'clip', 'clippathunits', 'clip-path', 'clip-rule', 'color', 'color-interpolation', 'color-interpolation-filters', 'color-profile', 'color-rendering', 'cx', 'cy', 'd', 'dx', 'dy', 'diffuseconstant', 'direction', 'display', 'divisor', 'dur', 'edgemode', 'elevation', 'end', 'exponent', 'fill', 'fill-opacity', 'fill-rule', 'filter', 'filterunits', 'flood-color', 'flood-opacity', 'font-family', 'font-size', 'font-size-adjust', 'font-stretch', 'font-style', 'font-variant', 'font-weight', 'fx', 'fy', 'g1', 'g2', 'glyph-name', 'glyphref', 'gradientunits', 'gradienttransform', 'height', 'href', 'id', 'image-rendering', 'in', 'in2', 'intercept', 'k', 'k1', 'k2', 'k3', 'k4', 'kerning', 'keypoints', 'keysplines', 'keytimes', 'lang', 'lengthadjust', 'letter-spacing', 'kernelmatrix', 'kernelunitlength', 'lighting-color', 'local', 'marker-end', 'marker-mid', 'marker-start', 'markerheight', 'markerunits', 'markerwidth', 'maskcontentunits', 'maskunits', 'max', 'mask', 'media', 'method', 'mode', 'min', 'name', 'numoctaves', 'offset', 'operator', 'opacity', 'order', 'orient', 'orientation', 'origin', 'overflow', 'paint-order', 'path', 'pathlength', 'patterncontentunits', 'patterntransform', 'patternunits', 'points', 'preservealpha', 'preserveaspectratio', 'primitiveunits', 'r', 'rx', 'ry', 'radius', 'refx', 'refy', 'repeatcount', 'repeatdur', 'restart', 'result', 'rotate', 'scale', 'seed', 'shape-rendering', 'slope', 'specularconstant', 'specularexponent', 'spreadmethod', 'startoffset', 'stddeviation', 'stitchtiles', 'stop-color', 'stop-opacity', 'stroke-dasharray', 'stroke-dashoffset', 'stroke-linecap', 'stroke-linejoin', 'stroke-miterlimit', 'stroke-opacity', 'stroke', 'stroke-width', 'style', 'surfacescale', 'systemlanguage', 'tabindex', 'tablevalues', 'targetx', 'targety', 'transform', 'transform-origin', 'text-anchor', 'text-decoration', 'text-rendering', 'textlength', 'type', 'u1', 'u2', 'unicode', 'values', 'viewbox', 'visibility', 'version', 'vert-adv-y', 'vert-origin-x', 'vert-origin-y', 'width', 'word-spacing', 'wrap', 'writing-mode', 'xchannelselector', 'ychannelselector', 'x', 'x1', 'x2', 'xmlns', 'y', 'y1', 'y2', 'z', 'zoomandpan']);\nconst mathMl = freeze(['accent', 'accentunder', 'align', 'bevelled', 'close', 'columnsalign', 'columnlines', 'columnspan', 'denomalign', 'depth', 'dir', 'display', 'displaystyle', 'encoding', 'fence', 'frame', 'height', 'href', 'id', 'largeop', 'length', 'linethickness', 'lspace', 'lquote', 'mathbackground', 'mathcolor', 'mathsize', 'mathvariant', 'maxsize', 'minsize', 'movablelimits', 'notation', 'numalign', 'open', 'rowalign', 'rowlines', 'rowspacing', 'rowspan', 'rspace', 'rquote', 'scriptlevel', 'scriptminsize', 'scriptsizemultiplier', 'selection', 'separator', 'separators', 'stretchy', 'subscriptshift', 'supscriptshift', 'symmetric', 'voffset', 'width', 'xmlns']);\nconst xml = freeze(['xlink:href', 'xml:id', 'xlink:title', 'xml:space', 'xmlns:xlink']);\n\n// eslint-disable-next-line unicorn/better-regex\nconst MUSTACHE_EXPR = seal(/\\{\\{[\\w\\W]*|[\\w\\W]*\\}\\}/gm); // Specify template detection regex for SAFE_FOR_TEMPLATES mode\nconst ERB_EXPR = seal(/<%[\\w\\W]*|[\\w\\W]*%>/gm);\nconst TMPLIT_EXPR = seal(/\\${[\\w\\W]*}/gm);\nconst DATA_ATTR = seal(/^data-[\\-\\w.\\u00B7-\\uFFFF]/); // eslint-disable-line no-useless-escape\nconst ARIA_ATTR = seal(/^aria-[\\-\\w]+$/); // eslint-disable-line no-useless-escape\nconst IS_ALLOWED_URI = seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i // eslint-disable-line no-useless-escape\n);\nconst IS_SCRIPT_OR_DATA = seal(/^(?:\\w+script|data):/i);\nconst ATTR_WHITESPACE = seal(/[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205F\\u3000]/g // eslint-disable-line no-control-regex\n);\nconst DOCTYPE_NAME = seal(/^html$/i);\nconst CUSTOM_ELEMENT = seal(/^[a-z][.\\w]*(-[.\\w]+)+$/i);\n\nvar EXPRESSIONS = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  MUSTACHE_EXPR: MUSTACHE_EXPR,\n  ERB_EXPR: ERB_EXPR,\n  TMPLIT_EXPR: TMPLIT_EXPR,\n  DATA_ATTR: DATA_ATTR,\n  ARIA_ATTR: ARIA_ATTR,\n  IS_ALLOWED_URI: IS_ALLOWED_URI,\n  IS_SCRIPT_OR_DATA: IS_SCRIPT_OR_DATA,\n  ATTR_WHITESPACE: ATTR_WHITESPACE,\n  DOCTYPE_NAME: DOCTYPE_NAME,\n  CUSTOM_ELEMENT: CUSTOM_ELEMENT\n});\n\n// https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType\nconst NODE_TYPE = {\n  element: 1,\n  attribute: 2,\n  text: 3,\n  cdataSection: 4,\n  entityReference: 5,\n  // Deprecated\n  entityNode: 6,\n  // Deprecated\n  progressingInstruction: 7,\n  comment: 8,\n  document: 9,\n  documentType: 10,\n  documentFragment: 11,\n  notation: 12 // Deprecated\n};\nconst getGlobal = function getGlobal() {\n  return typeof window === 'undefined' ? null : window;\n};\n\n/**\n * Creates a no-op policy for internal use only.\n * Don't export this function outside this module!\n * @param {TrustedTypePolicyFactory} trustedTypes The policy factory.\n * @param {HTMLScriptElement} purifyHostElement The Script element used to load DOMPurify (to determine policy name suffix).\n * @return {TrustedTypePolicy} The policy created (or null, if Trusted Types\n * are not supported or creating the policy failed).\n */\nconst _createTrustedTypesPolicy = function _createTrustedTypesPolicy(trustedTypes, purifyHostElement) {\n  if (typeof trustedTypes !== 'object' || typeof trustedTypes.createPolicy !== 'function') {\n    return null;\n  }\n\n  // Allow the callers to control the unique policy name\n  // by adding a data-tt-policy-suffix to the script element with the DOMPurify.\n  // Policy creation with duplicate names throws in Trusted Types.\n  let suffix = null;\n  const ATTR_NAME = 'data-tt-policy-suffix';\n  if (purifyHostElement && purifyHostElement.hasAttribute(ATTR_NAME)) {\n    suffix = purifyHostElement.getAttribute(ATTR_NAME);\n  }\n  const policyName = 'dompurify' + (suffix ? '#' + suffix : '');\n  try {\n    return trustedTypes.createPolicy(policyName, {\n      createHTML(html) {\n        return html;\n      },\n      createScriptURL(scriptUrl) {\n        return scriptUrl;\n      }\n    });\n  } catch (_) {\n    // Policy creation failed (most likely another DOMPurify script has\n    // already run). Skip creating the policy, as this will only cause errors\n    // if TT are enforced.\n    console.warn('TrustedTypes policy ' + policyName + ' could not be created.');\n    return null;\n  }\n};\nfunction createDOMPurify() {\n  let window = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getGlobal();\n  const DOMPurify = root => createDOMPurify(root);\n\n  /**\n   * Version label, exposed for easier checks\n   * if DOMPurify is up to date or not\n   */\n  DOMPurify.version = '3.1.7';\n\n  /**\n   * Array of elements that DOMPurify removed during sanitation.\n   * Empty if nothing was removed.\n   */\n  DOMPurify.removed = [];\n  if (!window || !window.document || window.document.nodeType !== NODE_TYPE.document) {\n    // Not running in a browser, provide a factory function\n    // so that you can pass your own Window\n    DOMPurify.isSupported = false;\n    return DOMPurify;\n  }\n  let {\n    document\n  } = window;\n  const originalDocument = document;\n  const currentScript = originalDocument.currentScript;\n  const {\n    DocumentFragment,\n    HTMLTemplateElement,\n    Node,\n    Element,\n    NodeFilter,\n    NamedNodeMap = window.NamedNodeMap || window.MozNamedAttrMap,\n    HTMLFormElement,\n    DOMParser,\n    trustedTypes\n  } = window;\n  const ElementPrototype = Element.prototype;\n  const cloneNode = lookupGetter(ElementPrototype, 'cloneNode');\n  const remove = lookupGetter(ElementPrototype, 'remove');\n  const getNextSibling = lookupGetter(ElementPrototype, 'nextSibling');\n  const getChildNodes = lookupGetter(ElementPrototype, 'childNodes');\n  const getParentNode = lookupGetter(ElementPrototype, 'parentNode');\n\n  // As per issue #47, the web-components registry is inherited by a\n  // new document created via createHTMLDocument. As per the spec\n  // (http://w3c.github.io/webcomponents/spec/custom/#creating-and-passing-registries)\n  // a new empty registry is used when creating a template contents owner\n  // document, so we use that as our parent document to ensure nothing\n  // is inherited.\n  if (typeof HTMLTemplateElement === 'function') {\n    const template = document.createElement('template');\n    if (template.content && template.content.ownerDocument) {\n      document = template.content.ownerDocument;\n    }\n  }\n  let trustedTypesPolicy;\n  let emptyHTML = '';\n  const {\n    implementation,\n    createNodeIterator,\n    createDocumentFragment,\n    getElementsByTagName\n  } = document;\n  const {\n    importNode\n  } = originalDocument;\n  let hooks = {};\n\n  /**\n   * Expose whether this browser supports running the full DOMPurify.\n   */\n  DOMPurify.isSupported = typeof entries === 'function' && typeof getParentNode === 'function' && implementation && implementation.createHTMLDocument !== undefined;\n  const {\n    MUSTACHE_EXPR,\n    ERB_EXPR,\n    TMPLIT_EXPR,\n    DATA_ATTR,\n    ARIA_ATTR,\n    IS_SCRIPT_OR_DATA,\n    ATTR_WHITESPACE,\n    CUSTOM_ELEMENT\n  } = EXPRESSIONS;\n  let {\n    IS_ALLOWED_URI: IS_ALLOWED_URI$1\n  } = EXPRESSIONS;\n\n  /**\n   * We consider the elements and attributes below to be safe. Ideally\n   * don't add any new ones but feel free to remove unwanted ones.\n   */\n\n  /* allowed element names */\n  let ALLOWED_TAGS = null;\n  const DEFAULT_ALLOWED_TAGS = addToSet({}, [...html$1, ...svg$1, ...svgFilters, ...mathMl$1, ...text]);\n\n  /* Allowed attribute names */\n  let ALLOWED_ATTR = null;\n  const DEFAULT_ALLOWED_ATTR = addToSet({}, [...html, ...svg, ...mathMl, ...xml]);\n\n  /*\n   * Configure how DOMPUrify should handle custom elements and their attributes as well as customized built-in elements.\n   * @property {RegExp|Function|null} tagNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any custom elements)\n   * @property {RegExp|Function|null} attributeNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any attributes not on the allow list)\n   * @property {boolean} allowCustomizedBuiltInElements allow custom elements derived from built-ins if they pass CUSTOM_ELEMENT_HANDLING.tagNameCheck. Default: `false`.\n   */\n  let CUSTOM_ELEMENT_HANDLING = Object.seal(create(null, {\n    tagNameCheck: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: null\n    },\n    attributeNameCheck: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: null\n    },\n    allowCustomizedBuiltInElements: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: false\n    }\n  }));\n\n  /* Explicitly forbidden tags (overrides ALLOWED_TAGS/ADD_TAGS) */\n  let FORBID_TAGS = null;\n\n  /* Explicitly forbidden attributes (overrides ALLOWED_ATTR/ADD_ATTR) */\n  let FORBID_ATTR = null;\n\n  /* Decide if ARIA attributes are okay */\n  let ALLOW_ARIA_ATTR = true;\n\n  /* Decide if custom data attributes are okay */\n  let ALLOW_DATA_ATTR = true;\n\n  /* Decide if unknown protocols are okay */\n  let ALLOW_UNKNOWN_PROTOCOLS = false;\n\n  /* Decide if self-closing tags in attributes are allowed.\n   * Usually removed due to a mXSS issue in jQuery 3.0 */\n  let ALLOW_SELF_CLOSE_IN_ATTR = true;\n\n  /* Output should be safe for common template engines.\n   * This means, DOMPurify removes data attributes, mustaches and ERB\n   */\n  let SAFE_FOR_TEMPLATES = false;\n\n  /* Output should be safe even for XML used within HTML and alike.\n   * This means, DOMPurify removes comments when containing risky content.\n   */\n  let SAFE_FOR_XML = true;\n\n  /* Decide if document with <html>... should be returned */\n  let WHOLE_DOCUMENT = false;\n\n  /* Track whether config is already set on this instance of DOMPurify. */\n  let SET_CONFIG = false;\n\n  /* Decide if all elements (e.g. style, script) must be children of\n   * document.body. By default, browsers might move them to document.head */\n  let FORCE_BODY = false;\n\n  /* Decide if a DOM `HTMLBodyElement` should be returned, instead of a html\n   * string (or a TrustedHTML object if Trusted Types are supported).\n   * If `WHOLE_DOCUMENT` is enabled a `HTMLHtmlElement` will be returned instead\n   */\n  let RETURN_DOM = false;\n\n  /* Decide if a DOM `DocumentFragment` should be returned, instead of a html\n   * string  (or a TrustedHTML object if Trusted Types are supported) */\n  let RETURN_DOM_FRAGMENT = false;\n\n  /* Try to return a Trusted Type object instead of a string, return a string in\n   * case Trusted Types are not supported  */\n  let RETURN_TRUSTED_TYPE = false;\n\n  /* Output should be free from DOM clobbering attacks?\n   * This sanitizes markups named with colliding, clobberable built-in DOM APIs.\n   */\n  let SANITIZE_DOM = true;\n\n  /* Achieve full DOM Clobbering protection by isolating the namespace of named\n   * properties and JS variables, mitigating attacks that abuse the HTML/DOM spec rules.\n   *\n   * HTML/DOM spec rules that enable DOM Clobbering:\n   *   - Named Access on Window (§7.3.3)\n   *   - DOM Tree Accessors (§3.1.5)\n   *   - Form Element Parent-Child Relations (§4.10.3)\n   *   - Iframe srcdoc / Nested WindowProxies (§4.8.5)\n   *   - HTMLCollection (§4.2.10.2)\n   *\n   * Namespace isolation is implemented by prefixing `id` and `name` attributes\n   * with a constant string, i.e., `user-content-`\n   */\n  let SANITIZE_NAMED_PROPS = false;\n  const SANITIZE_NAMED_PROPS_PREFIX = 'user-content-';\n\n  /* Keep element content when removing element? */\n  let KEEP_CONTENT = true;\n\n  /* If a `Node` is passed to sanitize(), then performs sanitization in-place instead\n   * of importing it into a new Document and returning a sanitized copy */\n  let IN_PLACE = false;\n\n  /* Allow usage of profiles like html, svg and mathMl */\n  let USE_PROFILES = {};\n\n  /* Tags to ignore content of when KEEP_CONTENT is true */\n  let FORBID_CONTENTS = null;\n  const DEFAULT_FORBID_CONTENTS = addToSet({}, ['annotation-xml', 'audio', 'colgroup', 'desc', 'foreignobject', 'head', 'iframe', 'math', 'mi', 'mn', 'mo', 'ms', 'mtext', 'noembed', 'noframes', 'noscript', 'plaintext', 'script', 'style', 'svg', 'template', 'thead', 'title', 'video', 'xmp']);\n\n  /* Tags that are safe for data: URIs */\n  let DATA_URI_TAGS = null;\n  const DEFAULT_DATA_URI_TAGS = addToSet({}, ['audio', 'video', 'img', 'source', 'image', 'track']);\n\n  /* Attributes safe for values like \"javascript:\" */\n  let URI_SAFE_ATTRIBUTES = null;\n  const DEFAULT_URI_SAFE_ATTRIBUTES = addToSet({}, ['alt', 'class', 'for', 'id', 'label', 'name', 'pattern', 'placeholder', 'role', 'summary', 'title', 'value', 'style', 'xmlns']);\n  const MATHML_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n  const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\n  const HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\n  /* Document namespace */\n  let NAMESPACE = HTML_NAMESPACE;\n  let IS_EMPTY_INPUT = false;\n\n  /* Allowed XHTML+XML namespaces */\n  let ALLOWED_NAMESPACES = null;\n  const DEFAULT_ALLOWED_NAMESPACES = addToSet({}, [MATHML_NAMESPACE, SVG_NAMESPACE, HTML_NAMESPACE], stringToString);\n\n  /* Parsing of strict XHTML documents */\n  let PARSER_MEDIA_TYPE = null;\n  const SUPPORTED_PARSER_MEDIA_TYPES = ['application/xhtml+xml', 'text/html'];\n  const DEFAULT_PARSER_MEDIA_TYPE = 'text/html';\n  let transformCaseFunc = null;\n\n  /* Keep a reference to config to pass to hooks */\n  let CONFIG = null;\n\n  /* Ideally, do not touch anything below this line */\n  /* ______________________________________________ */\n\n  const formElement = document.createElement('form');\n  const isRegexOrFunction = function isRegexOrFunction(testValue) {\n    return testValue instanceof RegExp || testValue instanceof Function;\n  };\n\n  /**\n   * _parseConfig\n   *\n   * @param  {Object} cfg optional config literal\n   */\n  // eslint-disable-next-line complexity\n  const _parseConfig = function _parseConfig() {\n    let cfg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    if (CONFIG && CONFIG === cfg) {\n      return;\n    }\n\n    /* Shield configuration object from tampering */\n    if (!cfg || typeof cfg !== 'object') {\n      cfg = {};\n    }\n\n    /* Shield configuration object from prototype pollution */\n    cfg = clone(cfg);\n    PARSER_MEDIA_TYPE =\n      // eslint-disable-next-line unicorn/prefer-includes\n      SUPPORTED_PARSER_MEDIA_TYPES.indexOf(cfg.PARSER_MEDIA_TYPE) === -1 ? DEFAULT_PARSER_MEDIA_TYPE : cfg.PARSER_MEDIA_TYPE;\n\n    // HTML tags and attributes are not case-sensitive, converting to lowercase. Keeping XHTML as is.\n    transformCaseFunc = PARSER_MEDIA_TYPE === 'application/xhtml+xml' ? stringToString : stringToLowerCase;\n\n    /* Set configuration parameters */\n    ALLOWED_TAGS = objectHasOwnProperty(cfg, 'ALLOWED_TAGS') ? addToSet({}, cfg.ALLOWED_TAGS, transformCaseFunc) : DEFAULT_ALLOWED_TAGS;\n    ALLOWED_ATTR = objectHasOwnProperty(cfg, 'ALLOWED_ATTR') ? addToSet({}, cfg.ALLOWED_ATTR, transformCaseFunc) : DEFAULT_ALLOWED_ATTR;\n    ALLOWED_NAMESPACES = objectHasOwnProperty(cfg, 'ALLOWED_NAMESPACES') ? addToSet({}, cfg.ALLOWED_NAMESPACES, stringToString) : DEFAULT_ALLOWED_NAMESPACES;\n    URI_SAFE_ATTRIBUTES = objectHasOwnProperty(cfg, 'ADD_URI_SAFE_ATTR') ? addToSet(clone(DEFAULT_URI_SAFE_ATTRIBUTES),\n      // eslint-disable-line indent\n      cfg.ADD_URI_SAFE_ATTR,\n      // eslint-disable-line indent\n      transformCaseFunc // eslint-disable-line indent\n    ) // eslint-disable-line indent\n      : DEFAULT_URI_SAFE_ATTRIBUTES;\n    DATA_URI_TAGS = objectHasOwnProperty(cfg, 'ADD_DATA_URI_TAGS') ? addToSet(clone(DEFAULT_DATA_URI_TAGS),\n      // eslint-disable-line indent\n      cfg.ADD_DATA_URI_TAGS,\n      // eslint-disable-line indent\n      transformCaseFunc // eslint-disable-line indent\n    ) // eslint-disable-line indent\n      : DEFAULT_DATA_URI_TAGS;\n    FORBID_CONTENTS = objectHasOwnProperty(cfg, 'FORBID_CONTENTS') ? addToSet({}, cfg.FORBID_CONTENTS, transformCaseFunc) : DEFAULT_FORBID_CONTENTS;\n    FORBID_TAGS = objectHasOwnProperty(cfg, 'FORBID_TAGS') ? addToSet({}, cfg.FORBID_TAGS, transformCaseFunc) : {};\n    FORBID_ATTR = objectHasOwnProperty(cfg, 'FORBID_ATTR') ? addToSet({}, cfg.FORBID_ATTR, transformCaseFunc) : {};\n    USE_PROFILES = objectHasOwnProperty(cfg, 'USE_PROFILES') ? cfg.USE_PROFILES : false;\n    ALLOW_ARIA_ATTR = cfg.ALLOW_ARIA_ATTR !== false; // Default true\n    ALLOW_DATA_ATTR = cfg.ALLOW_DATA_ATTR !== false; // Default true\n    ALLOW_UNKNOWN_PROTOCOLS = cfg.ALLOW_UNKNOWN_PROTOCOLS || false; // Default false\n    ALLOW_SELF_CLOSE_IN_ATTR = cfg.ALLOW_SELF_CLOSE_IN_ATTR !== false; // Default true\n    SAFE_FOR_TEMPLATES = cfg.SAFE_FOR_TEMPLATES || false; // Default false\n    SAFE_FOR_XML = cfg.SAFE_FOR_XML !== false; // Default true\n    WHOLE_DOCUMENT = cfg.WHOLE_DOCUMENT || false; // Default false\n    RETURN_DOM = cfg.RETURN_DOM || false; // Default false\n    RETURN_DOM_FRAGMENT = cfg.RETURN_DOM_FRAGMENT || false; // Default false\n    RETURN_TRUSTED_TYPE = cfg.RETURN_TRUSTED_TYPE || false; // Default false\n    FORCE_BODY = cfg.FORCE_BODY || false; // Default false\n    SANITIZE_DOM = cfg.SANITIZE_DOM !== false; // Default true\n    SANITIZE_NAMED_PROPS = cfg.SANITIZE_NAMED_PROPS || false; // Default false\n    KEEP_CONTENT = cfg.KEEP_CONTENT !== false; // Default true\n    IN_PLACE = cfg.IN_PLACE || false; // Default false\n    IS_ALLOWED_URI$1 = cfg.ALLOWED_URI_REGEXP || IS_ALLOWED_URI;\n    NAMESPACE = cfg.NAMESPACE || HTML_NAMESPACE;\n    CUSTOM_ELEMENT_HANDLING = cfg.CUSTOM_ELEMENT_HANDLING || {};\n    if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck)) {\n      CUSTOM_ELEMENT_HANDLING.tagNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck;\n    }\n    if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)) {\n      CUSTOM_ELEMENT_HANDLING.attributeNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck;\n    }\n    if (cfg.CUSTOM_ELEMENT_HANDLING && typeof cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements === 'boolean') {\n      CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements = cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements;\n    }\n    if (SAFE_FOR_TEMPLATES) {\n      ALLOW_DATA_ATTR = false;\n    }\n    if (RETURN_DOM_FRAGMENT) {\n      RETURN_DOM = true;\n    }\n\n    /* Parse profile info */\n    if (USE_PROFILES) {\n      ALLOWED_TAGS = addToSet({}, text);\n      ALLOWED_ATTR = [];\n      if (USE_PROFILES.html === true) {\n        addToSet(ALLOWED_TAGS, html$1);\n        addToSet(ALLOWED_ATTR, html);\n      }\n      if (USE_PROFILES.svg === true) {\n        addToSet(ALLOWED_TAGS, svg$1);\n        addToSet(ALLOWED_ATTR, svg);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n      if (USE_PROFILES.svgFilters === true) {\n        addToSet(ALLOWED_TAGS, svgFilters);\n        addToSet(ALLOWED_ATTR, svg);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n      if (USE_PROFILES.mathMl === true) {\n        addToSet(ALLOWED_TAGS, mathMl$1);\n        addToSet(ALLOWED_ATTR, mathMl);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n    }\n\n    /* Merge configuration parameters */\n    if (cfg.ADD_TAGS) {\n      if (ALLOWED_TAGS === DEFAULT_ALLOWED_TAGS) {\n        ALLOWED_TAGS = clone(ALLOWED_TAGS);\n      }\n      addToSet(ALLOWED_TAGS, cfg.ADD_TAGS, transformCaseFunc);\n    }\n    if (cfg.ADD_ATTR) {\n      if (ALLOWED_ATTR === DEFAULT_ALLOWED_ATTR) {\n        ALLOWED_ATTR = clone(ALLOWED_ATTR);\n      }\n      addToSet(ALLOWED_ATTR, cfg.ADD_ATTR, transformCaseFunc);\n    }\n    if (cfg.ADD_URI_SAFE_ATTR) {\n      addToSet(URI_SAFE_ATTRIBUTES, cfg.ADD_URI_SAFE_ATTR, transformCaseFunc);\n    }\n    if (cfg.FORBID_CONTENTS) {\n      if (FORBID_CONTENTS === DEFAULT_FORBID_CONTENTS) {\n        FORBID_CONTENTS = clone(FORBID_CONTENTS);\n      }\n      addToSet(FORBID_CONTENTS, cfg.FORBID_CONTENTS, transformCaseFunc);\n    }\n\n    /* Add #text in case KEEP_CONTENT is set to true */\n    if (KEEP_CONTENT) {\n      ALLOWED_TAGS['#text'] = true;\n    }\n\n    /* Add html, head and body to ALLOWED_TAGS in case WHOLE_DOCUMENT is true */\n    if (WHOLE_DOCUMENT) {\n      addToSet(ALLOWED_TAGS, ['html', 'head', 'body']);\n    }\n\n    /* Add tbody to ALLOWED_TAGS in case tables are permitted, see #286, #365 */\n    if (ALLOWED_TAGS.table) {\n      addToSet(ALLOWED_TAGS, ['tbody']);\n      delete FORBID_TAGS.tbody;\n    }\n    if (cfg.TRUSTED_TYPES_POLICY) {\n      if (typeof cfg.TRUSTED_TYPES_POLICY.createHTML !== 'function') {\n        throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a \"createHTML\" hook.');\n      }\n      if (typeof cfg.TRUSTED_TYPES_POLICY.createScriptURL !== 'function') {\n        throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a \"createScriptURL\" hook.');\n      }\n\n      // Overwrite existing TrustedTypes policy.\n      trustedTypesPolicy = cfg.TRUSTED_TYPES_POLICY;\n\n      // Sign local variables required by `sanitize`.\n      emptyHTML = trustedTypesPolicy.createHTML('');\n    } else {\n      // Uninitialized policy, attempt to initialize the internal dompurify policy.\n      if (trustedTypesPolicy === undefined) {\n        trustedTypesPolicy = _createTrustedTypesPolicy(trustedTypes, currentScript);\n      }\n\n      // If creating the internal policy succeeded sign internal variables.\n      if (trustedTypesPolicy !== null && typeof emptyHTML === 'string') {\n        emptyHTML = trustedTypesPolicy.createHTML('');\n      }\n    }\n\n    // Prevent further manipulation of configuration.\n    // Not available in IE8, Safari 5, etc.\n    if (freeze) {\n      freeze(cfg);\n    }\n    CONFIG = cfg;\n  };\n  const MATHML_TEXT_INTEGRATION_POINTS = addToSet({}, ['mi', 'mo', 'mn', 'ms', 'mtext']);\n  const HTML_INTEGRATION_POINTS = addToSet({}, ['annotation-xml']);\n\n  // Certain elements are allowed in both SVG and HTML\n  // namespace. We need to specify them explicitly\n  // so that they don't get erroneously deleted from\n  // HTML namespace.\n  const COMMON_SVG_AND_HTML_ELEMENTS = addToSet({}, ['title', 'style', 'font', 'a', 'script']);\n\n  /* Keep track of all possible SVG and MathML tags\n   * so that we can perform the namespace checks\n   * correctly. */\n  const ALL_SVG_TAGS = addToSet({}, [...svg$1, ...svgFilters, ...svgDisallowed]);\n  const ALL_MATHML_TAGS = addToSet({}, [...mathMl$1, ...mathMlDisallowed]);\n\n  /**\n   * @param  {Element} element a DOM element whose namespace is being checked\n   * @returns {boolean} Return false if the element has a\n   *  namespace that a spec-compliant parser would never\n   *  return. Return true otherwise.\n   */\n  const _checkValidNamespace = function _checkValidNamespace(element) {\n    let parent = getParentNode(element);\n\n    // In JSDOM, if we're inside shadow DOM, then parentNode\n    // can be null. We just simulate parent in this case.\n    if (!parent || !parent.tagName) {\n      parent = {\n        namespaceURI: NAMESPACE,\n        tagName: 'template'\n      };\n    }\n    const tagName = stringToLowerCase(element.tagName);\n    const parentTagName = stringToLowerCase(parent.tagName);\n    if (!ALLOWED_NAMESPACES[element.namespaceURI]) {\n      return false;\n    }\n    if (element.namespaceURI === SVG_NAMESPACE) {\n      // The only way to switch from HTML namespace to SVG\n      // is via <svg>. If it happens via any other tag, then\n      // it should be killed.\n      if (parent.namespaceURI === HTML_NAMESPACE) {\n        return tagName === 'svg';\n      }\n\n      // The only way to switch from MathML to SVG is via`\n      // svg if parent is either <annotation-xml> or MathML\n      // text integration points.\n      if (parent.namespaceURI === MATHML_NAMESPACE) {\n        return tagName === 'svg' && (parentTagName === 'annotation-xml' || MATHML_TEXT_INTEGRATION_POINTS[parentTagName]);\n      }\n\n      // We only allow elements that are defined in SVG\n      // spec. All others are disallowed in SVG namespace.\n      return Boolean(ALL_SVG_TAGS[tagName]);\n    }\n    if (element.namespaceURI === MATHML_NAMESPACE) {\n      // The only way to switch from HTML namespace to MathML\n      // is via <math>. If it happens via any other tag, then\n      // it should be killed.\n      if (parent.namespaceURI === HTML_NAMESPACE) {\n        return tagName === 'math';\n      }\n\n      // The only way to switch from SVG to MathML is via\n      // <math> and HTML integration points\n      if (parent.namespaceURI === SVG_NAMESPACE) {\n        return tagName === 'math' && HTML_INTEGRATION_POINTS[parentTagName];\n      }\n\n      // We only allow elements that are defined in MathML\n      // spec. All others are disallowed in MathML namespace.\n      return Boolean(ALL_MATHML_TAGS[tagName]);\n    }\n    if (element.namespaceURI === HTML_NAMESPACE) {\n      // The only way to switch from SVG to HTML is via\n      // HTML integration points, and from MathML to HTML\n      // is via MathML text integration points\n      if (parent.namespaceURI === SVG_NAMESPACE && !HTML_INTEGRATION_POINTS[parentTagName]) {\n        return false;\n      }\n      if (parent.namespaceURI === MATHML_NAMESPACE && !MATHML_TEXT_INTEGRATION_POINTS[parentTagName]) {\n        return false;\n      }\n\n      // We disallow tags that are specific for MathML\n      // or SVG and should never appear in HTML namespace\n      return !ALL_MATHML_TAGS[tagName] && (COMMON_SVG_AND_HTML_ELEMENTS[tagName] || !ALL_SVG_TAGS[tagName]);\n    }\n\n    // For XHTML and XML documents that support custom namespaces\n    if (PARSER_MEDIA_TYPE === 'application/xhtml+xml' && ALLOWED_NAMESPACES[element.namespaceURI]) {\n      return true;\n    }\n\n    // The code should never reach this place (this means\n    // that the element somehow got namespace that is not\n    // HTML, SVG, MathML or allowed via ALLOWED_NAMESPACES).\n    // Return false just in case.\n    return false;\n  };\n\n  /**\n   * _forceRemove\n   *\n   * @param  {Node} node a DOM node\n   */\n  const _forceRemove = function _forceRemove(node) {\n    arrayPush(DOMPurify.removed, {\n      element: node\n    });\n    try {\n      // eslint-disable-next-line unicorn/prefer-dom-node-remove\n      getParentNode(node).removeChild(node);\n    } catch (_) {\n      remove(node);\n    }\n  };\n\n  /**\n   * _removeAttribute\n   *\n   * @param  {String} name an Attribute name\n   * @param  {Node} node a DOM node\n   */\n  const _removeAttribute = function _removeAttribute(name, node) {\n    try {\n      arrayPush(DOMPurify.removed, {\n        attribute: node.getAttributeNode(name),\n        from: node\n      });\n    } catch (_) {\n      arrayPush(DOMPurify.removed, {\n        attribute: null,\n        from: node\n      });\n    }\n    node.removeAttribute(name);\n\n    // We void attribute values for unremovable \"is\"\" attributes\n    if (name === 'is' && !ALLOWED_ATTR[name]) {\n      if (RETURN_DOM || RETURN_DOM_FRAGMENT) {\n        try {\n          _forceRemove(node);\n        } catch (_) { }\n      } else {\n        try {\n          node.setAttribute(name, '');\n        } catch (_) { }\n      }\n    }\n  };\n\n  /**\n   * _initDocument\n   *\n   * @param  {String} dirty a string of dirty markup\n   * @return {Document} a DOM, filled with the dirty markup\n   */\n  const _initDocument = function _initDocument(dirty) {\n    /* Create a HTML document */\n    let doc = null;\n    let leadingWhitespace = null;\n    if (FORCE_BODY) {\n      dirty = '<remove></remove>' + dirty;\n    } else {\n      /* If FORCE_BODY isn't used, leading whitespace needs to be preserved manually */\n      const matches = stringMatch(dirty, /^[\\r\\n\\t ]+/);\n      leadingWhitespace = matches && matches[0];\n    }\n    if (PARSER_MEDIA_TYPE === 'application/xhtml+xml' && NAMESPACE === HTML_NAMESPACE) {\n      // Root of XHTML doc must contain xmlns declaration (see https://www.w3.org/TR/xhtml1/normative.html#strict)\n      dirty = '<html xmlns=\"http://www.w3.org/1999/xhtml\"><head></head><body>' + dirty + '</body></html>';\n    }\n    const dirtyPayload = trustedTypesPolicy ? trustedTypesPolicy.createHTML(dirty) : dirty;\n    /*\n     * Use the DOMParser API by default, fallback later if needs be\n     * DOMParser not work for svg when has multiple root element.\n     */\n    if (NAMESPACE === HTML_NAMESPACE) {\n      try {\n        doc = new DOMParser().parseFromString(dirtyPayload, PARSER_MEDIA_TYPE);\n      } catch (_) { }\n    }\n\n    /* Use createHTMLDocument in case DOMParser is not available */\n    if (!doc || !doc.documentElement) {\n      doc = implementation.createDocument(NAMESPACE, 'template', null);\n      try {\n        doc.documentElement.innerHTML = IS_EMPTY_INPUT ? emptyHTML : dirtyPayload;\n      } catch (_) {\n        // Syntax error if dirtyPayload is invalid xml\n      }\n    }\n    const body = doc.body || doc.documentElement;\n    if (dirty && leadingWhitespace) {\n      body.insertBefore(document.createTextNode(leadingWhitespace), body.childNodes[0] || null);\n    }\n\n    /* Work on whole document or just its body */\n    if (NAMESPACE === HTML_NAMESPACE) {\n      return getElementsByTagName.call(doc, WHOLE_DOCUMENT ? 'html' : 'body')[0];\n    }\n    return WHOLE_DOCUMENT ? doc.documentElement : body;\n  };\n\n  /**\n   * Creates a NodeIterator object that you can use to traverse filtered lists of nodes or elements in a document.\n   *\n   * @param  {Node} root The root element or node to start traversing on.\n   * @return {NodeIterator} The created NodeIterator\n   */\n  const _createNodeIterator = function _createNodeIterator(root) {\n    return createNodeIterator.call(root.ownerDocument || root, root,\n      // eslint-disable-next-line no-bitwise\n      NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT | NodeFilter.SHOW_TEXT | NodeFilter.SHOW_PROCESSING_INSTRUCTION | NodeFilter.SHOW_CDATA_SECTION, null);\n  };\n\n  /**\n   * _isClobbered\n   *\n   * @param  {Node} elm element to check for clobbering attacks\n   * @return {Boolean} true if clobbered, false if safe\n   */\n  const _isClobbered = function _isClobbered(elm) {\n    return elm instanceof HTMLFormElement && (typeof elm.nodeName !== 'string' || typeof elm.textContent !== 'string' || typeof elm.removeChild !== 'function' || !(elm.attributes instanceof NamedNodeMap) || typeof elm.removeAttribute !== 'function' || typeof elm.setAttribute !== 'function' || typeof elm.namespaceURI !== 'string' || typeof elm.insertBefore !== 'function' || typeof elm.hasChildNodes !== 'function');\n  };\n\n  /**\n   * Checks whether the given object is a DOM node.\n   *\n   * @param  {Node} object object to check whether it's a DOM node\n   * @return {Boolean} true is object is a DOM node\n   */\n  const _isNode = function _isNode(object) {\n    return typeof Node === 'function' && object instanceof Node;\n  };\n\n  /**\n   * _executeHook\n   * Execute user configurable hooks\n   *\n   * @param  {String} entryPoint  Name of the hook's entry point\n   * @param  {Node} currentNode node to work on with the hook\n   * @param  {Object} data additional hook parameters\n   */\n  const _executeHook = function _executeHook(entryPoint, currentNode, data) {\n    if (!hooks[entryPoint]) {\n      return;\n    }\n    arrayForEach(hooks[entryPoint], hook => {\n      hook.call(DOMPurify, currentNode, data, CONFIG);\n    });\n  };\n\n  /**\n   * _sanitizeElements\n   *\n   * @protect nodeName\n   * @protect textContent\n   * @protect removeChild\n   *\n   * @param   {Node} currentNode to check for permission to exist\n   * @return  {Boolean} true if node was killed, false if left alive\n   */\n  const _sanitizeElements = function _sanitizeElements(currentNode) {\n    let content = null;\n\n    /* Execute a hook if present */\n    _executeHook('beforeSanitizeElements', currentNode, null);\n\n    /* Check if element is clobbered or can clobber */\n    if (_isClobbered(currentNode)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Now let's check the element's type and name */\n    const tagName = transformCaseFunc(currentNode.nodeName);\n\n    /* Execute a hook if present */\n    _executeHook('uponSanitizeElement', currentNode, {\n      tagName,\n      allowedTags: ALLOWED_TAGS\n    });\n\n    /* Detect mXSS attempts abusing namespace confusion */\n    if (currentNode.hasChildNodes() && !_isNode(currentNode.firstElementChild) && regExpTest(/<[/\\w]/g, currentNode.innerHTML) && regExpTest(/<[/\\w]/g, currentNode.textContent)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Remove any occurrence of processing instructions */\n    if (currentNode.nodeType === NODE_TYPE.progressingInstruction) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Remove any kind of possibly harmful comments */\n    if (SAFE_FOR_XML && currentNode.nodeType === NODE_TYPE.comment && regExpTest(/<[/\\w]/g, currentNode.data)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Remove element if anything forbids its presence */\n    if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n      /* Check if we have a custom element to handle */\n      if (!FORBID_TAGS[tagName] && _isBasicCustomElement(tagName)) {\n        if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, tagName)) {\n          return false;\n        }\n        if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(tagName)) {\n          return false;\n        }\n      }\n\n      /* Keep content except for bad-listed elements */\n      if (KEEP_CONTENT && !FORBID_CONTENTS[tagName]) {\n        const parentNode = getParentNode(currentNode) || currentNode.parentNode;\n        const childNodes = getChildNodes(currentNode) || currentNode.childNodes;\n        if (childNodes && parentNode) {\n          const childCount = childNodes.length;\n          for (let i = childCount - 1; i >= 0; --i) {\n            const childClone = cloneNode(childNodes[i], true);\n            childClone.__removalCount = (currentNode.__removalCount || 0) + 1;\n            parentNode.insertBefore(childClone, getNextSibling(currentNode));\n          }\n        }\n      }\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Check whether element has a valid namespace */\n    if (currentNode instanceof Element && !_checkValidNamespace(currentNode)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Make sure that older browsers don't get fallback-tag mXSS */\n    if ((tagName === 'noscript' || tagName === 'noembed' || tagName === 'noframes') && regExpTest(/<\\/no(script|embed|frames)/i, currentNode.innerHTML)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Sanitize element content to be template-safe */\n    if (SAFE_FOR_TEMPLATES && currentNode.nodeType === NODE_TYPE.text) {\n      /* Get the element's text content */\n      content = currentNode.textContent;\n      arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n        content = stringReplace(content, expr, ' ');\n      });\n      if (currentNode.textContent !== content) {\n        arrayPush(DOMPurify.removed, {\n          element: currentNode.cloneNode()\n        });\n        currentNode.textContent = content;\n      }\n    }\n\n    /* Execute a hook if present */\n    _executeHook('afterSanitizeElements', currentNode, null);\n    return false;\n  };\n\n  /**\n   * _isValidAttribute\n   *\n   * @param  {string} lcTag Lowercase tag name of containing element.\n   * @param  {string} lcName Lowercase attribute name.\n   * @param  {string} value Attribute value.\n   * @return {Boolean} Returns true if `value` is valid, otherwise false.\n   */\n  // eslint-disable-next-line complexity\n  const _isValidAttribute = function _isValidAttribute(lcTag, lcName, value) {\n    /* Make sure attribute cannot clobber */\n    if (SANITIZE_DOM && (lcName === 'id' || lcName === 'name') && (value in document || value in formElement)) {\n      return false;\n    }\n\n    /* Allow valid data-* attributes: At least one character after \"-\"\n        (https://html.spec.whatwg.org/multipage/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes)\n        XML-compatible (https://html.spec.whatwg.org/multipage/infrastructure.html#xml-compatible and http://www.w3.org/TR/xml/#d0e804)\n        We don't need to check the value; it's always URI safe. */\n    if (ALLOW_DATA_ATTR && !FORBID_ATTR[lcName] && regExpTest(DATA_ATTR, lcName)); else if (ALLOW_ARIA_ATTR && regExpTest(ARIA_ATTR, lcName)); else if (!ALLOWED_ATTR[lcName] || FORBID_ATTR[lcName]) {\n      if (\n        // First condition does a very basic check if a) it's basically a valid custom element tagname AND\n        // b) if the tagName passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n        // and c) if the attribute name passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.attributeNameCheck\n        _isBasicCustomElement(lcTag) && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, lcTag) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(lcTag)) && (CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.attributeNameCheck, lcName) || CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.attributeNameCheck(lcName)) ||\n        // Alternative, second condition checks if it's an `is`-attribute, AND\n        // the value passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n        lcName === 'is' && CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, value) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(value))); else {\n        return false;\n      }\n      /* Check value is safe. First, is attr inert? If so, is safe */\n    } else if (URI_SAFE_ATTRIBUTES[lcName]); else if (regExpTest(IS_ALLOWED_URI$1, stringReplace(value, ATTR_WHITESPACE, ''))); else if ((lcName === 'src' || lcName === 'xlink:href' || lcName === 'href') && lcTag !== 'script' && stringIndexOf(value, 'data:') === 0 && DATA_URI_TAGS[lcTag]); else if (ALLOW_UNKNOWN_PROTOCOLS && !regExpTest(IS_SCRIPT_OR_DATA, stringReplace(value, ATTR_WHITESPACE, ''))); else if (value) {\n      return false;\n    } else;\n    return true;\n  };\n\n  /**\n   * _isBasicCustomElement\n   * checks if at least one dash is included in tagName, and it's not the first char\n   * for more sophisticated checking see https://github.com/sindresorhus/validate-element-name\n   *\n   * @param {string} tagName name of the tag of the node to sanitize\n   * @returns {boolean} Returns true if the tag name meets the basic criteria for a custom element, otherwise false.\n   */\n  const _isBasicCustomElement = function _isBasicCustomElement(tagName) {\n    return tagName !== 'annotation-xml' && stringMatch(tagName, CUSTOM_ELEMENT);\n  };\n\n  /**\n   * _sanitizeAttributes\n   *\n   * @protect attributes\n   * @protect nodeName\n   * @protect removeAttribute\n   * @protect setAttribute\n   *\n   * @param  {Node} currentNode to sanitize\n   */\n  const _sanitizeAttributes = function _sanitizeAttributes(currentNode) {\n    /* Execute a hook if present */\n    _executeHook('beforeSanitizeAttributes', currentNode, null);\n    const {\n      attributes\n    } = currentNode;\n\n    /* Check if we have attributes; if not we might have a text node */\n    if (!attributes) {\n      return;\n    }\n    const hookEvent = {\n      attrName: '',\n      attrValue: '',\n      keepAttr: true,\n      allowedAttributes: ALLOWED_ATTR\n    };\n    let l = attributes.length;\n\n    /* Go backwards over all attributes; safely remove bad ones */\n    while (l--) {\n      const attr = attributes[l];\n      const {\n        name,\n        namespaceURI,\n        value: attrValue\n      } = attr;\n      const lcName = transformCaseFunc(name);\n      let value = name === 'value' ? attrValue : stringTrim(attrValue);\n\n      /* Execute a hook if present */\n      hookEvent.attrName = lcName;\n      hookEvent.attrValue = value;\n      hookEvent.keepAttr = true;\n      hookEvent.forceKeepAttr = undefined; // Allows developers to see this is a property they can set\n      _executeHook('uponSanitizeAttribute', currentNode, hookEvent);\n      value = hookEvent.attrValue;\n\n      /* Did the hooks approve of the attribute? */\n      if (hookEvent.forceKeepAttr) {\n        continue;\n      }\n\n      /* Remove attribute */\n      _removeAttribute(name, currentNode);\n\n      /* Did the hooks approve of the attribute? */\n      if (!hookEvent.keepAttr) {\n        continue;\n      }\n\n      /* Work around a security issue in jQuery 3.0 */\n      if (!ALLOW_SELF_CLOSE_IN_ATTR && regExpTest(/\\/>/i, value)) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n\n      /* Sanitize attribute content to be template-safe */\n      if (SAFE_FOR_TEMPLATES) {\n        arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n          value = stringReplace(value, expr, ' ');\n        });\n      }\n\n      /* Is `value` valid for this attribute? */\n      const lcTag = transformCaseFunc(currentNode.nodeName);\n      if (!_isValidAttribute(lcTag, lcName, value)) {\n        continue;\n      }\n\n      /* Full DOM Clobbering protection via namespace isolation,\n       * Prefix id and name attributes with `user-content-`\n       */\n      if (SANITIZE_NAMED_PROPS && (lcName === 'id' || lcName === 'name')) {\n        // Remove the attribute with this value\n        _removeAttribute(name, currentNode);\n\n        // Prefix the value and later re-create the attribute with the sanitized value\n        value = SANITIZE_NAMED_PROPS_PREFIX + value;\n      }\n\n      /* Work around a security issue with comments inside attributes */\n      if (SAFE_FOR_XML && regExpTest(/((--!?|])>)|<\\/(style|title)/i, value)) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n\n      /* Handle attributes that require Trusted Types */\n      if (trustedTypesPolicy && typeof trustedTypes === 'object' && typeof trustedTypes.getAttributeType === 'function') {\n        if (namespaceURI); else {\n          switch (trustedTypes.getAttributeType(lcTag, lcName)) {\n            case 'TrustedHTML':\n              {\n                value = trustedTypesPolicy.createHTML(value);\n                break;\n              }\n            case 'TrustedScriptURL':\n              {\n                value = trustedTypesPolicy.createScriptURL(value);\n                break;\n              }\n          }\n        }\n      }\n\n      /* Handle invalid data-* attribute set by try-catching it */\n      try {\n        if (namespaceURI) {\n          currentNode.setAttributeNS(namespaceURI, name, value);\n        } else {\n          /* Fallback to setAttribute() for browser-unrecognized namespaces e.g. \"x-schema\". */\n          currentNode.setAttribute(name, value);\n        }\n        if (_isClobbered(currentNode)) {\n          _forceRemove(currentNode);\n        } else {\n          arrayPop(DOMPurify.removed);\n        }\n      } catch (_) { }\n    }\n\n    /* Execute a hook if present */\n    _executeHook('afterSanitizeAttributes', currentNode, null);\n  };\n\n  /**\n   * _sanitizeShadowDOM\n   *\n   * @param  {DocumentFragment} fragment to iterate over recursively\n   */\n  const _sanitizeShadowDOM = function _sanitizeShadowDOM(fragment) {\n    let shadowNode = null;\n    const shadowIterator = _createNodeIterator(fragment);\n\n    /* Execute a hook if present */\n    _executeHook('beforeSanitizeShadowDOM', fragment, null);\n    while (shadowNode = shadowIterator.nextNode()) {\n      /* Execute a hook if present */\n      _executeHook('uponSanitizeShadowNode', shadowNode, null);\n\n      /* Sanitize tags and elements */\n      if (_sanitizeElements(shadowNode)) {\n        continue;\n      }\n\n      /* Deep shadow DOM detected */\n      if (shadowNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(shadowNode.content);\n      }\n\n      /* Check attributes, sanitize if necessary */\n      _sanitizeAttributes(shadowNode);\n    }\n\n    /* Execute a hook if present */\n    _executeHook('afterSanitizeShadowDOM', fragment, null);\n  };\n\n  /**\n   * Sanitize\n   * Public method providing core sanitation functionality\n   *\n   * @param {String|Node} dirty string or DOM node\n   * @param {Object} cfg object\n   */\n  // eslint-disable-next-line complexity\n  DOMPurify.sanitize = function (dirty) {\n    let cfg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let body = null;\n    let importedNode = null;\n    let currentNode = null;\n    let returnNode = null;\n    /* Make sure we have a string to sanitize.\n      DO NOT return early, as this will return the wrong type if\n      the user has requested a DOM object rather than a string */\n    IS_EMPTY_INPUT = !dirty;\n    if (IS_EMPTY_INPUT) {\n      dirty = '<!-->';\n    }\n\n    /* Stringify, in case dirty is an object */\n    if (typeof dirty !== 'string' && !_isNode(dirty)) {\n      if (typeof dirty.toString === 'function') {\n        dirty = dirty.toString();\n        if (typeof dirty !== 'string') {\n          throw typeErrorCreate('dirty is not a string, aborting');\n        }\n      } else {\n        throw typeErrorCreate('toString is not a function');\n      }\n    }\n\n    /* Return dirty HTML if DOMPurify cannot run */\n    if (!DOMPurify.isSupported) {\n      return dirty;\n    }\n\n    /* Assign config vars */\n    if (!SET_CONFIG) {\n      _parseConfig(cfg);\n    }\n\n    /* Clean up removed elements */\n    DOMPurify.removed = [];\n\n    /* Check if dirty is correctly typed for IN_PLACE */\n    if (typeof dirty === 'string') {\n      IN_PLACE = false;\n    }\n    if (IN_PLACE) {\n      /* Do some early pre-sanitization to avoid unsafe root nodes */\n      if (dirty.nodeName) {\n        const tagName = transformCaseFunc(dirty.nodeName);\n        if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n          throw typeErrorCreate('root node is forbidden and cannot be sanitized in-place');\n        }\n      }\n    } else if (dirty instanceof Node) {\n      /* If dirty is a DOM element, append to an empty document to avoid\n         elements being stripped by the parser */\n      body = _initDocument('<!---->');\n      importedNode = body.ownerDocument.importNode(dirty, true);\n      if (importedNode.nodeType === NODE_TYPE.element && importedNode.nodeName === 'BODY') {\n        /* Node is already a body, use as is */\n        body = importedNode;\n      } else if (importedNode.nodeName === 'HTML') {\n        body = importedNode;\n      } else {\n        // eslint-disable-next-line unicorn/prefer-dom-node-append\n        body.appendChild(importedNode);\n      }\n    } else {\n      /* Exit directly if we have nothing to do */\n      if (!RETURN_DOM && !SAFE_FOR_TEMPLATES && !WHOLE_DOCUMENT &&\n        // eslint-disable-next-line unicorn/prefer-includes\n        dirty.indexOf('<') === -1) {\n        return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(dirty) : dirty;\n      }\n\n      /* Initialize the document to work on */\n      body = _initDocument(dirty);\n\n      /* Check we have a DOM node from the data */\n      if (!body) {\n        return RETURN_DOM ? null : RETURN_TRUSTED_TYPE ? emptyHTML : '';\n      }\n    }\n\n    /* Remove first element node (ours) if FORCE_BODY is set */\n    if (body && FORCE_BODY) {\n      _forceRemove(body.firstChild);\n    }\n\n    /* Get node iterator */\n    const nodeIterator = _createNodeIterator(IN_PLACE ? dirty : body);\n\n    /* Now start iterating over the created document */\n    while (currentNode = nodeIterator.nextNode()) {\n      /* Sanitize tags and elements */\n      if (_sanitizeElements(currentNode)) {\n        continue;\n      }\n\n      /* Shadow DOM detected, sanitize it */\n      if (currentNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(currentNode.content);\n      }\n\n      /* Check attributes, sanitize if necessary */\n      _sanitizeAttributes(currentNode);\n    }\n\n    /* If we sanitized `dirty` in-place, return it. */\n    if (IN_PLACE) {\n      return dirty;\n    }\n\n    /* Return sanitized string or DOM */\n    if (RETURN_DOM) {\n      if (RETURN_DOM_FRAGMENT) {\n        returnNode = createDocumentFragment.call(body.ownerDocument);\n        while (body.firstChild) {\n          // eslint-disable-next-line unicorn/prefer-dom-node-append\n          returnNode.appendChild(body.firstChild);\n        }\n      } else {\n        returnNode = body;\n      }\n      if (ALLOWED_ATTR.shadowroot || ALLOWED_ATTR.shadowrootmode) {\n        /*\n          AdoptNode() is not used because internal state is not reset\n          (e.g. the past names map of a HTMLFormElement), this is safe\n          in theory but we would rather not risk another attack vector.\n          The state that is cloned by importNode() is explicitly defined\n          by the specs.\n        */\n        returnNode = importNode.call(originalDocument, returnNode, true);\n      }\n      return returnNode;\n    }\n    let serializedHTML = WHOLE_DOCUMENT ? body.outerHTML : body.innerHTML;\n\n    /* Serialize doctype if allowed */\n    if (WHOLE_DOCUMENT && ALLOWED_TAGS['!doctype'] && body.ownerDocument && body.ownerDocument.doctype && body.ownerDocument.doctype.name && regExpTest(DOCTYPE_NAME, body.ownerDocument.doctype.name)) {\n      serializedHTML = '<!DOCTYPE ' + body.ownerDocument.doctype.name + '>\\n' + serializedHTML;\n    }\n\n    /* Sanitize final string template-safe */\n    if (SAFE_FOR_TEMPLATES) {\n      arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n        serializedHTML = stringReplace(serializedHTML, expr, ' ');\n      });\n    }\n    return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(serializedHTML) : serializedHTML;\n  };\n\n  /**\n   * Public method to set the configuration once\n   * setConfig\n   *\n   * @param {Object} cfg configuration object\n   */\n  DOMPurify.setConfig = function () {\n    let cfg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _parseConfig(cfg);\n    SET_CONFIG = true;\n  };\n\n  /**\n   * Public method to remove the configuration\n   * clearConfig\n   *\n   */\n  DOMPurify.clearConfig = function () {\n    CONFIG = null;\n    SET_CONFIG = false;\n  };\n\n  /**\n   * Public method to check if an attribute value is valid.\n   * Uses last set config, if any. Otherwise, uses config defaults.\n   * isValidAttribute\n   *\n   * @param  {String} tag Tag name of containing element.\n   * @param  {String} attr Attribute name.\n   * @param  {String} value Attribute value.\n   * @return {Boolean} Returns true if `value` is valid. Otherwise, returns false.\n   */\n  DOMPurify.isValidAttribute = function (tag, attr, value) {\n    /* Initialize shared config vars if necessary. */\n    if (!CONFIG) {\n      _parseConfig({});\n    }\n    const lcTag = transformCaseFunc(tag);\n    const lcName = transformCaseFunc(attr);\n    return _isValidAttribute(lcTag, lcName, value);\n  };\n\n  /**\n   * AddHook\n   * Public method to add DOMPurify hooks\n   *\n   * @param {String} entryPoint entry point for the hook to add\n   * @param {Function} hookFunction function to execute\n   */\n  DOMPurify.addHook = function (entryPoint, hookFunction) {\n    if (typeof hookFunction !== 'function') {\n      return;\n    }\n    hooks[entryPoint] = hooks[entryPoint] || [];\n    arrayPush(hooks[entryPoint], hookFunction);\n  };\n\n  /**\n   * RemoveHook\n   * Public method to remove a DOMPurify hook at a given entryPoint\n   * (pops it from the stack of hooks if more are present)\n   *\n   * @param {String} entryPoint entry point for the hook to remove\n   * @return {Function} removed(popped) hook\n   */\n  DOMPurify.removeHook = function (entryPoint) {\n    if (hooks[entryPoint]) {\n      return arrayPop(hooks[entryPoint]);\n    }\n  };\n\n  /**\n   * RemoveHooks\n   * Public method to remove all DOMPurify hooks at a given entryPoint\n   *\n   * @param  {String} entryPoint entry point for the hooks to remove\n   */\n  DOMPurify.removeHooks = function (entryPoint) {\n    if (hooks[entryPoint]) {\n      hooks[entryPoint] = [];\n    }\n  };\n\n  /**\n   * RemoveAllHooks\n   * Public method to remove all DOMPurify hooks\n   */\n  DOMPurify.removeAllHooks = function () {\n    hooks = {};\n  };\n  return DOMPurify;\n}\nvar purify = createDOMPurify();\n\n// ESM-comment-begin\n// define(function () { return purify; });\n// ESM-comment-end\n\n// ESM-uncomment-begin\nexport default purify;\nexport const version = purify.version;\nexport const isSupported = purify.isSupported;\nexport const sanitize = purify.sanitize;\nexport const setConfig = purify.setConfig;\nexport const clearConfig = purify.clearConfig;\nexport const isValidAttribute = purify.isValidAttribute;\nexport const addHook = purify.addHook;\nexport const removeHook = purify.removeHook;\nexport const removeHooks = purify.removeHooks;\nexport const removeAllHooks = purify.removeAllHooks;\n// ESM-uncomment-end\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as browser from './browser.js';\nimport { BrowserFeatures } from './canIUse.js';\nimport { StandardKeyboardEvent } from './keyboardEvent.js';\nimport { StandardMouseEvent } from './mouseEvent.js';\nimport { AbstractIdleValue, IntervalTimer, _runWhenIdle } from '../common/async.js';\nimport { onUnexpectedError } from '../common/errors.js';\nimport * as event from '../common/event.js';\nimport * as dompurify from './dompurify/dompurify.js';\nimport { Disposable, DisposableStore, toDisposable } from '../common/lifecycle.js';\nimport { FileAccess, RemoteAuthorities } from '../common/network.js';\nimport * as platform from '../common/platform.js';\nimport { hash } from '../common/hash.js';\nimport { ensureCodeWindow, mainWindow } from './window.js';\n//# region Multi-Window Support Utilities\nexport const { registerWindow, getWindow, getDocument, getWindows, getWindowsCount, getWindowId, getWindowById, hasWindow, onDidRegisterWindow, onWillUnregisterWindow, onDidUnregisterWindow } = (function () {\n    const windows = new Map();\n    ensureCodeWindow(mainWindow, 1);\n    const mainWindowRegistration = { window: mainWindow, disposables: new DisposableStore() };\n    windows.set(mainWindow.vscodeWindowId, mainWindowRegistration);\n    const onDidRegisterWindow = new event.Emitter();\n    const onDidUnregisterWindow = new event.Emitter();\n    const onWillUnregisterWindow = new event.Emitter();\n    function getWindowById(windowId, fallbackToMain) {\n        const window = typeof windowId === 'number' ? windows.get(windowId) : undefined;\n        return window ?? (fallbackToMain ? mainWindowRegistration : undefined);\n    }\n    return {\n        onDidRegisterWindow: onDidRegisterWindow.event,\n        onWillUnregisterWindow: onWillUnregisterWindow.event,\n        onDidUnregisterWindow: onDidUnregisterWindow.event,\n        registerWindow(window) {\n            if (windows.has(window.vscodeWindowId)) {\n                return Disposable.None;\n            }\n            const disposables = new DisposableStore();\n            const registeredWindow = {\n                window,\n                disposables: disposables.add(new DisposableStore())\n            };\n            windows.set(window.vscodeWindowId, registeredWindow);\n            disposables.add(toDisposable(() => {\n                windows.delete(window.vscodeWindowId);\n                onDidUnregisterWindow.fire(window);\n            }));\n            disposables.add(addDisposableListener(window, EventType.BEFORE_UNLOAD, () => {\n                onWillUnregisterWindow.fire(window);\n            }));\n            onDidRegisterWindow.fire(registeredWindow);\n            return disposables;\n        },\n        getWindows() {\n            return windows.values();\n        },\n        getWindowsCount() {\n            return windows.size;\n        },\n        getWindowId(targetWindow) {\n            return targetWindow.vscodeWindowId;\n        },\n        hasWindow(windowId) {\n            return windows.has(windowId);\n        },\n        getWindowById,\n        getWindow(e) {\n            const candidateNode = e;\n            if (candidateNode?.ownerDocument?.defaultView) {\n                return candidateNode.ownerDocument.defaultView.window;\n            }\n            const candidateEvent = e;\n            if (candidateEvent?.view) {\n                return candidateEvent.view.window;\n            }\n            return mainWindow;\n        },\n        getDocument(e) {\n            const candidateNode = e;\n            return getWindow(candidateNode).document;\n        }\n    };\n})();\n//#endregion\nexport function clearNode(node) {\n    while (node.firstChild) {\n        node.firstChild.remove();\n    }\n}\nclass DomListener {\n    constructor(node, type, handler, options) {\n        this._node = node;\n        this._type = type;\n        this._handler = handler;\n        this._options = (options || false);\n        this._node.addEventListener(this._type, this._handler, this._options);\n    }\n    dispose() {\n        if (!this._handler) {\n            // Already disposed\n            return;\n        }\n        this._node.removeEventListener(this._type, this._handler, this._options);\n        // Prevent leakers from holding on to the dom or handler func\n        this._node = null;\n        this._handler = null;\n    }\n}\nexport function addDisposableListener(node, type, handler, useCaptureOrOptions) {\n    return new DomListener(node, type, handler, useCaptureOrOptions);\n}\nfunction _wrapAsStandardMouseEvent(targetWindow, handler) {\n    return function (e) {\n        return handler(new StandardMouseEvent(targetWindow, e));\n    };\n}\nfunction _wrapAsStandardKeyboardEvent(handler) {\n    return function (e) {\n        return handler(new StandardKeyboardEvent(e));\n    };\n}\nexport const addStandardDisposableListener = function addStandardDisposableListener(node, type, handler, useCapture) {\n    let wrapHandler = handler;\n    if (type === 'click' || type === 'mousedown' || type === 'contextmenu') {\n        wrapHandler = _wrapAsStandardMouseEvent(getWindow(node), handler);\n    }\n    else if (type === 'keydown' || type === 'keypress' || type === 'keyup') {\n        wrapHandler = _wrapAsStandardKeyboardEvent(handler);\n    }\n    return addDisposableListener(node, type, wrapHandler, useCapture);\n};\nexport const addStandardDisposableGenericMouseDownListener = function addStandardDisposableListener(node, handler, useCapture) {\n    const wrapHandler = _wrapAsStandardMouseEvent(getWindow(node), handler);\n    return addDisposableGenericMouseDownListener(node, wrapHandler, useCapture);\n};\nexport const addStandardDisposableGenericMouseUpListener = function addStandardDisposableListener(node, handler, useCapture) {\n    const wrapHandler = _wrapAsStandardMouseEvent(getWindow(node), handler);\n    return addDisposableGenericMouseUpListener(node, wrapHandler, useCapture);\n};\nexport function addDisposableGenericMouseDownListener(node, handler, useCapture) {\n    return addDisposableListener(node, platform.isIOS && BrowserFeatures.pointerEvents ? EventType.POINTER_DOWN : EventType.MOUSE_DOWN, handler, useCapture);\n}\nexport function addDisposableGenericMouseUpListener(node, handler, useCapture) {\n    return addDisposableListener(node, platform.isIOS && BrowserFeatures.pointerEvents ? EventType.POINTER_UP : EventType.MOUSE_UP, handler, useCapture);\n}\n/**\n * Execute the callback the next time the browser is idle, returning an\n * {@link IDisposable} that will cancel the callback when disposed. This wraps\n * [requestIdleCallback] so it will fallback to [setTimeout] if the environment\n * doesn't support it.\n *\n * @param targetWindow The window for which to run the idle callback\n * @param callback The callback to run when idle, this includes an\n * [IdleDeadline] that provides the time alloted for the idle callback by the\n * browser. Not respecting this deadline will result in a degraded user\n * experience.\n * @param timeout A timeout at which point to queue no longer wait for an idle\n * callback but queue it on the regular event loop (like setTimeout). Typically\n * this should not be used.\n *\n * [IdleDeadline]: https://developer.mozilla.org/en-US/docs/Web/API/IdleDeadline\n * [requestIdleCallback]: https://developer.mozilla.org/en-US/docs/Web/API/Window/requestIdleCallback\n * [setTimeout]: https://developer.mozilla.org/en-US/docs/Web/API/Window/setTimeout\n */\nexport function runWhenWindowIdle(targetWindow, callback, timeout) {\n    return _runWhenIdle(targetWindow, callback, timeout);\n}\n/**\n * An implementation of the \"idle-until-urgent\"-strategy as introduced\n * here: https://philipwalton.com/articles/idle-until-urgent/\n */\nexport class WindowIdleValue extends AbstractIdleValue {\n    constructor(targetWindow, executor) {\n        super(targetWindow, executor);\n    }\n}\n/**\n * Schedule a callback to be run at the next animation frame.\n * This allows multiple parties to register callbacks that should run at the next animation frame.\n * If currently in an animation frame, `runner` will be executed immediately.\n * @return token that can be used to cancel the scheduled runner (only if `runner` was not executed immediately).\n */\nexport let runAtThisOrScheduleAtNextAnimationFrame;\n/**\n * Schedule a callback to be run at the next animation frame.\n * This allows multiple parties to register callbacks that should run at the next animation frame.\n * If currently in an animation frame, `runner` will be executed at the next animation frame.\n * @return token that can be used to cancel the scheduled runner.\n */\nexport let scheduleAtNextAnimationFrame;\nexport class WindowIntervalTimer extends IntervalTimer {\n    /**\n     *\n     * @param node The optional node from which the target window is determined\n     */\n    constructor(node) {\n        super();\n        this.defaultTarget = node && getWindow(node);\n    }\n    cancelAndSet(runner, interval, targetWindow) {\n        return super.cancelAndSet(runner, interval, targetWindow ?? this.defaultTarget);\n    }\n}\nclass AnimationFrameQueueItem {\n    constructor(runner, priority = 0) {\n        this._runner = runner;\n        this.priority = priority;\n        this._canceled = false;\n    }\n    dispose() {\n        this._canceled = true;\n    }\n    execute() {\n        if (this._canceled) {\n            return;\n        }\n        try {\n            this._runner();\n        }\n        catch (e) {\n            onUnexpectedError(e);\n        }\n    }\n    // Sort by priority (largest to lowest)\n    static sort(a, b) {\n        return b.priority - a.priority;\n    }\n}\n(function () {\n    /**\n     * The runners scheduled at the next animation frame\n     */\n    const NEXT_QUEUE = new Map();\n    /**\n     * The runners scheduled at the current animation frame\n     */\n    const CURRENT_QUEUE = new Map();\n    /**\n     * A flag to keep track if the native requestAnimationFrame was already called\n     */\n    const animFrameRequested = new Map();\n    /**\n     * A flag to indicate if currently handling a native requestAnimationFrame callback\n     */\n    const inAnimationFrameRunner = new Map();\n    const animationFrameRunner = (targetWindowId) => {\n        animFrameRequested.set(targetWindowId, false);\n        const currentQueue = NEXT_QUEUE.get(targetWindowId) ?? [];\n        CURRENT_QUEUE.set(targetWindowId, currentQueue);\n        NEXT_QUEUE.set(targetWindowId, []);\n        inAnimationFrameRunner.set(targetWindowId, true);\n        while (currentQueue.length > 0) {\n            currentQueue.sort(AnimationFrameQueueItem.sort);\n            const top = currentQueue.shift();\n            top.execute();\n        }\n        inAnimationFrameRunner.set(targetWindowId, false);\n    };\n    scheduleAtNextAnimationFrame = (targetWindow, runner, priority = 0) => {\n        const targetWindowId = getWindowId(targetWindow);\n        const item = new AnimationFrameQueueItem(runner, priority);\n        let nextQueue = NEXT_QUEUE.get(targetWindowId);\n        if (!nextQueue) {\n            nextQueue = [];\n            NEXT_QUEUE.set(targetWindowId, nextQueue);\n        }\n        nextQueue.push(item);\n        if (!animFrameRequested.get(targetWindowId)) {\n            animFrameRequested.set(targetWindowId, true);\n            targetWindow.requestAnimationFrame(() => animationFrameRunner(targetWindowId));\n        }\n        return item;\n    };\n    runAtThisOrScheduleAtNextAnimationFrame = (targetWindow, runner, priority) => {\n        const targetWindowId = getWindowId(targetWindow);\n        if (inAnimationFrameRunner.get(targetWindowId)) {\n            const item = new AnimationFrameQueueItem(runner, priority);\n            let currentQueue = CURRENT_QUEUE.get(targetWindowId);\n            if (!currentQueue) {\n                currentQueue = [];\n                CURRENT_QUEUE.set(targetWindowId, currentQueue);\n            }\n            currentQueue.push(item);\n            return item;\n        }\n        else {\n            return scheduleAtNextAnimationFrame(targetWindow, runner, priority);\n        }\n    };\n})();\nexport function getComputedStyle(el) {\n    return getWindow(el).getComputedStyle(el, null);\n}\nexport function getClientArea(element, fallback) {\n    const elWindow = getWindow(element);\n    const elDocument = elWindow.document;\n    // Try with DOM clientWidth / clientHeight\n    if (element !== elDocument.body) {\n        return new Dimension(element.clientWidth, element.clientHeight);\n    }\n    // If visual view port exits and it's on mobile, it should be used instead of window innerWidth / innerHeight, or document.body.clientWidth / document.body.clientHeight\n    if (platform.isIOS && elWindow?.visualViewport) {\n        return new Dimension(elWindow.visualViewport.width, elWindow.visualViewport.height);\n    }\n    // Try innerWidth / innerHeight\n    if (elWindow?.innerWidth && elWindow.innerHeight) {\n        return new Dimension(elWindow.innerWidth, elWindow.innerHeight);\n    }\n    // Try with document.body.clientWidth / document.body.clientHeight\n    if (elDocument.body && elDocument.body.clientWidth && elDocument.body.clientHeight) {\n        return new Dimension(elDocument.body.clientWidth, elDocument.body.clientHeight);\n    }\n    // Try with document.documentElement.clientWidth / document.documentElement.clientHeight\n    if (elDocument.documentElement && elDocument.documentElement.clientWidth && elDocument.documentElement.clientHeight) {\n        return new Dimension(elDocument.documentElement.clientWidth, elDocument.documentElement.clientHeight);\n    }\n    if (fallback) {\n        return getClientArea(fallback);\n    }\n    throw new Error('Unable to figure out browser width and height');\n}\nclass SizeUtils {\n    // Adapted from WinJS\n    // Converts a CSS positioning string for the specified element to pixels.\n    static convertToPixels(element, value) {\n        return parseFloat(value) || 0;\n    }\n    static getDimension(element, cssPropertyName, jsPropertyName) {\n        const computedStyle = getComputedStyle(element);\n        const value = computedStyle ? computedStyle.getPropertyValue(cssPropertyName) : '0';\n        return SizeUtils.convertToPixels(element, value);\n    }\n    static getBorderLeftWidth(element) {\n        return SizeUtils.getDimension(element, 'border-left-width', 'borderLeftWidth');\n    }\n    static getBorderRightWidth(element) {\n        return SizeUtils.getDimension(element, 'border-right-width', 'borderRightWidth');\n    }\n    static getBorderTopWidth(element) {\n        return SizeUtils.getDimension(element, 'border-top-width', 'borderTopWidth');\n    }\n    static getBorderBottomWidth(element) {\n        return SizeUtils.getDimension(element, 'border-bottom-width', 'borderBottomWidth');\n    }\n    static getPaddingLeft(element) {\n        return SizeUtils.getDimension(element, 'padding-left', 'paddingLeft');\n    }\n    static getPaddingRight(element) {\n        return SizeUtils.getDimension(element, 'padding-right', 'paddingRight');\n    }\n    static getPaddingTop(element) {\n        return SizeUtils.getDimension(element, 'padding-top', 'paddingTop');\n    }\n    static getPaddingBottom(element) {\n        return SizeUtils.getDimension(element, 'padding-bottom', 'paddingBottom');\n    }\n    static getMarginLeft(element) {\n        return SizeUtils.getDimension(element, 'margin-left', 'marginLeft');\n    }\n    static getMarginTop(element) {\n        return SizeUtils.getDimension(element, 'margin-top', 'marginTop');\n    }\n    static getMarginRight(element) {\n        return SizeUtils.getDimension(element, 'margin-right', 'marginRight');\n    }\n    static getMarginBottom(element) {\n        return SizeUtils.getDimension(element, 'margin-bottom', 'marginBottom');\n    }\n}\nexport class Dimension {\n    static { this.None = new Dimension(0, 0); }\n    constructor(width, height) {\n        this.width = width;\n        this.height = height;\n    }\n    with(width = this.width, height = this.height) {\n        if (width !== this.width || height !== this.height) {\n            return new Dimension(width, height);\n        }\n        else {\n            return this;\n        }\n    }\n    static is(obj) {\n        return typeof obj === 'object' && typeof obj.height === 'number' && typeof obj.width === 'number';\n    }\n    static lift(obj) {\n        if (obj instanceof Dimension) {\n            return obj;\n        }\n        else {\n            return new Dimension(obj.width, obj.height);\n        }\n    }\n    static equals(a, b) {\n        if (a === b) {\n            return true;\n        }\n        if (!a || !b) {\n            return false;\n        }\n        return a.width === b.width && a.height === b.height;\n    }\n}\nexport function getTopLeftOffset(element) {\n    // Adapted from WinJS.Utilities.getPosition\n    // and added borders to the mix\n    let offsetParent = element.offsetParent;\n    let top = element.offsetTop;\n    let left = element.offsetLeft;\n    while ((element = element.parentNode) !== null\n        && element !== element.ownerDocument.body\n        && element !== element.ownerDocument.documentElement) {\n        top -= element.scrollTop;\n        const c = isShadowRoot(element) ? null : getComputedStyle(element);\n        if (c) {\n            left -= c.direction !== 'rtl' ? element.scrollLeft : -element.scrollLeft;\n        }\n        if (element === offsetParent) {\n            left += SizeUtils.getBorderLeftWidth(element);\n            top += SizeUtils.getBorderTopWidth(element);\n            top += element.offsetTop;\n            left += element.offsetLeft;\n            offsetParent = element.offsetParent;\n        }\n    }\n    return {\n        left: left,\n        top: top\n    };\n}\nexport function size(element, width, height) {\n    if (typeof width === 'number') {\n        element.style.width = `${width}px`;\n    }\n    if (typeof height === 'number') {\n        element.style.height = `${height}px`;\n    }\n}\n/**\n * Returns the position of a dom node relative to the entire page.\n */\nexport function getDomNodePagePosition(domNode) {\n    const bb = domNode.getBoundingClientRect();\n    const window = getWindow(domNode);\n    return {\n        left: bb.left + window.scrollX,\n        top: bb.top + window.scrollY,\n        width: bb.width,\n        height: bb.height\n    };\n}\n/**\n * Returns the effective zoom on a given element before window zoom level is applied\n */\nexport function getDomNodeZoomLevel(domNode) {\n    let testElement = domNode;\n    let zoom = 1.0;\n    do {\n        const elementZoomLevel = getComputedStyle(testElement).zoom;\n        if (elementZoomLevel !== null && elementZoomLevel !== undefined && elementZoomLevel !== '1') {\n            zoom *= elementZoomLevel;\n        }\n        testElement = testElement.parentElement;\n    } while (testElement !== null && testElement !== testElement.ownerDocument.documentElement);\n    return zoom;\n}\n// Adapted from WinJS\n// Gets the width of the element, including margins.\nexport function getTotalWidth(element) {\n    const margin = SizeUtils.getMarginLeft(element) + SizeUtils.getMarginRight(element);\n    return element.offsetWidth + margin;\n}\nexport function getContentWidth(element) {\n    const border = SizeUtils.getBorderLeftWidth(element) + SizeUtils.getBorderRightWidth(element);\n    const padding = SizeUtils.getPaddingLeft(element) + SizeUtils.getPaddingRight(element);\n    return element.offsetWidth - border - padding;\n}\n// Adapted from WinJS\n// Gets the height of the content of the specified element. The content height does not include borders or padding.\nexport function getContentHeight(element) {\n    const border = SizeUtils.getBorderTopWidth(element) + SizeUtils.getBorderBottomWidth(element);\n    const padding = SizeUtils.getPaddingTop(element) + SizeUtils.getPaddingBottom(element);\n    return element.offsetHeight - border - padding;\n}\n// Adapted from WinJS\n// Gets the height of the element, including its margins.\nexport function getTotalHeight(element) {\n    const margin = SizeUtils.getMarginTop(element) + SizeUtils.getMarginBottom(element);\n    return element.offsetHeight + margin;\n}\n// ----------------------------------------------------------------------------------------\nexport function isAncestor(testChild, testAncestor) {\n    return Boolean(testAncestor?.contains(testChild));\n}\nexport function findParentWithClass(node, clazz, stopAtClazzOrNode) {\n    while (node && node.nodeType === node.ELEMENT_NODE) {\n        if (node.classList.contains(clazz)) {\n            return node;\n        }\n        if (stopAtClazzOrNode) {\n            if (typeof stopAtClazzOrNode === 'string') {\n                if (node.classList.contains(stopAtClazzOrNode)) {\n                    return null;\n                }\n            }\n            else {\n                if (node === stopAtClazzOrNode) {\n                    return null;\n                }\n            }\n        }\n        node = node.parentNode;\n    }\n    return null;\n}\nexport function hasParentWithClass(node, clazz, stopAtClazzOrNode) {\n    return !!findParentWithClass(node, clazz, stopAtClazzOrNode);\n}\nexport function isShadowRoot(node) {\n    return (node && !!node.host && !!node.mode);\n}\nexport function isInShadowDOM(domNode) {\n    return !!getShadowRoot(domNode);\n}\nexport function getShadowRoot(domNode) {\n    while (domNode.parentNode) {\n        if (domNode === domNode.ownerDocument?.body) {\n            // reached the body\n            return null;\n        }\n        domNode = domNode.parentNode;\n    }\n    return isShadowRoot(domNode) ? domNode : null;\n}\n/**\n * Returns the active element across all child windows\n * based on document focus. Falls back to the main\n * window if no window has focus.\n */\nexport function getActiveElement() {\n    let result = getActiveDocument().activeElement;\n    while (result?.shadowRoot) {\n        result = result.shadowRoot.activeElement;\n    }\n    return result;\n}\n/**\n * Returns true if the focused window active element matches\n * the provided element. Falls back to the main window if no\n * window has focus.\n */\nexport function isActiveElement(element) {\n    return getActiveElement() === element;\n}\n/**\n * Returns true if the focused window active element is contained in\n * `ancestor`. Falls back to the main window if no window has focus.\n */\nexport function isAncestorOfActiveElement(ancestor) {\n    return isAncestor(getActiveElement(), ancestor);\n}\n/**\n * Returns the active document across main and child windows.\n * Prefers the window with focus, otherwise falls back to\n * the main windows document.\n */\nexport function getActiveDocument() {\n    if (getWindowsCount() <= 1) {\n        return mainWindow.document;\n    }\n    const documents = Array.from(getWindows()).map(({ window }) => window.document);\n    return documents.find(doc => doc.hasFocus()) ?? mainWindow.document;\n}\n/**\n * Returns the active window across main and child windows.\n * Prefers the window with focus, otherwise falls back to\n * the main window.\n */\nexport function getActiveWindow() {\n    const document = getActiveDocument();\n    return (document.defaultView?.window ?? mainWindow);\n}\nconst globalStylesheets = new Map();\n/**\n * A version of createStyleSheet which has a unified API to initialize/set the style content.\n */\nexport function createStyleSheet2() {\n    return new WrappedStyleElement();\n}\nclass WrappedStyleElement {\n    constructor() {\n        this._currentCssStyle = '';\n        this._styleSheet = undefined;\n    }\n    setStyle(cssStyle) {\n        if (cssStyle === this._currentCssStyle) {\n            return;\n        }\n        this._currentCssStyle = cssStyle;\n        if (!this._styleSheet) {\n            this._styleSheet = createStyleSheet(mainWindow.document.head, (s) => s.innerText = cssStyle);\n        }\n        else {\n            this._styleSheet.innerText = cssStyle;\n        }\n    }\n    dispose() {\n        if (this._styleSheet) {\n            this._styleSheet.remove();\n            this._styleSheet = undefined;\n        }\n    }\n}\nexport function createStyleSheet(container = mainWindow.document.head, beforeAppend, disposableStore) {\n    const style = document.createElement('style');\n    style.type = 'text/css';\n    style.media = 'screen';\n    beforeAppend?.(style);\n    container.appendChild(style);\n    if (disposableStore) {\n        disposableStore.add(toDisposable(() => style.remove()));\n    }\n    // With <head> as container, the stylesheet becomes global and is tracked\n    // to support auxiliary windows to clone the stylesheet.\n    if (container === mainWindow.document.head) {\n        const globalStylesheetClones = new Set();\n        globalStylesheets.set(style, globalStylesheetClones);\n        for (const { window: targetWindow, disposables } of getWindows()) {\n            if (targetWindow === mainWindow) {\n                continue; // main window is already tracked\n            }\n            const cloneDisposable = disposables.add(cloneGlobalStyleSheet(style, globalStylesheetClones, targetWindow));\n            disposableStore?.add(cloneDisposable);\n        }\n    }\n    return style;\n}\nfunction cloneGlobalStyleSheet(globalStylesheet, globalStylesheetClones, targetWindow) {\n    const disposables = new DisposableStore();\n    const clone = globalStylesheet.cloneNode(true);\n    targetWindow.document.head.appendChild(clone);\n    disposables.add(toDisposable(() => clone.remove()));\n    for (const rule of getDynamicStyleSheetRules(globalStylesheet)) {\n        clone.sheet?.insertRule(rule.cssText, clone.sheet?.cssRules.length);\n    }\n    disposables.add(sharedMutationObserver.observe(globalStylesheet, disposables, { childList: true })(() => {\n        clone.textContent = globalStylesheet.textContent;\n    }));\n    globalStylesheetClones.add(clone);\n    disposables.add(toDisposable(() => globalStylesheetClones.delete(clone)));\n    return disposables;\n}\nexport const sharedMutationObserver = new class {\n    constructor() {\n        this.mutationObservers = new Map();\n    }\n    observe(target, disposables, options) {\n        let mutationObserversPerTarget = this.mutationObservers.get(target);\n        if (!mutationObserversPerTarget) {\n            mutationObserversPerTarget = new Map();\n            this.mutationObservers.set(target, mutationObserversPerTarget);\n        }\n        const optionsHash = hash(options);\n        let mutationObserverPerOptions = mutationObserversPerTarget.get(optionsHash);\n        if (!mutationObserverPerOptions) {\n            const onDidMutate = new event.Emitter();\n            const observer = new MutationObserver(mutations => onDidMutate.fire(mutations));\n            observer.observe(target, options);\n            const resolvedMutationObserverPerOptions = mutationObserverPerOptions = {\n                users: 1,\n                observer,\n                onDidMutate: onDidMutate.event\n            };\n            disposables.add(toDisposable(() => {\n                resolvedMutationObserverPerOptions.users -= 1;\n                if (resolvedMutationObserverPerOptions.users === 0) {\n                    onDidMutate.dispose();\n                    observer.disconnect();\n                    mutationObserversPerTarget?.delete(optionsHash);\n                    if (mutationObserversPerTarget?.size === 0) {\n                        this.mutationObservers.delete(target);\n                    }\n                }\n            }));\n            mutationObserversPerTarget.set(optionsHash, mutationObserverPerOptions);\n        }\n        else {\n            mutationObserverPerOptions.users += 1;\n        }\n        return mutationObserverPerOptions.onDidMutate;\n    }\n};\nlet _sharedStyleSheet = null;\nfunction getSharedStyleSheet() {\n    if (!_sharedStyleSheet) {\n        _sharedStyleSheet = createStyleSheet();\n    }\n    return _sharedStyleSheet;\n}\nfunction getDynamicStyleSheetRules(style) {\n    if (style?.sheet?.rules) {\n        // Chrome, IE\n        return style.sheet.rules;\n    }\n    if (style?.sheet?.cssRules) {\n        // FF\n        return style.sheet.cssRules;\n    }\n    return [];\n}\nexport function createCSSRule(selector, cssText, style = getSharedStyleSheet()) {\n    if (!style || !cssText) {\n        return;\n    }\n    style.sheet?.insertRule(`${selector} {${cssText}}`, 0);\n    // Apply rule also to all cloned global stylesheets\n    for (const clonedGlobalStylesheet of globalStylesheets.get(style) ?? []) {\n        createCSSRule(selector, cssText, clonedGlobalStylesheet);\n    }\n}\nexport function removeCSSRulesContainingSelector(ruleName, style = getSharedStyleSheet()) {\n    if (!style) {\n        return;\n    }\n    const rules = getDynamicStyleSheetRules(style);\n    const toDelete = [];\n    for (let i = 0; i < rules.length; i++) {\n        const rule = rules[i];\n        if (isCSSStyleRule(rule) && rule.selectorText.indexOf(ruleName) !== -1) {\n            toDelete.push(i);\n        }\n    }\n    for (let i = toDelete.length - 1; i >= 0; i--) {\n        style.sheet?.deleteRule(toDelete[i]);\n    }\n    // Remove rules also from all cloned global stylesheets\n    for (const clonedGlobalStylesheet of globalStylesheets.get(style) ?? []) {\n        removeCSSRulesContainingSelector(ruleName, clonedGlobalStylesheet);\n    }\n}\nfunction isCSSStyleRule(rule) {\n    return typeof rule.selectorText === 'string';\n}\nexport function isHTMLElement(e) {\n    // eslint-disable-next-line no-restricted-syntax\n    return e instanceof HTMLElement || e instanceof getWindow(e).HTMLElement;\n}\nexport function isHTMLAnchorElement(e) {\n    // eslint-disable-next-line no-restricted-syntax\n    return e instanceof HTMLAnchorElement || e instanceof getWindow(e).HTMLAnchorElement;\n}\nexport function isSVGElement(e) {\n    // eslint-disable-next-line no-restricted-syntax\n    return e instanceof SVGElement || e instanceof getWindow(e).SVGElement;\n}\nexport function isMouseEvent(e) {\n    // eslint-disable-next-line no-restricted-syntax\n    return e instanceof MouseEvent || e instanceof getWindow(e).MouseEvent;\n}\nexport function isKeyboardEvent(e) {\n    // eslint-disable-next-line no-restricted-syntax\n    return e instanceof KeyboardEvent || e instanceof getWindow(e).KeyboardEvent;\n}\nexport const EventType = {\n    // Mouse\n    CLICK: 'click',\n    AUXCLICK: 'auxclick',\n    DBLCLICK: 'dblclick',\n    MOUSE_UP: 'mouseup',\n    MOUSE_DOWN: 'mousedown',\n    MOUSE_OVER: 'mouseover',\n    MOUSE_MOVE: 'mousemove',\n    MOUSE_OUT: 'mouseout',\n    MOUSE_ENTER: 'mouseenter',\n    MOUSE_LEAVE: 'mouseleave',\n    MOUSE_WHEEL: 'wheel',\n    POINTER_UP: 'pointerup',\n    POINTER_DOWN: 'pointerdown',\n    POINTER_MOVE: 'pointermove',\n    POINTER_LEAVE: 'pointerleave',\n    CONTEXT_MENU: 'contextmenu',\n    WHEEL: 'wheel',\n    // Keyboard\n    KEY_DOWN: 'keydown',\n    KEY_PRESS: 'keypress',\n    KEY_UP: 'keyup',\n    // HTML Document\n    LOAD: 'load',\n    BEFORE_UNLOAD: 'beforeunload',\n    UNLOAD: 'unload',\n    PAGE_SHOW: 'pageshow',\n    PAGE_HIDE: 'pagehide',\n    PASTE: 'paste',\n    ABORT: 'abort',\n    ERROR: 'error',\n    RESIZE: 'resize',\n    SCROLL: 'scroll',\n    FULLSCREEN_CHANGE: 'fullscreenchange',\n    WK_FULLSCREEN_CHANGE: 'webkitfullscreenchange',\n    // Form\n    SELECT: 'select',\n    CHANGE: 'change',\n    SUBMIT: 'submit',\n    RESET: 'reset',\n    FOCUS: 'focus',\n    FOCUS_IN: 'focusin',\n    FOCUS_OUT: 'focusout',\n    BLUR: 'blur',\n    INPUT: 'input',\n    // Local Storage\n    STORAGE: 'storage',\n    // Drag\n    DRAG_START: 'dragstart',\n    DRAG: 'drag',\n    DRAG_ENTER: 'dragenter',\n    DRAG_LEAVE: 'dragleave',\n    DRAG_OVER: 'dragover',\n    DROP: 'drop',\n    DRAG_END: 'dragend',\n    // Animation\n    ANIMATION_START: browser.isWebKit ? 'webkitAnimationStart' : 'animationstart',\n    ANIMATION_END: browser.isWebKit ? 'webkitAnimationEnd' : 'animationend',\n    ANIMATION_ITERATION: browser.isWebKit ? 'webkitAnimationIteration' : 'animationiteration'\n};\nexport function isEventLike(obj) {\n    const candidate = obj;\n    return !!(candidate && typeof candidate.preventDefault === 'function' && typeof candidate.stopPropagation === 'function');\n}\nexport const EventHelper = {\n    stop: (e, cancelBubble) => {\n        e.preventDefault();\n        if (cancelBubble) {\n            e.stopPropagation();\n        }\n        return e;\n    }\n};\nexport function saveParentsScrollTop(node) {\n    const r = [];\n    for (let i = 0; node && node.nodeType === node.ELEMENT_NODE; i++) {\n        r[i] = node.scrollTop;\n        node = node.parentNode;\n    }\n    return r;\n}\nexport function restoreParentsScrollTop(node, state) {\n    for (let i = 0; node && node.nodeType === node.ELEMENT_NODE; i++) {\n        if (node.scrollTop !== state[i]) {\n            node.scrollTop = state[i];\n        }\n        node = node.parentNode;\n    }\n}\nclass FocusTracker extends Disposable {\n    static hasFocusWithin(element) {\n        if (isHTMLElement(element)) {\n            const shadowRoot = getShadowRoot(element);\n            const activeElement = (shadowRoot ? shadowRoot.activeElement : element.ownerDocument.activeElement);\n            return isAncestor(activeElement, element);\n        }\n        else {\n            const window = element;\n            return isAncestor(window.document.activeElement, window.document);\n        }\n    }\n    constructor(element) {\n        super();\n        this._onDidFocus = this._register(new event.Emitter());\n        this.onDidFocus = this._onDidFocus.event;\n        this._onDidBlur = this._register(new event.Emitter());\n        this.onDidBlur = this._onDidBlur.event;\n        let hasFocus = FocusTracker.hasFocusWithin(element);\n        let loosingFocus = false;\n        const onFocus = () => {\n            loosingFocus = false;\n            if (!hasFocus) {\n                hasFocus = true;\n                this._onDidFocus.fire();\n            }\n        };\n        const onBlur = () => {\n            if (hasFocus) {\n                loosingFocus = true;\n                (isHTMLElement(element) ? getWindow(element) : element).setTimeout(() => {\n                    if (loosingFocus) {\n                        loosingFocus = false;\n                        hasFocus = false;\n                        this._onDidBlur.fire();\n                    }\n                }, 0);\n            }\n        };\n        this._refreshStateHandler = () => {\n            const currentNodeHasFocus = FocusTracker.hasFocusWithin(element);\n            if (currentNodeHasFocus !== hasFocus) {\n                if (hasFocus) {\n                    onBlur();\n                }\n                else {\n                    onFocus();\n                }\n            }\n        };\n        this._register(addDisposableListener(element, EventType.FOCUS, onFocus, true));\n        this._register(addDisposableListener(element, EventType.BLUR, onBlur, true));\n        if (isHTMLElement(element)) {\n            this._register(addDisposableListener(element, EventType.FOCUS_IN, () => this._refreshStateHandler()));\n            this._register(addDisposableListener(element, EventType.FOCUS_OUT, () => this._refreshStateHandler()));\n        }\n    }\n}\n/**\n * Creates a new `IFocusTracker` instance that tracks focus changes on the given `element` and its descendants.\n *\n * @param element The `HTMLElement` or `Window` to track focus changes on.\n * @returns An `IFocusTracker` instance.\n */\nexport function trackFocus(element) {\n    return new FocusTracker(element);\n}\nexport function after(sibling, child) {\n    sibling.after(child);\n    return child;\n}\nexport function append(parent, ...children) {\n    parent.append(...children);\n    if (children.length === 1 && typeof children[0] !== 'string') {\n        return children[0];\n    }\n}\nexport function prepend(parent, child) {\n    parent.insertBefore(child, parent.firstChild);\n    return child;\n}\n/**\n * Removes all children from `parent` and appends `children`\n */\nexport function reset(parent, ...children) {\n    parent.innerText = '';\n    append(parent, ...children);\n}\nconst SELECTOR_REGEX = /([\\w\\-]+)?(#([\\w\\-]+))?((\\.([\\w\\-]+))*)/;\nexport var Namespace;\n(function (Namespace) {\n    Namespace[\"HTML\"] = \"http://www.w3.org/1999/xhtml\";\n    Namespace[\"SVG\"] = \"http://www.w3.org/2000/svg\";\n})(Namespace || (Namespace = {}));\nfunction _$(namespace, description, attrs, ...children) {\n    const match = SELECTOR_REGEX.exec(description);\n    if (!match) {\n        throw new Error('Bad use of emmet');\n    }\n    const tagName = match[1] || 'div';\n    let result;\n    if (namespace !== Namespace.HTML) {\n        result = document.createElementNS(namespace, tagName);\n    }\n    else {\n        result = document.createElement(tagName);\n    }\n    if (match[3]) {\n        result.id = match[3];\n    }\n    if (match[4]) {\n        result.className = match[4].replace(/\\./g, ' ').trim();\n    }\n    if (attrs) {\n        Object.entries(attrs).forEach(([name, value]) => {\n            if (typeof value === 'undefined') {\n                return;\n            }\n            if (/^on\\w+$/.test(name)) {\n                result[name] = value;\n            }\n            else if (name === 'selected') {\n                if (value) {\n                    result.setAttribute(name, 'true');\n                }\n            }\n            else {\n                result.setAttribute(name, value);\n            }\n        });\n    }\n    result.append(...children);\n    return result;\n}\nexport function $(description, attrs, ...children) {\n    return _$(Namespace.HTML, description, attrs, ...children);\n}\n$.SVG = function (description, attrs, ...children) {\n    return _$(Namespace.SVG, description, attrs, ...children);\n};\nexport function setVisibility(visible, ...elements) {\n    if (visible) {\n        show(...elements);\n    }\n    else {\n        hide(...elements);\n    }\n}\nexport function show(...elements) {\n    for (const element of elements) {\n        element.style.display = '';\n        element.removeAttribute('aria-hidden');\n    }\n}\nexport function hide(...elements) {\n    for (const element of elements) {\n        element.style.display = 'none';\n        element.setAttribute('aria-hidden', 'true');\n    }\n}\n/**\n * Find a value usable for a dom node size such that the likelihood that it would be\n * displayed with constant screen pixels size is as high as possible.\n *\n * e.g. We would desire for the cursors to be 2px (CSS px) wide. Under a devicePixelRatio\n * of 1.25, the cursor will be 2.5 screen pixels wide. Depending on how the dom node aligns/\"snaps\"\n * with the screen pixels, it will sometimes be rendered with 2 screen pixels, and sometimes with 3 screen pixels.\n */\nexport function computeScreenAwareSize(window, cssPx) {\n    const screenPx = window.devicePixelRatio * cssPx;\n    return Math.max(1, Math.floor(screenPx)) / window.devicePixelRatio;\n}\n/**\n * Open safely a new window. This is the best way to do so, but you cannot tell\n * if the window was opened or if it was blocked by the browser's popup blocker.\n * If you want to tell if the browser blocked the new window, use {@link windowOpenWithSuccess}.\n *\n * See https://github.com/microsoft/monaco-editor/issues/601\n * To protect against malicious code in the linked site, particularly phishing attempts,\n * the window.opener should be set to null to prevent the linked site from having access\n * to change the location of the current page.\n * See https://mathiasbynens.github.io/rel-noopener/\n */\nexport function windowOpenNoOpener(url) {\n    // By using 'noopener' in the `windowFeatures` argument, the newly created window will\n    // not be able to use `window.opener` to reach back to the current page.\n    // See https://stackoverflow.com/a/46958731\n    // See https://developer.mozilla.org/en-US/docs/Web/API/Window/open#noopener\n    // However, this also doesn't allow us to realize if the browser blocked\n    // the creation of the window.\n    mainWindow.open(url, '_blank', 'noopener');\n}\nexport function animate(targetWindow, fn) {\n    const step = () => {\n        fn();\n        stepDisposable = scheduleAtNextAnimationFrame(targetWindow, step);\n    };\n    let stepDisposable = scheduleAtNextAnimationFrame(targetWindow, step);\n    return toDisposable(() => stepDisposable.dispose());\n}\nRemoteAuthorities.setPreferredWebSchema(/^https:/.test(mainWindow.location.href) ? 'https' : 'http');\n/**\n * returns url('...')\n */\nexport function asCSSUrl(uri) {\n    if (!uri) {\n        return `url('')`;\n    }\n    return `url('${FileAccess.uriToBrowserUri(uri).toString(true).replace(/'/g, '%27')}')`;\n}\nexport function asCSSPropertyValue(value) {\n    return `'${value.replace(/'/g, '%27')}'`;\n}\nexport function asCssValueWithDefault(cssPropertyValue, dflt) {\n    if (cssPropertyValue !== undefined) {\n        const variableMatch = cssPropertyValue.match(/^\\s*var\\((.+)\\)$/);\n        if (variableMatch) {\n            const varArguments = variableMatch[1].split(',', 2);\n            if (varArguments.length === 2) {\n                dflt = asCssValueWithDefault(varArguments[1].trim(), dflt);\n            }\n            return `var(${varArguments[0]}, ${dflt})`;\n        }\n        return cssPropertyValue;\n    }\n    return dflt;\n}\n// -- sanitize and trusted html\n/**\n * Hooks dompurify using `afterSanitizeAttributes` to check that all `href` and `src`\n * attributes are valid.\n */\nexport function hookDomPurifyHrefAndSrcSanitizer(allowedProtocols, allowDataImages = false) {\n    // https://github.com/cure53/DOMPurify/blob/main/demos/hooks-scheme-allowlist.html\n    // build an anchor to map URLs to\n    const anchor = document.createElement('a');\n    dompurify.addHook('afterSanitizeAttributes', (node) => {\n        // check all href/src attributes for validity\n        for (const attr of ['href', 'src']) {\n            if (node.hasAttribute(attr)) {\n                const attrValue = node.getAttribute(attr);\n                if (attr === 'href' && attrValue.startsWith('#')) {\n                    // Allow fragment links\n                    continue;\n                }\n                anchor.href = attrValue;\n                if (!allowedProtocols.includes(anchor.protocol.replace(/:$/, ''))) {\n                    if (allowDataImages && attr === 'src' && anchor.href.startsWith('data:')) {\n                        continue;\n                    }\n                    node.removeAttribute(attr);\n                }\n            }\n        }\n    });\n    return toDisposable(() => {\n        dompurify.removeHook('afterSanitizeAttributes');\n    });\n}\n/**\n * List of safe, non-input html tags.\n */\nexport const basicMarkupHtmlTags = Object.freeze([\n    'a',\n    'abbr',\n    'b',\n    'bdo',\n    'blockquote',\n    'br',\n    'caption',\n    'cite',\n    'code',\n    'col',\n    'colgroup',\n    'dd',\n    'del',\n    'details',\n    'dfn',\n    'div',\n    'dl',\n    'dt',\n    'em',\n    'figcaption',\n    'figure',\n    'h1',\n    'h2',\n    'h3',\n    'h4',\n    'h5',\n    'h6',\n    'hr',\n    'i',\n    'img',\n    'input',\n    'ins',\n    'kbd',\n    'label',\n    'li',\n    'mark',\n    'ol',\n    'p',\n    'pre',\n    'q',\n    'rp',\n    'rt',\n    'ruby',\n    'samp',\n    'small',\n    'small',\n    'source',\n    'span',\n    'strike',\n    'strong',\n    'sub',\n    'summary',\n    'sup',\n    'table',\n    'tbody',\n    'td',\n    'tfoot',\n    'th',\n    'thead',\n    'time',\n    'tr',\n    'tt',\n    'u',\n    'ul',\n    'var',\n    'video',\n    'wbr',\n]);\nconst defaultDomPurifyConfig = Object.freeze({\n    ALLOWED_TAGS: ['a', 'button', 'blockquote', 'code', 'div', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'hr', 'input', 'label', 'li', 'p', 'pre', 'select', 'small', 'span', 'strong', 'textarea', 'ul', 'ol'],\n    ALLOWED_ATTR: ['href', 'data-href', 'data-command', 'target', 'title', 'name', 'src', 'alt', 'class', 'id', 'role', 'tabindex', 'style', 'data-code', 'width', 'height', 'align', 'x-dispatch', 'required', 'checked', 'placeholder', 'type', 'start'],\n    RETURN_DOM: false,\n    RETURN_DOM_FRAGMENT: false,\n    RETURN_TRUSTED_TYPE: true\n});\nexport class ModifierKeyEmitter extends event.Emitter {\n    constructor() {\n        super();\n        this._subscriptions = new DisposableStore();\n        this._keyStatus = {\n            altKey: false,\n            shiftKey: false,\n            ctrlKey: false,\n            metaKey: false\n        };\n        this._subscriptions.add(event.Event.runAndSubscribe(onDidRegisterWindow, ({ window, disposables }) => this.registerListeners(window, disposables), { window: mainWindow, disposables: this._subscriptions }));\n    }\n    registerListeners(window, disposables) {\n        disposables.add(addDisposableListener(window, 'keydown', e => {\n            if (e.defaultPrevented) {\n                return;\n            }\n            const event = new StandardKeyboardEvent(e);\n            // If Alt-key keydown event is repeated, ignore it #112347\n            // Only known to be necessary for Alt-Key at the moment #115810\n            if (event.keyCode === 6 /* KeyCode.Alt */ && e.repeat) {\n                return;\n            }\n            if (e.altKey && !this._keyStatus.altKey) {\n                this._keyStatus.lastKeyPressed = 'alt';\n            }\n            else if (e.ctrlKey && !this._keyStatus.ctrlKey) {\n                this._keyStatus.lastKeyPressed = 'ctrl';\n            }\n            else if (e.metaKey && !this._keyStatus.metaKey) {\n                this._keyStatus.lastKeyPressed = 'meta';\n            }\n            else if (e.shiftKey && !this._keyStatus.shiftKey) {\n                this._keyStatus.lastKeyPressed = 'shift';\n            }\n            else if (event.keyCode !== 6 /* KeyCode.Alt */) {\n                this._keyStatus.lastKeyPressed = undefined;\n            }\n            else {\n                return;\n            }\n            this._keyStatus.altKey = e.altKey;\n            this._keyStatus.ctrlKey = e.ctrlKey;\n            this._keyStatus.metaKey = e.metaKey;\n            this._keyStatus.shiftKey = e.shiftKey;\n            if (this._keyStatus.lastKeyPressed) {\n                this._keyStatus.event = e;\n                this.fire(this._keyStatus);\n            }\n        }, true));\n        disposables.add(addDisposableListener(window, 'keyup', e => {\n            if (e.defaultPrevented) {\n                return;\n            }\n            if (!e.altKey && this._keyStatus.altKey) {\n                this._keyStatus.lastKeyReleased = 'alt';\n            }\n            else if (!e.ctrlKey && this._keyStatus.ctrlKey) {\n                this._keyStatus.lastKeyReleased = 'ctrl';\n            }\n            else if (!e.metaKey && this._keyStatus.metaKey) {\n                this._keyStatus.lastKeyReleased = 'meta';\n            }\n            else if (!e.shiftKey && this._keyStatus.shiftKey) {\n                this._keyStatus.lastKeyReleased = 'shift';\n            }\n            else {\n                this._keyStatus.lastKeyReleased = undefined;\n            }\n            if (this._keyStatus.lastKeyPressed !== this._keyStatus.lastKeyReleased) {\n                this._keyStatus.lastKeyPressed = undefined;\n            }\n            this._keyStatus.altKey = e.altKey;\n            this._keyStatus.ctrlKey = e.ctrlKey;\n            this._keyStatus.metaKey = e.metaKey;\n            this._keyStatus.shiftKey = e.shiftKey;\n            if (this._keyStatus.lastKeyReleased) {\n                this._keyStatus.event = e;\n                this.fire(this._keyStatus);\n            }\n        }, true));\n        disposables.add(addDisposableListener(window.document.body, 'mousedown', () => {\n            this._keyStatus.lastKeyPressed = undefined;\n        }, true));\n        disposables.add(addDisposableListener(window.document.body, 'mouseup', () => {\n            this._keyStatus.lastKeyPressed = undefined;\n        }, true));\n        disposables.add(addDisposableListener(window.document.body, 'mousemove', e => {\n            if (e.buttons) {\n                this._keyStatus.lastKeyPressed = undefined;\n            }\n        }, true));\n        disposables.add(addDisposableListener(window, 'blur', () => {\n            this.resetKeyStatus();\n        }));\n    }\n    get keyStatus() {\n        return this._keyStatus;\n    }\n    /**\n     * Allows to explicitly reset the key status based on more knowledge (#109062)\n     */\n    resetKeyStatus() {\n        this.doResetKeyStatus();\n        this.fire(this._keyStatus);\n    }\n    doResetKeyStatus() {\n        this._keyStatus = {\n            altKey: false,\n            shiftKey: false,\n            ctrlKey: false,\n            metaKey: false\n        };\n    }\n    static getInstance() {\n        if (!ModifierKeyEmitter.instance) {\n            ModifierKeyEmitter.instance = new ModifierKeyEmitter();\n        }\n        return ModifierKeyEmitter.instance;\n    }\n    dispose() {\n        super.dispose();\n        this._subscriptions.dispose();\n    }\n}\nexport class DragAndDropObserver extends Disposable {\n    constructor(element, callbacks) {\n        super();\n        this.element = element;\n        this.callbacks = callbacks;\n        // A helper to fix issues with repeated DRAG_ENTER / DRAG_LEAVE\n        // calls see https://github.com/microsoft/vscode/issues/14470\n        // when the element has child elements where the events are fired\n        // repeadedly.\n        this.counter = 0;\n        // Allows to measure the duration of the drag operation.\n        this.dragStartTime = 0;\n        this.registerListeners();\n    }\n    registerListeners() {\n        if (this.callbacks.onDragStart) {\n            this._register(addDisposableListener(this.element, EventType.DRAG_START, (e) => {\n                this.callbacks.onDragStart?.(e);\n            }));\n        }\n        if (this.callbacks.onDrag) {\n            this._register(addDisposableListener(this.element, EventType.DRAG, (e) => {\n                this.callbacks.onDrag?.(e);\n            }));\n        }\n        this._register(addDisposableListener(this.element, EventType.DRAG_ENTER, (e) => {\n            this.counter++;\n            this.dragStartTime = e.timeStamp;\n            this.callbacks.onDragEnter?.(e);\n        }));\n        this._register(addDisposableListener(this.element, EventType.DRAG_OVER, (e) => {\n            e.preventDefault(); // needed so that the drop event fires (https://stackoverflow.com/questions/21339924/drop-event-not-firing-in-chrome)\n            this.callbacks.onDragOver?.(e, e.timeStamp - this.dragStartTime);\n        }));\n        this._register(addDisposableListener(this.element, EventType.DRAG_LEAVE, (e) => {\n            this.counter--;\n            if (this.counter === 0) {\n                this.dragStartTime = 0;\n                this.callbacks.onDragLeave?.(e);\n            }\n        }));\n        this._register(addDisposableListener(this.element, EventType.DRAG_END, (e) => {\n            this.counter = 0;\n            this.dragStartTime = 0;\n            this.callbacks.onDragEnd?.(e);\n        }));\n        this._register(addDisposableListener(this.element, EventType.DROP, (e) => {\n            this.counter = 0;\n            this.dragStartTime = 0;\n            this.callbacks.onDrop?.(e);\n        }));\n    }\n}\nconst H_REGEX = /(?<tag>[\\w\\-]+)?(?:#(?<id>[\\w\\-]+))?(?<class>(?:\\.(?:[\\w\\-]+))*)(?:@(?<name>(?:[\\w\\_])+))?/;\nexport function h(tag, ...args) {\n    let attributes;\n    let children;\n    if (Array.isArray(args[0])) {\n        attributes = {};\n        children = args[0];\n    }\n    else {\n        attributes = args[0] || {};\n        children = args[1];\n    }\n    const match = H_REGEX.exec(tag);\n    if (!match || !match.groups) {\n        throw new Error('Bad use of h');\n    }\n    const tagName = match.groups['tag'] || 'div';\n    const el = document.createElement(tagName);\n    if (match.groups['id']) {\n        el.id = match.groups['id'];\n    }\n    const classNames = [];\n    if (match.groups['class']) {\n        for (const className of match.groups['class'].split('.')) {\n            if (className !== '') {\n                classNames.push(className);\n            }\n        }\n    }\n    if (attributes.className !== undefined) {\n        for (const className of attributes.className.split('.')) {\n            if (className !== '') {\n                classNames.push(className);\n            }\n        }\n    }\n    if (classNames.length > 0) {\n        el.className = classNames.join(' ');\n    }\n    const result = {};\n    if (match.groups['name']) {\n        result[match.groups['name']] = el;\n    }\n    if (children) {\n        for (const c of children) {\n            if (isHTMLElement(c)) {\n                el.appendChild(c);\n            }\n            else if (typeof c === 'string') {\n                el.append(c);\n            }\n            else if ('root' in c) {\n                Object.assign(result, c);\n                el.appendChild(c.root);\n            }\n        }\n    }\n    for (const [key, value] of Object.entries(attributes)) {\n        if (key === 'className') {\n            continue;\n        }\n        else if (key === 'style') {\n            for (const [cssKey, cssValue] of Object.entries(value)) {\n                el.style.setProperty(camelCaseToHyphenCase(cssKey), typeof cssValue === 'number' ? cssValue + 'px' : '' + cssValue);\n            }\n        }\n        else if (key === 'tabIndex') {\n            el.tabIndex = value;\n        }\n        else {\n            el.setAttribute(camelCaseToHyphenCase(key), value.toString());\n        }\n    }\n    result['root'] = el;\n    return result;\n}\nexport function svgElem(tag, ...args) {\n    let attributes;\n    let children;\n    if (Array.isArray(args[0])) {\n        attributes = {};\n        children = args[0];\n    }\n    else {\n        attributes = args[0] || {};\n        children = args[1];\n    }\n    const match = H_REGEX.exec(tag);\n    if (!match || !match.groups) {\n        throw new Error('Bad use of h');\n    }\n    const tagName = match.groups['tag'] || 'div';\n    const el = document.createElementNS('http://www.w3.org/2000/svg', tagName);\n    if (match.groups['id']) {\n        el.id = match.groups['id'];\n    }\n    const classNames = [];\n    if (match.groups['class']) {\n        for (const className of match.groups['class'].split('.')) {\n            if (className !== '') {\n                classNames.push(className);\n            }\n        }\n    }\n    if (attributes.className !== undefined) {\n        for (const className of attributes.className.split('.')) {\n            if (className !== '') {\n                classNames.push(className);\n            }\n        }\n    }\n    if (classNames.length > 0) {\n        el.className = classNames.join(' ');\n    }\n    const result = {};\n    if (match.groups['name']) {\n        result[match.groups['name']] = el;\n    }\n    if (children) {\n        for (const c of children) {\n            if (isHTMLElement(c)) {\n                el.appendChild(c);\n            }\n            else if (typeof c === 'string') {\n                el.append(c);\n            }\n            else if ('root' in c) {\n                Object.assign(result, c);\n                el.appendChild(c.root);\n            }\n        }\n    }\n    for (const [key, value] of Object.entries(attributes)) {\n        if (key === 'className') {\n            continue;\n        }\n        else if (key === 'style') {\n            for (const [cssKey, cssValue] of Object.entries(value)) {\n                el.style.setProperty(camelCaseToHyphenCase(cssKey), typeof cssValue === 'number' ? cssValue + 'px' : '' + cssValue);\n            }\n        }\n        else if (key === 'tabIndex') {\n            el.tabIndex = value;\n        }\n        else {\n            el.setAttribute(camelCaseToHyphenCase(key), value.toString());\n        }\n    }\n    result['root'] = el;\n    return result;\n}\nfunction camelCaseToHyphenCase(str) {\n    return str.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createStyleSheet2 } from './dom.js';\nimport { DisposableStore } from '../common/lifecycle.js';\nimport { autorun } from '../common/observable.js';\nexport function createStyleSheetFromObservable(css) {\n    const store = new DisposableStore();\n    const w = store.add(createStyleSheet2());\n    store.add(autorun(reader => {\n        w.setStyle(css.read(reader));\n    }));\n    return store;\n}\n"],"names":["ensureCodeWindow","mainWindow","StandardMouseEvent","BrowserFeatures","StandardKeyboardEvent","DisposableStore","Emitter","Disposable","toDisposable","RemoteAuthorities","IntervalTimer","isIOS","hash","Event","FileAccess","_runWhenIdle","AbstractIdleValue","onUnexpectedError","autorun","entries","setPrototypeOf","isFrozen","getPrototypeOf","getOwnPropertyDescriptor","freeze","seal","create","apply","construct","x","fun","thisValue","args","Func","arrayForEach","unapply","arrayPop","arrayPush","stringToLowerCase","stringToString","stringMatch","stringReplace","stringIndexOf","stringTrim","objectHasOwnProperty","regExpTest","typeErrorCreate","unconstruct","func","thisArg","_len","_key","_len2","_key2","addToSet","set","array","transformCaseFunc","l","element","lcElement","cleanArray","index","clone","object","newObject","property","value","lookupGetter","prop","desc","fallbackValue","html$1","svg$1","svgFilters","svgDisallowed","mathMl$1","mathMlDisallowed","text","html","svg","mathMl","xml","MUSTACHE_EXPR","ERB_EXPR","TMPLIT_EXPR","DATA_ATTR","ARIA_ATTR","IS_ALLOWED_URI","IS_SCRIPT_OR_DATA","ATTR_WHITESPACE","DOCTYPE_NAME","CUSTOM_ELEMENT","EXPRESSIONS","NODE_TYPE","getGlobal","_createTrustedTypesPolicy","trustedTypes","purifyHostElement","suffix","ATTR_NAME","policyName","scriptUrl","createDOMPurify","window","DOMPurify","root","document","originalDocument","currentScript","DocumentFragment","HTMLTemplateElement","Node","Element","NodeFilter","NamedNodeMap","HTMLFormElement","DOMParser","ElementPrototype","cloneNode","remove","getNextSibling","getChildNodes","getParentNode","template","trustedTypesPolicy","emptyHTML","implementation","createNodeIterator","createDocumentFragment","getElementsByTagName","importNode","hooks","IS_ALLOWED_URI$1","ALLOWED_TAGS","DEFAULT_ALLOWED_TAGS","ALLOWED_ATTR","DEFAULT_ALLOWED_ATTR","CUSTOM_ELEMENT_HANDLING","FORBID_TAGS","FORBID_ATTR","ALLOW_ARIA_ATTR","ALLOW_DATA_ATTR","ALLOW_UNKNOWN_PROTOCOLS","ALLOW_SELF_CLOSE_IN_ATTR","SAFE_FOR_TEMPLATES","SAFE_FOR_XML","WHOLE_DOCUMENT","SET_CONFIG","FORCE_BODY","RETURN_DOM","RETURN_DOM_FRAGMENT","RETURN_TRUSTED_TYPE","SANITIZE_DOM","SANITIZE_NAMED_PROPS","SANITIZE_NAMED_PROPS_PREFIX","KEEP_CONTENT","IN_PLACE","USE_PROFILES","FORBID_CONTENTS","DEFAULT_FORBID_CONTENTS","DATA_URI_TAGS","DEFAULT_DATA_URI_TAGS","URI_SAFE_ATTRIBUTES","DEFAULT_URI_SAFE_ATTRIBUTES","MATHML_NAMESPACE","SVG_NAMESPACE","HTML_NAMESPACE","NAMESPACE","IS_EMPTY_INPUT","ALLOWED_NAMESPACES","DEFAULT_ALLOWED_NAMESPACES","PARSER_MEDIA_TYPE","SUPPORTED_PARSER_MEDIA_TYPES","DEFAULT_PARSER_MEDIA_TYPE","CONFIG","formElement","isRegexOrFunction","testValue","_parseConfig","cfg","MATHML_TEXT_INTEGRATION_POINTS","HTML_INTEGRATION_POINTS","COMMON_SVG_AND_HTML_ELEMENTS","ALL_SVG_TAGS","ALL_MATHML_TAGS","_checkValidNamespace","parent","tagName","parentTagName","_forceRemove","node","_removeAttribute","name","_initDocument","dirty","doc","leadingWhitespace","matches","dirtyPayload","body","_createNodeIterator","_isClobbered","elm","_isNode","_executeHook","entryPoint","currentNode","data","hook","_sanitizeElements","content","_isBasicCustomElement","parentNode","childNodes","childCount","i","childClone","expr","_isValidAttribute","lcTag","lcName","_sanitizeAttributes","attributes","hookEvent","attr","namespaceURI","attrValue","_sanitizeShadowDOM","fragment","shadowNode","shadowIterator","importedNode","returnNode","nodeIterator","serializedHTML","tag","hookFunction","purify","sanitize","addHook","removeHook","getWindow","getWindows","getWindowsCount","getWindowId","getWindowById","onDidRegisterWindow","onWillUnregisterWindow","onDidUnregisterWindow","windows","mainWindowRegistration","event.Emitter","windowId","fallbackToMain","disposables","registeredWindow","addDisposableListener","EventType","targetWindow","e","_a","candidateNode","candidateEvent","clearNode","DomListener","type","handler","options","useCaptureOrOptions","_wrapAsStandardMouseEvent","_wrapAsStandardKeyboardEvent","addStandardDisposableListener","useCapture","wrapHandler","addStandardDisposableGenericMouseDownListener","addDisposableGenericMouseDownListener","platform.isIOS","runWhenWindowIdle","callback","timeout","WindowIdleValue","executor","runAtThisOrScheduleAtNextAnimationFrame","scheduleAtNextAnimationFrame","WindowIntervalTimer","runner","interval","AnimationFrameQueueItem","priority","a","b","NEXT_QUEUE","CURRENT_QUEUE","animFrameRequested","inAnimationFrameRunner","animationFrameRunner","targetWindowId","currentQueue","item","nextQueue","getComputedStyle","el","getClientArea","fallback","elWindow","elDocument","Dimension","SizeUtils","cssPropertyName","jsPropertyName","computedStyle","_Dimension","width","height","obj","getTopLeftOffset","offsetParent","top","left","c","isShadowRoot","size","getDomNodePagePosition","domNode","bb","getDomNodeZoomLevel","testElement","zoom","elementZoomLevel","getTotalWidth","margin","getContentWidth","border","padding","getContentHeight","getTotalHeight","isAncestor","testChild","testAncestor","findParentWithClass","clazz","stopAtClazzOrNode","hasParentWithClass","isInShadowDOM","getShadowRoot","getActiveElement","result","getActiveDocument","isActiveElement","isAncestorOfActiveElement","ancestor","getActiveWindow","globalStylesheets","createStyleSheet2","WrappedStyleElement","cssStyle","createStyleSheet","s","container","beforeAppend","disposableStore","style","globalStylesheetClones","cloneDisposable","cloneGlobalStyleSheet","globalStylesheet","_b","rule","getDynamicStyleSheetRules","sharedMutationObserver","target","mutationObserversPerTarget","optionsHash","mutationObserverPerOptions","onDidMutate","observer","mutations","resolvedMutationObserverPerOptions","_sharedStyleSheet","getSharedStyleSheet","createCSSRule","selector","cssText","clonedGlobalStylesheet","removeCSSRulesContainingSelector","ruleName","rules","toDelete","isCSSStyleRule","isHTMLElement","isHTMLAnchorElement","isSVGElement","isMouseEvent","isKeyboardEvent","isEventLike","candidate","EventHelper","cancelBubble","saveParentsScrollTop","r","restoreParentsScrollTop","state","FocusTracker","shadowRoot","activeElement","hasFocus","loosingFocus","onFocus","onBlur","trackFocus","after","sibling","child","append","children","prepend","reset","SELECTOR_REGEX","Namespace","_$","namespace","description","attrs","match","$","setVisibility","visible","elements","show","hide","computeScreenAwareSize","cssPx","screenPx","windowOpenNoOpener","url","animate","fn","step","stepDisposable","asCSSUrl","uri","asCSSPropertyValue","asCssValueWithDefault","cssPropertyValue","dflt","variableMatch","varArguments","hookDomPurifyHrefAndSrcSanitizer","allowedProtocols","allowDataImages","anchor","dompurify.addHook","dompurify.removeHook","basicMarkupHtmlTags","ModifierKeyEmitter","event.Event","event","DragAndDropObserver","callbacks","H_REGEX","h","classNames","className","key","cssKey","cssValue","camelCaseToHyphenCase","svgElem","str","createStyleSheetFromObservable","css","store","w","reader"],"mappings":"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","x_google_ignoreList":[0,1,2]}